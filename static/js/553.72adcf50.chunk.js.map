{"version":3,"file":"static/js/553.72adcf50.chunk.js","mappings":";4LAQIA,EAAO,GAsGPC,EAAgCC,EAAAA,YAAiB,SAA0BC,EAAOC,GACpF,IAAIC,EAAUF,EAAME,QAChBC,EAAYH,EAAMG,UAClBC,EAAeJ,EAAMK,MACrBA,OAAyB,IAAjBD,EAA0B,UAAYA,EAC9CE,EAAuBN,EAAMO,cAC7BA,OAAyC,IAAzBD,GAA0CA,EAC1DE,EAAcR,EAAMS,KACpBA,OAAuB,IAAhBD,EAAyB,GAAKA,EACrCE,EAAQV,EAAMU,MACdC,EAAmBX,EAAMY,UACzBA,OAAiC,IAArBD,EAA8B,IAAMA,EAChDE,EAAeb,EAAMc,MACrBA,OAAyB,IAAjBD,EAA0B,EAAIA,EACtCE,EAAiBf,EAAMgB,QACvBA,OAA6B,IAAnBD,EAA4B,gBAAkBA,EACxDE,GAAQC,EAAAA,EAAAA,GAAyBlB,EAAO,CAAC,UAAW,YAAa,QAAS,gBAAiB,OAAQ,QAAS,YAAa,QAAS,YAElImB,EAAc,CAAC,EACfC,EAAY,CAAC,EACbC,EAAY,CAAC,EAEjB,GAAgB,gBAAZL,GAAyC,WAAZA,EAAsB,CACrD,IAAIM,EAAgB,EAAIC,KAAKC,KAAO3B,EAAOe,GAAa,GACxDO,EAAYM,gBAAkBH,EAAcI,QAAQ,GACpDL,EAAU,iBAAmBE,KAAKI,MAAMb,GACxCK,EAAYS,iBAAmB,GAAGC,SAAS,IAAMf,GAAS,IAAMQ,GAAeI,QAAQ,GAAI,MAC3FN,EAAUU,UAAY,gBACxB,CAEA,OAAoB/B,EAAAA,cAAoB,OAAOgC,EAAAA,EAAAA,GAAS,CACtD5B,WAAW6B,EAAAA,EAAAA,GAAK9B,EAAQ+B,KAAM9B,EAAqB,YAAVE,GAAuBH,EAAQ,QAAQ2B,QAAOK,EAAAA,EAAAA,GAAW7B,KAAU,CAC1G,YAAeH,EAAQiC,YACvB,cAAiBjC,EAAQkC,cACzB,OAAUlC,EAAQmC,QAClBrB,IACFN,OAAOqB,EAAAA,EAAAA,GAAS,CACdO,MAAO7B,EACP8B,OAAQ9B,GACPW,EAAWV,GACdT,IAAKA,EACLuC,KAAM,eACLnB,EAAWJ,GAAqBlB,EAAAA,cAAoB,MAAO,CAC5DI,UAAWD,EAAQuC,IACnBC,QAAS,GAAGb,OAAOhC,GAAU,KAAKgC,OAAOhC,GAAU,KAAKgC,OAAOhC,EAAM,KAAKgC,OAAOhC,IACnEE,EAAAA,cAAoB,SAAU,CAC5CI,WAAW6B,EAAAA,EAAAA,GAAK9B,EAAQyC,OAAQpC,GAAiBL,EAAQ0C,oBAAqB,CAC5E,YAAe1C,EAAQ2C,kBACvB,cAAiB3C,EAAQ4C,oBACzB,OAAU5C,EAAQ6C,cAClB/B,IACFN,MAAOS,EACP6B,GAAInD,EACJoD,GAAIpD,EACJqD,GAAIrD,EAAOe,GAAa,EACxBuC,KAAM,OACNC,YAAaxC,KAEjB,IAwEA,SAAeyC,EAAAA,EAAAA,IAvOK,SAAgBC,GAClC,MAAO,CAELrB,KAAM,CACJsB,QAAS,gBAIXlB,OAAQ,CACNmB,WAAYF,EAAMG,YAAYC,OAAO,cAIvCtB,cAAe,CACbuB,UAAW,yCAIbxB,YAAa,CACXqB,WAAYF,EAAMG,YAAYC,OAAO,cAIvCE,aAAc,CACZvD,MAAOiD,EAAMO,QAAQC,QAAQC,MAI/BC,eAAgB,CACd3D,MAAOiD,EAAMO,QAAQI,UAAUF,MAIjCtB,IAAK,CACHc,QAAS,SAKXZ,OAAQ,CACNuB,OAAQ,gBAMVnB,aAAc,CACZS,WAAYF,EAAMG,YAAYC,OAAO,sBAIvCZ,oBAAqB,CACnBa,UAAW,2CAEXlC,gBAAiB,cACjBG,iBAAkB,OAKpBiB,kBAAmB,CACjBW,WAAYF,EAAMG,YAAYC,OAAO,sBAEvC,6BAA8B,CAC5B,KAAM,CAEJS,gBAAiB,WAEnB,OAAQ,CACNrC,UAAW,mBAGf,2BAA4B,CAC1B,KAAM,CACJL,gBAAiB,aACjBG,iBAAkB,OAEpB,MAAO,CACLH,gBAAiB,eACjBG,iBAAkB,SAEpB,OAAQ,CACNH,gBAAiB,eACjBG,iBAAkB,WAKtBgB,oBAAqB,CACnBe,UAAW,QAGjB,GA2IkC,CAChCS,KAAM,sBACNC,MAAM,GAFR,CAGGvE,sGC5KH,QAzCA,SAAuBE,GACrB,IAAIsE,EAAWtE,EAAMsE,SACjBC,EAAavE,EAAMsD,MACnBkB,GAAaC,EAAAA,EAAAA,KAQbnB,EAAQvD,EAAAA,SAAc,WACxB,IAAI2E,EAAwB,OAAfF,EAAsBD,EAlCvC,SAA8BC,EAAYD,GACxC,MAA0B,oBAAfA,EACSA,EAAWC,IAWxBzC,EAAAA,EAAAA,GAAS,CAAC,EAAGyC,EAAYD,EAClC,CAoBoDI,CAAqBH,EAAYD,GAMjF,OAJc,MAAVG,IACFA,EAAOE,EAAAA,GAAyB,OAAfJ,GAGZE,CACT,GAAG,CAACH,EAAYC,IAChB,OAAoBzE,EAAAA,cAAoB8E,EAAAA,EAAaC,SAAU,CAC7DhE,MAAOwC,GACNgB,EACL,+LCnDO,SAASS,EAA8BC,GAC5C,OAAOC,EAAAA,EAAAA,GAAqB,oBAAqBD,EACnD,EAC8BE,EAAAA,EAAAA,GAAuB,oBAAqB,CAAC,OAAQ,eAAgB,iBAAkB,cAAe,gBAAiB,SAAU,QAAS,SAAU,qBAAsB,uBAAwB,MAAO,kBAAmB,oBAAqB,oBAAqB,kBAAmB,aAAc,oBAAqB,mBCL7UC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,WAIb,MAAMC,EAAY,CAAC,YAAa,QAAS,QAAS,cAAe,WACjE,IACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EAaF,MACMC,GAAyBC,EAAAA,EAAAA,IAAUP,IAAOA,EAAMP,IAAAA,GAAAe,EAAAA,EAAAA,GAAA,kKAgBhDC,GAAyBF,EAAAA,EAAAA,IAAUN,IAAQA,EAAOP,IAAAA,GAAAc,EAAAA,EAAAA,GAAA,iKAgBlDE,GAAiBH,EAAAA,EAAAA,IAAUL,IAAQA,EAAOP,IAAAA,GAAAa,EAAAA,EAAAA,GAAA,0NA8B1CG,EAAgBA,CAAC/C,EAAOjD,IACd,YAAVA,EACK,eAELiD,EAAMgD,KACDhD,EAAMgD,KAAKzC,QAAQ0C,eAAe,GAAD1E,OAAIxB,EAAK,OAErB,UAAvBiD,EAAMO,QAAQ2C,MAAmBC,EAAAA,EAAAA,IAAQnD,EAAMO,QAAQxD,GAAO0D,KAAM,MAAQ2C,EAAAA,EAAAA,IAAOpD,EAAMO,QAAQxD,GAAO0D,KAAM,IAEjH4C,GAAqBC,EAAAA,EAAAA,IAAO,OAAQ,CACxCxC,KAAM,oBACNY,KAAM,OACN6B,kBAAmBA,CAAC7G,EAAO8G,KACzB,MAAM,WACJC,GACE/G,EACJ,MAAO,CAAC8G,EAAO7E,KAAM6E,EAAO,QAADjF,QAASK,EAAAA,EAAAA,GAAW6E,EAAW1G,SAAWyG,EAAOC,EAAW/F,SAAS,GAPzE4F,EASxBI,IAAA,IAAC,WACFD,EAAU,MACVzD,GACD0D,EAAA,OAAKjF,EAAAA,EAAAA,GAAS,CACbkF,SAAU,WACVC,SAAU,SACV3D,QAAS,QACThB,OAAQ,EACR4E,OAAQ,EAER,eAAgB,CACdC,YAAa,SAEfC,gBAAiBhB,EAAc/C,EAAOyD,EAAW1G,QAC3B,YAArB0G,EAAW1G,OAA8C,WAAvB0G,EAAW/F,SAAwB,CACtEqG,gBAAiB,OACjB,YAAa,CACXC,QAAS,KACTL,SAAU,WACVM,KAAM,EACNC,IAAK,EACLC,MAAO,EACPC,OAAQ,EACRL,gBAAiB,eACjBM,QAAS,KAEa,WAAvBZ,EAAW/F,SAAwB,CACpCqG,gBAAiB,eACO,UAAvBN,EAAW/F,SAAuB,CACnCc,UAAW,kBACX,IACI8F,GAAuBhB,EAAAA,EAAAA,IAAO,OAAQ,CAC1CxC,KAAM,oBACNY,KAAM,SACN6B,kBAAmBA,CAAC7G,EAAO8G,KACzB,MAAM,WACJC,GACE/G,EACJ,MAAO,CAAC8G,EAAOe,OAAQf,EAAO,cAADjF,QAAeK,EAAAA,EAAAA,GAAW6E,EAAW1G,SAAU,GAPnDuG,EAS1BkB,IAGG,IAHF,WACFf,EAAU,MACVzD,GACDwE,EACC,MAAMT,EAAkBhB,EAAc/C,EAAOyD,EAAW1G,OACxD,OAAO0B,EAAAA,EAAAA,GAAS,CACdkF,SAAU,WACVc,UAAW,EACXxF,OAAQ,OACRD,MAAO,QACe,YAArByE,EAAW1G,OAAuB,CACnCsH,QAAS,IACR,CACDK,gBAAiB,mBAAFnG,OAAqBwF,EAAe,SAAAxF,OAAQwF,EAAe,0BAC1EY,eAAgB,YAChBC,mBAAoB,WACpB,IACDC,EAAAA,EAAAA,IAAItC,IAAQA,EAAOP,IAAAA,GAAAY,EAAAA,EAAAA,GAAA,oDAEhBE,IACAgC,GAAqBxB,EAAAA,EAAAA,IAAO,OAAQ,CACxCxC,KAAM,oBACNY,KAAM,OACN6B,kBAAmBA,CAAC7G,EAAO8G,KACzB,MAAM,WACJC,GACE/G,EACJ,MAAO,CAAC8G,EAAOuB,IAAKvB,EAAO,WAADjF,QAAYK,EAAAA,EAAAA,GAAW6E,EAAW1G,UAAmC,kBAAvB0G,EAAW/F,SAAsD,UAAvB+F,EAAW/F,UAAwB8F,EAAOwB,kBAA0C,gBAAvBvB,EAAW/F,SAA6B8F,EAAOyB,gBAAwC,WAAvBxB,EAAW/F,SAAwB8F,EAAO0B,WAAW,GAP7Q5B,EASxB6B,IAAA,IAAC,WACF1B,EAAU,MACVzD,GACDmF,EAAA,OAAK1G,EAAAA,EAAAA,GAAS,CACbO,MAAO,OACP2E,SAAU,WACVM,KAAM,EACNG,OAAQ,EACRF,IAAK,EACLhE,WAAY,wBACZW,gBAAiB,OACjBkD,gBAAsC,YAArBN,EAAW1G,MAAsB,gBAAkBiD,EAAMgD,MAAQhD,GAAOO,QAAQkD,EAAW1G,OAAO0D,MAC3F,gBAAvBgD,EAAW/F,SAA6B,CACzCwC,WAAY,cAAF3B,OAnKgB,EAmKmB,aACrB,WAAvBkF,EAAW/F,SAAwB,CACpCmG,OAAQ,EACR3D,WAAY,cAAF3B,OAtKgB,EAsKmB,aAC7C,IAAE6G,IAAA,IAAC,WACH3B,GACD2B,EAAA,OAA6B,kBAAvB3B,EAAW/F,SAAsD,UAAvB+F,EAAW/F,WAAwBmH,EAAAA,EAAAA,IAAIrC,IAAQA,EAAOP,IAAAA,GAAAW,EAAAA,EAAAA,GAAA,+GAG/FF,EAAuB,IACzB2C,GAAqB/B,EAAAA,EAAAA,IAAO,OAAQ,CACxCxC,KAAM,oBACNY,KAAM,OACN6B,kBAAmBA,CAAC7G,EAAO8G,KACzB,MAAM,WACJC,GACE/G,EACJ,MAAO,CAAC8G,EAAOuB,IAAKvB,EAAO,WAADjF,QAAYK,EAAAA,EAAAA,GAAW6E,EAAW1G,UAAmC,kBAAvB0G,EAAW/F,SAAsD,UAAvB+F,EAAW/F,UAAwB8F,EAAO8B,kBAA0C,WAAvB7B,EAAW/F,SAAwB8F,EAAO+B,WAAW,GAP7MjC,EASxBkC,IAAA,IAAC,WACF/B,EAAU,MACVzD,GACDwF,EAAA,OAAK/G,EAAAA,EAAAA,GAAS,CACbO,MAAO,OACP2E,SAAU,WACVM,KAAM,EACNG,OAAQ,EACRF,IAAK,EACLhE,WAAY,wBACZW,gBAAiB,QACO,WAAvB4C,EAAW/F,SAAwB,CACpCqG,gBAAsC,YAArBN,EAAW1G,MAAsB,gBAAkBiD,EAAMgD,MAAQhD,GAAOO,QAAQkD,EAAW1G,OAAO0D,MAC7F,YAArBgD,EAAW1G,OAAuB,CACnCsH,QAAS,IACe,WAAvBZ,EAAW/F,SAAwB,CACpCqG,gBAAiBhB,EAAc/C,EAAOyD,EAAW1G,OACjDmD,WAAY,cAAF3B,OAvMgB,EAuMmB,aAC7C,IAAEkH,IAAA,IAAC,WACHhC,GACDgC,EAAA,OAA6B,kBAAvBhC,EAAW/F,SAAsD,UAAvB+F,EAAW/F,WAAwBmH,EAAAA,EAAAA,IAAIpC,IAAQA,EAAOP,IAAAA,GAAAU,EAAAA,EAAAA,GAAA,gHAG/FC,EAAuB,IAwH/B,EA/GoCpG,EAAAA,YAAiB,SAAwBiJ,EAAS/I,GACpF,MAAMD,GAAQiJ,EAAAA,EAAAA,GAAc,CAC1BjJ,MAAOgJ,EACP5E,KAAM,uBAEF,UACFjE,EAAS,MACTE,EAAQ,UAAS,MACjBS,EAAK,YACLoI,EAAW,QACXlI,EAAU,iBACRhB,EACJiB,GAAQkI,EAAAA,EAAAA,GAA8BnJ,EAAOyF,GACzCsB,GAAahF,EAAAA,EAAAA,GAAS,CAAC,EAAG/B,EAAO,CACrCK,QACAW,YAEId,EAtLkB6G,KACxB,MAAM,QACJ7G,EAAO,QACPc,EAAO,MACPX,GACE0G,EACEqC,EAAQ,CACZnH,KAAM,CAAC,OAAQ,QAAFJ,QAAUK,EAAAA,EAAAA,GAAW7B,IAAUW,GAC5C6G,OAAQ,CAAC,SAAU,cAAFhG,QAAgBK,EAAAA,EAAAA,GAAW7B,KAC5CgJ,KAAM,CAAC,MAAO,WAAFxH,QAAaK,EAAAA,EAAAA,GAAW7B,KAAuB,kBAAZW,GAA2C,UAAZA,IAAwB,oBAAiC,gBAAZA,GAA6B,kBAA+B,WAAZA,GAAwB,cACnMsI,KAAM,CAAC,MAAmB,WAAZtI,GAAwB,WAAJa,QAAeK,EAAAA,EAAAA,GAAW7B,IAAsB,WAAZW,GAAwB,QAAJa,QAAYK,EAAAA,EAAAA,GAAW7B,KAAuB,kBAAZW,GAA2C,UAAZA,IAAwB,oBAAiC,WAAZA,GAAwB,eAElO,OAAOuI,EAAAA,EAAAA,GAAeH,EAAOrE,EAA+B7E,EAAQ,EA0KpDsJ,CAAkBzC,GAC5BzD,GAAQmB,EAAAA,EAAAA,KACRpD,EAAY,CAAC,EACboI,EAAe,CACnBJ,KAAM,CAAC,EACPC,KAAM,CAAC,GAET,GAAgB,gBAAZtI,GAAyC,WAAZA,EAC/B,QAAc0I,IAAV5I,EAAqB,CACvBO,EAAU,iBAAmBE,KAAKI,MAAMb,GACxCO,EAAU,iBAAmB,EAC7BA,EAAU,iBAAmB,IAC7B,IAAIS,EAAYhB,EAAQ,IACA,QAApBwC,EAAMqG,YACR7H,GAAaA,GAEf2H,EAAaJ,KAAKvH,UAAY,cAAHD,OAAiBC,EAAS,KACvD,MAAW8H,EAIb,GAAgB,WAAZ5I,EACF,QAAoB0I,IAAhBR,EAA2B,CAC7B,IAAIpH,GAAaoH,GAAe,GAAK,IACb,QAApB5F,EAAMqG,YACR7H,GAAaA,GAEf2H,EAAaH,KAAKxH,UAAY,cAAHD,OAAiBC,EAAS,KACvD,MAAW8H,EAIb,OAAoBC,EAAAA,EAAAA,MAAMlD,GAAoB5E,EAAAA,EAAAA,GAAS,CACrD5B,WAAW6B,EAAAA,EAAAA,GAAK9B,EAAQ+B,KAAM9B,GAC9B4G,WAAYA,EACZvE,KAAM,eACLnB,EAAW,CACZpB,IAAKA,GACJgB,EAAO,CACRqD,SAAU,CAAa,WAAZtD,GAAoC8I,EAAAA,EAAAA,KAAKlC,EAAsB,CACxEzH,UAAWD,EAAQ2H,OACnBd,WAAYA,IACT,MAAmB+C,EAAAA,EAAAA,KAAK1B,EAAoB,CAC/CjI,UAAWD,EAAQmJ,KACnBtC,WAAYA,EACZrG,MAAO+I,EAAaJ,OACN,gBAAZrI,EAA4B,MAAoB8I,EAAAA,EAAAA,KAAKnB,EAAoB,CAC3ExI,UAAWD,EAAQoJ,KACnBvC,WAAYA,EACZrG,MAAO+I,EAAaH,UAG1B,+BCjTAS,EAAQC,WAuCR,SAAqBC,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,CAClD,EA3CAN,EAAQO,YAiDR,SAAsBL,GACpB,IAAIM,EAcAC,EAbAN,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBO,EAAM,IAAIC,EAVhB,SAAsBT,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,CAClD,CAQoBM,CAAYV,EAAKG,EAAUC,IAEzCO,EAAU,EAGVC,EAAMR,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKI,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EACxBD,EACGO,EAAUb,EAAIc,WAAWP,KAAO,GAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,GACpCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACrCM,EAAUb,EAAIc,WAAWP,EAAI,IAC/BC,EAAIG,KAAcL,GAAO,GAAM,IAC/BE,EAAIG,KAAcL,GAAO,EAAK,IAC9BE,EAAIG,KAAmB,IAANL,EAGK,IAApBF,IACFE,EACGO,EAAUb,EAAIc,WAAWP,KAAO,EAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACvCC,EAAIG,KAAmB,IAANL,GAGK,IAApBF,IACFE,EACGO,EAAUb,EAAIc,WAAWP,KAAO,GAChCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACpCM,EAAUb,EAAIc,WAAWP,EAAI,KAAO,EACvCC,EAAIG,KAAcL,GAAO,EAAK,IAC9BE,EAAIG,KAAmB,IAANL,GAGnB,OAAOE,CACT,EA5FAV,EAAQiB,cAkHR,SAAwBC,GAQtB,IAPA,IAAIV,EACAM,EAAMI,EAAMC,OACZC,EAAaN,EAAM,EACnBO,EAAQ,GACRC,EAAiB,MAGZb,EAAI,EAAGc,EAAOT,EAAMM,EAAYX,EAAIc,EAAMd,GAAKa,EACtDD,EAAMG,KAAKC,EAAYP,EAAOT,EAAIA,EAAIa,EAAkBC,EAAOA,EAAQd,EAAIa,IAI1D,IAAfF,GACFZ,EAAMU,EAAMJ,EAAM,GAClBO,EAAMG,KACJE,EAAOlB,GAAO,GACdkB,EAAQlB,GAAO,EAAK,IACpB,OAEsB,IAAfY,IACTZ,GAAOU,EAAMJ,EAAM,IAAM,GAAKI,EAAMJ,EAAM,GAC1CO,EAAMG,KACJE,EAAOlB,GAAO,IACdkB,EAAQlB,GAAO,EAAK,IACpBkB,EAAQlB,GAAO,EAAK,IACpB,MAIJ,OAAOa,EAAMM,KAAK,GACpB,EA1IA,IALA,IAAID,EAAS,GACTX,EAAY,GACZJ,EAA4B,qBAAfiB,WAA6BA,WAAaC,MAEvDC,EAAO,mEACFrB,EAAI,EAAsBA,EAAbqB,KAAwBrB,EAC5CiB,EAAOjB,GAAKqB,EAAKrB,GACjBM,EAAUe,EAAKd,WAAWP,IAAMA,EAQlC,SAASL,EAASF,GAChB,IAAIY,EAAMZ,EAAIiB,OAEd,GAAIL,EAAM,EAAI,EACZ,MAAM,IAAIiB,MAAM,kDAKlB,IAAI1B,EAAWH,EAAI8B,QAAQ,KAO3B,OANkB,IAAd3B,IAAiBA,EAAWS,GAMzB,CAACT,EAJcA,IAAaS,EAC/B,EACA,EAAKT,EAAW,EAGtB,CAmEA,SAASoB,EAAaP,EAAOe,EAAOC,GAGlC,IAFA,IAAI1B,EARoB2B,EASpBxH,EAAS,GACJ8F,EAAIwB,EAAOxB,EAAIyB,EAAKzB,GAAK,EAChCD,GACIU,EAAMT,IAAM,GAAM,WAClBS,EAAMT,EAAI,IAAM,EAAK,QACP,IAAfS,EAAMT,EAAI,IACb9F,EAAO6G,KAdFE,GADiBS,EAeM3B,IAdT,GAAK,IACxBkB,EAAOS,GAAO,GAAK,IACnBT,EAAOS,GAAO,EAAI,IAClBT,EAAa,GAANS,IAaT,OAAOxH,EAAOgH,KAAK,GACrB,CAlGAZ,EAAU,IAAIC,WAAW,IAAM,GAC/BD,EAAU,IAAIC,WAAW,IAAM,gCCT/B,MAAMoB,EAASC,EAAQ,MACjBC,EAAUD,EAAQ,MAClBE,EACe,oBAAXC,QAAkD,oBAAlBA,OAAY,IAChDA,OAAY,IAAE,8BACd,KAENxC,EAAQyC,OAASA,EACjBzC,EAAQ0C,WAyTR,SAAqBvB,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOsB,EAAOE,OAAOxB,EACvB,EA7TAnB,EAAQ4C,kBAAoB,GAE5B,MAAMC,EAAe,WAwDrB,SAASC,EAAc3B,GACrB,GAAIA,EAAS0B,EACX,MAAM,IAAIE,WAAW,cAAgB5B,EAAS,kCAGhD,MAAM6B,EAAM,IAAIpB,WAAWT,GAE3B,OADA8B,OAAOC,eAAeF,EAAKP,EAAOU,WAC3BH,CACT,CAYA,SAASP,EAAQW,EAAKC,EAAkBlC,GAEtC,GAAmB,kBAARiC,EAAkB,CAC3B,GAAgC,kBAArBC,EACT,MAAM,IAAIC,UACR,sEAGJ,OAAOC,EAAYH,EACrB,CACA,OAAOI,EAAKJ,EAAKC,EAAkBlC,EACrC,CAIA,SAASqC,EAAMzM,EAAOsM,EAAkBlC,GACtC,GAAqB,kBAAVpK,EACT,OAqHJ,SAAqB0M,EAAQC,GACH,kBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKjB,EAAOkB,WAAWD,GACrB,MAAM,IAAIJ,UAAU,qBAAuBI,GAG7C,MAAMvC,EAAwC,EAA/BlB,EAAWwD,EAAQC,GAClC,IAAIV,EAAMF,EAAa3B,GAEvB,MAAMyC,EAASZ,EAAIa,MAAMJ,EAAQC,GAE7BE,IAAWzC,IAIb6B,EAAMA,EAAIc,MAAM,EAAGF,IAGrB,OAAOZ,CACT,CA3IWe,CAAWhN,EAAOsM,GAG3B,GAAIW,YAAYC,OAAOlN,GACrB,OAkJJ,SAAwBmN,GACtB,GAAIC,EAAWD,EAAWtC,YAAa,CACrC,MAAMwC,EAAO,IAAIxC,WAAWsC,GAC5B,OAAOG,EAAgBD,EAAKE,OAAQF,EAAKG,WAAYH,EAAKnE,WAC5D,CACA,OAAOuE,EAAcN,EACvB,CAxJWO,CAAc1N,GAGvB,GAAa,MAATA,EACF,MAAM,IAAIuM,UACR,yHACiDvM,GAIrD,GAAIoN,EAAWpN,EAAOiN,cACjBjN,GAASoN,EAAWpN,EAAMuN,OAAQN,aACrC,OAAOK,EAAgBtN,EAAOsM,EAAkBlC,GAGlD,GAAiC,qBAAtBuD,oBACNP,EAAWpN,EAAO2N,oBAClB3N,GAASoN,EAAWpN,EAAMuN,OAAQI,oBACrC,OAAOL,EAAgBtN,EAAOsM,EAAkBlC,GAGlD,GAAqB,kBAAVpK,EACT,MAAM,IAAIuM,UACR,yEAIJ,MAAMqB,EAAU5N,EAAM4N,SAAW5N,EAAM4N,UACvC,GAAe,MAAXA,GAAmBA,IAAY5N,EACjC,OAAO0L,EAAOe,KAAKmB,EAAStB,EAAkBlC,GAGhD,MAAMyD,EAkJR,SAAqBC,GACnB,GAAIpC,EAAOqC,SAASD,GAAM,CACxB,MAAM/D,EAA4B,EAAtBiE,EAAQF,EAAI1D,QAClB6B,EAAMF,EAAahC,GAEzB,OAAmB,IAAfkC,EAAI7B,QAIR0D,EAAIT,KAAKpB,EAAK,EAAG,EAAGlC,GAHXkC,CAKX,CAEA,QAAmBrD,IAAfkF,EAAI1D,OACN,MAA0B,kBAAf0D,EAAI1D,QAAuB6D,EAAYH,EAAI1D,QAC7C2B,EAAa,GAEf0B,EAAcK,GAGvB,GAAiB,WAAbA,EAAII,MAAqBpD,MAAMqD,QAAQL,EAAIM,MAC7C,OAAOX,EAAcK,EAAIM,KAE7B,CAzKYC,CAAWrO,GACrB,GAAI6N,EAAG,OAAOA,EAEd,GAAsB,qBAAXpC,QAAgD,MAAtBA,OAAO6C,aACH,oBAA9BtO,EAAMyL,OAAO6C,aACtB,OAAO5C,EAAOe,KAAKzM,EAAMyL,OAAO6C,aAAa,UAAWhC,EAAkBlC,GAG5E,MAAM,IAAImC,UACR,yHACiDvM,EAErD,CAmBA,SAASuO,EAAY5O,GACnB,GAAoB,kBAATA,EACT,MAAM,IAAI4M,UAAU,0CACf,GAAI5M,EAAO,EAChB,MAAM,IAAIqM,WAAW,cAAgBrM,EAAO,iCAEhD,CA0BA,SAAS6M,EAAa7M,GAEpB,OADA4O,EAAW5O,GACJoM,EAAapM,EAAO,EAAI,EAAoB,EAAhBqO,EAAQrO,GAC7C,CAuCA,SAAS8N,EAAee,GACtB,MAAMpE,EAASoE,EAAMpE,OAAS,EAAI,EAA4B,EAAxB4D,EAAQQ,EAAMpE,QAC9C6B,EAAMF,EAAa3B,GACzB,IAAK,IAAIV,EAAI,EAAGA,EAAIU,EAAQV,GAAK,EAC/BuC,EAAIvC,GAAgB,IAAX8E,EAAM9E,GAEjB,OAAOuC,CACT,CAUA,SAASqB,EAAiBkB,EAAOhB,EAAYpD,GAC3C,GAAIoD,EAAa,GAAKgB,EAAMtF,WAAasE,EACvC,MAAM,IAAIxB,WAAW,wCAGvB,GAAIwC,EAAMtF,WAAasE,GAAcpD,GAAU,GAC7C,MAAM,IAAI4B,WAAW,wCAGvB,IAAIC,EAYJ,OAVEA,OADiBrD,IAAf4E,QAAuC5E,IAAXwB,EACxB,IAAIS,WAAW2D,QACD5F,IAAXwB,EACH,IAAIS,WAAW2D,EAAOhB,GAEtB,IAAI3C,WAAW2D,EAAOhB,EAAYpD,GAI1C8B,OAAOC,eAAeF,EAAKP,EAAOU,WAE3BH,CACT,CA2BA,SAAS+B,EAAS5D,GAGhB,GAAIA,GAAU0B,EACZ,MAAM,IAAIE,WAAW,0DACaF,EAAa2C,SAAS,IAAM,UAEhE,OAAgB,EAATrE,CACT,CAsGA,SAASlB,EAAYwD,EAAQC,GAC3B,GAAIjB,EAAOqC,SAASrB,GAClB,OAAOA,EAAOtC,OAEhB,GAAI6C,YAAYC,OAAOR,IAAWU,EAAWV,EAAQO,aACnD,OAAOP,EAAOxD,WAEhB,GAAsB,kBAAXwD,EACT,MAAM,IAAIH,UACR,kGAC0BG,GAI9B,MAAM3C,EAAM2C,EAAOtC,OACbsE,EAAaC,UAAUvE,OAAS,IAAsB,IAAjBuE,UAAU,GACrD,IAAKD,GAAqB,IAAR3E,EAAW,OAAO,EAGpC,IAAI6E,GAAc,EAClB,OACE,OAAQjC,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO5C,EACT,IAAK,OACL,IAAK,QACH,OAAO8E,EAAYnC,GAAQtC,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANL,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAO+E,EAAcpC,GAAQtC,OAC/B,QACE,GAAIwE,EACF,OAAOF,GAAa,EAAIG,EAAYnC,GAAQtC,OAE9CuC,GAAY,GAAKA,GAAUoC,cAC3BH,GAAc,EAGtB,CAGA,SAASI,EAAcrC,EAAUzB,EAAOC,GACtC,IAAIyD,GAAc,EAclB,SALchG,IAAVsC,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQ+D,KAAK7E,OACf,MAAO,GAOT,SAJYxB,IAARuC,GAAqBA,EAAM8D,KAAK7E,UAClCe,EAAM8D,KAAK7E,QAGTe,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTD,KAAW,GAGT,MAAO,GAKT,IAFKyB,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOuC,EAASD,KAAM/D,EAAOC,GAE/B,IAAK,OACL,IAAK,QACH,OAAOgE,EAAUF,KAAM/D,EAAOC,GAEhC,IAAK,QACH,OAAOiE,EAAWH,KAAM/D,EAAOC,GAEjC,IAAK,SACL,IAAK,SACH,OAAOkE,EAAYJ,KAAM/D,EAAOC,GAElC,IAAK,SACH,OAAOmE,EAAYL,KAAM/D,EAAOC,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOoE,EAAaN,KAAM/D,EAAOC,GAEnC,QACE,GAAIyD,EAAa,MAAM,IAAIrC,UAAU,qBAAuBI,GAC5DA,GAAYA,EAAW,IAAIoC,cAC3BH,GAAc,EAGtB,CAUA,SAASY,EAAM3B,EAAG4B,EAAGC,GACnB,MAAMhG,EAAImE,EAAE4B,GACZ5B,EAAE4B,GAAK5B,EAAE6B,GACT7B,EAAE6B,GAAKhG,CACT,CA2IA,SAASiG,EAAsBpC,EAAQqC,EAAKpC,EAAYb,EAAUkD,GAEhE,GAAsB,IAAlBtC,EAAOnD,OAAc,OAAQ,EAmBjC,GAhB0B,kBAAfoD,GACTb,EAAWa,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAGZS,EADJT,GAAcA,KAGZA,EAAaqC,EAAM,EAAKtC,EAAOnD,OAAS,GAItCoD,EAAa,IAAGA,EAAaD,EAAOnD,OAASoD,GAC7CA,GAAcD,EAAOnD,OAAQ,CAC/B,GAAIyF,EAAK,OAAQ,EACZrC,EAAaD,EAAOnD,OAAS,CACpC,MAAO,GAAIoD,EAAa,EAAG,CACzB,IAAIqC,EACC,OAAQ,EADJrC,EAAa,CAExB,CAQA,GALmB,kBAARoC,IACTA,EAAMlE,EAAOe,KAAKmD,EAAKjD,IAIrBjB,EAAOqC,SAAS6B,GAElB,OAAmB,IAAfA,EAAIxF,QACE,EAEH0F,EAAavC,EAAQqC,EAAKpC,EAAYb,EAAUkD,GAClD,GAAmB,kBAARD,EAEhB,OADAA,GAAY,IACgC,oBAAjC/E,WAAWuB,UAAUnB,QAC1B4E,EACKhF,WAAWuB,UAAUnB,QAAQ8E,KAAKxC,EAAQqC,EAAKpC,GAE/C3C,WAAWuB,UAAU4D,YAAYD,KAAKxC,EAAQqC,EAAKpC,GAGvDsC,EAAavC,EAAQ,CAACqC,GAAMpC,EAAYb,EAAUkD,GAG3D,MAAM,IAAItD,UAAU,uCACtB,CAEA,SAASuD,EAAcnG,EAAKiG,EAAKpC,EAAYb,EAAUkD,GACrD,IA0BInG,EA1BAuG,EAAY,EACZC,EAAYvG,EAAIS,OAChB+F,EAAYP,EAAIxF,OAEpB,QAAiBxB,IAAb+D,IAEe,UADjBA,EAAWyD,OAAOzD,GAAUoC,gBACY,UAAbpC,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIhD,EAAIS,OAAS,GAAKwF,EAAIxF,OAAS,EACjC,OAAQ,EAEV6F,EAAY,EACZC,GAAa,EACbC,GAAa,EACb3C,GAAc,CAChB,CAGF,SAAS6C,EAAMpE,EAAKvC,GAClB,OAAkB,IAAduG,EACKhE,EAAIvC,GAEJuC,EAAIqE,aAAa5G,EAAIuG,EAEhC,CAGA,GAAIJ,EAAK,CACP,IAAIU,GAAc,EAClB,IAAK7G,EAAI8D,EAAY9D,EAAIwG,EAAWxG,IAClC,GAAI2G,EAAK1G,EAAKD,KAAO2G,EAAKT,GAAqB,IAAhBW,EAAoB,EAAI7G,EAAI6G,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa7G,GAChCA,EAAI6G,EAAa,IAAMJ,EAAW,OAAOI,EAAaN,OAEtC,IAAhBM,IAAmB7G,GAAKA,EAAI6G,GAChCA,GAAc,CAGpB,MAEE,IADI/C,EAAa2C,EAAYD,IAAW1C,EAAa0C,EAAYC,GAC5DzG,EAAI8D,EAAY9D,GAAK,EAAGA,IAAK,CAChC,IAAI8G,GAAQ,EACZ,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAAWM,IAC7B,GAAIJ,EAAK1G,EAAKD,EAAI+G,KAAOJ,EAAKT,EAAKa,GAAI,CACrCD,GAAQ,EACR,KACF,CAEF,GAAIA,EAAO,OAAO9G,CACpB,CAGF,OAAQ,CACV,CAcA,SAASgH,EAAUzE,EAAKS,EAAQiE,EAAQvG,GACtCuG,EAASC,OAAOD,IAAW,EAC3B,MAAME,EAAY5E,EAAI7B,OAASuG,EAC1BvG,GAGHA,EAASwG,OAAOxG,IACHyG,IACXzG,EAASyG,GAJXzG,EAASyG,EAQX,MAAMC,EAASpE,EAAOtC,OAKtB,IAAIV,EACJ,IAJIU,EAAS0G,EAAS,IACpB1G,EAAS0G,EAAS,GAGfpH,EAAI,EAAGA,EAAIU,IAAUV,EAAG,CAC3B,MAAMqH,EAASC,SAAStE,EAAOuE,OAAW,EAAJvH,EAAO,GAAI,IACjD,GAAIuE,EAAY8C,GAAS,OAAOrH,EAChCuC,EAAI0E,EAASjH,GAAKqH,CACpB,CACA,OAAOrH,CACT,CAEA,SAASwH,EAAWjF,EAAKS,EAAQiE,EAAQvG,GACvC,OAAO+G,EAAWtC,EAAYnC,EAAQT,EAAI7B,OAASuG,GAAS1E,EAAK0E,EAAQvG,EAC3E,CAEA,SAASgH,EAAYnF,EAAKS,EAAQiE,EAAQvG,GACxC,OAAO+G,EAypCT,SAAuBE,GACrB,MAAMC,EAAY,GAClB,IAAK,IAAI5H,EAAI,EAAGA,EAAI2H,EAAIjH,SAAUV,EAEhC4H,EAAU7G,KAAyB,IAApB4G,EAAIpH,WAAWP,IAEhC,OAAO4H,CACT,CAhqCoBC,CAAa7E,GAAST,EAAK0E,EAAQvG,EACvD,CAEA,SAASoH,EAAavF,EAAKS,EAAQiE,EAAQvG,GACzC,OAAO+G,EAAWrC,EAAcpC,GAAST,EAAK0E,EAAQvG,EACxD,CAEA,SAASqH,EAAWxF,EAAKS,EAAQiE,EAAQvG,GACvC,OAAO+G,EA0pCT,SAAyBE,EAAKK,GAC5B,IAAIC,EAAGC,EAAIC,EACX,MAAMP,EAAY,GAClB,IAAK,IAAI5H,EAAI,EAAGA,EAAI2H,EAAIjH,WACjBsH,GAAS,GAAK,KADahI,EAGhCiI,EAAIN,EAAIpH,WAAWP,GACnBkI,EAAKD,GAAK,EACVE,EAAKF,EAAI,IACTL,EAAU7G,KAAKoH,GACfP,EAAU7G,KAAKmH,GAGjB,OAAON,CACT,CAxqCoBQ,CAAepF,EAAQT,EAAI7B,OAASuG,GAAS1E,EAAK0E,EAAQvG,EAC9E,CA8EA,SAASkF,EAAarD,EAAKf,EAAOC,GAChC,OAAc,IAAVD,GAAeC,IAAQc,EAAI7B,OACtBiB,EAAOnB,cAAc+B,GAErBZ,EAAOnB,cAAc+B,EAAIc,MAAM7B,EAAOC,GAEjD,CAEA,SAASgE,EAAWlD,EAAKf,EAAOC,GAC9BA,EAAM1K,KAAKsR,IAAI9F,EAAI7B,OAAQe,GAC3B,MAAM6G,EAAM,GAEZ,IAAItI,EAAIwB,EACR,KAAOxB,EAAIyB,GAAK,CACd,MAAM8G,EAAYhG,EAAIvC,GACtB,IAAIwI,EAAY,KACZC,EAAoBF,EAAY,IAChC,EACCA,EAAY,IACT,EACCA,EAAY,IACT,EACA,EAEZ,GAAIvI,EAAIyI,GAAoBhH,EAAK,CAC/B,IAAIiH,EAAYC,EAAWC,EAAYC,EAEvC,OAAQJ,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EACHG,EAAanG,EAAIvC,EAAI,GACO,OAAV,IAAb0I,KACHG,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,EACzCG,EAAgB,MAClBL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAanG,EAAIvC,EAAI,GACrB2I,EAAYpG,EAAIvC,EAAI,GACQ,OAAV,IAAb0I,IAAsD,OAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,EACrEE,EAAgB,OAAUA,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,IAGhB,MACF,KAAK,EACHH,EAAanG,EAAIvC,EAAI,GACrB2I,EAAYpG,EAAIvC,EAAI,GACpB4I,EAAarG,EAAIvC,EAAI,GACO,OAAV,IAAb0I,IAAsD,OAAV,IAAZC,IAAsD,OAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,EAClGC,EAAgB,OAAUA,EAAgB,UAC5CL,EAAYK,IAItB,CAEkB,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbF,EAAIvH,KAAKyH,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBF,EAAIvH,KAAKyH,GACTxI,GAAKyI,CACP,CAEA,OAQF,SAAgCK,GAC9B,MAAMzI,EAAMyI,EAAWpI,OACvB,GAAIL,GAAO0I,EACT,OAAOrC,OAAOsC,aAAaC,MAAMvC,OAAQoC,GAI3C,IAAIR,EAAM,GACNtI,EAAI,EACR,KAAOA,EAAIK,GACTiI,GAAO5B,OAAOsC,aAAaC,MACzBvC,OACAoC,EAAWzF,MAAMrD,EAAGA,GAAK+I,IAG7B,OAAOT,CACT,CAxBSY,CAAsBZ,EAC/B,CA3+BA/I,EAAQ4J,WAAa/G,EAgBrBJ,EAAOoH,oBAUP,WAEE,IACE,MAAMnJ,EAAM,IAAIkB,WAAW,GACrBkI,EAAQ,CAAEC,IAAK,WAAc,OAAO,EAAG,GAG7C,OAFA9G,OAAOC,eAAe4G,EAAOlI,WAAWuB,WACxCF,OAAOC,eAAexC,EAAKoJ,GACN,KAAdpJ,EAAIqJ,KACb,CAAE,MAAOC,GACP,OAAO,CACT,CACF,CArB6BC,GAExBxH,EAAOoH,qBAA0C,qBAAZK,SACb,oBAAlBA,QAAQC,OACjBD,QAAQC,MACN,iJAkBJlH,OAAOmH,eAAe3H,EAAOU,UAAW,SAAU,CAChDkH,YAAY,EACZC,IAAK,WACH,GAAK7H,EAAOqC,SAASkB,MACrB,OAAOA,KAAK1B,MACd,IAGFrB,OAAOmH,eAAe3H,EAAOU,UAAW,SAAU,CAChDkH,YAAY,EACZC,IAAK,WACH,GAAK7H,EAAOqC,SAASkB,MACrB,OAAOA,KAAKzB,UACd,IAoCF9B,EAAO8H,SAAW,KA8DlB9H,EAAOe,KAAO,SAAUzM,EAAOsM,EAAkBlC,GAC/C,OAAOqC,EAAKzM,EAAOsM,EAAkBlC,EACvC,EAIA8B,OAAOC,eAAeT,EAAOU,UAAWvB,WAAWuB,WACnDF,OAAOC,eAAeT,EAAQb,YA8B9Ba,EAAOE,MAAQ,SAAUjM,EAAM0C,EAAMsK,GACnC,OArBF,SAAgBhN,EAAM0C,EAAMsK,GAE1B,OADA4B,EAAW5O,GACPA,GAAQ,EACHoM,EAAapM,QAETiJ,IAATvG,EAIyB,kBAAbsK,EACVZ,EAAapM,GAAM0C,KAAKA,EAAMsK,GAC9BZ,EAAapM,GAAM0C,KAAKA,GAEvB0J,EAAapM,EACtB,CAOSiM,CAAMjM,EAAM0C,EAAMsK,EAC3B,EAUAjB,EAAOc,YAAc,SAAU7M,GAC7B,OAAO6M,EAAY7M,EACrB,EAIA+L,EAAO+H,gBAAkB,SAAU9T,GACjC,OAAO6M,EAAY7M,EACrB,EA6GA+L,EAAOqC,SAAW,SAAmBF,GACnC,OAAY,MAALA,IAA6B,IAAhBA,EAAE6F,WACpB7F,IAAMnC,EAAOU,SACjB,EAEAV,EAAOiI,QAAU,SAAkBC,EAAG/F,GAGpC,GAFIT,EAAWwG,EAAG/I,cAAa+I,EAAIlI,EAAOe,KAAKmH,EAAGA,EAAEjD,OAAQiD,EAAE1K,aAC1DkE,EAAWS,EAAGhD,cAAagD,EAAInC,EAAOe,KAAKoB,EAAGA,EAAE8C,OAAQ9C,EAAE3E,cACzDwC,EAAOqC,SAAS6F,KAAOlI,EAAOqC,SAASF,GAC1C,MAAM,IAAItB,UACR,yEAIJ,GAAIqH,IAAM/F,EAAG,OAAO,EAEpB,IAAIgG,EAAID,EAAExJ,OACN0J,EAAIjG,EAAEzD,OAEV,IAAK,IAAIV,EAAI,EAAGK,EAAMtJ,KAAKsR,IAAI8B,EAAGC,GAAIpK,EAAIK,IAAOL,EAC/C,GAAIkK,EAAElK,KAAOmE,EAAEnE,GAAI,CACjBmK,EAAID,EAAElK,GACNoK,EAAIjG,EAAEnE,GACN,KACF,CAGF,OAAImK,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,CACT,EAEAnI,EAAOkB,WAAa,SAAqBD,GACvC,OAAQyD,OAAOzD,GAAUoC,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,EAEArD,EAAO3K,OAAS,SAAiBgT,EAAM3J,GACrC,IAAKU,MAAMqD,QAAQ4F,GACjB,MAAM,IAAIxH,UAAU,+CAGtB,GAAoB,IAAhBwH,EAAK3J,OACP,OAAOsB,EAAOE,MAAM,GAGtB,IAAIlC,EACJ,QAAed,IAAXwB,EAEF,IADAA,EAAS,EACJV,EAAI,EAAGA,EAAIqK,EAAK3J,SAAUV,EAC7BU,GAAU2J,EAAKrK,GAAGU,OAItB,MAAMmD,EAAS7B,EAAOc,YAAYpC,GAClC,IAAI4J,EAAM,EACV,IAAKtK,EAAI,EAAGA,EAAIqK,EAAK3J,SAAUV,EAAG,CAChC,IAAIuC,EAAM8H,EAAKrK,GACf,GAAI0D,EAAWnB,EAAKpB,YACdmJ,EAAM/H,EAAI7B,OAASmD,EAAOnD,QACvBsB,EAAOqC,SAAS9B,KAAMA,EAAMP,EAAOe,KAAKR,IAC7CA,EAAIoB,KAAKE,EAAQyG,IAEjBnJ,WAAWuB,UAAU6H,IAAIlE,KACvBxC,EACAtB,EACA+H,OAGC,KAAKtI,EAAOqC,SAAS9B,GAC1B,MAAM,IAAIM,UAAU,+CAEpBN,EAAIoB,KAAKE,EAAQyG,EACnB,CACAA,GAAO/H,EAAI7B,MACb,CACA,OAAOmD,CACT,EAiDA7B,EAAOxC,WAAaA,EA8EpBwC,EAAOU,UAAUsH,WAAY,EAQ7BhI,EAAOU,UAAU8H,OAAS,WACxB,MAAMnK,EAAMkF,KAAK7E,OACjB,GAAIL,EAAM,IAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5B8F,EAAKP,KAAMvF,EAAGA,EAAI,GAEpB,OAAOuF,IACT,EAEAvD,EAAOU,UAAU+H,OAAS,WACxB,MAAMpK,EAAMkF,KAAK7E,OACjB,GAAIL,EAAM,IAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5B8F,EAAKP,KAAMvF,EAAGA,EAAI,GAClB8F,EAAKP,KAAMvF,EAAI,EAAGA,EAAI,GAExB,OAAOuF,IACT,EAEAvD,EAAOU,UAAUgI,OAAS,WACxB,MAAMrK,EAAMkF,KAAK7E,OACjB,GAAIL,EAAM,IAAM,EACd,MAAM,IAAIiC,WAAW,6CAEvB,IAAK,IAAItC,EAAI,EAAGA,EAAIK,EAAKL,GAAK,EAC5B8F,EAAKP,KAAMvF,EAAGA,EAAI,GAClB8F,EAAKP,KAAMvF,EAAI,EAAGA,EAAI,GACtB8F,EAAKP,KAAMvF,EAAI,EAAGA,EAAI,GACtB8F,EAAKP,KAAMvF,EAAI,EAAGA,EAAI,GAExB,OAAOuF,IACT,EAEAvD,EAAOU,UAAUqC,SAAW,WAC1B,MAAMrE,EAAS6E,KAAK7E,OACpB,OAAe,IAAXA,EAAqB,GACA,IAArBuE,UAAUvE,OAAqB+E,EAAUF,KAAM,EAAG7E,GAC/C4E,EAAa2D,MAAM1D,KAAMN,UAClC,EAEAjD,EAAOU,UAAUiI,eAAiB3I,EAAOU,UAAUqC,SAEnD/C,EAAOU,UAAUkI,OAAS,SAAiBzG,GACzC,IAAKnC,EAAOqC,SAASF,GAAI,MAAM,IAAItB,UAAU,6BAC7C,OAAI0C,OAASpB,GACsB,IAA5BnC,EAAOiI,QAAQ1E,KAAMpB,EAC9B,EAEAnC,EAAOU,UAAUmI,QAAU,WACzB,IAAIlD,EAAM,GACV,MAAMmD,EAAMvL,EAAQ4C,kBAGpB,OAFAwF,EAAMpC,KAAKR,SAAS,MAAO,EAAG+F,GAAKC,QAAQ,UAAW,OAAOC,OACzDzF,KAAK7E,OAASoK,IAAKnD,GAAO,SACvB,WAAaA,EAAM,GAC5B,EACI7F,IACFE,EAAOU,UAAUZ,GAAuBE,EAAOU,UAAUmI,SAG3D7I,EAAOU,UAAUuH,QAAU,SAAkBgB,EAAQzJ,EAAOC,EAAKyJ,EAAWC,GAI1E,GAHIzH,EAAWuH,EAAQ9J,cACrB8J,EAASjJ,EAAOe,KAAKkI,EAAQA,EAAOhE,OAAQgE,EAAOzL,cAEhDwC,EAAOqC,SAAS4G,GACnB,MAAM,IAAIpI,UACR,wFAC2BoI,GAiB/B,QAbc/L,IAAVsC,IACFA,EAAQ,QAEEtC,IAARuC,IACFA,EAAMwJ,EAASA,EAAOvK,OAAS,QAEfxB,IAAdgM,IACFA,EAAY,QAEEhM,IAAZiM,IACFA,EAAU5F,KAAK7E,QAGbc,EAAQ,GAAKC,EAAMwJ,EAAOvK,QAAUwK,EAAY,GAAKC,EAAU5F,KAAK7E,OACtE,MAAM,IAAI4B,WAAW,sBAGvB,GAAI4I,GAAaC,GAAW3J,GAASC,EACnC,OAAO,EAET,GAAIyJ,GAAaC,EACf,OAAQ,EAEV,GAAI3J,GAASC,EACX,OAAO,EAQT,GAAI8D,OAAS0F,EAAQ,OAAO,EAE5B,IAAId,GAJJgB,KAAa,IADbD,KAAe,GAMXd,GAPJ3I,KAAS,IADTD,KAAW,GASX,MAAMnB,EAAMtJ,KAAKsR,IAAI8B,EAAGC,GAElBgB,EAAW7F,KAAKlC,MAAM6H,EAAWC,GACjCE,EAAaJ,EAAO5H,MAAM7B,EAAOC,GAEvC,IAAK,IAAIzB,EAAI,EAAGA,EAAIK,IAAOL,EACzB,GAAIoL,EAASpL,KAAOqL,EAAWrL,GAAI,CACjCmK,EAAIiB,EAASpL,GACboK,EAAIiB,EAAWrL,GACf,KACF,CAGF,OAAImK,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,CACT,EA2HAnI,EAAOU,UAAU4I,SAAW,SAAmBpF,EAAKpC,EAAYb,GAC9D,OAAoD,IAA7CsC,KAAKhE,QAAQ2E,EAAKpC,EAAYb,EACvC,EAEAjB,EAAOU,UAAUnB,QAAU,SAAkB2E,EAAKpC,EAAYb,GAC5D,OAAOgD,EAAqBV,KAAMW,EAAKpC,EAAYb,GAAU,EAC/D,EAEAjB,EAAOU,UAAU4D,YAAc,SAAsBJ,EAAKpC,EAAYb,GACpE,OAAOgD,EAAqBV,KAAMW,EAAKpC,EAAYb,GAAU,EAC/D,EA4CAjB,EAAOU,UAAUU,MAAQ,SAAgBJ,EAAQiE,EAAQvG,EAAQuC,GAE/D,QAAe/D,IAAX+H,EACFhE,EAAW,OACXvC,EAAS6E,KAAK7E,OACduG,EAAS,OAEJ,QAAe/H,IAAXwB,GAA0C,kBAAXuG,EACxChE,EAAWgE,EACXvG,EAAS6E,KAAK7E,OACduG,EAAS,MAEJ,KAAIsE,SAAStE,GAUlB,MAAM,IAAI3F,MACR,2EAVF2F,KAAoB,EAChBsE,SAAS7K,IACXA,KAAoB,OACHxB,IAAb+D,IAAwBA,EAAW,UAEvCA,EAAWvC,EACXA,OAASxB,EAMb,CAEA,MAAMiI,EAAY5B,KAAK7E,OAASuG,EAGhC,SAFe/H,IAAXwB,GAAwBA,EAASyG,KAAWzG,EAASyG,GAEpDnE,EAAOtC,OAAS,IAAMA,EAAS,GAAKuG,EAAS,IAAOA,EAAS1B,KAAK7E,OACrE,MAAM,IAAI4B,WAAW,0CAGlBW,IAAUA,EAAW,QAE1B,IAAIiC,GAAc,EAClB,OACE,OAAQjC,GACN,IAAK,MACH,OAAO+D,EAASzB,KAAMvC,EAAQiE,EAAQvG,GAExC,IAAK,OACL,IAAK,QACH,OAAO8G,EAAUjC,KAAMvC,EAAQiE,EAAQvG,GAEzC,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOgH,EAAWnC,KAAMvC,EAAQiE,EAAQvG,GAE1C,IAAK,SAEH,OAAOoH,EAAYvC,KAAMvC,EAAQiE,EAAQvG,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOqH,EAAUxC,KAAMvC,EAAQiE,EAAQvG,GAEzC,QACE,GAAIwE,EAAa,MAAM,IAAIrC,UAAU,qBAAuBI,GAC5DA,GAAY,GAAKA,GAAUoC,cAC3BH,GAAc,EAGtB,EAEAlD,EAAOU,UAAU8I,OAAS,WACxB,MAAO,CACLhH,KAAM,SACNE,KAAMtD,MAAMsB,UAAUW,MAAMgD,KAAKd,KAAKkG,MAAQlG,KAAM,GAExD,EAyFA,MAAMwD,EAAuB,KAoB7B,SAASrD,EAAYnD,EAAKf,EAAOC,GAC/B,IAAIiK,EAAM,GACVjK,EAAM1K,KAAKsR,IAAI9F,EAAI7B,OAAQe,GAE3B,IAAK,IAAIzB,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7B0L,GAAOhF,OAAOsC,aAAsB,IAATzG,EAAIvC,IAEjC,OAAO0L,CACT,CAEA,SAAS/F,EAAapD,EAAKf,EAAOC,GAChC,IAAIiK,EAAM,GACVjK,EAAM1K,KAAKsR,IAAI9F,EAAI7B,OAAQe,GAE3B,IAAK,IAAIzB,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7B0L,GAAOhF,OAAOsC,aAAazG,EAAIvC,IAEjC,OAAO0L,CACT,CAEA,SAASlG,EAAUjD,EAAKf,EAAOC,GAC7B,MAAMpB,EAAMkC,EAAI7B,SAEXc,GAASA,EAAQ,KAAGA,EAAQ,KAC5BC,GAAOA,EAAM,GAAKA,EAAMpB,KAAKoB,EAAMpB,GAExC,IAAIsL,EAAM,GACV,IAAK,IAAI3L,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EAC7B2L,GAAOC,EAAoBrJ,EAAIvC,IAEjC,OAAO2L,CACT,CAEA,SAAS9F,EAActD,EAAKf,EAAOC,GACjC,MAAMoK,EAAQtJ,EAAIc,MAAM7B,EAAOC,GAC/B,IAAI6G,EAAM,GAEV,IAAK,IAAItI,EAAI,EAAGA,EAAI6L,EAAMnL,OAAS,EAAGV,GAAK,EACzCsI,GAAO5B,OAAOsC,aAAa6C,EAAM7L,GAAqB,IAAf6L,EAAM7L,EAAI,IAEnD,OAAOsI,CACT,CAiCA,SAASwD,EAAa7E,EAAQ8E,EAAKrL,GACjC,GAAKuG,EAAS,IAAO,GAAKA,EAAS,EAAG,MAAM,IAAI3E,WAAW,sBAC3D,GAAI2E,EAAS8E,EAAMrL,EAAQ,MAAM,IAAI4B,WAAW,wCAClD,CAyQA,SAAS0J,EAAUzJ,EAAKjM,EAAO2Q,EAAQ8E,EAAKjB,EAAKzC,GAC/C,IAAKrG,EAAOqC,SAAS9B,GAAM,MAAM,IAAIM,UAAU,+CAC/C,GAAIvM,EAAQwU,GAAOxU,EAAQ+R,EAAK,MAAM,IAAI/F,WAAW,qCACrD,GAAI2E,EAAS8E,EAAMxJ,EAAI7B,OAAQ,MAAM,IAAI4B,WAAW,qBACtD,CA+FA,SAAS2J,EAAgB1J,EAAKjM,EAAO2Q,EAAQoB,EAAKyC,GAChDoB,EAAW5V,EAAO+R,EAAKyC,EAAKvI,EAAK0E,EAAQ,GAEzC,IAAIkB,EAAKjB,OAAO5Q,EAAQ6V,OAAO,aAC/B5J,EAAI0E,KAAYkB,EAChBA,IAAW,EACX5F,EAAI0E,KAAYkB,EAChBA,IAAW,EACX5F,EAAI0E,KAAYkB,EAChBA,IAAW,EACX5F,EAAI0E,KAAYkB,EAChB,IAAID,EAAKhB,OAAO5Q,GAAS6V,OAAO,IAAMA,OAAO,aAQ7C,OAPA5J,EAAI0E,KAAYiB,EAChBA,IAAW,EACX3F,EAAI0E,KAAYiB,EAChBA,IAAW,EACX3F,EAAI0E,KAAYiB,EAChBA,IAAW,EACX3F,EAAI0E,KAAYiB,EACTjB,CACT,CAEA,SAASmF,EAAgB7J,EAAKjM,EAAO2Q,EAAQoB,EAAKyC,GAChDoB,EAAW5V,EAAO+R,EAAKyC,EAAKvI,EAAK0E,EAAQ,GAEzC,IAAIkB,EAAKjB,OAAO5Q,EAAQ6V,OAAO,aAC/B5J,EAAI0E,EAAS,GAAKkB,EAClBA,IAAW,EACX5F,EAAI0E,EAAS,GAAKkB,EAClBA,IAAW,EACX5F,EAAI0E,EAAS,GAAKkB,EAClBA,IAAW,EACX5F,EAAI0E,EAAS,GAAKkB,EAClB,IAAID,EAAKhB,OAAO5Q,GAAS6V,OAAO,IAAMA,OAAO,aAQ7C,OAPA5J,EAAI0E,EAAS,GAAKiB,EAClBA,IAAW,EACX3F,EAAI0E,EAAS,GAAKiB,EAClBA,IAAW,EACX3F,EAAI0E,EAAS,GAAKiB,EAClBA,IAAW,EACX3F,EAAI0E,GAAUiB,EACPjB,EAAS,CAClB,CAkHA,SAASoF,EAAc9J,EAAKjM,EAAO2Q,EAAQ8E,EAAKjB,EAAKzC,GACnD,GAAIpB,EAAS8E,EAAMxJ,EAAI7B,OAAQ,MAAM,IAAI4B,WAAW,sBACpD,GAAI2E,EAAS,EAAG,MAAM,IAAI3E,WAAW,qBACvC,CAEA,SAASgK,EAAY/J,EAAKjM,EAAO2Q,EAAQsF,EAAcC,GAOrD,OANAlW,GAASA,EACT2Q,KAAoB,EACfuF,GACHH,EAAa9J,EAAKjM,EAAO2Q,EAAQ,GAEnCpF,EAAQuB,MAAMb,EAAKjM,EAAO2Q,EAAQsF,EAAc,GAAI,GAC7CtF,EAAS,CAClB,CAUA,SAASwF,EAAalK,EAAKjM,EAAO2Q,EAAQsF,EAAcC,GAOtD,OANAlW,GAASA,EACT2Q,KAAoB,EACfuF,GACHH,EAAa9J,EAAKjM,EAAO2Q,EAAQ,GAEnCpF,EAAQuB,MAAMb,EAAKjM,EAAO2Q,EAAQsF,EAAc,GAAI,GAC7CtF,EAAS,CAClB,CAzkBAjF,EAAOU,UAAUW,MAAQ,SAAgB7B,EAAOC,GAC9C,MAAMpB,EAAMkF,KAAK7E,QACjBc,IAAUA,GAGE,GACVA,GAASnB,GACG,IAAGmB,EAAQ,GACdA,EAAQnB,IACjBmB,EAAQnB,IANVoB,OAAcvC,IAARuC,EAAoBpB,IAAQoB,GASxB,GACRA,GAAOpB,GACG,IAAGoB,EAAM,GACVA,EAAMpB,IACfoB,EAAMpB,GAGJoB,EAAMD,IAAOC,EAAMD,GAEvB,MAAMkL,EAASnH,KAAKoH,SAASnL,EAAOC,GAIpC,OAFAe,OAAOC,eAAeiK,EAAQ1K,EAAOU,WAE9BgK,CACT,EAUA1K,EAAOU,UAAUkK,WACjB5K,EAAOU,UAAUmK,WAAa,SAAqB5F,EAAQzH,EAAYgN,GACrEvF,KAAoB,EACpBzH,KAA4B,EACvBgN,GAAUV,EAAY7E,EAAQzH,EAAY+F,KAAK7E,QAEpD,IAAIwF,EAAMX,KAAK0B,GACX6F,EAAM,EACN9M,EAAI,EACR,OAASA,EAAIR,IAAesN,GAAO,MACjC5G,GAAOX,KAAK0B,EAASjH,GAAK8M,EAG5B,OAAO5G,CACT,EAEAlE,EAAOU,UAAUqK,WACjB/K,EAAOU,UAAUsK,WAAa,SAAqB/F,EAAQzH,EAAYgN,GACrEvF,KAAoB,EACpBzH,KAA4B,EACvBgN,GACHV,EAAY7E,EAAQzH,EAAY+F,KAAK7E,QAGvC,IAAIwF,EAAMX,KAAK0B,IAAWzH,GACtBsN,EAAM,EACV,KAAOtN,EAAa,IAAMsN,GAAO,MAC/B5G,GAAOX,KAAK0B,IAAWzH,GAAcsN,EAGvC,OAAO5G,CACT,EAEAlE,EAAOU,UAAUuK,UACjBjL,EAAOU,UAAUwK,UAAY,SAAoBjG,EAAQuF,GAGvD,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpC6E,KAAK0B,EACd,EAEAjF,EAAOU,UAAUyK,aACjBnL,EAAOU,UAAU0K,aAAe,SAAuBnG,EAAQuF,GAG7D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpC6E,KAAK0B,GAAW1B,KAAK0B,EAAS,IAAM,CAC7C,EAEAjF,EAAOU,UAAU2K,aACjBrL,EAAOU,UAAUkE,aAAe,SAAuBK,EAAQuF,GAG7D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACnC6E,KAAK0B,IAAW,EAAK1B,KAAK0B,EAAS,EAC7C,EAEAjF,EAAOU,UAAU4K,aACjBtL,EAAOU,UAAU6K,aAAe,SAAuBtG,EAAQuF,GAI7D,OAHAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,SAElC6E,KAAK0B,GACT1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,IAAM,IACD,SAAnB1B,KAAK0B,EAAS,EACrB,EAEAjF,EAAOU,UAAU8K,aACjBxL,EAAOU,UAAU+K,aAAe,SAAuBxG,EAAQuF,GAI7D,OAHAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QAEpB,SAAf6E,KAAK0B,IACT1B,KAAK0B,EAAS,IAAM,GACrB1B,KAAK0B,EAAS,IAAM,EACrB1B,KAAK0B,EAAS,GAClB,EAEAjF,EAAOU,UAAUgL,gBAAkBC,GAAmB,SAA0B1G,GAE9E2G,EADA3G,KAAoB,EACG,UACvB,MAAM4G,EAAQtI,KAAK0B,GACb6G,EAAOvI,KAAK0B,EAAS,QACb/H,IAAV2O,QAAgC3O,IAAT4O,GACzBC,EAAY9G,EAAQ1B,KAAK7E,OAAS,GAGpC,MAAMyH,EAAK0F,EACQ,IAAjBtI,OAAO0B,GACU,MAAjB1B,OAAO0B,GACP1B,OAAO0B,GAAU,GAAK,GAElBiB,EAAK3C,OAAO0B,GACC,IAAjB1B,OAAO0B,GACU,MAAjB1B,OAAO0B,GACP6G,EAAO,GAAK,GAEd,OAAO3B,OAAOhE,IAAOgE,OAAOjE,IAAOiE,OAAO,IAC5C,IAEAnK,EAAOU,UAAUsL,gBAAkBL,GAAmB,SAA0B1G,GAE9E2G,EADA3G,KAAoB,EACG,UACvB,MAAM4G,EAAQtI,KAAK0B,GACb6G,EAAOvI,KAAK0B,EAAS,QACb/H,IAAV2O,QAAgC3O,IAAT4O,GACzBC,EAAY9G,EAAQ1B,KAAK7E,OAAS,GAGpC,MAAMwH,EAAK2F,EAAQ,GAAK,GACL,MAAjBtI,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP1B,OAAO0B,GAEHkB,EAAK5C,OAAO0B,GAAU,GAAK,GACd,MAAjB1B,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP6G,EAEF,OAAQ3B,OAAOjE,IAAOiE,OAAO,KAAOA,OAAOhE,EAC7C,IAEAnG,EAAOU,UAAUuL,UAAY,SAAoBhH,EAAQzH,EAAYgN,GACnEvF,KAAoB,EACpBzH,KAA4B,EACvBgN,GAAUV,EAAY7E,EAAQzH,EAAY+F,KAAK7E,QAEpD,IAAIwF,EAAMX,KAAK0B,GACX6F,EAAM,EACN9M,EAAI,EACR,OAASA,EAAIR,IAAesN,GAAO,MACjC5G,GAAOX,KAAK0B,EAASjH,GAAK8M,EAM5B,OAJAA,GAAO,IAEH5G,GAAO4G,IAAK5G,GAAOnP,KAAKmX,IAAI,EAAG,EAAI1O,IAEhC0G,CACT,EAEAlE,EAAOU,UAAUyL,UAAY,SAAoBlH,EAAQzH,EAAYgN,GACnEvF,KAAoB,EACpBzH,KAA4B,EACvBgN,GAAUV,EAAY7E,EAAQzH,EAAY+F,KAAK7E,QAEpD,IAAIV,EAAIR,EACJsN,EAAM,EACN5G,EAAMX,KAAK0B,IAAWjH,GAC1B,KAAOA,EAAI,IAAM8M,GAAO,MACtB5G,GAAOX,KAAK0B,IAAWjH,GAAK8M,EAM9B,OAJAA,GAAO,IAEH5G,GAAO4G,IAAK5G,GAAOnP,KAAKmX,IAAI,EAAG,EAAI1O,IAEhC0G,CACT,EAEAlE,EAAOU,UAAU0L,SAAW,SAAmBnH,EAAQuF,GAGrD,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACtB,IAAf6E,KAAK0B,IAC0B,GAA5B,IAAO1B,KAAK0B,GAAU,GADK1B,KAAK0B,EAE3C,EAEAjF,EAAOU,UAAU2L,YAAc,SAAsBpH,EAAQuF,GAC3DvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QAC3C,MAAMwF,EAAMX,KAAK0B,GAAW1B,KAAK0B,EAAS,IAAM,EAChD,OAAc,MAANf,EAAsB,WAANA,EAAmBA,CAC7C,EAEAlE,EAAOU,UAAU4L,YAAc,SAAsBrH,EAAQuF,GAC3DvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QAC3C,MAAMwF,EAAMX,KAAK0B,EAAS,GAAM1B,KAAK0B,IAAW,EAChD,OAAc,MAANf,EAAsB,WAANA,EAAmBA,CAC7C,EAEAlE,EAAOU,UAAU6L,YAAc,SAAsBtH,EAAQuF,GAI3D,OAHAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QAEnC6E,KAAK0B,GACV1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,IAAM,GACpB1B,KAAK0B,EAAS,IAAM,EACzB,EAEAjF,EAAOU,UAAU8L,YAAc,SAAsBvH,EAAQuF,GAI3D,OAHAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QAEnC6E,KAAK0B,IAAW,GACrB1B,KAAK0B,EAAS,IAAM,GACpB1B,KAAK0B,EAAS,IAAM,EACpB1B,KAAK0B,EAAS,EACnB,EAEAjF,EAAOU,UAAU+L,eAAiBd,GAAmB,SAAyB1G,GAE5E2G,EADA3G,KAAoB,EACG,UACvB,MAAM4G,EAAQtI,KAAK0B,GACb6G,EAAOvI,KAAK0B,EAAS,QACb/H,IAAV2O,QAAgC3O,IAAT4O,GACzBC,EAAY9G,EAAQ1B,KAAK7E,OAAS,GAGpC,MAAMwF,EAAMX,KAAK0B,EAAS,GACL,IAAnB1B,KAAK0B,EAAS,GACK,MAAnB1B,KAAK0B,EAAS,IACb6G,GAAQ,IAEX,OAAQ3B,OAAOjG,IAAQiG,OAAO,KAC5BA,OAAO0B,EACU,IAAjBtI,OAAO0B,GACU,MAAjB1B,OAAO0B,GACP1B,OAAO0B,GAAU,GAAK,GAC1B,IAEAjF,EAAOU,UAAUgM,eAAiBf,GAAmB,SAAyB1G,GAE5E2G,EADA3G,KAAoB,EACG,UACvB,MAAM4G,EAAQtI,KAAK0B,GACb6G,EAAOvI,KAAK0B,EAAS,QACb/H,IAAV2O,QAAgC3O,IAAT4O,GACzBC,EAAY9G,EAAQ1B,KAAK7E,OAAS,GAGpC,MAAMwF,GAAO2H,GAAS,IACH,MAAjBtI,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP1B,OAAO0B,GAET,OAAQkF,OAAOjG,IAAQiG,OAAO,KAC5BA,OAAO5G,OAAO0B,GAAU,GAAK,GACZ,MAAjB1B,OAAO0B,GACU,IAAjB1B,OAAO0B,GACP6G,EACJ,IAEA9L,EAAOU,UAAUiM,YAAc,SAAsB1H,EAAQuF,GAG3D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpCmB,EAAQ8E,KAAKpB,KAAM0B,GAAQ,EAAM,GAAI,EAC9C,EAEAjF,EAAOU,UAAUkM,YAAc,SAAsB3H,EAAQuF,GAG3D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpCmB,EAAQ8E,KAAKpB,KAAM0B,GAAQ,EAAO,GAAI,EAC/C,EAEAjF,EAAOU,UAAUmM,aAAe,SAAuB5H,EAAQuF,GAG7D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpCmB,EAAQ8E,KAAKpB,KAAM0B,GAAQ,EAAM,GAAI,EAC9C,EAEAjF,EAAOU,UAAUoM,aAAe,SAAuB7H,EAAQuF,GAG7D,OAFAvF,KAAoB,EACfuF,GAAUV,EAAY7E,EAAQ,EAAG1B,KAAK7E,QACpCmB,EAAQ8E,KAAKpB,KAAM0B,GAAQ,EAAO,GAAI,EAC/C,EAQAjF,EAAOU,UAAUqM,YACjB/M,EAAOU,UAAUsM,YAAc,SAAsB1Y,EAAO2Q,EAAQzH,EAAYgN,GAI9E,GAHAlW,GAASA,EACT2Q,KAAoB,EACpBzH,KAA4B,GACvBgN,EAAU,CAEbR,EAASzG,KAAMjP,EAAO2Q,EAAQzH,EADbzI,KAAKmX,IAAI,EAAG,EAAI1O,GAAc,EACK,EACtD,CAEA,IAAIsN,EAAM,EACN9M,EAAI,EAER,IADAuF,KAAK0B,GAAkB,IAAR3Q,IACN0J,EAAIR,IAAesN,GAAO,MACjCvH,KAAK0B,EAASjH,GAAM1J,EAAQwW,EAAO,IAGrC,OAAO7F,EAASzH,CAClB,EAEAwC,EAAOU,UAAUuM,YACjBjN,EAAOU,UAAUwM,YAAc,SAAsB5Y,EAAO2Q,EAAQzH,EAAYgN,GAI9E,GAHAlW,GAASA,EACT2Q,KAAoB,EACpBzH,KAA4B,GACvBgN,EAAU,CAEbR,EAASzG,KAAMjP,EAAO2Q,EAAQzH,EADbzI,KAAKmX,IAAI,EAAG,EAAI1O,GAAc,EACK,EACtD,CAEA,IAAIQ,EAAIR,EAAa,EACjBsN,EAAM,EAEV,IADAvH,KAAK0B,EAASjH,GAAa,IAAR1J,IACV0J,GAAK,IAAM8M,GAAO,MACzBvH,KAAK0B,EAASjH,GAAM1J,EAAQwW,EAAO,IAGrC,OAAO7F,EAASzH,CAClB,EAEAwC,EAAOU,UAAUyM,WACjBnN,EAAOU,UAAU0M,WAAa,SAAqB9Y,EAAO2Q,EAAQuF,GAKhE,OAJAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,IAAM,GACtD1B,KAAK0B,GAAmB,IAAR3Q,EACT2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU2M,cACjBrN,EAAOU,UAAU4M,cAAgB,SAAwBhZ,EAAO2Q,EAAQuF,GAMtE,OALAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,MAAQ,GACxD1B,KAAK0B,GAAmB,IAAR3Q,EAChBiP,KAAK0B,EAAS,GAAM3Q,IAAU,EACvB2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU6M,cACjBvN,EAAOU,UAAU8M,cAAgB,SAAwBlZ,EAAO2Q,EAAQuF,GAMtE,OALAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,MAAQ,GACxD1B,KAAK0B,GAAW3Q,IAAU,EAC1BiP,KAAK0B,EAAS,GAAc,IAAR3Q,EACb2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU+M,cACjBzN,EAAOU,UAAUgN,cAAgB,SAAwBpZ,EAAO2Q,EAAQuF,GAQtE,OAPAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,WAAY,GAC5D1B,KAAK0B,EAAS,GAAM3Q,IAAU,GAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,GAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,EAC9BiP,KAAK0B,GAAmB,IAAR3Q,EACT2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAUiN,cACjB3N,EAAOU,UAAUkN,cAAgB,SAAwBtZ,EAAO2Q,EAAQuF,GAQtE,OAPAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,WAAY,GAC5D1B,KAAK0B,GAAW3Q,IAAU,GAC1BiP,KAAK0B,EAAS,GAAM3Q,IAAU,GAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,EAC9BiP,KAAK0B,EAAS,GAAc,IAAR3Q,EACb2Q,EAAS,CAClB,EA8CAjF,EAAOU,UAAUmN,iBAAmBlC,GAAmB,SAA2BrX,GAChF,OAAO2V,EAAe1G,KAAMjP,EADiE2O,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAG,EACrDkH,OAAO,GAAIA,OAAO,sBAC/D,IAEAnK,EAAOU,UAAUoN,iBAAmBnC,GAAmB,SAA2BrX,GAChF,OAAO8V,EAAe7G,KAAMjP,EADiE2O,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAG,EACrDkH,OAAO,GAAIA,OAAO,sBAC/D,IAEAnK,EAAOU,UAAUqN,WAAa,SAAqBzZ,EAAO2Q,EAAQzH,EAAYgN,GAG5E,GAFAlW,GAASA,EACT2Q,KAAoB,GACfuF,EAAU,CACb,MAAMwD,EAAQjZ,KAAKmX,IAAI,EAAI,EAAI1O,EAAc,GAE7CwM,EAASzG,KAAMjP,EAAO2Q,EAAQzH,EAAYwQ,EAAQ,GAAIA,EACxD,CAEA,IAAIhQ,EAAI,EACJ8M,EAAM,EACNmD,EAAM,EAEV,IADA1K,KAAK0B,GAAkB,IAAR3Q,IACN0J,EAAIR,IAAesN,GAAO,MAC7BxW,EAAQ,GAAa,IAAR2Z,GAAsC,IAAzB1K,KAAK0B,EAASjH,EAAI,KAC9CiQ,EAAM,GAER1K,KAAK0B,EAASjH,IAAO1J,EAAQwW,GAAQ,GAAKmD,EAAM,IAGlD,OAAOhJ,EAASzH,CAClB,EAEAwC,EAAOU,UAAUwN,WAAa,SAAqB5Z,EAAO2Q,EAAQzH,EAAYgN,GAG5E,GAFAlW,GAASA,EACT2Q,KAAoB,GACfuF,EAAU,CACb,MAAMwD,EAAQjZ,KAAKmX,IAAI,EAAI,EAAI1O,EAAc,GAE7CwM,EAASzG,KAAMjP,EAAO2Q,EAAQzH,EAAYwQ,EAAQ,GAAIA,EACxD,CAEA,IAAIhQ,EAAIR,EAAa,EACjBsN,EAAM,EACNmD,EAAM,EAEV,IADA1K,KAAK0B,EAASjH,GAAa,IAAR1J,IACV0J,GAAK,IAAM8M,GAAO,MACrBxW,EAAQ,GAAa,IAAR2Z,GAAsC,IAAzB1K,KAAK0B,EAASjH,EAAI,KAC9CiQ,EAAM,GAER1K,KAAK0B,EAASjH,IAAO1J,EAAQwW,GAAQ,GAAKmD,EAAM,IAGlD,OAAOhJ,EAASzH,CAClB,EAEAwC,EAAOU,UAAUyN,UAAY,SAAoB7Z,EAAO2Q,EAAQuF,GAM9D,OALAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,KAAO,KACnD3Q,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCiP,KAAK0B,GAAmB,IAAR3Q,EACT2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU0N,aAAe,SAAuB9Z,EAAO2Q,EAAQuF,GAMpE,OALAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,OAAS,OACzD1B,KAAK0B,GAAmB,IAAR3Q,EAChBiP,KAAK0B,EAAS,GAAM3Q,IAAU,EACvB2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU2N,aAAe,SAAuB/Z,EAAO2Q,EAAQuF,GAMpE,OALAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,OAAS,OACzD1B,KAAK0B,GAAW3Q,IAAU,EAC1BiP,KAAK0B,EAAS,GAAc,IAAR3Q,EACb2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU4N,aAAe,SAAuBha,EAAO2Q,EAAQuF,GAQpE,OAPAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,YAAa,YAC7D1B,KAAK0B,GAAmB,IAAR3Q,EAChBiP,KAAK0B,EAAS,GAAM3Q,IAAU,EAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,GAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,GACvB2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU6N,aAAe,SAAuBja,EAAO2Q,EAAQuF,GASpE,OARAlW,GAASA,EACT2Q,KAAoB,EACfuF,GAAUR,EAASzG,KAAMjP,EAAO2Q,EAAQ,EAAG,YAAa,YACzD3Q,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5CiP,KAAK0B,GAAW3Q,IAAU,GAC1BiP,KAAK0B,EAAS,GAAM3Q,IAAU,GAC9BiP,KAAK0B,EAAS,GAAM3Q,IAAU,EAC9BiP,KAAK0B,EAAS,GAAc,IAAR3Q,EACb2Q,EAAS,CAClB,EAEAjF,EAAOU,UAAU8N,gBAAkB7C,GAAmB,SAA0BrX,GAC9E,OAAO2V,EAAe1G,KAAMjP,EAD+D2O,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAG,GAClDkH,OAAO,sBAAuBA,OAAO,sBACnF,IAEAnK,EAAOU,UAAU+N,gBAAkB9C,GAAmB,SAA0BrX,GAC9E,OAAO8V,EAAe7G,KAAMjP,EAD+D2O,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAG,GAClDkH,OAAO,sBAAuBA,OAAO,sBACnF,IAiBAnK,EAAOU,UAAUgO,aAAe,SAAuBpa,EAAO2Q,EAAQuF,GACpE,OAAOF,EAAW/G,KAAMjP,EAAO2Q,GAAQ,EAAMuF,EAC/C,EAEAxK,EAAOU,UAAUiO,aAAe,SAAuBra,EAAO2Q,EAAQuF,GACpE,OAAOF,EAAW/G,KAAMjP,EAAO2Q,GAAQ,EAAOuF,EAChD,EAYAxK,EAAOU,UAAUkO,cAAgB,SAAwBta,EAAO2Q,EAAQuF,GACtE,OAAOC,EAAYlH,KAAMjP,EAAO2Q,GAAQ,EAAMuF,EAChD,EAEAxK,EAAOU,UAAUmO,cAAgB,SAAwBva,EAAO2Q,EAAQuF,GACtE,OAAOC,EAAYlH,KAAMjP,EAAO2Q,GAAQ,EAAOuF,EACjD,EAGAxK,EAAOU,UAAUiB,KAAO,SAAesH,EAAQ6F,EAAatP,EAAOC,GACjE,IAAKO,EAAOqC,SAAS4G,GAAS,MAAM,IAAIpI,UAAU,+BAQlD,GAPKrB,IAAOA,EAAQ,GACfC,GAAe,IAARA,IAAWA,EAAM8D,KAAK7E,QAC9BoQ,GAAe7F,EAAOvK,SAAQoQ,EAAc7F,EAAOvK,QAClDoQ,IAAaA,EAAc,GAC5BrP,EAAM,GAAKA,EAAMD,IAAOC,EAAMD,GAG9BC,IAAQD,EAAO,OAAO,EAC1B,GAAsB,IAAlByJ,EAAOvK,QAAgC,IAAhB6E,KAAK7E,OAAc,OAAO,EAGrD,GAAIoQ,EAAc,EAChB,MAAM,IAAIxO,WAAW,6BAEvB,GAAId,EAAQ,GAAKA,GAAS+D,KAAK7E,OAAQ,MAAM,IAAI4B,WAAW,sBAC5D,GAAIb,EAAM,EAAG,MAAM,IAAIa,WAAW,2BAG9Bb,EAAM8D,KAAK7E,SAAQe,EAAM8D,KAAK7E,QAC9BuK,EAAOvK,OAASoQ,EAAcrP,EAAMD,IACtCC,EAAMwJ,EAAOvK,OAASoQ,EAActP,GAGtC,MAAMnB,EAAMoB,EAAMD,EAalB,OAXI+D,OAAS0F,GAAqD,oBAApC9J,WAAWuB,UAAUqO,WAEjDxL,KAAKwL,WAAWD,EAAatP,EAAOC,GAEpCN,WAAWuB,UAAU6H,IAAIlE,KACvB4E,EACA1F,KAAKoH,SAASnL,EAAOC,GACrBqP,GAIGzQ,CACT,EAMA2B,EAAOU,UAAU/J,KAAO,SAAeuN,EAAK1E,EAAOC,EAAKwB,GAEtD,GAAmB,kBAARiD,EAAkB,CAS3B,GARqB,kBAAV1E,GACTyB,EAAWzB,EACXA,EAAQ,EACRC,EAAM8D,KAAK7E,QACa,kBAARe,IAChBwB,EAAWxB,EACXA,EAAM8D,KAAK7E,aAEIxB,IAAb+D,GAA8C,kBAAbA,EACnC,MAAM,IAAIJ,UAAU,6BAEtB,GAAwB,kBAAbI,IAA0BjB,EAAOkB,WAAWD,GACrD,MAAM,IAAIJ,UAAU,qBAAuBI,GAE7C,GAAmB,IAAfiD,EAAIxF,OAAc,CACpB,MAAMW,EAAO6E,EAAI3F,WAAW,IACV,SAAb0C,GAAuB5B,EAAO,KAClB,WAAb4B,KAEFiD,EAAM7E,EAEV,CACF,KAA0B,kBAAR6E,EAChBA,GAAY,IACY,mBAARA,IAChBA,EAAMgB,OAAOhB,IAIf,GAAI1E,EAAQ,GAAK+D,KAAK7E,OAASc,GAAS+D,KAAK7E,OAASe,EACpD,MAAM,IAAIa,WAAW,sBAGvB,GAAIb,GAAOD,EACT,OAAO+D,KAQT,IAAIvF,EACJ,GANAwB,KAAkB,EAClBC,OAAcvC,IAARuC,EAAoB8D,KAAK7E,OAASe,IAAQ,EAE3CyE,IAAKA,EAAM,GAGG,kBAARA,EACT,IAAKlG,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EACzBuF,KAAKvF,GAAKkG,MAEP,CACL,MAAM2F,EAAQ7J,EAAOqC,SAAS6B,GAC1BA,EACAlE,EAAOe,KAAKmD,EAAKjD,GACf5C,EAAMwL,EAAMnL,OAClB,GAAY,IAARL,EACF,MAAM,IAAIwC,UAAU,cAAgBqD,EAClC,qCAEJ,IAAKlG,EAAI,EAAGA,EAAIyB,EAAMD,IAASxB,EAC7BuF,KAAKvF,EAAIwB,GAASqK,EAAM7L,EAAIK,EAEhC,CAEA,OAAOkF,IACT,EAMA,MAAMyL,EAAS,CAAC,EAChB,SAASC,EAAGC,EAAKC,EAAYC,GAC3BJ,EAAOE,GAAO,cAAwBE,EACpCC,WAAAA,GACEC,QAEA9O,OAAOmH,eAAepE,KAAM,UAAW,CACrCjP,MAAO6a,EAAWlI,MAAM1D,KAAMN,WAC9BsM,UAAU,EACVC,cAAc,IAIhBjM,KAAK3L,KAAO,GAAHvC,OAAMkO,KAAK3L,KAAI,MAAAvC,OAAK6Z,EAAG,KAGhC3L,KAAKkM,aAEElM,KAAK3L,IACd,CAEA,QAAIyH,GACF,OAAO6P,CACT,CAEA,QAAI7P,CAAM/K,GACRkM,OAAOmH,eAAepE,KAAM,OAAQ,CAClCiM,cAAc,EACd5H,YAAY,EACZtT,QACAib,UAAU,GAEd,CAEAxM,QAAAA,GACE,MAAO,GAAP1N,OAAUkO,KAAK3L,KAAI,MAAAvC,OAAK6Z,EAAG,OAAA7Z,OAAMkO,KAAKmM,QACxC,EAEJ,CA+BA,SAASC,EAAuBzL,GAC9B,IAAIoC,EAAM,GACNtI,EAAIkG,EAAIxF,OACZ,MAAMc,EAAmB,MAAX0E,EAAI,GAAa,EAAI,EACnC,KAAOlG,GAAKwB,EAAQ,EAAGxB,GAAK,EAC1BsI,EAAM,IAAHjR,OAAO6O,EAAI7C,MAAMrD,EAAI,EAAGA,IAAE3I,OAAGiR,GAElC,MAAO,GAAPjR,OAAU6O,EAAI7C,MAAM,EAAGrD,IAAE3I,OAAGiR,EAC9B,CAYA,SAAS4D,EAAY5V,EAAO+R,EAAKyC,EAAKvI,EAAK0E,EAAQzH,GACjD,GAAIlJ,EAAQwU,GAAOxU,EAAQ+R,EAAK,CAC9B,MAAMtC,EAAmB,kBAARsC,EAAmB,IAAM,GAC1C,IAAIuJ,EAWJ,MARIA,EAFApS,EAAa,EACH,IAAR6I,GAAaA,IAAQ8D,OAAO,GACtB,OAAH9U,OAAU0O,EAAC,YAAA1O,OAAW0O,EAAC,QAAA1O,OAA0B,GAAlBmI,EAAa,IAAMnI,OAAG0O,GAElD,SAAA1O,OAAS0O,EAAC,QAAA1O,OAA0B,GAAlBmI,EAAa,GAAS,GAACnI,OAAG0O,EAAC,oBAAA1O,OACvB,GAAlBmI,EAAa,GAAS,GAACnI,OAAG0O,GAGhC,MAAH1O,OAASgR,GAAGhR,OAAG0O,EAAC,YAAA1O,OAAWyT,GAAGzT,OAAG0O,GAElC,IAAIiL,EAAOa,iBAAiB,QAASD,EAAOtb,EACpD,EAtBF,SAAsBiM,EAAK0E,EAAQzH,GACjCoO,EAAe3G,EAAQ,eACH/H,IAAhBqD,EAAI0E,SAAsD/H,IAA7BqD,EAAI0E,EAASzH,IAC5CuO,EAAY9G,EAAQ1E,EAAI7B,QAAUlB,EAAa,GAEnD,CAkBEsS,CAAYvP,EAAK0E,EAAQzH,EAC3B,CAEA,SAASoO,EAAgBtX,EAAOsD,GAC9B,GAAqB,kBAAVtD,EACT,MAAM,IAAI0a,EAAOe,qBAAqBnY,EAAM,SAAUtD,EAE1D,CAEA,SAASyX,EAAazX,EAAOoK,EAAQ8D,GACnC,GAAIzN,KAAKib,MAAM1b,KAAWA,EAExB,MADAsX,EAAetX,EAAOkO,GAChB,IAAIwM,EAAOa,iBAAiBrN,GAAQ,SAAU,aAAclO,GAGpE,GAAIoK,EAAS,EACX,MAAM,IAAIsQ,EAAOiB,yBAGnB,MAAM,IAAIjB,EAAOa,iBAAiBrN,GAAQ,SAAQ,MAAAnN,OACVmN,EAAO,EAAI,EAAC,YAAAnN,OAAWqJ,GAC7BpK,EACpC,CAvFA2a,EAAE,4BACA,SAAUrX,GACR,OAAIA,EACK,GAAPvC,OAAUuC,EAAI,gCAGT,gDACT,GAAG0I,YACL2O,EAAE,wBACA,SAAUrX,EAAMuJ,GACd,MAAO,QAAP9L,OAAeuC,EAAI,qDAAAvC,cAA2D8L,EAChF,GAAGN,WACLoO,EAAE,oBACA,SAAUtJ,EAAKiK,EAAOM,GACpB,IAAIC,EAAM,iBAAH9a,OAAoBsQ,EAAG,sBAC1ByK,EAAWF,EAWf,OAVIhL,OAAOmL,UAAUH,IAAUnb,KAAKub,IAAIJ,GAAS,GAAK,GACpDE,EAAWT,EAAsBjL,OAAOwL,IACd,kBAAVA,IAChBE,EAAW1L,OAAOwL,IACdA,EAAQ/F,OAAO,IAAMA,OAAO,KAAO+F,IAAU/F,OAAO,IAAMA,OAAO,QACnEiG,EAAWT,EAAsBS,IAEnCA,GAAY,KAEdD,GAAO,eAAJ9a,OAAmBua,EAAK,eAAAva,OAAc+a,GAClCD,CACT,GAAG7P,YAiEL,MAAMiQ,EAAoB,oBAgB1B,SAASpN,EAAanC,EAAQgF,GAE5B,IAAIQ,EADJR,EAAQA,GAASwK,IAEjB,MAAM9R,EAASsC,EAAOtC,OACtB,IAAI+R,EAAgB,KACpB,MAAM5G,EAAQ,GAEd,IAAK,IAAI7L,EAAI,EAAGA,EAAIU,IAAUV,EAAG,CAI/B,GAHAwI,EAAYxF,EAAOzC,WAAWP,GAG1BwI,EAAY,OAAUA,EAAY,MAAQ,CAE5C,IAAKiK,EAAe,CAElB,GAAIjK,EAAY,MAAQ,EAEjBR,GAAS,IAAM,GAAG6D,EAAM9K,KAAK,IAAM,IAAM,KAC9C,QACF,CAAO,GAAIf,EAAI,IAAMU,EAAQ,EAEtBsH,GAAS,IAAM,GAAG6D,EAAM9K,KAAK,IAAM,IAAM,KAC9C,QACF,CAGA0R,EAAgBjK,EAEhB,QACF,CAGA,GAAIA,EAAY,MAAQ,EACjBR,GAAS,IAAM,GAAG6D,EAAM9K,KAAK,IAAM,IAAM,KAC9C0R,EAAgBjK,EAChB,QACF,CAGAA,EAAkE,OAArDiK,EAAgB,OAAU,GAAKjK,EAAY,MAC1D,MAAWiK,IAEJzK,GAAS,IAAM,GAAG6D,EAAM9K,KAAK,IAAM,IAAM,KAMhD,GAHA0R,EAAgB,KAGZjK,EAAY,IAAM,CACpB,IAAKR,GAAS,GAAK,EAAG,MACtB6D,EAAM9K,KAAKyH,EACb,MAAO,GAAIA,EAAY,KAAO,CAC5B,IAAKR,GAAS,GAAK,EAAG,MACtB6D,EAAM9K,KACJyH,GAAa,EAAM,IACP,GAAZA,EAAmB,IAEvB,MAAO,GAAIA,EAAY,MAAS,CAC9B,IAAKR,GAAS,GAAK,EAAG,MACtB6D,EAAM9K,KACJyH,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAEvB,KAAO,MAAIA,EAAY,SASrB,MAAM,IAAIlH,MAAM,sBARhB,IAAK0G,GAAS,GAAK,EAAG,MACtB6D,EAAM9K,KACJyH,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,IAIvB,CACF,CAEA,OAAOqD,CACT,CA2BA,SAASzG,EAAeuC,GACtB,OAAOhG,EAAO7B,YAxHhB,SAAsB6H,GAMpB,IAFAA,GAFAA,EAAMA,EAAI+K,MAAM,KAAK,IAEX1H,OAAOD,QAAQwH,EAAmB,KAEpC7R,OAAS,EAAG,MAAO,GAE3B,KAAOiH,EAAIjH,OAAS,IAAM,GACxBiH,GAAY,IAEd,OAAOA,CACT,CA4G4BgL,CAAYhL,GACxC,CAEA,SAASF,EAAYmL,EAAKC,EAAK5L,EAAQvG,GACrC,IAAIV,EACJ,IAAKA,EAAI,EAAGA,EAAIU,KACTV,EAAIiH,GAAU4L,EAAInS,QAAYV,GAAK4S,EAAIlS,UADpBV,EAExB6S,EAAI7S,EAAIiH,GAAU2L,EAAI5S,GAExB,OAAOA,CACT,CAKA,SAAS0D,EAAYU,EAAKI,GACxB,OAAOJ,aAAeI,GACZ,MAAPJ,GAAkC,MAAnBA,EAAIiN,aAA+C,MAAxBjN,EAAIiN,YAAYzX,MACzDwK,EAAIiN,YAAYzX,OAAS4K,EAAK5K,IACpC,CACA,SAAS2K,EAAaH,GAEpB,OAAOA,IAAQA,CACjB,CAIA,MAAMwH,EAAuB,WAC3B,MAAMkH,EAAW,mBACXC,EAAQ,IAAI3R,MAAM,KACxB,IAAK,IAAIpB,EAAI,EAAGA,EAAI,KAAMA,EAAG,CAC3B,MAAMgT,EAAU,GAAJhT,EACZ,IAAK,IAAI+G,EAAI,EAAGA,EAAI,KAAMA,EACxBgM,EAAMC,EAAMjM,GAAK+L,EAAS9S,GAAK8S,EAAS/L,EAE5C,CACA,OAAOgM,CACT,CAV6B,GAa7B,SAASpF,EAAoBsF,GAC3B,MAAyB,qBAAX9G,OAAyB+G,EAAyBD,CAClE,CAEA,SAASC,IACP,MAAM,IAAI5R,MAAM,uBAClB,yBCliEA,IAOI6R,EAPAC,EAAuB,kBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,oBAAZA,EAAEnK,MAC7BmK,EAAEnK,MACF,SAAsBgC,EAAQsI,EAAUC,GACxC,OAAOC,SAAS/Q,UAAUuG,MAAM5C,KAAK4E,EAAQsI,EAAUC,EACzD,EAIAL,EADEC,GAA0B,oBAAdA,EAAEM,QACCN,EAAEM,QACVlR,OAAOmR,sBACC,SAAwB1I,GACvC,OAAOzI,OAAOoR,oBAAoB3I,GAC/B5T,OAAOmL,OAAOmR,sBAAsB1I,GACzC,EAEiB,SAAwBA,GACvC,OAAOzI,OAAOoR,oBAAoB3I,EACpC,EAOF,IAAI4I,EAAc3M,OAAO4M,OAAS,SAAqBxd,GACrD,OAAOA,IAAUA,CACnB,EAEA,SAASyd,IACPA,EAAaC,KAAK3N,KAAKd,KACzB,CACA0O,EAAO1U,QAAUwU,EACjBE,EAAO1U,QAAQ2U,KAwYf,SAAcC,EAASva,GACrB,OAAO,IAAIwa,SAAQ,SAAUC,EAASC,GACpC,SAASC,EAAcC,GACrBL,EAAQM,eAAe7a,EAAM8a,GAC7BJ,EAAOE,EACT,CAEA,SAASE,IAC+B,oBAA3BP,EAAQM,gBACjBN,EAAQM,eAAe,QAASF,GAElCF,EAAQ,GAAGhR,MAAMgD,KAAKpB,WACxB,CAEA0P,EAA+BR,EAASva,EAAM8a,EAAU,CAAER,MAAM,IACnD,UAATta,GAMR,SAAuCua,EAASS,EAASC,GAC7B,oBAAfV,EAAQW,IACjBH,EAA+BR,EAAS,QAASS,EAASC,EAE9D,CATME,CAA8BZ,EAASI,EAAe,CAAEL,MAAM,GAElE,GACF,EAxZAH,EAAaA,aAAeA,EAE5BA,EAAarR,UAAUsS,aAAU9V,EACjC6U,EAAarR,UAAUuS,aAAe,EACtClB,EAAarR,UAAUwS,mBAAgBhW,EAIvC,IAAIiW,EAAsB,GAE1B,SAASC,EAAcC,GACrB,GAAwB,oBAAbA,EACT,MAAM,IAAIxS,UAAU,0EAA4EwS,EAEpG,CAoCA,SAASC,EAAiBC,GACxB,YAA2BrW,IAAvBqW,EAAKL,cACAnB,EAAaoB,oBACfI,EAAKL,aACd,CAkDA,SAASM,EAAavK,EAAQzG,EAAM6Q,EAAUI,GAC5C,IAAIzP,EACA0P,EACAC,EA1HsBC,EAgJ1B,GApBAR,EAAcC,QAGCnW,KADfwW,EAASzK,EAAO+J,UAEdU,EAASzK,EAAO+J,QAAUxS,OAAOtJ,OAAO,MACxC+R,EAAOgK,aAAe,SAIK/V,IAAvBwW,EAAOG,cACT5K,EAAO6K,KAAK,cAAetR,EACf6Q,EAASA,SAAWA,EAASA,SAAWA,GAIpDK,EAASzK,EAAO+J,SAElBW,EAAWD,EAAOlR,SAGHtF,IAAbyW,EAEFA,EAAWD,EAAOlR,GAAQ6Q,IACxBpK,EAAOgK,kBAeT,GAbwB,oBAAbU,EAETA,EAAWD,EAAOlR,GAChBiR,EAAU,CAACJ,EAAUM,GAAY,CAACA,EAAUN,GAErCI,EACTE,EAASI,QAAQV,GAEjBM,EAAS5U,KAAKsU,IAIhBrP,EAAIsP,EAAiBrK,IACb,GAAK0K,EAASjV,OAASsF,IAAM2P,EAASK,OAAQ,CACpDL,EAASK,QAAS,EAGlB,IAAIC,EAAI,IAAI3U,MAAM,+CACEqU,EAASjV,OAAS,IAAMgG,OAAOlC,GADjC,qEAIlByR,EAAErc,KAAO,8BACTqc,EAAE9B,QAAUlJ,EACZgL,EAAEzR,KAAOA,EACTyR,EAAEC,MAAQP,EAASjV,OA7KGkV,EA8KHK,EA7KnBxM,SAAWA,QAAQ0M,MAAM1M,QAAQ0M,KAAKP,EA8KxC,CAGF,OAAO3K,CACT,CAaA,SAASmL,IACP,IAAK7Q,KAAK8Q,MAGR,OAFA9Q,KAAK0F,OAAOwJ,eAAelP,KAAKf,KAAMe,KAAK+Q,QAC3C/Q,KAAK8Q,OAAQ,EACY,IAArBpR,UAAUvE,OACL6E,KAAK8P,SAAShP,KAAKd,KAAK0F,QAC1B1F,KAAK8P,SAASpM,MAAM1D,KAAK0F,OAAQhG,UAE5C,CAEA,SAASsR,EAAUtL,EAAQzG,EAAM6Q,GAC/B,IAAImB,EAAQ,CAAEH,OAAO,EAAOC,YAAQpX,EAAW+L,OAAQA,EAAQzG,KAAMA,EAAM6Q,SAAUA,GACjFoB,EAAUL,EAAYM,KAAKF,GAG/B,OAFAC,EAAQpB,SAAWA,EACnBmB,EAAMF,OAASG,EACRA,CACT,CAyHA,SAASE,EAAW1L,EAAQzG,EAAMoS,GAChC,IAAIlB,EAASzK,EAAO+J,QAEpB,QAAe9V,IAAXwW,EACF,MAAO,GAET,IAAImB,EAAanB,EAAOlR,GACxB,YAAmBtF,IAAf2X,EACK,GAEiB,oBAAfA,EACFD,EAAS,CAACC,EAAWxB,UAAYwB,GAAc,CAACA,GAElDD,EAsDT,SAAyB3W,GAEvB,IADA,IAAIyL,EAAM,IAAItK,MAAMnB,EAAIS,QACfV,EAAI,EAAGA,EAAI0L,EAAIhL,SAAUV,EAChC0L,EAAI1L,GAAKC,EAAID,GAAGqV,UAAYpV,EAAID,GAElC,OAAO0L,CACT,CA3DIoL,CAAgBD,GAAcE,EAAWF,EAAYA,EAAWnW,OACpE,CAmBA,SAASsW,EAAcxS,GACrB,IAAIkR,EAASnQ,KAAKyP,QAElB,QAAe9V,IAAXwW,EAAsB,CACxB,IAAImB,EAAanB,EAAOlR,GAExB,GAA0B,oBAAfqS,EACT,OAAO,EACF,QAAmB3X,IAAf2X,EACT,OAAOA,EAAWnW,MAEtB,CAEA,OAAO,CACT,CAMA,SAASqW,EAAW9W,EAAK8F,GAEvB,IADA,IAAIpC,EAAO,IAAIvC,MAAM2E,GACZ/F,EAAI,EAAGA,EAAI+F,IAAK/F,EACvB2D,EAAK3D,GAAKC,EAAID,GAChB,OAAO2D,CACT,CA2CA,SAASgR,EAA+BR,EAASva,EAAMyb,EAAUR,GAC/D,GAA0B,oBAAfV,EAAQW,GACbD,EAAMX,KACRC,EAAQD,KAAKta,EAAMyb,GAEnBlB,EAAQW,GAAGlb,EAAMyb,OAEd,IAAwC,oBAA7BlB,EAAQ8C,iBAYxB,MAAM,IAAIpU,UAAU,6EAA+EsR,GATnGA,EAAQ8C,iBAAiBrd,GAAM,SAASsd,EAAavU,GAG/CkS,EAAMX,MACRC,EAAQgD,oBAAoBvd,EAAMsd,GAEpC7B,EAAS1S,EACX,GAGF,CACF,CAraAH,OAAOmH,eAAeoK,EAAc,sBAAuB,CACzDnK,YAAY,EACZC,IAAK,WACH,OAAOsL,CACT,EACA5K,IAAK,SAAS5H,GACZ,GAAmB,kBAARA,GAAoBA,EAAM,GAAKkR,EAAYlR,GACpD,MAAM,IAAIL,WAAW,kGAAoGK,EAAM,KAEjIwS,EAAsBxS,CACxB,IAGFoR,EAAaC,KAAO,gBAEG9U,IAAjBqG,KAAKyP,SACLzP,KAAKyP,UAAYxS,OAAO4U,eAAe7R,MAAMyP,UAC/CzP,KAAKyP,QAAUxS,OAAOtJ,OAAO,MAC7BqM,KAAK0P,aAAe,GAGtB1P,KAAK2P,cAAgB3P,KAAK2P,oBAAiBhW,CAC7C,EAIA6U,EAAarR,UAAU2U,gBAAkB,SAAyBtR,GAChE,GAAiB,kBAANA,GAAkBA,EAAI,GAAK8N,EAAY9N,GAChD,MAAM,IAAIzD,WAAW,gFAAkFyD,EAAI,KAG7G,OADAR,KAAK2P,cAAgBnP,EACdR,IACT,EAQAwO,EAAarR,UAAU4U,gBAAkB,WACvC,OAAOhC,EAAiB/P,KAC1B,EAEAwO,EAAarR,UAAUoT,KAAO,SAActR,GAE1C,IADA,IAAIgP,EAAO,GACFxT,EAAI,EAAGA,EAAIiF,UAAUvE,OAAQV,IAAKwT,EAAKzS,KAAKkE,UAAUjF,IAC/D,IAAIuX,EAAoB,UAAT/S,EAEXkR,EAASnQ,KAAKyP,QAClB,QAAe9V,IAAXwW,EACF6B,EAAWA,QAA4BrY,IAAjBwW,EAAOhM,WAC1B,IAAK6N,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIC,EAGJ,GAFIhE,EAAK9S,OAAS,IAChB8W,EAAKhE,EAAK,IACRgE,aAAclW,MAGhB,MAAMkW,EAGR,IAAIhD,EAAM,IAAIlT,MAAM,oBAAsBkW,EAAK,KAAOA,EAAG9F,QAAU,IAAM,KAEzE,MADA8C,EAAIiD,QAAUD,EACRhD,CACR,CAEA,IAAII,EAAUc,EAAOlR,GAErB,QAAgBtF,IAAZ0V,EACF,OAAO,EAET,GAAuB,oBAAZA,EACTtB,EAAasB,EAASrP,KAAMiO,OAE5B,KAAInT,EAAMuU,EAAQlU,OACdgX,EAAYX,EAAWnC,EAASvU,GACpC,IAASL,EAAI,EAAGA,EAAIK,IAAOL,EACzBsT,EAAaoE,EAAU1X,GAAIuF,KAAMiO,EAHX,CAM1B,OAAO,CACT,EAgEAO,EAAarR,UAAUiV,YAAc,SAAqBnT,EAAM6Q,GAC9D,OAAOG,EAAajQ,KAAMf,EAAM6Q,GAAU,EAC5C,EAEAtB,EAAarR,UAAUoS,GAAKf,EAAarR,UAAUiV,YAEnD5D,EAAarR,UAAUkV,gBACnB,SAAyBpT,EAAM6Q,GAC7B,OAAOG,EAAajQ,KAAMf,EAAM6Q,GAAU,EAC5C,EAoBJtB,EAAarR,UAAUwR,KAAO,SAAc1P,EAAM6Q,GAGhD,OAFAD,EAAcC,GACd9P,KAAKuP,GAAGtQ,EAAM+R,EAAUhR,KAAMf,EAAM6Q,IAC7B9P,IACT,EAEAwO,EAAarR,UAAUmV,oBACnB,SAA6BrT,EAAM6Q,GAGjC,OAFAD,EAAcC,GACd9P,KAAKqS,gBAAgBpT,EAAM+R,EAAUhR,KAAMf,EAAM6Q,IAC1C9P,IACT,EAGJwO,EAAarR,UAAU+R,eACnB,SAAwBjQ,EAAM6Q,GAC5B,IAAIhL,EAAMqL,EAAQjZ,EAAUuD,EAAG8X,EAK/B,GAHA1C,EAAcC,QAGCnW,KADfwW,EAASnQ,KAAKyP,SAEZ,OAAOzP,KAGT,QAAarG,KADbmL,EAAOqL,EAAOlR,IAEZ,OAAOe,KAET,GAAI8E,IAASgL,GAAYhL,EAAKgL,WAAaA,EACb,MAAtB9P,KAAK0P,aACT1P,KAAKyP,QAAUxS,OAAOtJ,OAAO,cAEtBwc,EAAOlR,GACVkR,EAAOjB,gBACTlP,KAAKuQ,KAAK,iBAAkBtR,EAAM6F,EAAKgL,UAAYA,SAElD,GAAoB,oBAAThL,EAAqB,CAGrC,IAFA5N,GAAY,EAEPuD,EAAIqK,EAAK3J,OAAS,EAAGV,GAAK,EAAGA,IAChC,GAAIqK,EAAKrK,KAAOqV,GAAYhL,EAAKrK,GAAGqV,WAAaA,EAAU,CACzDyC,EAAmBzN,EAAKrK,GAAGqV,SAC3B5Y,EAAWuD,EACX,KACF,CAGF,GAAIvD,EAAW,EACb,OAAO8I,KAEQ,IAAb9I,EACF4N,EAAK0N,QAiIf,SAAmB1N,EAAM2N,GACvB,KAAOA,EAAQ,EAAI3N,EAAK3J,OAAQsX,IAC9B3N,EAAK2N,GAAS3N,EAAK2N,EAAQ,GAC7B3N,EAAK4N,KACP,CAnIUC,CAAU7N,EAAM5N,GAGE,IAAhB4N,EAAK3J,SACPgV,EAAOlR,GAAQ6F,EAAK,SAEQnL,IAA1BwW,EAAOjB,gBACTlP,KAAKuQ,KAAK,iBAAkBtR,EAAMsT,GAAoBzC,EAC1D,CAEA,OAAO9P,IACT,EAEJwO,EAAarR,UAAUyV,IAAMpE,EAAarR,UAAU+R,eAEpDV,EAAarR,UAAU0V,mBACnB,SAA4B5T,GAC1B,IAAIkT,EAAWhC,EAAQ1V,EAGvB,QAAed,KADfwW,EAASnQ,KAAKyP,SAEZ,OAAOzP,KAGT,QAA8BrG,IAA1BwW,EAAOjB,eAUT,OATyB,IAArBxP,UAAUvE,QACZ6E,KAAKyP,QAAUxS,OAAOtJ,OAAO,MAC7BqM,KAAK0P,aAAe,QACM/V,IAAjBwW,EAAOlR,KACY,MAAtBe,KAAK0P,aACT1P,KAAKyP,QAAUxS,OAAOtJ,OAAO,aAEtBwc,EAAOlR,IAEXe,KAIT,GAAyB,IAArBN,UAAUvE,OAAc,CAC1B,IACI2X,EADAC,EAAO9V,OAAO8V,KAAK5C,GAEvB,IAAK1V,EAAI,EAAGA,EAAIsY,EAAK5X,SAAUV,EAEjB,oBADZqY,EAAMC,EAAKtY,KAEXuF,KAAK6S,mBAAmBC,GAK1B,OAHA9S,KAAK6S,mBAAmB,kBACxB7S,KAAKyP,QAAUxS,OAAOtJ,OAAO,MAC7BqM,KAAK0P,aAAe,EACb1P,IACT,CAIA,GAAyB,oBAFzBmS,EAAYhC,EAAOlR,IAGjBe,KAAKkP,eAAejQ,EAAMkT,QACrB,QAAkBxY,IAAdwY,EAET,IAAK1X,EAAI0X,EAAUhX,OAAS,EAAGV,GAAK,EAAGA,IACrCuF,KAAKkP,eAAejQ,EAAMkT,EAAU1X,IAIxC,OAAOuF,IACT,EAmBJwO,EAAarR,UAAUgV,UAAY,SAAmBlT,GACpD,OAAOmS,EAAWpR,KAAMf,GAAM,EAChC,EAEAuP,EAAarR,UAAU6V,aAAe,SAAsB/T,GAC1D,OAAOmS,EAAWpR,KAAMf,GAAM,EAChC,EAEAuP,EAAaiD,cAAgB,SAAS7C,EAAS3P,GAC7C,MAAqC,oBAA1B2P,EAAQ6C,cACV7C,EAAQ6C,cAAcxS,GAEtBwS,EAAc3Q,KAAK8N,EAAS3P,EAEvC,EAEAuP,EAAarR,UAAUsU,cAAgBA,EAiBvCjD,EAAarR,UAAU8V,WAAa,WAClC,OAAOjT,KAAK0P,aAAe,EAAI9B,EAAe5N,KAAKyP,SAAW,EAChE,gBCxaAzV,EAAQoH,KAAO,SAAU9C,EAAQoD,EAAQwR,EAAMC,EAAMC,GACnD,IAAIpP,EAAGvD,EACH4S,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACT/Y,EAAIyY,EAAQE,EAAS,EAAK,EAC1BK,EAAIP,GAAQ,EAAI,EAChBQ,EAAIpV,EAAOoD,EAASjH,GAOxB,IALAA,GAAKgZ,EAELzP,EAAI0P,GAAM,IAAOF,GAAU,EAC3BE,KAAQF,EACRA,GAASH,EACFG,EAAQ,EAAGxP,EAAS,IAAJA,EAAW1F,EAAOoD,EAASjH,GAAIA,GAAKgZ,EAAGD,GAAS,GAKvE,IAHA/S,EAAIuD,GAAM,IAAOwP,GAAU,EAC3BxP,KAAQwP,EACRA,GAASL,EACFK,EAAQ,EAAG/S,EAAS,IAAJA,EAAWnC,EAAOoD,EAASjH,GAAIA,GAAKgZ,EAAGD,GAAS,GAEvE,GAAU,IAANxP,EACFA,EAAI,EAAIuP,MACH,IAAIvP,IAAMsP,EACf,OAAO7S,EAAIkT,IAAsB1G,KAAdyG,GAAK,EAAI,GAE5BjT,GAAQjP,KAAKmX,IAAI,EAAGwK,GACpBnP,GAAQuP,CACV,CACA,OAAQG,GAAK,EAAI,GAAKjT,EAAIjP,KAAKmX,IAAI,EAAG3E,EAAImP,EAC5C,EAEAnZ,EAAQ6D,MAAQ,SAAUS,EAAQvN,EAAO2Q,EAAQwR,EAAMC,EAAMC,GAC3D,IAAIpP,EAAGvD,EAAGiC,EACN2Q,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBM,EAAe,KAATT,EAAc3hB,KAAKmX,IAAI,GAAI,IAAMnX,KAAKmX,IAAI,GAAI,IAAM,EAC1DlO,EAAIyY,EAAO,EAAKE,EAAS,EACzBK,EAAIP,EAAO,GAAK,EAChBQ,EAAI3iB,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQS,KAAKub,IAAIhc,GAEbwd,MAAMxd,IAAUA,IAAUkc,KAC5BxM,EAAI8N,MAAMxd,GAAS,EAAI,EACvBiT,EAAIsP,IAEJtP,EAAIxS,KAAKib,MAAMjb,KAAKqiB,IAAI9iB,GAASS,KAAKsiB,KAClC/iB,GAAS2R,EAAIlR,KAAKmX,IAAI,GAAI3E,IAAM,IAClCA,IACAtB,GAAK,IAGL3R,GADEiT,EAAIuP,GAAS,EACNK,EAAKlR,EAELkR,EAAKpiB,KAAKmX,IAAI,EAAG,EAAI4K,IAEpB7Q,GAAK,IACfsB,IACAtB,GAAK,GAGHsB,EAAIuP,GAASD,GACf7S,EAAI,EACJuD,EAAIsP,GACKtP,EAAIuP,GAAS,GACtB9S,GAAM1P,EAAQ2R,EAAK,GAAKlR,KAAKmX,IAAI,EAAGwK,GACpCnP,GAAQuP,IAER9S,EAAI1P,EAAQS,KAAKmX,IAAI,EAAG4K,EAAQ,GAAK/hB,KAAKmX,IAAI,EAAGwK,GACjDnP,EAAI,IAIDmP,GAAQ,EAAG7U,EAAOoD,EAASjH,GAAS,IAAJgG,EAAUhG,GAAKgZ,EAAGhT,GAAK,IAAK0S,GAAQ,GAI3E,IAFAnP,EAAKA,GAAKmP,EAAQ1S,EAClB4S,GAAQF,EACDE,EAAO,EAAG/U,EAAOoD,EAASjH,GAAS,IAAJuJ,EAAUvJ,GAAKgZ,EAAGzP,GAAK,IAAKqP,GAAQ,GAE1E/U,EAAOoD,EAASjH,EAAIgZ,IAAU,IAAJC,CAC5B,YCpF6B,oBAAlBzW,OAAOtJ,OAEhB+a,EAAO1U,QAAU,SAAkB+Z,EAAMC,GACnCA,IACFD,EAAKE,OAASD,EACdD,EAAK5W,UAAYF,OAAOtJ,OAAOqgB,EAAU7W,UAAW,CAClD2O,YAAa,CACX/a,MAAOgjB,EACP1P,YAAY,EACZ2H,UAAU,EACVC,cAAc,KAItB,EAGAyC,EAAO1U,QAAU,SAAkB+Z,EAAMC,GACvC,GAAIA,EAAW,CACbD,EAAKE,OAASD,EACd,IAAIE,EAAW,WAAa,EAC5BA,EAAS/W,UAAY6W,EAAU7W,UAC/B4W,EAAK5W,UAAY,IAAI+W,EACrBH,EAAK5W,UAAU2O,YAAciI,CAC/B,CACF,8BCvBF9W,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAmBA,SAAoBma,GAClB,IAAIld,EAAOyI,UAAUvE,OAAS,QAAsBxB,IAAjB+F,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC5E0U,EAAsBnd,EAAKod,eAC3BA,OAAyC1a,IAAxBya,GAA2CA,EAC5DriB,EAAYkF,EAAKlF,UACjBuiB,EAAuBrd,EAAKsd,gBAK5BC,QAJ2C7a,IAAzB2a,EAAqC,SAAUE,GACnE,OAAOA,CACT,EAAIF,GAEwBG,EAAaC,QAAQC,SAASR,EAAM,CAAEE,eAAgBA,KAClF,OAAO,EAAIO,EAAeF,SAASF,EAAOziB,EAC5C,EA7BA,IAEI0iB,EAAeI,EAFDxY,EAAQ,OAMtBuY,EAAiBC,EAFDxY,EAAQ,MAI5B,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,+BCb9F5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAgBA,SAA8B+a,EAAMtC,EAAO1gB,GACzC,OAAOijB,EAAeN,QAAQK,EAAK9V,MAAM8V,EAAMtC,EAAO1gB,EACxD,EAhBA,IAIgC8M,EAJ5BoW,EAAgB5Y,EAAQ,MAExB2Y,GAE4BnW,EAFYoW,IAESpW,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,8BCTvF5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAUTiJ,EAAAA,QAAkB,CAAC,kBAAmB,QAAS,WAAY,UAAW,UAAW,WAAY,UAAW,QAAS,WAAY,iBAAkB,SAAU,OAAQ,WAAY,QAAS,aAAc,OAAQ,cAAe,WAAY,WAAY,WAAY,SAAU,WAAY,WAAY,sCCXjSiD,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAQTiJ,EAAAA,QAAkB,CAIhBkb,OAAQ,SACR,iBAAkB,gBAClBC,UAAW,YACXC,OAAQ,SACRC,gBAAiB,kBACjBC,kBAAmB,oBACnBC,IAAK,MACLC,GAAI,KACJC,MAAO,QACPC,aAAc,eACdC,SAAU,WACVC,QAAS,UACTC,YAAa,cACbC,YAAa,cACbC,QAAS,UACTC,UAAW,YACXjX,QAAS,UACTkX,KAAM,OACNC,QAAS,UACTC,MAAO,YACPC,KAAM,OACNC,QAAS,UACT9e,QAAS,UACT+e,gBAAiB,kBACjBC,YAAa,cACbC,SAAU,WACVC,aAAc,eACdC,OAAQ,SACRC,YAAa,cACbxX,KAAM,OACNyX,SAAU,WACVlC,QAAS,UACTmC,MAAO,QACPjW,IAAK,MACLkW,SAAU,WACVC,SAAU,WACVC,UAAW,YACXC,QAAS,UACTC,KAAM,OACNC,WAAY,aACZC,YAAa,cACbC,WAAY,aACZC,eAAgB,iBAChBC,WAAY,aACZC,YAAa,cACbC,QAAS,UACTjlB,OAAQ,SACRklB,OAAQ,SACRC,KAAM,OACNC,KAAM,OACNC,SAAU,WACVC,IAAK,UACL,aAAc,YACdC,KAAM,OACNC,GAAI,KACJC,UAAW,YACXC,UAAW,YACXC,GAAI,KACJC,UAAW,YACXC,QAAS,UACTC,KAAM,OACNC,MAAO,QACPC,KAAM,OACN1T,KAAM,OACN2T,KAAM,OACNC,IAAK,MACLC,SAAU,WACVC,aAAc,eACdC,YAAa,cACbtT,IAAK,MACLuT,UAAW,YACXC,MAAO,QACPC,WAAY,aACZC,OAAQ,SACRnW,IAAK,MACLoW,UAAW,YACXC,SAAU,WACVC,MAAO,QACP/kB,KAAM,OACNglB,MAAO,QACPC,WAAY,aACZC,KAAM,OACNC,QAAS,UACTC,QAAS,UACTC,YAAa,cACbC,YAAa,cACbC,OAAQ,SACRC,QAAS,UACTC,QAAS,UACTC,WAAY,aACZC,SAAU,WACVC,eAAgB,iBAChBC,IAAK,MACLC,SAAU,WACVC,SAAU,WACV3nB,KAAM,OACN4nB,KAAM,OACNC,QAAS,UACTC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,UAAW,YACXC,SAAU,WACVC,SAAU,WACVC,MAAO,QACPnqB,KAAM,OACNoqB,MAAO,QACP7lB,KAAM,OACN8lB,KAAM,OACNC,WAAY,aACZ3N,IAAK,MACL4N,OAAQ,SACRC,QAAS,UACTC,OAAQ,SACRlf,MAAO,QACPmf,KAAM,OACNzqB,MAAO,QACP0qB,QAAS,UACTC,SAAU,WACV5V,OAAQ,SACR6V,MAAO,QACPtc,KAAM,OACNuc,OAAQ,SACRzqB,MAAO,QACPwB,MAAO,QACPkpB,MAAO,QACPC,KAAM,OAINC,MAAO,QACPC,SAAU,WACVC,OAAQ,SACRC,OAAQ,SACRC,SAAU,WACVC,SAAU,WACVC,OAAQ,SACRC,MAAO,QAIPC,eAAgB,iBAChBC,YAAa,cACbC,SAAU,WACV/rB,MAAO,QACPgsB,SAAU,WACVC,UAAW,YACXC,SAAU,WACVC,OAAQ,SACRC,QAAS,UACTC,QAAS,UACTC,SAAU,WACVC,aAAc,2CCrKhB5f,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAOTiJ,EAAAA,QAAkB,CAAC,OAAQ,OAAQ,KAAM,MAAO,UAAW,QAAS,KAAM,MAAO,QAAS,SAAU,OAAQ,OAAQ,QAAS,SAAU,QAAS,mCCRhJiD,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAmBA,SAA0B+a,EAAMtC,GAI9B,IAAI1b,OAAS,EACTge,EAAKxgB,SAAS4G,OAAS,IACzBpE,EAASge,EAAKxgB,SAAS,GAAG4K,MAI5B,IAAIlP,GAAQ,EAAI6sB,EAA8BpI,SAASK,EAAKgI,QAAStK,GAGrE,OAAOuK,EAAQtI,QAAQuI,cAAc,QAAShtB,EAAO8G,EACvD,EA/BA,IAEIimB,EAAUnI,EAFDxY,EAAQ,OAMjBygB,EAAgCjI,EAFDxY,EAAQ,OAI3C,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,+BCb9F5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAgCA,SAAwB+a,EAAMtC,EAAO1gB,GAEnC,IAAImrB,EAAUnI,EAAK1gB,KAGnB,KAAK,EAAI8oB,EAA4BzI,SAASwI,GAC5C,OAAO,KAIT,IAAIjtB,GAAQ,EAAI6sB,EAA8BpI,SAASK,EAAKgI,QAAStK,GAGjEle,EAAW,MACkC,IAA7C6oB,EAAe1I,QAAQ1Y,QAAQkhB,KACjC3oB,GAAW,EAAIqgB,EAAeF,SAASK,EAAKxgB,SAAUxC,IAIxD,OAAOirB,EAAQtI,QAAQuI,cAAcC,EAASjtB,EAAOsE,EACvD,EAlDA,IAEIyoB,EAAUnI,EAFDxY,EAAQ,OAMjBuY,EAAiBC,EAFDxY,EAAQ,MAMxBygB,EAAgCjI,EAFDxY,EAAQ,OAMvC+gB,EAAiBvI,EAFDxY,EAAQ,OAMxB8gB,EAA8BtI,EAFDxY,EAAQ,OAIzC,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,6BCzB9F5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAOA,SAAyB+a,GAGvB,OAAOA,EAAK5V,IACd,6BCdAlC,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAKA,WAIE,OAAO,IACT,+BCTA,IAAIqjB,EAJJpgB,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAKT,IAAIusB,EAAcjhB,EAAQ,MAItBkhB,EAAoB1I,EAFDxY,EAAQ,OAM3BmhB,EAAmB3I,EAFDxY,EAAQ,OAM1BohB,EAAqB5I,EAFDxY,EAAQ,MAM5BqhB,EAA2B7I,EAFDxY,EAAQ,OAItC,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,CAE9F,SAAS8e,EAAgB9e,EAAKiU,EAAK/hB,GAAiK,OAApJ+hB,KAAOjU,EAAO5B,OAAOmH,eAAevF,EAAKiU,EAAK,CAAE/hB,MAAOA,EAAOsT,YAAY,EAAM4H,cAAc,EAAMD,UAAU,IAAkBnN,EAAIiU,GAAO/hB,EAAgB8N,CAAK,CAMhN7E,EAAAA,SAA+C2jB,EAA5BN,EAAwB,CAAC,EAA0CC,EAAYM,YAAYC,KAAMN,EAAkB7I,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYE,IAAKN,EAAiB9I,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYG,MAAON,EAAmB/I,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYI,UAAWN,EAAyBhJ,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYK,QAASP,EAAyBhJ,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYM,OAAQR,EAAyBhJ,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYO,MAAOT,EAAyBhJ,SAAUiJ,EAAgBN,EAAuBC,EAAYM,YAAYQ,QAASV,EAAyBhJ,SAAU2I,gCC3Bx2B,IAAIgB,EAAgBhiB,EAAQ,KAS5B,IAAIiiB,EAAwBjiB,EAAQ,MASpC,IAAIihB,EAAcjhB,EAAQ,MAS1B,IAEIkiB,EAAe1J,EAFDxY,EAAQ,MAI1B,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,CAE9F7E,EAAQ,GAAUukB,EAAa7J,oCCtC/BzX,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAmBA,SAAsBwa,EAAOziB,GAE3B,OAAOyiB,EAAMgK,QAAO,SAAUzJ,GAC5B,QAAQ,EAAI0J,EAAkB/J,SAASK,EACzC,IAAG2J,KAAI,SAAU3J,EAAMtC,GAGrB,IAAIkM,OAAc,EAClB,MAAyB,oBAAd5sB,GAEW,QADpB4sB,EAAc5sB,EAAUgjB,EAAMtC,MACAkM,GAMzB,EAAIC,EAAuBlK,SAASK,EAAMtC,EAAO1gB,GAL7C4sB,CAMb,GACF,EAnCA,IAEIF,EAAoB5J,EAFDxY,EAAQ,OAM3BuiB,EAAyB/J,EAFDxY,EAAQ,OAIpC,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,+BCb9F5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAGT,IAAIiB,EAAWiL,OAAO4hB,QAAU,SAAUnZ,GAAU,IAAK,IAAIjL,EAAI,EAAGA,EAAIiF,UAAUvE,OAAQV,IAAK,CAAE,IAAIqkB,EAASpf,UAAUjF,GAAI,IAAK,IAAIqY,KAAOgM,EAAc7hB,OAAOE,UAAU4hB,eAAeje,KAAKge,EAAQhM,KAAQpN,EAAOoN,GAAOgM,EAAOhM,GAAU,CAAE,OAAOpN,CAAQ,EAE/P1L,EAAAA,QAkBA,SAAqCglB,EAAYlM,GAG/C,IAAI7iB,EAAQ+B,EAAS,CAAC,GAAG,EAAIitB,EAAwBvK,SAASsK,GAAa,CAAElM,IAAKA,IAIvD,kBAAhB7iB,EAAMU,OAAsBV,EAAMU,iBAAiBwQ,OAC5DlR,EAAMU,OAAQ,EAAIuuB,EAAsBxK,SAASzkB,EAAMU,cAEhDV,EAAMU,MAGf,OAAOV,CACT,EA9BA,IAEIgvB,EAA0BpK,EAFDxY,EAAQ,OAMjC6iB,EAAwBrK,EAFDxY,EAAQ,OAInC,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,+BChB9F5B,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QA4CA,SAA+BglB,GAE7B,OAAO/hB,OAAO8V,KAAKiM,GAAYR,QAAO,SAAUW,GAC9C,OAAO,EAAIhC,EAA4BzI,SAASyK,EAClD,IAAGC,QAAO,SAAUC,EAAkBC,GAGpC,IAAIC,EAAqBD,EAAUxf,cAG/BzL,EAAOmrB,EAAkB9K,QAAQ6K,IAAuBA,EAK5D,OAFAF,EAAiBhrB,GAAQorB,EAAwBprB,EAAM2qB,EAAWM,IAE3DD,CACT,GAAG,CAAC,EACN,EA3DA,IAEIK,EAAsB7K,EAFDxY,EAAQ,OAM7BmjB,EAAoB3K,EAFDxY,EAAQ,KAM3B8gB,EAA8BtI,EAFDxY,EAAQ,OAIzC,SAASwY,EAAuBhW,GAAO,OAAOA,GAAOA,EAAIiW,WAAajW,EAAM,CAAE6V,QAAS7V,EAAO,CAS9F,IAAI4gB,EAA0B,SAAiCH,EAAWvuB,GAWxE,OAP6B2uB,EAAoBhL,QAAQgK,KAAI,SAAUS,GACrE,OAAOA,EAAKrf,aACd,IAC2B9D,QAAQsjB,EAAUxf,gBAAkB,IAC7D/O,EAAQuuB,GAGHvuB,CACT,6BCtCAkM,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAGT,IAAI4uB,EAAgb,SAAUjlB,EAAKD,GAAK,GAAIoB,MAAMqD,QAAQxE,GAAQ,OAAOA,EAAY,GAAI8B,OAAOojB,YAAY3iB,OAAOvC,GAAQ,OAAxf,SAAuBA,EAAKD,GAAK,IAAIyL,EAAO,GAAQ2Z,GAAK,EAAUC,GAAK,EAAWC,OAAKpmB,EAAW,IAAM,IAAK,IAAiCqmB,EAA7BC,EAAKvlB,EAAI8B,OAAOojB,cAAmBC,GAAMG,EAAKC,EAAGC,QAAQC,QAAoBja,EAAK1K,KAAKwkB,EAAGjvB,QAAY0J,GAAKyL,EAAK/K,SAAWV,GAA3DolB,GAAK,GAAkE,CAAE,MAAO5Q,GAAO6Q,GAAK,EAAMC,EAAK9Q,CAAK,CAAE,QAAU,KAAW4Q,GAAMI,EAAW,QAAGA,EAAW,QAAK,CAAE,QAAU,GAAIH,EAAI,MAAMC,CAAI,CAAE,CAAE,OAAO7Z,CAAM,CAAuHka,CAAc1lB,EAAKD,GAAa,MAAM,IAAI6C,UAAU,uDAA2D,EAEjpBtD,EAAAA,QAOA,WACE,IAAIqmB,EAAc3gB,UAAUvE,OAAS,QAAsBxB,IAAjB+F,UAAU,GAAmBA,UAAU,GAAK,GAItF,GAAoB,KAAhB2gB,EACF,MAAO,CAAC,EAGV,OAAOA,EAAYlT,MAAM,KAAKiS,QAAO,SAAUkB,EAAaC,GAG1D,IAAIC,EAAwBD,EAAmBpT,MAAM,aAAaqR,QAAO,SAAU7d,EAAKlG,GACtF,OAAOA,EAAI,CACb,IAAGikB,KAAI,SAAU+B,GACf,OAAOA,EAAKhb,OAAO3F,aACrB,IACI4gB,EAAyBf,EAAea,EAAuB,GAC/DzE,EAAW2E,EAAuB,GAClC3vB,EAAQ2vB,EAAuB,GAKnC,YAAc/mB,IAAV5I,IAcJuvB,EALAvE,EAAWA,EAASvW,QAAQ,QAAS,OAAOA,QAAQ,SAAS,SAAUmb,EAAGC,GACxE,OAAOA,EAAUC,aACnB,KAGwB9vB,GAbfuvB,CAgBX,GAAG,CAAC,EACN,6BCvDArjB,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAQA,SAAyB+a,GACvB,MAAqB,SAAdA,EAAK9V,MAAmB,QAAQ6hB,KAAK/L,EAAK5V,OAA8B,KAArB4V,EAAK5V,KAAKsG,MACtE,6BCbAxI,OAAOmH,eAAepK,EAAS,aAAc,CAC3CjJ,OAAO,IAETiJ,EAAAA,QAKA,SAAmCkjB,GAC5B6D,EAAUhC,eAAe7B,KAC5B6D,EAAU7D,GAAW8D,EAAgBF,KAAK5D,IAE5C,OAAO6D,EAAU7D,EACnB,EATA,IAAI8D,EAAkB,8BAElBD,EAAY,CAAC,kBCLjB,IAAInD,EAAcvhB,EAAQ,MACtB4kB,EAAW5kB,EAAQ,MAMnB6kB,EAAe7kB,EAAQ,MAC3B6kB,EAAaC,aAAaC,UAAY,KACtCF,EAAaG,eAAeD,UAAY,KAExC,IAAIE,EAAoB,CACtBF,UAAW,KACXzwB,OAAO,EACP4wB,QAAQ,EACRC,KAAK,EACLC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,WAAW,EACXC,UAAU,GAwCZ,IAAIC,EAAY,CACdV,UAAW,KACXW,MAAM,EACNC,MAAM,EACNC,UAAU,EACVC,IAAI,EACJC,KAAK,EACLC,SAAS,EACTC,OAAO,EACPC,OAAO,EACPC,IAAI,EACJC,KAAK,EACL7V,OAAO,EACP8V,SAAS,EACTC,QAAQ,EACRC,MAAM,EACNC,MAAM,EACNC,OAAO,EACP/D,QAAQ,EACRgE,OAAO,EACPC,KAAK,GAGHC,EAAUtU,EAAO1U,QAAU,SAASipB,EAAKC,GACtCrnB,MAAMqD,QAAQ+jB,IAASA,EAAIE,UAASF,EAAM,CAACA,IAChDC,EAAOA,GAAQ,CAAC,EAIhB,IAFA,IAAIvuB,EAAS,GAEJ8F,EAAI,EAAGA,EAAIwoB,EAAI9nB,OAAQV,IAAK,CACnC,IAAI2oB,EAAOH,EAAIxoB,GAEG,SAAd2oB,EAAKnkB,KAAiBtK,GAAUquB,EAAOI,EAAK7uB,SAAU2uB,GACjDtF,EAAYyF,MAAMD,GAAOzuB,GAAU2uB,EAAUF,EAAMF,GACnDE,EAAKnkB,OAAS2e,EAAYI,UACjCrpB,GAAU4uB,EAAgBH,GACnBA,EAAKnkB,OAAS2e,EAAYK,QAAStpB,GAAU6uB,EAAcJ,GAC3DA,EAAKnkB,OAAS2e,EAAYO,MAAOxpB,GAAU8uB,EAAYL,GAC3DzuB,GAAU+uB,EAAWN,EAAMF,EAClC,CAEA,OAAOvuB,CACT,EAEIgvB,EAA+B,CACjC,KACA,KACA,KACA,KACA,QACA,iBACA,gBACA,OACA,SAGF,SAASL,EAAUF,EAAMF,GAEF,YAAjBA,EAAKU,UAEPR,EAAK/uB,KAAO6sB,EAAaC,aAAaiC,EAAK/uB,OAAS+uB,EAAK/uB,KAGvD+uB,EAAKS,QACLF,EAA6B3nB,QAAQonB,EAAKS,OAAOxvB,OAAS,IAE1D6uB,EAAOjmB,OAAO4hB,OAAO,CAAC,EAAGqE,EAAM,CAAEU,SAAS,OAEzCV,EAAKU,SAAW,CAAC,MAAO,QAAQ5nB,QAAQonB,EAAK/uB,OAAS,IACzD6uB,EAAOjmB,OAAO4hB,OAAO,CAAC,EAAGqE,EAAM,CAAEU,QAAS,aAG5C,IAAIE,EAAM,IAAMV,EAAK/uB,KACjB0oB,EA3GN,SAAqBiC,EAAYkE,GAC/B,GAAKlE,EAAL,CAEA,IACIjuB,EADA4D,EAAS,GAIb,IAAK,IAAIme,KAAOkM,EACdjuB,EAAQiuB,EAAWlM,GACfne,IACFA,GAAU,KAGS,YAAjBuuB,EAAKU,UAEP9Q,EAAMoO,EAAaG,eAAevO,IAAQA,GAE5Cne,GAAUme,GACK,OAAV/hB,GAA4B,KAAVA,GAAiBmyB,EAAKU,WAC3CjvB,GACE,MACCuuB,EAAK7O,eACF4M,EAAS8C,UAAUhzB,GACnBA,EAAMyU,QAAQ,MAAO,WACzB,KAIN,OAAO7Q,CA3BgB,CA4BzB,CA8EgBqvB,CAAYZ,EAAKrG,QAASmG,GAmBxC,OAjBInG,IACF+G,GAAO,IAAM/G,IAGXmG,EAAKU,SAAaR,EAAK7uB,UAAqC,IAAzB6uB,EAAK7uB,SAAS4G,QAGnD2oB,GAAO,IACHV,EAAK7uB,WACPuvB,GAAOd,EAAOI,EAAK7uB,SAAU2uB,IAG1BpB,EAAUsB,EAAK/uB,QAAS6uB,EAAKU,UAChCE,GAAO,KAAOV,EAAK/uB,KAAO,MAR5ByvB,GAAO,KAYFA,CACT,CAEA,SAASP,EAAgBH,GACvB,MAAO,IAAMA,EAAKjkB,KAAO,GAC3B,CAEA,SAASukB,EAAWN,EAAMF,GACxB,IAAI/jB,EAAOikB,EAAKjkB,MAAQ,GAUxB,OANE+jB,EAAK7O,gBACH+O,EAAKS,QAAUT,EAAKS,OAAOxvB,QAAQitB,IAErCniB,EAAO8hB,EAAS8C,UAAU5kB,IAGrBA,CACT,CAEA,SAASskB,EAAYL,GACnB,MAAO,YAAcA,EAAK7uB,SAAS,GAAG4K,KAAO,KAC/C,CAEA,SAASqkB,EAAcJ,GACrB,MAAO,UAASA,EAAKjkB,KAAO,QAC9B,6BClLA,IAAIye,EAHJ3gB,OAAOmH,eAAepK,EAAS,aAAc,CAAEjJ,OAAO,IACtDiJ,EAAQokB,QAAUpkB,EAAQmkB,MAAQnkB,EAAQ8jB,IAAM9jB,EAAQ+jB,MAAQ/jB,EAAQkkB,OAASlkB,EAAQikB,QAAUjkB,EAAQgkB,UAAYhkB,EAAQ6jB,KAAO7jB,EAAQiqB,KAAOjqB,EAAQqpB,MAAQrpB,EAAQ4jB,iBAAc,EAG3L,SAAWA,GAEPA,EAAkB,KAAI,OAEtBA,EAAkB,KAAI,OAEtBA,EAAuB,UAAI,YAE3BA,EAAqB,QAAI,UAEzBA,EAAoB,OAAI,SAExBA,EAAmB,MAAI,QAEvBA,EAAiB,IAAI,MAErBA,EAAmB,MAAI,QAEvBA,EAAqB,QAAI,SAC5B,CAnBD,CAmBGA,EAAc5jB,EAAQ4jB,cAAgB5jB,EAAQ4jB,YAAc,CAAC,IAWhE5jB,EAAQqpB,MALR,SAAeD,GACX,OAAQA,EAAKnkB,OAAS2e,EAAYE,KAC9BsF,EAAKnkB,OAAS2e,EAAYM,QAC1BkF,EAAKnkB,OAAS2e,EAAYG,KAClC,EAIA/jB,EAAQiqB,KAAOrG,EAAYqG,KAE3BjqB,EAAQ6jB,KAAOD,EAAYC,KAE3B7jB,EAAQgkB,UAAYJ,EAAYI,UAEhChkB,EAAQikB,QAAUL,EAAYK,QAE9BjkB,EAAQkkB,OAASN,EAAYM,OAE7BlkB,EAAQ+jB,MAAQH,EAAYG,MAE5B/jB,EAAQ8jB,IAAMF,EAAYE,IAE1B9jB,EAAQmkB,MAAQP,EAAYO,MAE5BnkB,EAAQokB,QAAUR,EAAYQ,0CCrD9B,IAAI8F,EAAmBlkB,MAAQA,KAAKkkB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrP,WAAcqP,EAAM,CAAE,QAAWA,EACxD,EACAlnB,OAAOmH,eAAepK,EAAS,aAAc,CAAEjJ,OAAO,IACtDiJ,EAAQoqB,WAAapqB,EAAQqqB,iBAAmBrqB,EAAQsqB,eAAY,EACpE,IAAIC,EAAkBL,EAAgB7nB,EAAQ,OAC1CmoB,EAAgBN,EAAgB7nB,EAAQ,OACxCooB,EAAaP,EAAgB7nB,EAAQ,OACrCqoB,EAAqBR,EAAgB7nB,EAAQ,OAC7CsoB,EAAiB,4CAGrB,SAASC,EAAiBlG,GACtB,IAAIlZ,EAAUqf,EAAYnG,GAC1B,OAAO,SAAUtc,GAAO,OAAOjB,OAAOiB,GAAKoD,QAAQmf,EAAgBnf,EAAU,CACjF,CALAxL,EAAQsqB,UAAYM,EAAiBH,EAAW/P,SAChD1a,EAAQqqB,iBAAmBO,EAAiBL,EAAgB7P,SAK5D,IAAIoQ,EAAS,SAAUngB,EAAG/F,GAAK,OAAQ+F,EAAI/F,EAAI,GAAK,CAAI,EAuBxD,SAASimB,EAAYnG,GACjB,OAAO,SAAiBtc,GACpB,GAAsB,MAAlBA,EAAI2iB,OAAO,GAAY,CACvB,IAAIC,EAAa5iB,EAAI2iB,OAAO,GAC5B,MAAmB,MAAfC,GAAqC,MAAfA,EACfN,EAAmBhQ,QAAQ3S,SAASK,EAAIJ,OAAO,GAAI,KAEvD0iB,EAAmBhQ,QAAQ3S,SAASK,EAAIJ,OAAO,GAAI,IAC9D,CAEA,OAAO0c,EAAItc,EAAItE,MAAM,GAAI,KAAOsE,CACpC,CACJ,CAlCApI,EAAQoqB,WAAc,WAGlB,IAFA,IAAIa,EAAShoB,OAAO8V,KAAKyR,EAAc9P,SAASwQ,KAAKJ,GACjD/R,EAAO9V,OAAO8V,KAAKwR,EAAgB7P,SAASwQ,KAAKJ,GAC5CrqB,EAAI,EAAG+G,EAAI,EAAG/G,EAAIsY,EAAK5X,OAAQV,IAChCwqB,EAAOzjB,KAAOuR,EAAKtY,IACnBsY,EAAKtY,IAAM,KACX+G,KAGAuR,EAAKtY,IAAM,IAGnB,IAAI0qB,EAAK,IAAIC,OAAO,OAASrS,EAAKpX,KAAK,KAAO,gCAAiC,KAC3E6J,EAAUqf,EAAYN,EAAgB7P,SAC1C,SAAS2Q,EAASjjB,GAGd,MAFuB,MAAnBA,EAAIJ,QAAQ,KACZI,GAAO,KACJoD,EAAQpD,EACnB,CAEA,OAAO,SAAUA,GAAO,OAAOjB,OAAOiB,GAAKoD,QAAQ2f,EAAIE,EAAW,CACtE,CArBsB,sCCjBtB,IAAInB,EAAmBlkB,MAAQA,KAAKkkB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrP,WAAcqP,EAAM,CAAE,QAAWA,EACxD,EACAlnB,OAAOmH,eAAepK,EAAS,aAAc,CAAEjJ,OAAO,IACtD,IAAIu0B,EAAgBpB,EAAgB7nB,EAAQ,MAExCkpB,EAEJpkB,OAAOokB,eACH,SAAUtiB,GACN,IAAItO,EAAS,GAOb,OANIsO,EAAY,QACZA,GAAa,MACbtO,GAAUwM,OAAOsC,aAAeR,IAAc,GAAM,KAAS,OAC7DA,EAAY,MAAsB,KAAZA,GAE1BtO,GAAUwM,OAAOsC,aAAaR,EAElC,EAUJjJ,EAAAA,QATA,SAAyBiJ,GACrB,OAAKA,GAAa,OAAUA,GAAa,OAAWA,EAAY,QACrD,UAEPA,KAAaqiB,EAAc5Q,UAC3BzR,EAAYqiB,EAAc5Q,QAAQzR,IAE/BsiB,EAActiB,GACzB,qCC3BA,IAAIihB,EAAmBlkB,MAAQA,KAAKkkB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrP,WAAcqP,EAAM,CAAE,QAAWA,EACxD,EACAlnB,OAAOmH,eAAepK,EAAS,aAAc,CAAEjJ,OAAO,IACtDiJ,EAAQwrB,WAAaxrB,EAAQyrB,OAASzrB,EAAQ0rB,mBAAqB1rB,EAAQ2rB,WAAa3rB,EAAQ+pB,eAAY,EAC5G,IACI6B,EAAaC,EADA3B,EAAgB7nB,EAAQ,OACCqY,SACtCoR,EAAcC,EAAmBH,GAQrC5rB,EAAQ+pB,UAAYiC,EAAgBJ,GACpC,IAiFoBK,EAASd,EAhFzBe,EAAcL,EADI3B,EAAgB7nB,EAAQ,OACEqY,SAC5CyR,EAAeJ,EAAmBG,GAoBtC,SAASL,EAAchnB,GACnB,OAAO5B,OAAO8V,KAAKlU,GACdqmB,OACA9F,QAAO,SAAU6G,EAAS5xB,GAE3B,OADA4xB,EAAQpnB,EAAIxK,IAAS,IAAMA,EAAO,IAC3B4xB,CACX,GAAG,CAAC,EACR,CACA,SAASF,EAAmBE,GAGxB,IAFA,IAAIG,EAAS,GACTjN,EAAW,GACN8G,EAAK,EAAGoG,EAAKppB,OAAO8V,KAAKkT,GAAUhG,EAAKoG,EAAGlrB,OAAQ8kB,IAAM,CAC9D,IAAIqG,EAAID,EAAGpG,GACM,IAAbqG,EAAEnrB,OAEFirB,EAAO5qB,KAAK,KAAO8qB,GAInBnN,EAAS3d,KAAK8qB,EAEtB,CAEAF,EAAOlB,OACP,IAAK,IAAIjpB,EAAQ,EAAGA,EAAQmqB,EAAOjrB,OAAS,EAAGc,IAAS,CAGpD,IADA,IAAIC,EAAMD,EACHC,EAAMkqB,EAAOjrB,OAAS,GACzBirB,EAAOlqB,GAAKlB,WAAW,GAAK,IAAMorB,EAAOlqB,EAAM,GAAGlB,WAAW,IAC7DkB,GAAO,EAEX,IAAIyU,EAAQ,EAAIzU,EAAMD,EAElB0U,EAAQ,GAEZyV,EAAOG,OAAOtqB,EAAO0U,EAAOyV,EAAOnqB,GAAS,IAAMmqB,EAAOlqB,GAC7D,CAEA,OADAid,EAAS3I,QAAQ,IAAM4V,EAAOzqB,KAAK,IAAM,KAClC,IAAIypB,OAAOjM,EAASxd,KAAK,KAAM,IAC1C,CAhDA3B,EAAQ2rB,YAoEYM,EApEYC,EAoEHf,EApEgBgB,EAqElC,SAAUhnB,GACb,OAAOA,EACFqG,QAAQ2f,GAAI,SAAU9wB,GAAQ,OAAO4xB,EAAQ5xB,EAAO,IACpDmR,QAAQghB,EAAYC,EAC7B,GAjEJzsB,EAAQ0rB,mBAAqBM,EAAgBE,GA0C7C,IAAIM,EAAa,0IACbE,EAE4B,MAAhCvlB,OAAOhE,UAAUwpB,YAET,SAAUvkB,GAAO,OAAOA,EAAIukB,YAAY,EAAI,EAE5C,SAAUjkB,GACN,OAAoC,MAA5BA,EAAE1H,WAAW,GAAK,OACtB0H,EAAE1H,WAAW,GACb,MACA,KACR,EACR,SAASyrB,EAAmB/jB,GACxB,MAAO,OAASA,EAAEvH,OAAS,EAAIurB,EAAahkB,GAAKA,EAAE1H,WAAW,IACzDwE,SAAS,IACTqhB,cAAgB,GACzB,CAQA,IAAI+F,EAAgB,IAAIxB,OAAOU,EAAYhH,OAAS,IAAM0H,EAAW1H,OAAQ,KA0B7E,SAASkH,EAAgBnnB,GACrB,OAAO,SAAUM,GACb,OAAOA,EAAKqG,QAAQohB,GAAe,SAAUlkB,GAAK,OAAO7D,EAAI6D,IAAM+jB,EAAmB/jB,EAAI,GAC9F,CACJ,CAjBA1I,EAAQyrB,OAHR,SAAgBtmB,GACZ,OAAOA,EAAKqG,QAAQohB,EAAeH,EACvC,EAaAzsB,EAAQwrB,WAHR,SAAoBrmB,GAChB,OAAOA,EAAKqG,QAAQsgB,EAAaW,EACrC,+BChIAxpB,OAAOmH,eAAepK,EAAS,aAAc,CAAEjJ,OAAO,IACtDiJ,EAAQ6sB,gBAAkB7sB,EAAQ8sB,kBAAoB9sB,EAAQ+sB,kBAAoB/sB,EAAQgtB,YAAchtB,EAAQitB,YAAcjtB,EAAQqqB,iBAAmBrqB,EAAQoqB,WAAapqB,EAAQsqB,UAAYtqB,EAAQktB,YAAcltB,EAAQmtB,YAAcntB,EAAQwrB,WAAaxrB,EAAQyrB,OAASzrB,EAAQ0rB,mBAAqB1rB,EAAQ2rB,WAAa3rB,EAAQ+pB,UAAY/pB,EAAQotB,OAASptB,EAAQqtB,aAAertB,EAAQstB,YAAS,EACnZ,IAAIC,EAAWlrB,EAAQ,KACnBmrB,EAAWnrB,EAAQ,MAWvBrC,EAAQstB,OAHR,SAAgBnoB,EAAMsoB,GAClB,QAASA,GAASA,GAAS,EAAIF,EAASjD,UAAYiD,EAASnD,YAAYjlB,EAC7E,EAYAnF,EAAQqtB,aAHR,SAAsBloB,EAAMsoB,GACxB,QAASA,GAASA,GAAS,EAAIF,EAASjD,UAAYiD,EAASlD,kBAAkBllB,EACnF,EAYAnF,EAAQotB,OAHR,SAAgBjoB,EAAMsoB,GAClB,QAASA,GAASA,GAAS,EAAID,EAASzD,UAAYyD,EAAS7B,YAAYxmB,EAC7E,EAEA,IAAIuoB,EAAWrrB,EAAQ,MACvBY,OAAOmH,eAAepK,EAAS,YAAa,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAAS3D,SAAW,IAC9G9mB,OAAOmH,eAAepK,EAAS,aAAc,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAAS/B,UAAY,IAChH1oB,OAAOmH,eAAepK,EAAS,qBAAsB,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAAShC,kBAAoB,IAChIzoB,OAAOmH,eAAepK,EAAS,SAAU,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAASjC,MAAQ,IACxGxoB,OAAOmH,eAAepK,EAAS,aAAc,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAASlC,UAAY,IAEhHvoB,OAAOmH,eAAepK,EAAS,cAAe,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAAS/B,UAAY,IACjH1oB,OAAOmH,eAAepK,EAAS,cAAe,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOojB,EAAS/B,UAAY,IACjH,IAAIgC,EAAWtrB,EAAQ,KACvBY,OAAOmH,eAAepK,EAAS,YAAa,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAASrD,SAAW,IAC9GrnB,OAAOmH,eAAepK,EAAS,aAAc,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAASvD,UAAY,IAChHnnB,OAAOmH,eAAepK,EAAS,mBAAoB,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAAStD,gBAAkB,IAE5HpnB,OAAOmH,eAAepK,EAAS,cAAe,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAASvD,UAAY,IACjHnnB,OAAOmH,eAAepK,EAAS,cAAe,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAASvD,UAAY,IACjHnnB,OAAOmH,eAAepK,EAAS,oBAAqB,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAAStD,gBAAkB,IAC7HpnB,OAAOmH,eAAepK,EAAS,oBAAqB,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAAStD,gBAAkB,IAC7HpnB,OAAOmH,eAAepK,EAAS,kBAAmB,CAAEqK,YAAY,EAAMC,IAAK,WAAc,OAAOqjB,EAASrD,SAAW,cCvDpH5V,EAAO1U,QAAU,CAChB6jB,KAAM,OACNG,UAAW,YACXC,QAAS,UACTC,OAAQ,SACRH,MAAO,QACPD,IAAK,MACLK,MAAO,QACPC,QAAS,UAETiF,MAAO,SAASD,GACf,MAAqB,QAAdA,EAAKnkB,MAAgC,WAAdmkB,EAAKnkB,MAAmC,UAAdmkB,EAAKnkB,IAC9D,mBCbD,IAAI2e,EAAcvhB,EAAQ,MAEtBurB,EAAgB,OAChBC,EAAgBxrB,EAAQ,MACxByrB,EAAmBzrB,EAAQ,KAE/B,SAAS0rB,EAAWC,EAAUC,EAASC,GACf,kBAAbF,GACTE,EAAYD,EACZA,EAAUD,EACVA,EAAW,MACiB,oBAAZC,IAChBC,EAAYD,EACZA,EAAUE,GAEXnoB,KAAKooB,UAAYJ,EACjBhoB,KAAKqoB,SAAWJ,GAAWE,EAC3BnoB,KAAKsoB,WAAaJ,EAClBloB,KAAKijB,IAAM,GACXjjB,KAAKuoB,OAAQ,EACbvoB,KAAKwoB,UAAY,GACjBxoB,KAAKyoB,QAAUzoB,KAAKyoB,SAAW,IAChC,CAGA,IAAIN,EAAc,CACjBO,qBAAqB,EACrBC,kBAAkB,EAClBC,gBAAgB,GAGjBb,EAAW5qB,UAAU0rB,aAAe,SAASC,GAC5C9oB,KAAKyoB,QAAUK,CAChB,EAGAf,EAAW5qB,UAAU4rB,QAAU,WAC9BhB,EAAWjnB,KAAKd,KAAMA,KAAKooB,UAAWpoB,KAAKqoB,SAAUroB,KAAKsoB,WAC3D,EAGAP,EAAW5qB,UAAU6rB,MAAQ,WACzBhpB,KAAKuoB,QACRvoB,KAAKuoB,OAAQ,EACbvoB,KAAKyoB,QAAU,KACfzoB,KAAKipB,gBAAgB,MACtB,EAEAlB,EAAW5qB,UAAU8rB,gBACrBlB,EAAW5qB,UAAU+rB,QAAU,SAAS/kB,GACvC,GAA6B,oBAAnBnE,KAAKooB,UACdpoB,KAAKooB,UAAUjkB,EAAOnE,KAAKijB,UAE3B,GAAG9e,EAAO,MAAMA,CAElB,EAEA4jB,EAAW5qB,UAAUgsB,WAAa,WAGjC,IAAI/F,EAAOpjB,KAAKwoB,UAAU9V,MAEvB1S,KAAKqoB,SAASO,gBAAkBxF,IAClCA,EAAKgG,SAAWppB,KAAKyoB,QAAQW,UAG3BppB,KAAKsoB,YAAYtoB,KAAKsoB,WAAWlF,EACrC,EAEA2E,EAAW5qB,UAAUksB,kBAAoB,SAASC,GACjD,IAAKtpB,KAAKqoB,SAASkB,YAAa,OAAOD,EAEvC,IAAIE,EAOJ,IAAK,IAAI1W,KALR0W,EADuB,QAApBF,EAAWrqB,KACJhC,OAAOtJ,OAAOm0B,GAEd7qB,OAAOtJ,OAAOk0B,GAGTyB,EACXA,EAAWvK,eAAejM,KAC7B0W,EAAQ1W,GAAOwW,EAAWxW,IAI5B,OAAO0W,CACR,EAEAzB,EAAW5qB,UAAUssB,eAAiB,SAASD,GAC9C,IAAI3F,EAAS7jB,KAAKwoB,UAAUxoB,KAAKwoB,UAAUrtB,OAAS,GAChDuuB,EAAW7F,EAASA,EAAOtvB,SAAWyL,KAAKijB,IAC3C0G,EAAkBD,EAASA,EAASvuB,OAAS,GAEjDquB,EAAQtJ,KAAO,KAEZlgB,KAAKqoB,SAASM,mBAChBa,EAAQI,WAAa5pB,KAAKyoB,QAAQmB,YAEhC5pB,KAAKqoB,SAASO,iBAChBY,EAAQJ,SAAWppB,KAAKyoB,QAAQW,UAG9BO,GACFH,EAAQK,KAAOF,EACfA,EAAgBzJ,KAAOsJ,GAEvBA,EAAQK,KAAO,KAGhBH,EAASluB,KAAKguB,GACdA,EAAQ3F,OAASA,GAAU,IAC5B,EAEAkE,EAAW5qB,UAAU2sB,UAAY,SAASz1B,EAAM0oB,GAC/C,IAAIuM,EAAa,CAChBrqB,KAAe,WAAT5K,EAAoBupB,EAAYM,OAAkB,UAAT7pB,EAAmBupB,EAAYG,MAAQH,EAAYE,IAClGzpB,KAAMA,EACN0oB,QAASA,EACTxoB,SAAU,IAGPi1B,EAAUxpB,KAAKqpB,kBAAkBC,GAErCtpB,KAAKypB,eAAeD,GAEpBxpB,KAAKwoB,UAAUhtB,KAAKguB,EACrB,EAEAzB,EAAW5qB,UAAU4sB,OAAS,SAAS5qB,GAGtC,IAEI6qB,EAFAC,EAAYjqB,KAAKqoB,SAASK,qBAAuB1oB,KAAKqoB,SAAS6B,iBAInE,IAAIlqB,KAAKwoB,UAAUrtB,QAAU6E,KAAKijB,IAAI9nB,SAAW6uB,EAAUhqB,KAAKijB,IAAIjjB,KAAKijB,IAAI9nB,OAAO,IAAI8D,OAAS2e,EAAYC,KACzGoM,EACFD,EAAQ7qB,MAAQ6qB,EAAQ7qB,KAAOA,GAAMqG,QAAQoiB,EAAe,KAE5DoC,EAAQ7qB,MAAQA,OAGjB,GACCa,KAAKwoB,UAAUrtB,SACd6uB,EAAUhqB,KAAKwoB,UAAUxoB,KAAKwoB,UAAUrtB,OAAS,MACjD6uB,EAAUA,EAAQz1B,SAASy1B,EAAQz1B,SAAS4G,OAAS,KACtD6uB,EAAQ/qB,OAAS2e,EAAYC,KAE1BoM,EACFD,EAAQ7qB,MAAQ6qB,EAAQ7qB,KAAOA,GAAMqG,QAAQoiB,EAAe,KAE5DoC,EAAQ7qB,MAAQA,MAEX,CACH8qB,IACF9qB,EAAOA,EAAKqG,QAAQoiB,EAAe,MAGpC,IAAI4B,EAAUxpB,KAAKqpB,kBAAkB,CACpClqB,KAAMA,EACNF,KAAM2e,EAAYC,OAGnB7d,KAAKypB,eAAeD,EACrB,CAEF,EAEAzB,EAAW5qB,UAAUgtB,UAAY,SAAShrB,GACzC,IAAI6qB,EAAUhqB,KAAKwoB,UAAUxoB,KAAKwoB,UAAUrtB,OAAS,GAErD,GAAG6uB,GAAWA,EAAQ/qB,OAAS2e,EAAYK,QAC1C+L,EAAQ7qB,MAAQA,MADjB,CAKA,IAAImqB,EAAa,CAChBnqB,KAAMA,EACNF,KAAM2e,EAAYK,SAGfuL,EAAUxpB,KAAKqpB,kBAAkBC,GAErCtpB,KAAKypB,eAAeD,GACpBxpB,KAAKwoB,UAAUhtB,KAAKguB,EAVpB,CAWD,EAEAzB,EAAW5qB,UAAUitB,aAAe,WACnC,IAAId,EAAa,CAChB/0B,SAAU,CAAC,CACV4K,KAAM,GACNF,KAAM2e,EAAYC,OAEnB5e,KAAM2e,EAAYO,OAGfqL,EAAUxpB,KAAKqpB,kBAAkBC,GAErCtpB,KAAKypB,eAAeD,GACpBxpB,KAAKwoB,UAAUhtB,KAAKguB,EACrB,EAEAzB,EAAW5qB,UAAUktB,aAAetC,EAAW5qB,UAAUmtB,WAAa,WACrEtqB,KAAKwoB,UAAU9V,KAChB,EAEAqV,EAAW5qB,UAAUotB,wBAA0B,SAASl2B,EAAM8K,GAC7D,IAAIqqB,EAAUxpB,KAAKqpB,kBAAkB,CACpCh1B,KAAMA,EACN8K,KAAMA,EACNF,KAAM2e,EAAYI,YAGnBhe,KAAKypB,eAAeD,EACrB,EAEA9a,EAAO1U,QAAU+tB,iBCvNjB,IAAIF,EAAgBxrB,EAAQ,MACxByrB,EAAmBpZ,EAAO1U,QAAUiD,OAAOtJ,OAAOk0B,GAElD2C,EAAU,CACbtN,QAAS,QAGVjgB,OAAO8V,KAAKyX,GAASC,SAAQ,SAAS3X,GACrC,IAAI4X,EAAYF,EAAQ1X,GACxB7V,OAAOmH,eAAe0jB,EAAkBhV,EAAK,CAC5CxO,IAAK,WACJ,OAAOtE,KAAK0qB,IAAc,IAC3B,EACA1lB,IAAK,SAASrE,GAEb,OADAX,KAAK0qB,GAAa/pB,EACXA,CACR,GAEF,cCjBA,IAAIknB,EAAgBnZ,EAAO1U,QAAU,CACpC,cAAI2wB,GACH,IAAIp2B,EAAWyL,KAAKzL,SACpB,OAAOA,GAAYA,EAAS,IAAM,IACnC,EACA,aAAIq2B,GACH,IAAIr2B,EAAWyL,KAAKzL,SACpB,OAAOA,GAAYA,EAASA,EAAS4G,OAAS,IAAM,IACrD,EACA,YAAI0vB,GACH,OAAOC,EAAU9qB,KAAKf,OAAS6rB,EAAUtB,OAC1C,GAGGgB,EAAU,CACbtN,QAAS,OACT6N,WAAY,WACZC,WAAY,SACZrB,gBAAiB,OACjBsB,YAAa,OACbC,UAAW,QAGRJ,EAAY,CACftB,QAAS,EACT2B,KAAM,EACNC,MAAO,EACPC,QAAS,GAGVpuB,OAAO8V,KAAKyX,GAASC,SAAQ,SAAS3X,GACrC,IAAI4X,EAAYF,EAAQ1X,GACxB7V,OAAOmH,eAAeyjB,EAAe/U,EAAK,CACzCxO,IAAK,WACJ,OAAOtE,KAAK0qB,IAAc,IAC3B,EACA1lB,IAAK,SAASrE,GAEb,OADAX,KAAK0qB,GAAa/pB,EACXA,CACR,GAEF,oBC3CA,IAAI2qB,EAAW5c,EAAO1U,QAEtB,CACCqC,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,MACRA,EAAQ,OACPouB,SAAQ,SAASjkB,GAClBvJ,OAAO8V,KAAKvM,GAAKikB,SAAQ,SAAS3X,GACjCwY,EAASxY,GAAOtM,EAAIsM,GAAK3B,KAAKma,EAC/B,GACD,kBCXAtxB,EAAQuxB,cAAgB,SAAS/W,GAKhC,IAJA,IAAwBO,EAAMyW,EAAUhmB,EAApCimB,EAAMjX,EAAMrZ,SAIPswB,GAAO,GAAG,CAOlB,IANA1W,EAAOyW,EAAWhX,EAAMiX,GAGxBjX,EAAMiX,GAAO,KACbjmB,GAAU,EAEHgmB,GAAU,CAChB,GAAIhX,EAAMxY,QAAQwvB,IAAa,EAAG,CACjChmB,GAAU,EACVgP,EAAM+R,OAAOkF,EAAK,GAClB,KACD,CACAD,EAAWA,EAAS3H,MACrB,CAGIre,IACHgP,EAAMiX,GAAO1W,EAEf,CAEA,OAAOP,CACR,EAGA,IAAIkX,EACW,EADXA,EAEQ,EAFRA,EAGQ,EAHRA,EAIO,EAJPA,EAKW,GAyBXC,EAAa3xB,EAAQ4xB,wBAA0B,SAASC,EAAOC,GAClE,IAEIC,EAASC,EAActC,EAAUuC,EAAUC,EAAUT,EAFrDU,EAAW,GACXC,EAAW,GAGf,GAAIP,IAAUC,EACb,OAAO,EAIR,IADAC,EAAUF,EACHE,GACNI,EAAS3b,QAAQub,GACjBA,EAAUA,EAAQlI,OAGnB,IADAkI,EAAUD,EACHC,GACNK,EAAS5b,QAAQub,GACjBA,EAAUA,EAAQlI,OAInB,IADA4H,EAAM,EACCU,EAASV,KAASW,EAASX,IACjCA,IAGD,OAAY,IAARA,EACIC,GAIRhC,GADAsC,EAAeG,EAASV,EAAM,IACNl3B,SACxB03B,EAAWE,EAASV,GACpBS,EAAWE,EAASX,GAEhB/B,EAAS1tB,QAAQiwB,GAAYvC,EAAS1tB,QAAQkwB,GAC7CF,IAAiBF,EACbJ,EAAqBA,EAEtBA,EAEHM,IAAiBH,EACbH,EAAqBA,EAEtBA,EAET,EASA1xB,EAAQqyB,WAAa,SAAS7X,GAC7B,IAAwBO,EAAM7d,EAA1Bu0B,EAAMjX,EAAMrZ,OAIhB,IAFAqZ,EAAQA,EAAM1W,UAEL2tB,GAAO,GACf1W,EAAOP,EAAMiX,IACbv0B,EAAWsd,EAAMxY,QAAQ+Y,KACT,GAAK7d,EAAWu0B,GAC/BjX,EAAM+R,OAAOkF,EAAK,GAapB,OAVAjX,EAAM0Q,MAAK,SAASvgB,EAAG/F,GACtB,IAAI0tB,EAAWX,EAAWhnB,EAAG/F,GAC7B,OAAI0tB,EAAWZ,GACN,EACEY,EAAWZ,EACd,EAED,CACR,IAEOlX,CACR,kBC5IA,IAAIoJ,EAAcvhB,EAAQ,MACtBgnB,EAAQrpB,EAAQqpB,MAAQzF,EAAYyF,MAExCrpB,EAAQuyB,YAAc,SAAStE,EAASuB,GACvC,IAAI,IAAI1W,KAAOmV,EACd,GAAIA,EAAQlJ,eAAejM,IACtB,GAAW,aAARA,GACP,IAAIuQ,EAAMmG,KAAavB,EAAQuE,SAAShD,EAAQn1B,MAC/C,OAAO,OAEF,GAAW,aAARye,GACT,IAAImV,EAAQwE,SAASjD,EAAQvqB,MAAO,OAAO,OACrC,GAAW,iBAAR6T,GACT,GAAGuQ,EAAMmG,KAAavB,EAAQyE,aAAalD,EAAQrqB,MAClD,OAAO,OAEF,IAAIqqB,EAAQzM,UAAYkL,EAAQnV,GAAK0W,EAAQzM,QAAQjK,IAC3D,OAAO,OAGT,OAAO,CACR,EAEA,IAAI6Z,EAAS,CACZH,SAAU,SAASn4B,GAClB,MAAmB,oBAATA,EACF,SAAS+uB,GAAO,OAAOC,EAAMD,IAAS/uB,EAAK+uB,EAAK/uB,KAAO,EAC5C,MAATA,EACFgvB,EAEA,SAASD,GAAO,OAAOC,EAAMD,IAASA,EAAK/uB,OAASA,CAAM,CAEnE,EACAo4B,SAAU,SAASxtB,GAClB,MAAmB,oBAATA,EACF,SAASmkB,GAAO,OAAOnkB,EAAKmkB,EAAKnkB,KAAO,EAExC,SAASmkB,GAAO,OAAOA,EAAKnkB,OAASA,CAAM,CAEpD,EACAytB,aAAc,SAASvtB,GACtB,MAAmB,oBAATA,EACF,SAASikB,GAAO,OAAQC,EAAMD,IAASjkB,EAAKikB,EAAKjkB,KAAO,EAExD,SAASikB,GAAO,OAAQC,EAAMD,IAASA,EAAKjkB,OAASA,CAAM,CAEpE,GAGD,SAASytB,EAAeC,EAAQ97B,GAC/B,MAAoB,oBAAVA,EACF,SAASqyB,GAAO,OAAOA,EAAKrG,SAAWhsB,EAAMqyB,EAAKrG,QAAQ8P,GAAU,EAEpE,SAASzJ,GAAO,OAAOA,EAAKrG,SAAWqG,EAAKrG,QAAQ8P,KAAY97B,CAAO,CAEhF,CAEA,SAAS+7B,EAAanoB,EAAG/F,GACxB,OAAO,SAASwkB,GACf,OAAOze,EAAEye,IAASxkB,EAAEwkB,EACrB,CACD,CAEAppB,EAAQ+yB,YAAc,SAAS9E,EAASuB,EAASwD,EAASviB,GACzD,IAAIwiB,EAAQhwB,OAAO8V,KAAKkV,GAASvJ,KAAI,SAAS5L,GAC7C,IAAI/hB,EAAQk3B,EAAQnV,GACpB,OAAOA,KAAO6Z,EAASA,EAAO7Z,GAAK/hB,GAAS67B,EAAe9Z,EAAK/hB,EACjE,IAEA,OAAwB,IAAjBk8B,EAAM9xB,OAAe,GAAK6E,KAAKwe,OACrCyO,EAAM7N,OAAO0N,GACbtD,EAASwD,EAASviB,EAEpB,EAEAzQ,EAAQkzB,eAAiB,SAASlV,EAAIwR,EAASwD,GAE9C,OADInxB,MAAMqD,QAAQsqB,KAAUA,EAAU,CAACA,IAChCxpB,KAAKmtB,QAAQP,EAAe,KAAM5U,GAAKwR,GAAqB,IAAZwD,EACxD,EAEAhzB,EAAQozB,qBAAuB,SAAS/4B,EAAMm1B,EAASwD,EAASviB,GAC/D,OAAOzK,KAAKwe,OAAOmO,EAAOH,SAASn4B,GAAOm1B,EAASwD,EAASviB,EAC7D,EAEAzQ,EAAQqzB,qBAAuB,SAASpuB,EAAMuqB,EAASwD,EAASviB,GAC/D,OAAOzK,KAAKwe,OAAOmO,EAAOF,SAASxtB,GAAOuqB,EAASwD,EAASviB,EAC7D,gBCtFAzQ,EAAQszB,cAAgB,SAASlK,GAIhC,GAHGA,EAAKyG,OAAMzG,EAAKyG,KAAK3J,KAAOkD,EAAKlD,MACjCkD,EAAKlD,OAAMkD,EAAKlD,KAAK2J,KAAOzG,EAAKyG,MAEjCzG,EAAKS,OAAO,CACd,IAAI0J,EAASnK,EAAKS,OAAOtvB,SACzBg5B,EAAOhH,OAAOgH,EAAOxsB,YAAYqiB,GAAO,EACzC,CACD,EAEAppB,EAAQwzB,eAAiB,SAASpK,EAAMqK,GACvC,IAAI5D,EAAO4D,EAAY5D,KAAOzG,EAAKyG,KAChCA,IACFA,EAAK3J,KAAOuN,GAGb,IAAIvN,EAAOuN,EAAYvN,KAAOkD,EAAKlD,KAChCA,IACFA,EAAK2J,KAAO4D,GAGb,IAAI5J,EAAS4J,EAAY5J,OAAST,EAAKS,OACvC,GAAGA,EAAO,CACT,IAAI0J,EAAS1J,EAAOtvB,SACpBg5B,EAAOA,EAAOxsB,YAAYqiB,IAASqK,CACpC,CACD,EAEAzzB,EAAQ0zB,YAAc,SAAStK,EAAMuK,GAGpC,GAFAA,EAAM9J,OAAST,EAEkB,IAA9BA,EAAK7uB,SAASiH,KAAKmyB,GAAa,CAClC,IAAIC,EAAUxK,EAAK7uB,SAAS6uB,EAAK7uB,SAAS4G,OAAS,GACnDyyB,EAAQ1N,KAAOyN,EACfA,EAAM9D,KAAO+D,EACbD,EAAMzN,KAAO,IACd,CACD,EAEAlmB,EAAQ6zB,OAAS,SAASzK,EAAMlD,GAC/B,IAAI2D,EAAST,EAAKS,OACjBiK,EAAW1K,EAAKlD,KAOjB,GALAA,EAAKA,KAAO4N,EACZ5N,EAAK2J,KAAOzG,EACZA,EAAKlD,KAAOA,EACZA,EAAK2D,OAASA,EAEXiK,GAEF,GADAA,EAASjE,KAAO3J,EACb2D,EAAO,CACT,IAAI0J,EAAS1J,EAAOtvB,SACpBg5B,EAAOhH,OAAOgH,EAAOxsB,YAAY+sB,GAAW,EAAG5N,EAChD,OACS2D,GACTA,EAAOtvB,SAASiH,KAAK0kB,EAEvB,EAEAlmB,EAAQkW,QAAU,SAASkT,EAAMyG,GAChC,IAAIhG,EAAST,EAAKS,OAClB,GAAGA,EAAO,CACT,IAAI0J,EAAS1J,EAAOtvB,SACpBg5B,EAAOhH,OAAOgH,EAAOxsB,YAAYqiB,GAAO,EAAGyG,EAC5C,CAEGzG,EAAKyG,OACPzG,EAAKyG,KAAK3J,KAAO2J,GAGlBA,EAAKhG,OAASA,EACdgG,EAAKA,KAAOzG,EAAKyG,KACjBA,EAAK3J,KAAOkD,EACZA,EAAKyG,KAAOA,CACb,kBC1EA,IAAIxG,EAAQhnB,EAAAA,MAAAA,MAoBZ,SAAS0xB,EAAKjN,EAAMkN,EAAOhB,EAASviB,GAGnC,IAFA,IAAiB8iB,EAAbU,EAAS,GAELxzB,EAAI,EAAG+G,EAAIwsB,EAAM7yB,OAAQV,EAAI+G,KACjCsf,EAAKkN,EAAMvzB,MACbwzB,EAAOzyB,KAAKwyB,EAAMvzB,MACbgQ,GAAS,MAGf8iB,EAASS,EAAMvzB,GAAGlG,WACfy4B,GAAWO,GAAUA,EAAOpyB,OAAS,IACvCoyB,EAASQ,EAAKjN,EAAMyM,EAAQP,EAASviB,GACrCwjB,EAASA,EAAOn8B,OAAOy7B,IACvB9iB,GAAS8iB,EAAOpyB,SACJ,KAX0BV,KAexC,OAAOwzB,CACR,CArCAvf,EAAO1U,QAAU,CAChBwkB,OAQD,SAAgBsC,EAAM0I,EAASwD,EAASviB,GACnC5O,MAAMqD,QAAQsqB,KAAUA,EAAU,CAACA,IAEnB,kBAAV/e,GAAuBzE,SAASyE,KACzCA,EAAQwC,KAET,OAAO8gB,EAAKjN,EAAM0I,GAAqB,IAAZwD,EAAmBviB,EAC/C,EAdCsjB,KAAMA,EACNG,aAoCD,SAAsBpN,EAAMkN,GAC3B,IAAI,IAAIvzB,EAAI,EAAG0zB,EAAIH,EAAM7yB,OAAQV,EAAI0zB,EAAG1zB,IACvC,GAAGqmB,EAAKkN,EAAMvzB,IAAK,OAAOuzB,EAAMvzB,GAGjC,OAAO,IACR,EAzCC0yB,QA2CD,SAASA,EAAQrM,EAAMkN,GAGtB,IAFA,IAAI5K,EAAO,KAEH3oB,EAAI,EAAG0zB,EAAIH,EAAM7yB,OAAQV,EAAI0zB,IAAM/K,EAAM3oB,IAC5C4oB,EAAM2K,EAAMvzB,MAENqmB,EAAKkN,EAAMvzB,IACpB2oB,EAAO4K,EAAMvzB,GACJuzB,EAAMvzB,GAAGlG,SAAS4G,OAAS,IACpCioB,EAAO+J,EAAQrM,EAAMkN,EAAMvzB,GAAGlG,YAIhC,OAAO6uB,CACR,EAxDCgL,UA0DD,SAASA,EAAUtN,EAAMkN,GACxB,IAAI,IAAIvzB,EAAI,EAAG0zB,EAAIH,EAAM7yB,OAAQV,EAAI0zB,EAAG1zB,IACvC,GACC4oB,EAAM2K,EAAMvzB,MACXqmB,EAAKkN,EAAMvzB,KACVuzB,EAAMvzB,GAAGlG,SAAS4G,OAAS,GAC3BizB,EAAUtN,EAAMkN,EAAMvzB,GAAGlG,WAI3B,OAAO,EAIT,OAAO,CACR,EAxEC85B,QA0ED,SAAiBvN,EAAMwN,GACtB,IAAIL,EAAS,GACT/hB,EAAQoiB,EAAUxwB,QACtB,KAAMoO,EAAM/Q,QAAO,CAClB,IAAIioB,EAAOlX,EAAMsG,QACb6Q,EAAMD,KACNA,EAAK7uB,UAAY6uB,EAAK7uB,SAAS4G,OAAS,GAC3C+Q,EAAMsE,QAAQ9M,MAAMwI,EAAOkX,EAAK7uB,UAE9BusB,EAAKsC,IAAO6K,EAAOzyB,KAAK4nB,GAC5B,CACA,OAAO6K,CACR,mBC9FA,IAAIrQ,EAAcvhB,EAAQ,MACtBkyB,EAAelyB,EAAQ,MACvBgnB,EAAQzF,EAAYyF,MAExB3U,EAAO1U,QAAU,CAChBw0B,aAKD,SAAsBpL,EAAMF,GAC3B,OAAOE,EAAK7uB,SAAW6uB,EAAK7uB,SAASmqB,KAAI,SAAS0E,GACjD,OAAOmL,EAAanL,EAAMF,EAC3B,IAAGvnB,KAAK,IAAM,EACf,EARC4yB,aAAcA,EACdE,QASD,SAASA,EAAQrL,GAChB,OAAGvnB,MAAMqD,QAAQkkB,GAAcA,EAAK1E,IAAI+P,GAAS9yB,KAAK,IACnD0nB,EAAMD,GAA4B,OAAdA,EAAK/uB,KAAgB,KAAOo6B,EAAQrL,EAAK7uB,UAC7D6uB,EAAKnkB,OAAS2e,EAAYO,MAAcsQ,EAAQrL,EAAK7uB,UACrD6uB,EAAKnkB,OAAS2e,EAAYC,KAAauF,EAAKjkB,KACxC,EACR,iBCtBA,IAAIuvB,EAAc10B,EAAQ00B,YAAc,SAAStL,GAChD,OAAOA,EAAK7uB,QACb,EAEIo6B,EAAY30B,EAAQ20B,UAAY,SAASvL,GAC5C,OAAOA,EAAKS,MACb,EAEA7pB,EAAQ40B,YAAc,SAASxL,GAC9B,IAAIS,EAAS8K,EAAUvL,GACvB,OAAOS,EAAS6K,EAAY7K,GAAU,CAACT,EACxC,EAEAppB,EAAQ60B,kBAAoB,SAASzL,EAAM/uB,GAC1C,OAAO+uB,EAAKrG,SAAWqG,EAAKrG,QAAQ1oB,EACrC,EAEA2F,EAAQ80B,UAAY,SAAS1L,EAAM/uB,GAClC,QAAS+uB,EAAKrG,SAAWgC,eAAeje,KAAKsiB,EAAKrG,QAAS1oB,EAC5D,EAEA2F,EAAQ+0B,QAAU,SAAS3L,GAC1B,OAAOA,EAAK/uB,IACb,kBCvBA,IAAI26B,EAAY3yB,EAAQ,KAExBqS,EAAO1U,QAGP,SAAyBiJ,GACrB,GAAKA,GAAa,OAAUA,GAAa,OAAWA,EAAY,QAC5D,MAAO,SAGPA,KAAa+rB,IACb/rB,EAAY+rB,EAAU/rB,IAG1B,IAAItO,EAAS,GAETsO,EAAY,QACZA,GAAa,MACbtO,GAAUwM,OAAOsC,aAAeR,IAAc,GAAM,KAAS,OAC7DA,EAAY,MAAsB,KAAZA,GAI1B,OADAtO,GAAUwM,OAAOsC,aAAaR,EAElC,kBCtBA,SAASgsB,EAAkBC,GACvBlvB,KAAKmvB,KAAOD,GAAO,CAAC,EACpBlvB,KAAKmQ,OAAS,EAClB,CALAzB,EAAO1U,QAAUi1B,EAOjB,IAAIG,EAAS/yB,EAAAA,MAAAA,OACbY,OAAO8V,KAAKqc,GAAQ3E,SAAQ,SAASp2B,GACjC,GAAqB,IAAjB+6B,EAAO/6B,GACPA,EAAO,KAAOA,EACd46B,EAAkB9xB,UAAU9I,GAAQ,WAChC2L,KAAKmQ,OAAO3U,KAAK,CAACnH,IACd2L,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,IACnC,OACG,GAAqB,IAAjB+6B,EAAO/6B,GACdA,EAAO,KAAOA,EACd46B,EAAkB9xB,UAAU9I,GAAQ,SAASsQ,GACzC3E,KAAKmQ,OAAO3U,KAAK,CAACnH,EAAMsQ,IACpB3E,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,GAAMsQ,EACzC,MACG,IAAqB,IAAjByqB,EAAO/6B,GAOd,MAAM0H,MAAM,6BANZ1H,EAAO,KAAOA,EACd46B,EAAkB9xB,UAAU9I,GAAQ,SAASsQ,EAAG/F,GAC5CoB,KAAKmQ,OAAO3U,KAAK,CAACnH,EAAMsQ,EAAG/F,IACvBoB,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,GAAMsQ,EAAG/F,EAC5C,CAGJ,CACJ,IAEAqwB,EAAkB9xB,UAAU4rB,QAAU,WAClC/oB,KAAKmQ,OAAS,GACVnQ,KAAKmvB,KAAKpG,SAAS/oB,KAAKmvB,KAAKpG,SACrC,EAEAkG,EAAkB9xB,UAAUkyB,QAAU,WAC9BrvB,KAAKmvB,KAAKpG,SAAS/oB,KAAKmvB,KAAKpG,UAEjC,IAAK,IAAItuB,EAAI,EAAGK,EAAMkF,KAAKmQ,OAAOhV,OAAQV,EAAIK,EAAKL,IAC/C,GAAIuF,KAAKmvB,KAAKnvB,KAAKmQ,OAAO1V,GAAG,IAAK,CAC9B,IAAI0B,EAAM6D,KAAKmQ,OAAO1V,GAAGU,OAEb,IAARgB,EACA6D,KAAKmvB,KAAKnvB,KAAKmQ,OAAO1V,GAAG,MACV,IAAR0B,EACP6D,KAAKmvB,KAAKnvB,KAAKmQ,OAAO1V,GAAG,IAAIuF,KAAKmQ,OAAO1V,GAAG,IAE5CuF,KAAKmvB,KAAKnvB,KAAKmQ,OAAO1V,GAAG,IACrBuF,KAAKmQ,OAAO1V,GAAG,GACfuF,KAAKmQ,OAAO1V,GAAG,GAG3B,CAER,kBCxDA,IAAIstB,EAAa1rB,EAAQ,MACrBivB,EAAWjvB,EAAQ,MAGvB,SAASizB,EAAYtH,EAAUC,GAC3BjoB,KAAKyO,KAAKuZ,EAAUC,EACxB,CAMA,SAAS8E,EAAYwC,EAAMC,GACvB,OAAOlE,EAAS8B,qBAAqBmC,EAAMC,GAAO,EACtD,CACA,SAASC,EAAcF,EAAMC,GACzB,OAAOlE,EAAS8B,qBAAqBmC,EAAMC,GAAO,EAAM,GAAG,EAC/D,CACA,SAASE,EAAMH,EAAMC,EAAOxC,GACxB,OAAO1B,EAASmD,QACZnD,EAAS8B,qBAAqBmC,EAAMC,EAAOxC,EAAS,IACtDvnB,MACN,CAEA,SAASkqB,EAAiB9wB,EAAK+wB,EAAML,EAAMC,EAAOxC,GAC9C,IAAIxyB,EAAMk1B,EAAMH,EAAMC,EAAOxC,GACzBxyB,IAAKqE,EAAI+wB,GAAQp1B,EACzB,CAnBA6B,EAAQ,KAARA,CAAoBizB,EAAavH,GAEjCuH,EAAYnyB,UAAUsR,KAAOsZ,EAmB7B,IAAI8H,EAAc,SAAS9+B,GACvB,MAAiB,QAAVA,GAA6B,SAAVA,GAA8B,YAAVA,CAClD,EAEAu+B,EAAYnyB,UAAU6rB,MAAQ,WAC1B,IAEIxuB,EACA+yB,EAHAuC,EAAO,CAAC,EACRC,EAAWN,EAAcI,EAAa7vB,KAAKijB,KAI3C8M,IACsB,SAAlBA,EAAS17B,MACTk5B,EAASwC,EAASx7B,SAElBu7B,EAAK7wB,KAAO,OACZ0wB,EAAiBG,EAAM,KAAM,KAAMvC,GACnCoC,EAAiBG,EAAM,QAAS,QAASvC,IAEpC/yB,EAAMi1B,EAAc,OAAQlC,MAC5B/yB,EAAMA,EAAIuiB,WACVviB,EAAMA,EAAIod,QAEXkY,EAAKnN,KAAOnoB,GAChBm1B,EAAiBG,EAAM,cAAe,WAAYvC,IAC7C/yB,EAAMk1B,EAAM,UAAWnC,MAAUuC,EAAKE,QAAU,IAAIC,KAAKz1B,IAC9Dm1B,EAAiBG,EAAM,SAAU,QAASvC,GAAQ,GAElDuC,EAAKI,MAAQnD,EAAY,QAASQ,GAAQ7O,KAAI,SAAS+B,GACnD,IACIjmB,EADA21B,EAAQ,CAAC,EAiBb,OAZAR,EAAiBQ,EAAO,KAAM,KAF9B1P,EAAOA,EAAKlsB,UAGZo7B,EAAiBQ,EAAO,QAAS,QAAS1P,IAErCjmB,EAAMi1B,EAAc,OAAQhP,MAC5BjmB,EAAMA,EAAIuiB,WACVviB,EAAMA,EAAIod,QAEXuY,EAAMxN,KAAOnoB,IACZA,EAAMk1B,EAAM,UAAWjP,IAASiP,EAAM,UAAWjP,MAClD0P,EAAMC,YAAc51B,IACnBA,EAAMk1B,EAAM,UAAWjP,MACxB0P,EAAME,QAAU,IAAIJ,KAAKz1B,IACtB21B,CACX,MAEA5C,EAASkC,EAAc,UAAWM,EAASx7B,UAAUA,SAErDu7B,EAAK7wB,KAAO8wB,EAAS17B,KAAK2N,OAAO,EAAG,GACpC8tB,EAAK9X,GAAK,GACV2X,EAAiBG,EAAM,QAAS,QAASvC,GACzCoC,EAAiBG,EAAM,OAAQ,OAAQvC,GACvCoC,EAAiBG,EAAM,cAAe,cAAevC,IAChD/yB,EAAMk1B,EAAM,gBAAiBnC,MAC9BuC,EAAKE,QAAU,IAAIC,KAAKz1B,IAC5Bm1B,EAAiBG,EAAM,SAAU,iBAAkBvC,GAAQ,GAE3DuC,EAAKI,MAAQnD,EAAY,OAAQgD,EAASx7B,UAAUmqB,KAAI,SACpD+B,GAEA,IACIjmB,EADA21B,EAAQ,CAAC,EAWb,OANAR,EAAiBQ,EAAO,KAAM,OAF9B1P,EAAOA,EAAKlsB,UAGZo7B,EAAiBQ,EAAO,QAAS,QAAS1P,GAC1CkP,EAAiBQ,EAAO,OAAQ,OAAQ1P,GACxCkP,EAAiBQ,EAAO,cAAe,cAAe1P,IACjDjmB,EAAMk1B,EAAM,UAAWjP,MACxB0P,EAAME,QAAU,IAAIJ,KAAKz1B,IACtB21B,CACX,MAGRnwB,KAAKijB,IAAM6M,EACX/H,EAAW5qB,UAAU8rB,gBAAgBnoB,KACjCd,KACA+vB,EAAW,KAAOh0B,MAAM,8BAEhC,EAEA2S,EAAO1U,QAAUs1B,kBCjHjB,IAAIgB,EAAYj0B,EAAQ,MAyBpBk0B,EAAW,CACX5jB,OAAO,EACP6jB,QAAQ,EACRC,UAAU,EACVC,QAAQ,EACRC,QAAQ,EACRC,UAAU,EACVC,UAAU,GAGVC,EAAmB,CACnBC,GAAI,CAAEA,IAAI,EAAMC,IAAI,EAAMC,IAAI,GAC9BD,GAAI,CAAEA,IAAI,GACVC,GAAI,CAAEC,OAAO,EAAMF,IAAI,EAAMC,IAAI,GACjCE,KAAM,CAAEC,MAAM,EAAMzO,MAAM,EAAMpB,QAAQ,GACxC8P,GAAI,CAAEA,IAAI,GACVC,EAAG,CAAEA,GAAG,GACRC,GAAI,CAAED,GAAG,GACTE,GAAI,CAAEF,GAAG,GACTG,GAAI,CAAEH,GAAG,GACTI,GAAI,CAAEJ,GAAG,GACTK,GAAI,CAAEL,GAAG,GACTM,GAAI,CAAEN,GAAG,GACTZ,OAAQH,EACR5jB,MAAO4jB,EACP57B,OAAQ47B,EACRI,OAAQJ,EACRK,SAAUL,EACVM,SAAUN,EACVC,OAAQ,CAAEA,QAAQ,GAClBC,SAAU,CAAEA,UAAU,IAGtBoB,EAAe,CACfzQ,UAAW,KACXW,MAAM,EACNC,MAAM,EACNC,UAAU,EACVC,IAAI,EACJC,KAAK,EACLC,SAAS,EACTC,OAAO,EACPC,OAAO,EACPC,IAAI,EACJC,KAAK,EACL7V,OAAO,EACP8V,SAAS,EACTC,QAAQ,EACRC,MAAM,EACNC,MAAM,EACNC,OAAO,EACP/D,QAAQ,EACRgE,OAAO,EACPC,KAAK,GAGL+O,EAAyB,CACzB1Q,UAAW,KACX2Q,MAAM,EACNr/B,KAAK,GAELs/B,EAA0B,CAC1B5Q,UAAW,KACX6Q,IAAI,EACJC,IAAI,EACJC,IAAI,EACJC,IAAI,EACJC,OAAO,EACP,kBAAkB,EAClBC,eAAe,EACfC,MAAM,EACNhX,OAAO,GAGPiX,EAAa,QAEjB,SAASC,EAAOvD,EAAKjH,GACjBjoB,KAAKqoB,SAAWJ,GAAW,CAAC,EAC5BjoB,KAAKmvB,KAAOD,GAAO,CAAC,EAEpBlvB,KAAK0yB,SAAW,GAChB1yB,KAAK2yB,YAAc,GACnB3yB,KAAK4yB,aAAe,GACpB5yB,KAAK6yB,SAAW,KAChB7yB,KAAK8yB,OAAS,GACd9yB,KAAK+yB,gBAAkB,GAEvB/yB,KAAK4pB,WAAa,EAClB5pB,KAAKopB,SAAW,KAEhBppB,KAAKgzB,mBACD,kBAAmBhzB,KAAKqoB,WAChBroB,KAAKqoB,SAAS4K,eACfjzB,KAAKqoB,SAASzE,QACzB5jB,KAAKkzB,yBACD,4BAA6BlzB,KAAKqoB,WAC1BroB,KAAKqoB,SAAS8K,yBACfnzB,KAAKqoB,SAASzE,QAErB5jB,KAAKqoB,SAASiI,YACdA,EAAYtwB,KAAKqoB,SAASiI,WAE9BtwB,KAAKozB,WAAa,IAAI9C,EAAUtwB,KAAKqoB,SAAUroB,MAE3CA,KAAKmvB,KAAKtG,cAAc7oB,KAAKmvB,KAAKtG,aAAa7oB,KACvD,CAEA3D,EAAQ,KAARA,CAAoBo2B,EAAQp2B,EAAAA,MAAAA,cAE5Bo2B,EAAOt1B,UAAUk2B,gBAAkB,SAASC,GAClB,OAAlBtzB,KAAKopB,SACDppB,KAAKozB,WAAWG,eAAiBD,EACjCtzB,KAAK4pB,WAAa,EAElB5pB,KAAK4pB,WAAa5pB,KAAKozB,WAAWG,cAAgBD,EAEnDtzB,KAAK4pB,WAAa5pB,KAAKopB,SAAW,EACzCppB,KAAKopB,SAAWppB,KAAKozB,WAAWI,kBACpC,EAGAf,EAAOt1B,UAAU4sB,OAAS,SAAS5qB,GAC/Ba,KAAKqzB,gBAAgB,GACrBrzB,KAAKopB,WAEDppB,KAAKmvB,KAAKpF,QAAQ/pB,KAAKmvB,KAAKpF,OAAO5qB,EAC3C,EAEAszB,EAAOt1B,UAAUs2B,cAAgB,SAASp/B,GAOtC,GANI2L,KAAKgzB,qBACL3+B,EAAOA,EAAKyL,eAGhBE,KAAK0yB,SAAWr+B,GAEX2L,KAAKqoB,SAASzE,SAAWvvB,KAAQy8B,EAClC,IACI,IAAI4C,GACHA,EAAK1zB,KAAK8yB,OAAO9yB,KAAK8yB,OAAO33B,OAAS,MACvC21B,EAAiBz8B,GACjB2L,KAAKmpB,WAAWuK,KAIpB1zB,KAAKqoB,SAASzE,SAAavvB,KAAQw9B,IACnC7xB,KAAK8yB,OAAOt3B,KAAKnH,GACbA,KAAQy9B,EAAwB9xB,KAAK+yB,gBAAgBv3B,MAAK,GACrDnH,KAAQ29B,GACbhyB,KAAK+yB,gBAAgBv3B,MAAK,IAG9BwE,KAAKmvB,KAAKsE,eAAezzB,KAAKmvB,KAAKsE,cAAcp/B,GACjD2L,KAAKmvB,KAAKrF,YAAW9pB,KAAK6yB,SAAW,CAAC,EAC9C,EAEAJ,EAAOt1B,UAAUw2B,aAAe,WAC5B3zB,KAAKqzB,gBAAgB,GAEjBrzB,KAAK6yB,WACD7yB,KAAKmvB,KAAKrF,WACV9pB,KAAKmvB,KAAKrF,UAAU9pB,KAAK0yB,SAAU1yB,KAAK6yB,UAC5C7yB,KAAK6yB,SAAW,OAIf7yB,KAAKqoB,SAASzE,SACf5jB,KAAKmvB,KAAKhG,YACVnpB,KAAK0yB,YAAYb,GAEjB7xB,KAAKmvB,KAAKhG,WAAWnpB,KAAK0yB,UAG9B1yB,KAAK0yB,SAAW,EACpB,EAEAD,EAAOt1B,UAAUgsB,WAAa,SAAS90B,GAWnC,GAVA2L,KAAKqzB,gBAAgB,GAEjBrzB,KAAKgzB,qBACL3+B,EAAOA,EAAKyL,gBAGZzL,KAAQy9B,GAA0Bz9B,KAAQ29B,IAC1ChyB,KAAK+yB,gBAAgBrgB,OAIrB1S,KAAK8yB,OAAO33B,QACT9G,KAAQw9B,IAAiB7xB,KAAKqoB,SAASzE,QAYlC5jB,KAAKqoB,SAASzE,SAAqB,OAATvvB,GAA0B,MAATA,IACnD2L,KAAKyzB,cAAcp/B,GACnB2L,KAAK4zB,wBAbP,CACE,IAAI7uB,EAAM/E,KAAK8yB,OAAO/xB,YAAY1M,GAClC,IAAa,IAAT0Q,EACA,GAAI/E,KAAKmvB,KAAKhG,WAEV,IADApkB,EAAM/E,KAAK8yB,OAAO33B,OAAS4J,EACpBA,KAAO/E,KAAKmvB,KAAKhG,WAAWnpB,KAAK8yB,OAAOpgB,YAC5C1S,KAAK8yB,OAAO33B,OAAS4J,MACZ,MAAT1Q,GAAiB2L,KAAKqoB,SAASzE,UACtC5jB,KAAKyzB,cAAcp/B,GACnB2L,KAAK4zB,mBAEb,CAIJ,EAEAnB,EAAOt1B,UAAU02B,iBAAmB,WAE5B7zB,KAAKqoB,SAASzE,SACd5jB,KAAKqoB,SAASyL,sBACd9zB,KAAK+yB,gBAAgB/yB,KAAK+yB,gBAAgB53B,OAAS,GAEnD6E,KAAK4zB,mBAEL5zB,KAAK2zB,cAEb,EAEAlB,EAAOt1B,UAAUy2B,iBAAmB,WAChC,IAAIv/B,EAAO2L,KAAK0yB,SAEhB1yB,KAAK2zB,eAID3zB,KAAK8yB,OAAO9yB,KAAK8yB,OAAO33B,OAAS,KAAO9G,IACpC2L,KAAKmvB,KAAKhG,YACVnpB,KAAKmvB,KAAKhG,WAAW90B,GAEzB2L,KAAK8yB,OAAOpgB,MAGpB,EAEA+f,EAAOt1B,UAAU42B,aAAe,SAAS1/B,GACjC2L,KAAKkzB,2BACL7+B,EAAOA,EAAKyL,eAEhBE,KAAK2yB,YAAct+B,CACvB,EAEAo+B,EAAOt1B,UAAU62B,aAAe,SAASjjC,GACrCiP,KAAK4yB,cAAgB7hC,CACzB,EAEA0hC,EAAOt1B,UAAU82B,YAAc,WACvBj0B,KAAKmvB,KAAK+E,aACVl0B,KAAKmvB,KAAK+E,YAAYl0B,KAAK2yB,YAAa3yB,KAAK4yB,cAE7C5yB,KAAK6yB,WACJ51B,OAAOE,UAAU4hB,eAAeje,KAAKd,KAAK6yB,SAAU7yB,KAAK2yB,eAE1D3yB,KAAK6yB,SAAS7yB,KAAK2yB,aAAe3yB,KAAK4yB,cAE3C5yB,KAAK2yB,YAAc,GACnB3yB,KAAK4yB,aAAe,EACxB,EAEAH,EAAOt1B,UAAUg3B,oBAAsB,SAASpjC,GAC5C,IAAI06B,EAAM16B,EAAMqjC,OAAO5B,GACnBn+B,EAAOo3B,EAAM,EAAI16B,EAAQA,EAAMiR,OAAO,EAAGypB,GAM7C,OAJIzrB,KAAKgzB,qBACL3+B,EAAOA,EAAKyL,eAGTzL,CACX,EAEAo+B,EAAOt1B,UAAUk3B,cAAgB,SAAStjC,GACtC,GAAIiP,KAAKmvB,KAAK5E,wBAAyB,CACnC,IAAIl2B,EAAO2L,KAAKm0B,oBAAoBpjC,GACpCiP,KAAKmvB,KAAK5E,wBAAwB,IAAMl2B,EAAM,IAAMtD,EACxD,CACJ,EAEA0hC,EAAOt1B,UAAUotB,wBAA0B,SAASx5B,GAChD,GAAIiP,KAAKmvB,KAAK5E,wBAAyB,CACnC,IAAIl2B,EAAO2L,KAAKm0B,oBAAoBpjC,GACpCiP,KAAKmvB,KAAK5E,wBAAwB,IAAMl2B,EAAM,IAAMtD,EACxD,CACJ,EAEA0hC,EAAOt1B,UAAUgtB,UAAY,SAASp5B,GAClCiP,KAAKqzB,gBAAgB,GAEjBrzB,KAAKmvB,KAAKhF,WAAWnqB,KAAKmvB,KAAKhF,UAAUp5B,GACzCiP,KAAKmvB,KAAK9E,cAAcrqB,KAAKmvB,KAAK9E,cAC1C,EAEAoI,EAAOt1B,UAAUm3B,QAAU,SAASvjC,GAChCiP,KAAKqzB,gBAAgB,GAEjBrzB,KAAKqoB,SAASzE,SAAW5jB,KAAKqoB,SAASkM,gBACnCv0B,KAAKmvB,KAAK/E,cAAcpqB,KAAKmvB,KAAK/E,eAClCpqB,KAAKmvB,KAAKpF,QAAQ/pB,KAAKmvB,KAAKpF,OAAOh5B,GACnCiP,KAAKmvB,KAAK7E,YAAYtqB,KAAKmvB,KAAK7E,cAEpCtqB,KAAKmqB,UAAU,UAAYp5B,EAAQ,KAE3C,EAEA0hC,EAAOt1B,UAAU+rB,QAAU,SAASja,GAC5BjP,KAAKmvB,KAAKjG,SAASlpB,KAAKmvB,KAAKjG,QAAQja,EAC7C,EAEAwjB,EAAOt1B,UAAU6rB,MAAQ,WACrB,GAAIhpB,KAAKmvB,KAAKhG,WACV,IACI,IAAI1uB,EAAIuF,KAAK8yB,OAAO33B,OACpBV,EAAI,EACJuF,KAAKmvB,KAAKhG,WAAWnpB,KAAK8yB,SAASr4B,KAGvCuF,KAAKmvB,KAAKnG,OAAOhpB,KAAKmvB,KAAKnG,OACnC,EAGAyJ,EAAOt1B,UAAUq3B,MAAQ,WACjBx0B,KAAKmvB,KAAKpG,SAAS/oB,KAAKmvB,KAAKpG,UACjC/oB,KAAKozB,WAAWoB,QAEhBx0B,KAAK0yB,SAAW,GAChB1yB,KAAK2yB,YAAc,GACnB3yB,KAAK6yB,SAAW,KAChB7yB,KAAK8yB,OAAS,GAEV9yB,KAAKmvB,KAAKtG,cAAc7oB,KAAKmvB,KAAKtG,aAAa7oB,KACvD,EAGAyyB,EAAOt1B,UAAUs3B,cAAgB,SAASt1B,GACtCa,KAAKw0B,QACLx0B,KAAK9D,IAAIiD,EACb,EAEAszB,EAAOt1B,UAAUU,MAAQ,SAAS62B,GAC9B10B,KAAKozB,WAAWv1B,MAAM62B,EAC1B,EAEAjC,EAAOt1B,UAAUjB,IAAM,SAASw4B,GAC5B10B,KAAKozB,WAAWl3B,IAAIw4B,EACxB,EAEAjC,EAAOt1B,UAAUw3B,MAAQ,WACrB30B,KAAKozB,WAAWuB,OACpB,EAEAlC,EAAOt1B,UAAUy3B,OAAS,WACtB50B,KAAKozB,WAAWwB,QACpB,EAGAnC,EAAOt1B,UAAU03B,WAAapC,EAAOt1B,UAAUU,MAC/C40B,EAAOt1B,UAAUgjB,KAAOsS,EAAOt1B,UAAUjB,IAEzCwS,EAAO1U,QAAUy4B,kBC3XjB,SAASqC,EAAa5F,GAClBlvB,KAAKmvB,KAAOD,GAAO,CAAC,CACxB,CAJAxgB,EAAO1U,QAAU86B,EAMjB,IAAI1F,EAAS/yB,EAAAA,MAAAA,OACbY,OAAO8V,KAAKqc,GAAQ3E,SAAQ,SAASp2B,GACjC,GAAqB,IAAjB+6B,EAAO/6B,GACPA,EAAO,KAAOA,EACdygC,EAAa33B,UAAU9I,GAAQ,WACvB2L,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,IACnC,OACG,GAAqB,IAAjB+6B,EAAO/6B,GACdA,EAAO,KAAOA,EACdygC,EAAa33B,UAAU9I,GAAQ,SAASsQ,GAChC3E,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,GAAMsQ,EACzC,MACG,IAAqB,IAAjByqB,EAAO/6B,GAMd,MAAM0H,MAAM,6BALZ1H,EAAO,KAAOA,EACdygC,EAAa33B,UAAU9I,GAAQ,SAASsQ,EAAG/F,GACnCoB,KAAKmvB,KAAK96B,IAAO2L,KAAKmvB,KAAK96B,GAAMsQ,EAAG/F,EAC5C,CAGJ,CACJ,oBC1BA8P,EAAO1U,QAAU+6B,EAEjB,IAAItC,EAASp2B,EAAQ,KAErB,SAAS04B,EAAO9M,GACZwK,EAAO3xB,KAAKd,KAAM,IAAIg1B,EAAIh1B,MAAOioB,EACrC,CAMA,SAAS+M,EAAIxa,GACTxa,KAAKwa,MAAQA,CACjB,CANAne,EAAQ,KAARA,CAAoB04B,EAAQtC,GAE5BsC,EAAO53B,UAAU83B,UAAW,EAM5B,IAAI7F,EAAS/yB,EAAAA,MAAAA,OAEbY,OAAO8V,KAAKqc,GAAQ3E,SAAQ,SAASp2B,GACjC,GAAqB,IAAjB+6B,EAAO/6B,GACP2gC,EAAI73B,UAAU,KAAO9I,GAAQ,WACzB2L,KAAKwa,MAAMjK,KAAKlc,EACpB,OACG,GAAqB,IAAjB+6B,EAAO/6B,GACd2gC,EAAI73B,UAAU,KAAO9I,GAAQ,SAASsQ,GAClC3E,KAAKwa,MAAMjK,KAAKlc,EAAMsQ,EAC1B,MACG,IAAqB,IAAjByqB,EAAO/6B,GAKd,MAAM0H,MAAM,8BAJZi5B,EAAI73B,UAAU,KAAO9I,GAAQ,SAASsQ,EAAG/F,GACrCoB,KAAKwa,MAAMjK,KAAKlc,EAAMsQ,EAAG/F,EAC7B,CAGJ,CACJ,oBClCA8P,EAAO1U,QAAUs2B,GAEjB,IAAI4E,EAAkB74B,EAAQ,MAC1B84B,EAAY94B,EAAQ,MACpB+4B,EAAY/4B,EAAQ,KACpBg5B,EAASh5B,EAAQ,MAEjB5B,EAAI,EAEJ66B,EAAO76B,IACP86B,EAAkB96B,IAClB+6B,EAAc/6B,IACdg7B,EAAsBh7B,IACtBi7B,EAA0Bj7B,IAC1Bk7B,EAAsBl7B,IACtBm7B,EAAyBn7B,IAGzBo7B,EAAwBp7B,IACxBq7B,EAAoBr7B,IACpBs7B,EAAuBt7B,IACvBu7B,EAAyBv7B,IACzBw7B,EAAwBx7B,IACxBy7B,EAAwBz7B,IACxB07B,EAAwB17B,IAGxB27B,EAAqB37B,IACrB47B,EAAiB57B,IAGjB67B,EAA4B77B,IAG5B87B,EAAiB97B,IACjB+7B,EAAa/7B,IACbg8B,EAAkBh8B,IAClBi8B,EAAkBj8B,IAGlBk8B,EAAiBl8B,IACjBm8B,EAAiBn8B,IACjBo8B,EAAiBp8B,IACjBq8B,EAAiBr8B,IACjBs8B,EAAiBt8B,IACjBu8B,EAAiBv8B,IACjBw8B,EAAWx8B,IACXy8B,EAAgBz8B,IAChB08B,EAAgB18B,IAGhB28B,EAAiB38B,IACjB48B,EAAqB58B,IAErB68B,EAAkB78B,IAClB88B,EAAkB98B,IAClB+8B,EAAkB/8B,IAClBg9B,EAAkBh9B,IAClBi9B,EAAkBj9B,IAClBk9B,EAAiBl9B,IACjBm9B,EAAiBn9B,IACjBo9B,EAAiBp9B,IACjBq9B,EAAiBr9B,IACjBs9B,EAAiBt9B,IAEjBu9B,EAAiBv9B,IACjBw9B,EAAiBx9B,IACjBy9B,EAAiBz9B,IACjB09B,EAAiB19B,IACjB29B,GAAgB39B,IAChB49B,GAAgB59B,IAChB69B,GAAgB79B,IAChB89B,GAAgB99B,IAEhB+9B,GAAgB/9B,IAChBg+B,GAAwBh+B,IACxBi+B,GAAkBj+B,IAClBk+B,GAAoBl+B,IACpBm+B,GAAgBn+B,IAEhB+G,GAAI,EAEJq3B,GAAer3B,KACfs3B,GAAiBt3B,KACjBu3B,GAAgBv3B,KAEpB,SAASw3B,GAAWt2B,GAChB,MAAa,MAANA,GAAmB,OAANA,GAAoB,OAANA,GAAoB,OAANA,GAAoB,OAANA,CAClE,CAEA,SAASu2B,GAAYC,EAAOC,EAASC,GACjC,IAAIC,EAAQH,EAAMp5B,cAElB,OAAIo5B,IAAUG,EACH,SAAS32B,GACRA,IAAM22B,EACNr5B,KAAKs5B,OAASH,GAEdn5B,KAAKs5B,OAASF,EACdp5B,KAAKu5B,SAEb,EAEO,SAAS72B,GACRA,IAAM22B,GAAS32B,IAAMw2B,EACrBl5B,KAAKs5B,OAASH,GAEdn5B,KAAKs5B,OAASF,EACdp5B,KAAKu5B,SAEb,CAER,CAEA,SAASC,GAAuBN,EAAOO,GACnC,IAAIJ,EAAQH,EAAMp5B,cAElB,OAAO,SAAS4C,GACRA,IAAM22B,GAAS32B,IAAMw2B,EACrBl5B,KAAKs5B,OAASG,GAEdz5B,KAAKs5B,OAAS9D,EACdx1B,KAAKu5B,SAEb,CACJ,CAEA,SAASjJ,GAAUrI,EAASiH,GACxBlvB,KAAKs5B,OAAShE,EACdt1B,KAAK05B,QAAU,GACf15B,KAAKuzB,cAAgB,EACrBvzB,KAAKu5B,OAAS,EACdv5B,KAAK25B,cAAgB,EACrB35B,KAAK45B,WAAatE,EAClBt1B,KAAK65B,SAAWhB,GAChB74B,KAAKmvB,KAAOD,EACZlvB,KAAK85B,UAAW,EAChB95B,KAAK+5B,QAAS,EACd/5B,KAAKg6B,YAAc/R,IAAWA,EAAQrE,SACtC5jB,KAAKi6B,mBAAqBhS,IAAWA,EAAQ5T,eACjD,CAEAic,GAAUnzB,UAAU+8B,WAAa,SAASx3B,GAC5B,MAANA,GACI1C,KAAKu5B,OAASv5B,KAAKuzB,eACnBvzB,KAAKmvB,KAAKpF,OAAO/pB,KAAKm6B,eAE1Bn6B,KAAKs5B,OAAS/D,EACdv1B,KAAKuzB,cAAgBvzB,KAAKu5B,QAE1Bv5B,KAAKi6B,iBACLj6B,KAAK65B,WAAahB,IACZ,MAANn2B,IAEI1C,KAAKu5B,OAASv5B,KAAKuzB,eACnBvzB,KAAKmvB,KAAKpF,OAAO/pB,KAAKm6B,eAE1Bn6B,KAAK45B,WAAatE,EAClBt1B,KAAKs5B,OAASd,GACdx4B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAUi9B,oBAAsB,SAAS13B,GACrC,MAANA,EACA1C,KAAKs5B,OAAS5D,EACD,MAANhzB,GACP1C,KAAKmvB,KAAKpF,OAAO/pB,KAAKm6B,eACtBn6B,KAAKuzB,cAAgBvzB,KAAKu5B,QACb,MAAN72B,GAAa1C,KAAK65B,WAAahB,IAAgBG,GAAWt2B,GACjE1C,KAAKs5B,OAAShE,EACD,MAAN5yB,GACP1C,KAAKs5B,OAASlD,EACdp2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GACtB,MAAN72B,GACP1C,KAAKs5B,OAAShD,EACdt2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,IAEnCv5B,KAAKs5B,OACAt5B,KAAKg6B,UAAmB,MAANt3B,GAAmB,MAANA,EAE1B8yB,EADA4B,EAEVp3B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAUk9B,gBAAkB,SAAS33B,IACjC,MAANA,GAAmB,MAANA,GAAas2B,GAAWt2B,MACrC1C,KAAKs6B,WAAW,iBAChBt6B,KAAKs5B,OAASzD,EACd71B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAUo9B,4BAA8B,SAAS73B,GACnDs2B,GAAWt2B,KACA,MAANA,EACL1C,KAAKs5B,OAAShE,EACPt1B,KAAK65B,WAAahB,GACf,MAANn2B,GAAmB,MAANA,EACb1C,KAAKs5B,OAASjC,GAEdr3B,KAAKs5B,OAAShE,EACdt1B,KAAKu5B,WAGTv5B,KAAKs5B,OAAS3D,EACd31B,KAAKuzB,cAAgBvzB,KAAKu5B,QAElC,EAEAjJ,GAAUnzB,UAAUq9B,wBAA0B,SAAS93B,IACzC,MAANA,GAAas2B,GAAWt2B,MACxB1C,KAAKs6B,WAAW,cAChBt6B,KAAKs5B,OAAS1D,EACd51B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAUs9B,2BAA6B,SAAS/3B,GAE5C,MAANA,IACA1C,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EAE3C,EAEAjJ,GAAUnzB,UAAUu9B,0BAA4B,SAASh4B,GAC3C,MAANA,GACA1C,KAAKmvB,KAAKwE,eACV3zB,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GACtB,MAAN72B,EACP1C,KAAKs5B,OAAS7D,EACNuD,GAAWt2B,KACnB1C,KAAKs5B,OAASxD,EACd91B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAUw9B,uBAAyB,SAASj4B,GACxC,MAANA,GACA1C,KAAKmvB,KAAK0E,mBACV7zB,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GAC3BP,GAAWt2B,KACnB1C,KAAKs5B,OAASzD,EACd71B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAUy9B,sBAAwB,SAASl4B,IACvC,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAas2B,GAAWt2B,MAClD1C,KAAKmvB,KAAK4E,aAAa/zB,KAAKm6B,eAC5Bn6B,KAAKuzB,eAAiB,EACtBvzB,KAAKs5B,OAASvD,EACd/1B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU09B,yBAA2B,SAASn4B,GAC1C,MAANA,EACA1C,KAAKs5B,OAAStD,EACD,MAANtzB,GAAmB,MAANA,GACpB1C,KAAKmvB,KAAK8E,cACVj0B,KAAKs5B,OAASzD,EACd71B,KAAKu5B,UACGP,GAAWt2B,KACnB1C,KAAKmvB,KAAK8E,cACVj0B,KAAKs5B,OAASxD,EACd91B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAU29B,2BAA6B,SAASp4B,GAC5C,MAANA,GACA1C,KAAKs5B,OAASrD,EACdj2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GACtB,MAAN72B,GACP1C,KAAKs5B,OAASpD,EACdl2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GAC3BP,GAAWt2B,KACnB1C,KAAKs5B,OAASnD,EACdn2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAC1Bv5B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU49B,mCAAqC,SAASr4B,GACpD,MAANA,GACA1C,KAAKs6B,WAAW,gBAChBt6B,KAAKmvB,KAAK8E,cACVj0B,KAAKs5B,OAASzD,GACP71B,KAAKi6B,iBAAyB,MAANv3B,IAC/B1C,KAAKs6B,WAAW,gBAChBt6B,KAAK45B,WAAa55B,KAAKs5B,OACvBt5B,KAAKs5B,OAASd,GACdx4B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAU69B,mCAAqC,SAASt4B,GACpD,MAANA,GACA1C,KAAKs6B,WAAW,gBAChBt6B,KAAKmvB,KAAK8E,cACVj0B,KAAKs5B,OAASzD,GACP71B,KAAKi6B,iBAAyB,MAANv3B,IAC/B1C,KAAKs6B,WAAW,gBAChBt6B,KAAK45B,WAAa55B,KAAKs5B,OACvBt5B,KAAKs5B,OAASd,GACdx4B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAU89B,+BAAiC,SAASv4B,GACtDs2B,GAAWt2B,IAAY,MAANA,GACjB1C,KAAKs6B,WAAW,gBAChBt6B,KAAKmvB,KAAK8E,cACVj0B,KAAKs5B,OAASzD,EACd71B,KAAKu5B,UACEv5B,KAAKi6B,iBAAyB,MAANv3B,IAC/B1C,KAAKs6B,WAAW,gBAChBt6B,KAAK45B,WAAa55B,KAAKs5B,OACvBt5B,KAAKs5B,OAASd,GACdx4B,KAAKuzB,cAAgBvzB,KAAKu5B,OAElC,EAEAjJ,GAAUnzB,UAAU+9B,wBAA0B,SAASx4B,GACnD1C,KAAKs5B,OACK,MAAN52B,EACMi0B,EACM,MAANj0B,EACI6zB,EACAF,CAClB,EAEA/F,GAAUnzB,UAAUg+B,oBAAsB,SAASz4B,GACrC,MAANA,IACA1C,KAAKmvB,KAAKkF,cAAcr0B,KAAKm6B,eAC7Bn6B,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EAE3C,EAEAjJ,GAAUnzB,UAAUi+B,8BAAgC,SAAS14B,GAC/C,MAANA,IACA1C,KAAKmvB,KAAK5E,wBAAwBvqB,KAAKm6B,eACvCn6B,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EAE3C,EAEAjJ,GAAUnzB,UAAUk+B,oBAAsB,SAAS34B,GACrC,MAANA,GACA1C,KAAKs5B,OAAS9C,EACdx2B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GAEnCv5B,KAAKs5B,OAASjD,CAEtB,EAEA/F,GAAUnzB,UAAUm+B,gBAAkB,SAAS54B,GACjC,MAANA,IAAW1C,KAAKs5B,OAAS7C,EACjC,EAEAnG,GAAUnzB,UAAUo+B,oBAAsB,SAAS74B,GAE3C1C,KAAKs5B,OADC,MAAN52B,EACcg0B,EAEAF,CAEtB,EAEAlG,GAAUnzB,UAAUq+B,oBAAsB,SAAS94B,GACrC,MAANA,GAEA1C,KAAKmvB,KAAKhF,UACNnqB,KAAK05B,QAAQ+B,UAAUz7B,KAAKuzB,cAAevzB,KAAKu5B,OAAS,IAE7Dv5B,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GACtB,MAAN72B,IACP1C,KAAKs5B,OAAS9C,EAGtB,EAEAlG,GAAUnzB,UAAUu+B,mBAAqBzC,GACrC,IACArC,EACAP,GAEJ/F,GAAUnzB,UAAUw+B,mBAAqB1C,GACrC,IACApC,EACAR,GAEJ/F,GAAUnzB,UAAUy+B,mBAAqB3C,GACrC,IACAnC,EACAT,GAEJ/F,GAAUnzB,UAAU0+B,mBAAqB5C,GACrC,IACAlC,EACAV,GAEJ/F,GAAUnzB,UAAU2+B,mBAAqB7C,GACrC,IACAjC,EACAX,GAGJ/F,GAAUnzB,UAAU4+B,mBAAqB,SAASr5B,GACpC,MAANA,GACA1C,KAAKs5B,OAASrC,EACdj3B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,IAEnCv5B,KAAKs5B,OAASjD,EACdr2B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU6+B,cAAgB,SAASt5B,GAC/B,MAANA,IAAW1C,KAAKs5B,OAASpC,EACjC,EAEA5G,GAAUnzB,UAAU8+B,kBAAoB,SAASv5B,GAC9B1C,KAAKs5B,OAAV,MAAN52B,EAAyBy0B,EACVF,CACvB,EAEA3G,GAAUnzB,UAAU++B,kBAAoB,SAASx5B,GACnC,MAANA,GAEA1C,KAAKmvB,KAAKmF,QACNt0B,KAAK05B,QAAQ+B,UAAUz7B,KAAKuzB,cAAevzB,KAAKu5B,OAAS,IAE7Dv5B,KAAKs5B,OAAShE,EACdt1B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,GACtB,MAAN72B,IACP1C,KAAKs5B,OAASrC,EAGtB,EAEA3G,GAAUnzB,UAAUg/B,oBAAsB,SAASz5B,GACrC,MAANA,GAAmB,MAANA,EACb1C,KAAKs5B,OAAShC,EACD,MAAN50B,GAAmB,MAANA,EACpB1C,KAAKs5B,OAAStB,GAEdh4B,KAAKs5B,OAAS9D,EACdx1B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAUi/B,uBAAyB,SAAS15B,GAC9C1C,KAAK65B,WAAaf,IAAyB,MAANp2B,GAAmB,MAANA,EAE3C1C,KAAK65B,WAAad,IAAwB,MAANr2B,GAAmB,MAANA,EAErD1C,KAAKs5B,OAAShE,EADjBt1B,KAAKs5B,OAASlB,GAFdp4B,KAAKs5B,OAAS3B,CAItB,EAEArH,GAAUnzB,UAAUk/B,oBAAsB7C,GACtC,IACAjC,GAEJjH,GAAUnzB,UAAUm/B,oBAAsB9C,GACtC,IACAhC,GAEJlH,GAAUnzB,UAAUo/B,oBAAsB/C,GACtC,IACA/B,GAEJnH,GAAUnzB,UAAUq/B,oBAAsBhD,GACtC,IACA9B,GAGJpH,GAAUnzB,UAAUs/B,oBAAsB,SAAS/5B,IACrC,MAANA,GAAmB,MAANA,GAAas2B,GAAWt2B,MACrC1C,KAAK65B,SAAWf,IAEpB94B,KAAKs5B,OAAS9D,EACdx1B,KAAKu5B,QACT,EAEAjJ,GAAUnzB,UAAUu/B,mBAAqBzD,GAAY,IAAKrB,EAAgBtC,GAC1EhF,GAAUnzB,UAAUw/B,mBAAqB1D,GAAY,IAAKpB,EAAgBvC,GAC1EhF,GAAUnzB,UAAUy/B,mBAAqB3D,GAAY,IAAKnB,EAAgBxC,GAC1EhF,GAAUnzB,UAAU0/B,mBAAqB5D,GAAY,IAAKlB,EAAgBzC,GAE1EhF,GAAUnzB,UAAU2/B,mBAAqB,SAASp6B,GACpC,MAANA,GAAas2B,GAAWt2B,IACxB1C,KAAK65B,SAAWhB,GAChB74B,KAAKs5B,OAAS3D,EACd31B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EACnCv5B,KAAKu5B,UACFv5B,KAAKs5B,OAAShE,CACzB,EAEAhF,GAAUnzB,UAAU4/B,mBAAqBvD,GACrC,IACAvB,GAEJ3H,GAAUnzB,UAAU6/B,mBAAqBxD,GACrC,IACAtB,GAEJ5H,GAAUnzB,UAAU8/B,mBAAqBzD,GACrC,IACArB,GAGJ7H,GAAUnzB,UAAU+/B,mBAAqB,SAASx6B,IACpC,MAANA,GAAmB,MAANA,GAAas2B,GAAWt2B,MACrC1C,KAAK65B,SAAWd,IAEpB/4B,KAAKs5B,OAAS9D,EACdx1B,KAAKu5B,QACT,EAEAjJ,GAAUnzB,UAAUggC,kBAAoBlE,GAAY,IAAKZ,GAAe/C,GACxEhF,GAAUnzB,UAAUigC,kBAAoBnE,GAAY,IAAKX,GAAehD,GACxEhF,GAAUnzB,UAAUkgC,kBAAoBpE,GAAY,IAAKV,GAAejD,GAExEhF,GAAUnzB,UAAUmgC,kBAAoB,SAAS56B,GACnC,MAANA,GAAas2B,GAAWt2B,IACxB1C,KAAK65B,SAAWhB,GAChB74B,KAAKs5B,OAAS3D,EACd31B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EACnCv5B,KAAKu5B,UACFv5B,KAAKs5B,OAAShE,CACzB,EAEAhF,GAAUnzB,UAAUogC,mBAAqBtE,GACrC,IACAR,GACAC,IAEJpI,GAAUnzB,UAAUqgC,0BAA4BvE,GAC5C,IACAL,GACAD,IAIJrI,GAAUnzB,UAAUsgC,wBAA0B,WAE1C,GAAIz9B,KAAKuzB,cAAgB,EAAIvzB,KAAKu5B,OAAQ,CACtC,IAAImE,EAAS19B,KAAK05B,QAAQ+B,UAClBz7B,KAAKuzB,cAAgB,EACrBvzB,KAAKu5B,QAET7a,EAAM1e,KAAKg6B,SAAW3E,EAASF,EAE/BzW,EAAIK,eAAe2e,KACnB19B,KAAK29B,aAAajf,EAAIgf,IACtB19B,KAAKuzB,cAAgBvzB,KAAKu5B,OAAS,EAE3C,CACJ,EAGAjJ,GAAUnzB,UAAUygC,mBAAqB,WACrC,IAAI3hC,EAAQ+D,KAAKuzB,cAAgB,EAC7B9oB,EAAQzK,KAAKu5B,OAASt9B,EAI1B,IAFIwO,EAAQ,IAAGA,EAAQ,GAEhBA,GAAS,GAAG,CAEf,IAAIizB,EAAS19B,KAAK05B,QAAQ13B,OAAO/F,EAAOwO,GAExC,GAAI2qB,EAAUrW,eAAe2e,GAGzB,OAFA19B,KAAK29B,aAAavI,EAAUsI,SAC5B19B,KAAKuzB,eAAiB9oB,EAAQ,GAG9BA,GAER,CACJ,EAEA6lB,GAAUnzB,UAAU0gC,oBAAsB,SAASn7B,GACrC,MAANA,GACA1C,KAAKy9B,0BACDz9B,KAAKuzB,cAAgB,EAAIvzB,KAAKu5B,SAAWv5B,KAAKg6B,UAC9Ch6B,KAAK49B,qBAET59B,KAAKs5B,OAASt5B,KAAK45B,aAElBl3B,EAAI,KAAOA,EAAI,OACfA,EAAI,KAAOA,EAAI,OACfA,EAAI,KAAOA,EAAI,OAEZ1C,KAAKg6B,UACAh6B,KAAKuzB,cAAgB,IAAMvzB,KAAKu5B,SAChCv5B,KAAK45B,aAAetE,EACf,MAAN5yB,GACA1C,KAAKy9B,0BAGTz9B,KAAK49B,sBAGT59B,KAAKs5B,OAASt5B,KAAK45B,WACnB55B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU2gC,qBAAuB,SAASp8B,EAAQsgB,GACxD,IAAI+b,EAAe/9B,KAAKuzB,cAAgB7xB,EAExC,GAAIq8B,IAAiB/9B,KAAKu5B,OAAQ,CAE9B,IAAImE,EAAS19B,KAAK05B,QAAQ+B,UAAUsC,EAAc/9B,KAAKu5B,QACnDz3B,EAASC,SAAS27B,EAAQ1b,GAE9BhiB,KAAK29B,aAAazI,EAAgBpzB,IAClC9B,KAAKuzB,cAAgBvzB,KAAKu5B,MAC9B,MACIv5B,KAAKuzB,gBAGTvzB,KAAKs5B,OAASt5B,KAAK45B,UACvB,EAEAtJ,GAAUnzB,UAAU6gC,sBAAwB,SAASt7B,GACvC,MAANA,GACA1C,KAAK89B,qBAAqB,EAAG,IAC7B99B,KAAKuzB,kBACE7wB,EAAI,KAAOA,EAAI,OACjB1C,KAAKg6B,SAGNh6B,KAAKs5B,OAASt5B,KAAK45B,WAFnB55B,KAAK89B,qBAAqB,EAAG,IAIjC99B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU8gC,kBAAoB,SAASv7B,GACnC,MAANA,GACA1C,KAAK89B,qBAAqB,EAAG,IAC7B99B,KAAKuzB,kBAEJ7wB,EAAI,KAAOA,EAAI,OACfA,EAAI,KAAOA,EAAI,OACfA,EAAI,KAAOA,EAAI,OAEX1C,KAAKg6B,SAGNh6B,KAAKs5B,OAASt5B,KAAK45B,WAFnB55B,KAAK89B,qBAAqB,EAAG,IAIjC99B,KAAKu5B,SAEb,EAEAjJ,GAAUnzB,UAAU+gC,SAAW,WACvBl+B,KAAKuzB,cAAgB,GACrBvzB,KAAK05B,QAAU,GACf15B,KAAK25B,eAAiB35B,KAAKu5B,OAC3Bv5B,KAAKu5B,OAAS,GACPv5B,KAAK85B,WACR95B,KAAKs5B,SAAWhE,GACZt1B,KAAKuzB,gBAAkBvzB,KAAKu5B,QAC5Bv5B,KAAKmvB,KAAKpF,OAAO/pB,KAAK05B,QAAQ13B,OAAOhC,KAAKuzB,gBAE9CvzB,KAAK05B,QAAU,GACf15B,KAAK25B,eAAiB35B,KAAKu5B,OAC3Bv5B,KAAKu5B,OAAS,GACPv5B,KAAKuzB,gBAAkBvzB,KAAKu5B,QAEnCv5B,KAAK05B,QAAU,GACf15B,KAAK25B,eAAiB35B,KAAKu5B,OAC3Bv5B,KAAKu5B,OAAS,IAGdv5B,KAAK05B,QAAU15B,KAAK05B,QAAQ13B,OAAOhC,KAAKuzB,eACxCvzB,KAAKu5B,QAAUv5B,KAAKuzB,cACpBvzB,KAAK25B,eAAiB35B,KAAKuzB,eAG/BvzB,KAAKuzB,cAAgB,EAE7B,EAGAjD,GAAUnzB,UAAUU,MAAQ,SAAS62B,GAC7B10B,KAAK+5B,QAAQ/5B,KAAKmvB,KAAKjG,QAAQntB,MAAM,yBAEzCiE,KAAK05B,SAAWhF,EAChB10B,KAAKm+B,QACT,EAEA7N,GAAUnzB,UAAUghC,OAAS,WACzB,KAAOn+B,KAAKu5B,OAASv5B,KAAK05B,QAAQv+B,QAAU6E,KAAK85B,UAAU,CACvD,IAAIp3B,EAAI1C,KAAK05B,QAAQ3U,OAAO/kB,KAAKu5B,QAC7Bv5B,KAAKs5B,SAAWhE,EAChBt1B,KAAKk6B,WAAWx3B,GACT1C,KAAKs5B,SAAW/D,EACvBv1B,KAAKo6B,oBAAoB13B,GAClB1C,KAAKs5B,SAAW9D,EACvBx1B,KAAKq6B,gBAAgB33B,GACd1C,KAAKs5B,SAAW5D,EACvB11B,KAAKu6B,4BAA4B73B,GAC1B1C,KAAKs5B,SAAW3D,EACvB31B,KAAKw6B,wBAAwB93B,GACtB1C,KAAKs5B,SAAW1D,EACvB51B,KAAKy6B,2BAA2B/3B,GACzB1C,KAAKs5B,SAAW7D,EACvBz1B,KAAK26B,uBAAuBj4B,GACrB1C,KAAKs5B,SAAWzD,EAKvB71B,KAAK06B,0BAA0Bh4B,GACxB1C,KAAKs5B,SAAWxD,EACvB91B,KAAK46B,sBAAsBl4B,GACpB1C,KAAKs5B,SAAWvD,EACvB/1B,KAAK66B,yBAAyBn4B,GACvB1C,KAAKs5B,SAAWtD,EACvBh2B,KAAK86B,2BAA2Bp4B,GACzB1C,KAAKs5B,SAAWrD,EACvBj2B,KAAK+6B,mCAAmCr4B,GACjC1C,KAAKs5B,SAAWpD,EACvBl2B,KAAKg7B,mCAAmCt4B,GACjC1C,KAAKs5B,SAAWnD,EACvBn2B,KAAKi7B,+BAA+Bv4B,GAC7B1C,KAAKs5B,SAAWlD,EAKvBp2B,KAAKk7B,wBAAwBx4B,GACtB1C,KAAKs5B,SAAWjD,EACvBr2B,KAAKm7B,oBAAoBz4B,GAClB1C,KAAKs5B,SAAWhD,EAKvBt2B,KAAKo7B,8BAA8B14B,GAC5B1C,KAAKs5B,SAAW/C,EAKvBv2B,KAAKq7B,oBAAoB34B,GAClB1C,KAAKs5B,SAAW9C,EACvBx2B,KAAKs7B,gBAAgB54B,GACd1C,KAAKs5B,SAAW7C,EACvBz2B,KAAKu7B,oBAAoB74B,GAClB1C,KAAKs5B,SAAW5C,EACvB12B,KAAKw7B,oBAAoB94B,GAClB1C,KAAKs5B,SAAW3C,EAKvB32B,KAAK07B,mBAAmBh5B,GACjB1C,KAAKs5B,SAAW1C,EACvB52B,KAAK27B,mBAAmBj5B,GACjB1C,KAAKs5B,SAAWzC,EACvB72B,KAAK47B,mBAAmBl5B,GACjB1C,KAAKs5B,SAAWxC,EACvB92B,KAAK67B,mBAAmBn5B,GACjB1C,KAAKs5B,SAAWvC,EACvB/2B,KAAK87B,mBAAmBp5B,GACjB1C,KAAKs5B,SAAWtC,EACvBh3B,KAAK+7B,mBAAmBr5B,GACjB1C,KAAKs5B,SAAWrC,EACvBj3B,KAAKg8B,cAAct5B,GACZ1C,KAAKs5B,SAAWpC,EACvBl3B,KAAKi8B,kBAAkBv5B,GAChB1C,KAAKs5B,SAAWnC,EACvBn3B,KAAKk8B,kBAAkBx5B,GAChB1C,KAAKs5B,SAAWlC,EAKvBp3B,KAAKm8B,oBAAoBz5B,GAClB1C,KAAKs5B,SAAWjC,EACvBr3B,KAAKo8B,uBAAuB15B,GACrB1C,KAAKs5B,SAAWhC,EAKvBt3B,KAAKq8B,oBAAoB35B,GAClB1C,KAAKs5B,SAAW/B,EACvBv3B,KAAKs8B,oBAAoB55B,GAClB1C,KAAKs5B,SAAW9B,EACvBx3B,KAAKu8B,oBAAoB75B,GAClB1C,KAAKs5B,SAAW7B,EACvBz3B,KAAKw8B,oBAAoB95B,GAClB1C,KAAKs5B,SAAW5B,EACvB13B,KAAKy8B,oBAAoB/5B,GAClB1C,KAAKs5B,SAAW3B,EACvB33B,KAAK08B,mBAAmBh6B,GACjB1C,KAAKs5B,SAAW1B,EACvB53B,KAAK28B,mBAAmBj6B,GACjB1C,KAAKs5B,SAAWzB,EACvB73B,KAAK48B,mBAAmBl6B,GACjB1C,KAAKs5B,SAAWxB,EACvB93B,KAAK68B,mBAAmBn6B,GACjB1C,KAAKs5B,SAAWvB,EACvB/3B,KAAK88B,mBAAmBp6B,GACjB1C,KAAKs5B,SAAWtB,EAKvBh4B,KAAK+8B,mBAAmBr6B,GACjB1C,KAAKs5B,SAAWrB,EACvBj4B,KAAKg9B,mBAAmBt6B,GACjB1C,KAAKs5B,SAAWpB,EACvBl4B,KAAKi9B,mBAAmBv6B,GACjB1C,KAAKs5B,SAAWnB,EACvBn4B,KAAKk9B,mBAAmBx6B,GACjB1C,KAAKs5B,SAAWlB,GACvBp4B,KAAKm9B,kBAAkBz6B,GAChB1C,KAAKs5B,SAAWjB,GACvBr4B,KAAKo9B,kBAAkB16B,GAChB1C,KAAKs5B,SAAWhB,GACvBt4B,KAAKq9B,kBAAkB36B,GAChB1C,KAAKs5B,SAAWf,GACvBv4B,KAAKs9B,kBAAkB56B,GAChB1C,KAAKs5B,SAAWd,GAKvBx4B,KAAKu9B,mBAAmB76B,GACjB1C,KAAKs5B,SAAWb,GACvBz4B,KAAKw9B,0BAA0B96B,GACxB1C,KAAKs5B,SAAWZ,GACvB14B,KAAK69B,oBAAoBn7B,GAClB1C,KAAKs5B,SAAWX,GACvB34B,KAAKg+B,sBAAsBt7B,GACpB1C,KAAKs5B,SAAWV,GACvB54B,KAAKi+B,kBAAkBv7B,GAEvB1C,KAAKmvB,KAAKjG,QAAQntB,MAAM,kBAAmBiE,KAAKs5B,QAGpDt5B,KAAKu5B,QACT,CAEAv5B,KAAKk+B,UACT,EAEA5N,GAAUnzB,UAAUw3B,MAAQ,WACxB30B,KAAK85B,UAAW,CACpB,EACAxJ,GAAUnzB,UAAUy3B,OAAS,WACzB50B,KAAK85B,UAAW,EAEZ95B,KAAKu5B,OAASv5B,KAAK05B,QAAQv+B,QAC3B6E,KAAKm+B,SAELn+B,KAAK+5B,QACL/5B,KAAKo+B,SAEb,EAEA9N,GAAUnzB,UAAUjB,IAAM,SAASw4B,GAC3B10B,KAAK+5B,QAAQ/5B,KAAKmvB,KAAKjG,QAAQntB,MAAM,uBACrC24B,GAAO10B,KAAKnC,MAAM62B,GAEtB10B,KAAK+5B,QAAS,EAEV/5B,KAAK85B,UAAU95B,KAAKo+B,SAC5B,EAEA9N,GAAUnzB,UAAUihC,QAAU,WAEtBp+B,KAAKuzB,cAAgBvzB,KAAKu5B,QAC1Bv5B,KAAKq+B,sBAGTr+B,KAAKmvB,KAAKnG,OACd,EAEAsH,GAAUnzB,UAAUkhC,oBAAsB,WACtC,IAAIl/B,EAAOa,KAAK05B,QAAQ13B,OAAOhC,KAAKuzB,eAGhCvzB,KAAKs5B,SAAWrC,GAChBj3B,KAAKs5B,SAAWpC,GAChBl3B,KAAKs5B,SAAWnC,EAEhBn3B,KAAKmvB,KAAKmF,QAAQn1B,GAElBa,KAAKs5B,SAAW9C,GAChBx2B,KAAKs5B,SAAW7C,GAChBz2B,KAAKs5B,SAAW5C,EAEhB12B,KAAKmvB,KAAKhF,UAAUhrB,GACba,KAAKs5B,SAAWZ,IAAoB14B,KAAKg6B,SAMzCh6B,KAAKs5B,SAAWX,IAAsB34B,KAAKg6B,SAM3Ch6B,KAAKs5B,SAAWV,IAAkB54B,KAAKg6B,SAO9Ch6B,KAAKs5B,SAAW9D,GAChBx1B,KAAKs5B,SAAWzD,GAChB71B,KAAKs5B,SAAWtD,GAChBh2B,KAAKs5B,SAAWvD,GAChB/1B,KAAKs5B,SAAWxD,GAChB91B,KAAKs5B,SAAWpD,GAChBl2B,KAAKs5B,SAAWrD,GAChBj2B,KAAKs5B,SAAWnD,GAChBn2B,KAAKs5B,SAAW3D,GAEhB31B,KAAKmvB,KAAKpF,OAAO5qB,IAhBjBa,KAAK89B,qBAAqB,EAAG,IACzB99B,KAAKuzB,cAAgBvzB,KAAKu5B,SAC1Bv5B,KAAKs5B,OAASt5B,KAAK45B,WACnB55B,KAAKq+B,yBATTr+B,KAAK89B,qBAAqB,EAAG,IACzB99B,KAAKuzB,cAAgBvzB,KAAKu5B,SAC1Bv5B,KAAKs5B,OAASt5B,KAAK45B,WACnB55B,KAAKq+B,yBATTr+B,KAAK49B,qBACD59B,KAAKuzB,cAAgBvzB,KAAKu5B,SAC1Bv5B,KAAKs5B,OAASt5B,KAAK45B,WACnB55B,KAAKq+B,uBA6BjB,EAEA/N,GAAUnzB,UAAUq3B,MAAQ,WACxBlE,GAAUxvB,KACNd,KACA,CAAE4jB,QAAS5jB,KAAKg6B,SAAU3lB,eAAgBrU,KAAKi6B,iBAC/Cj6B,KAAKmvB,KAEb,EAEAmB,GAAUnzB,UAAUq2B,iBAAmB,WACnC,OAAOxzB,KAAK25B,cAAgB35B,KAAKu5B,MACrC,EAEAjJ,GAAUnzB,UAAUg9B,YAAc,WAC9B,OAAOn6B,KAAK05B,QAAQ+B,UAAUz7B,KAAKuzB,cAAevzB,KAAKu5B,OAC3D,EAEAjJ,GAAUnzB,UAAUm9B,WAAa,SAASjmC,GACtC2L,KAAKmvB,KAAK96B,GAAM2L,KAAKm6B,eACrBn6B,KAAKuzB,eAAiB,CAC1B,EAEAjD,GAAUnzB,UAAUwgC,aAAe,SAAS5sC,GACpCiP,KAAK45B,aAAetE,EACpBt1B,KAAKmvB,KAAK6E,aAAajjC,GAEvBiP,KAAKmvB,KAAKpF,OAAOh5B,EAEzB,iBCz8BA2d,EAAO1U,QAAU+6B,EAEjB,IAAItC,EAASp2B,EAAQ,MACjBiiC,EAAiBjiC,EAAAA,MAAAA,SACjBkiC,EAAgBliC,EAAAA,MAAAA,EAChBI,EAASJ,EAAAA,MAAAA,OAEb,SAAS04B,EAAO7F,EAAKjH,GACjB,IAAIa,EAAU9oB,KAAKyoB,QAAU,IAAIgK,EAAOvD,EAAKjH,GACzCuW,EAAWx+B,KAAKy+B,SAAW,IAAIF,EAEnCD,EAAex9B,KAAKd,KAAM,CAAE0+B,eAAe,IAE3C1+B,KAAK2O,KAAK,UAAU,WAChBma,EAAO5sB,IAAIsiC,EAAQtiC,MACvB,GACJ,CAEAG,EAAQ,KAARA,CAAoB04B,EAAQuJ,GAE5BvJ,EAAO53B,UAAUwhC,OAAS,SAASjK,EAAOh3B,EAAUkhC,GAC5ClK,aAAiBj4B,IAAQi4B,EAAQ10B,KAAKy+B,SAAS5gC,MAAM62B,IACzD10B,KAAKyoB,QAAQ5qB,MAAM62B,GACnBkK,GACJ,kBCxBA,IAAInM,EAASp2B,EAAQ,MACjB0rB,EAAa1rB,EAAQ,MAEzB,SAASwiC,EAAWxqC,EAAMtD,GAGtB,cAFO2d,EAAO1U,QAAQ3F,GACtBqa,EAAO1U,QAAQ3F,GAAQtD,EAChBA,CACX,CAEA2d,EAAO1U,QAAU,CACby4B,OAAQA,EACRnC,UAAWj0B,EAAQ,MACnBuhB,YAAavhB,EAAQ,MACrB0rB,WAAYA,EACZ,eAAIuH,GACA,OAAOuP,EAAW,cAAexiC,EAAQ,MAC7C,EACA,UAAI04B,GACA,OAAO8J,EAAW,SAAUxiC,EAAQ,MACxC,EACA,kBAAIiiC,GACA,OAAOO,EAAW,iBAAkBxiC,EAAQ,KAChD,EACA,gBAAIy4B,GACA,OAAO+J,EAAW,eAAgBxiC,EAAQ,MAC9C,EACA,YAAIivB,GACA,OAAOuT,EAAW,WAAYxiC,EAAQ,MAC1C,EACA,qBAAI4yB,GACA,OAAO4P,EACH,oBACAxiC,EAAQ,MAEhB,EAEAyiC,eAAgB/W,EAChB,cAAIgX,GACA,OAAOF,EAAW,aAAc7+B,KAAKsvB,YACzC,EAEA3a,SAAU,SAASxV,EAAM8oB,GACrB,IAAI5Y,EAAU,IAAI0Y,EAAWE,GAE7B,OADA,IAAIwK,EAAOpjB,EAAS4Y,GAAS/rB,IAAIiD,GAC1BkQ,EAAQ4T,GACnB,EACA+b,UAAW,SAASlP,EAAM7H,GACtB,IAAI5Y,EAAU,IAAIX,EAAO1U,QAAQs1B,YAAYrH,GAE7C,OADA,IAAIwK,EAAOpjB,EAAS4Y,GAAS/rB,IAAI4zB,GAC1BzgB,EAAQ4T,GACnB,EACAgc,gBAAiB,SAASL,EAAI3W,EAASiX,GACnC,IAAI7vB,EAAU,IAAI0Y,EAAW6W,EAAI3W,EAASiX,GAC1C,OAAO,IAAIzM,EAAOpjB,EAAS4Y,EAC/B,EAEAmH,OAAQ,CAEJ9P,UAAW,EACX6f,WAAY,EACZC,SAAU,EACVjU,KAAM,EACNkU,sBAAuB,EACvBhU,QAAS,EACTiU,WAAY,EACZC,SAAU,EACVC,QAAS,EACTC,YAAa,EACbt7B,MAAO,EACPjI,IAAK,oBCnEb,IAAIoC,EAASjC,EAAQ,MACjBI,EAAS6B,EAAO7B,OAGpB,SAASijC,EAAWryB,EAAKC,GACvB,IAAK,IAAIwF,KAAOzF,EACdC,EAAIwF,GAAOzF,EAAIyF,EAEnB,CASA,SAAS6sB,EAAYviC,EAAKC,EAAkBlC,GAC1C,OAAOsB,EAAOW,EAAKC,EAAkBlC,EACvC,CAVIsB,EAAOe,MAAQf,EAAOE,OAASF,EAAOc,aAAed,EAAO+H,gBAC9DkK,EAAO1U,QAAUsE,GAGjBohC,EAAUphC,EAAQtE,GAClBA,EAAQyC,OAASkjC,GAOnBA,EAAWxiC,UAAYF,OAAOtJ,OAAO8I,EAAOU,WAG5CuiC,EAAUjjC,EAAQkjC,GAElBA,EAAWniC,KAAO,SAAUJ,EAAKC,EAAkBlC,GACjD,GAAmB,kBAARiC,EACT,MAAM,IAAIE,UAAU,iCAEtB,OAAOb,EAAOW,EAAKC,EAAkBlC,EACvC,EAEAwkC,EAAWhjC,MAAQ,SAAUjM,EAAM0C,EAAMsK,GACvC,GAAoB,kBAAThN,EACT,MAAM,IAAI4M,UAAU,6BAEtB,IAAIN,EAAMP,EAAO/L,GAUjB,YATaiJ,IAATvG,EACsB,kBAAbsK,EACTV,EAAI5J,KAAKA,EAAMsK,GAEfV,EAAI5J,KAAKA,GAGX4J,EAAI5J,KAAK,GAEJ4J,CACT,EAEA2iC,EAAWpiC,YAAc,SAAU7M,GACjC,GAAoB,kBAATA,EACT,MAAM,IAAI4M,UAAU,6BAEtB,OAAOb,EAAO/L,EAChB,EAEAivC,EAAWn7B,gBAAkB,SAAU9T,GACrC,GAAoB,kBAATA,EACT,MAAM,IAAI4M,UAAU,6BAEtB,OAAOgB,EAAO5B,WAAWhM,EAC3B,+BCvCA,IAAI+L,EAASJ,EAAAA,MAAAA,OAGTsB,EAAalB,EAAOkB,YAAc,SAAUD,GAE9C,QADAA,EAAW,GAAKA,IACIA,EAASoC,eAC3B,IAAK,MAAM,IAAK,OAAO,IAAK,QAAQ,IAAK,QAAQ,IAAK,SAAS,IAAK,SAAS,IAAK,OAAO,IAAK,QAAQ,IAAK,UAAU,IAAK,WAAW,IAAK,MACxI,OAAO,EACT,QACE,OAAO,EAEb,EA0CA,SAASy+B,EAAc7gC,GAErB,IAAIkiC,EACJ,OAFA5/B,KAAKtC,SAXP,SAA2BmiC,GACzB,IAAIC,EA/BN,SAA4BD,GAC1B,IAAKA,EAAK,MAAO,OAEjB,IADA,IAAIE,IAEF,OAAQF,GACN,IAAK,OACL,IAAK,QACH,MAAO,OACT,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAO,UACT,IAAK,SACL,IAAK,SACH,MAAO,SACT,IAAK,SACL,IAAK,QACL,IAAK,MACH,OAAOA,EACT,QACE,GAAIE,EAAS,OACbF,GAAO,GAAKA,GAAK//B,cACjBigC,GAAU,EAGlB,CAKaC,CAAmBH,GAC9B,GAAoB,kBAATC,IAAsBrjC,EAAOkB,aAAeA,IAAeA,EAAWkiC,IAAO,MAAM,IAAI9jC,MAAM,qBAAuB8jC,GAC/H,OAAOC,GAAQD,CACjB,CAOkBI,CAAkBviC,GAE1BsC,KAAKtC,UACX,IAAK,UACHsC,KAAKmrB,KAAO+U,EACZlgC,KAAK9D,IAAMikC,EACXP,EAAK,EACL,MACF,IAAK,OACH5/B,KAAKogC,SAAWC,EAChBT,EAAK,EACL,MACF,IAAK,SACH5/B,KAAKmrB,KAAOmV,EACZtgC,KAAK9D,IAAMqkC,EACXX,EAAK,EACL,MACF,QAGE,OAFA5/B,KAAKnC,MAAQ2iC,OACbxgC,KAAK9D,IAAMukC,GAGfzgC,KAAK0gC,SAAW,EAChB1gC,KAAK2gC,UAAY,EACjB3gC,KAAK4gC,SAAWnkC,EAAOc,YAAYqiC,EACrC,CAmCA,SAASiB,EAAcC,GACrB,OAAIA,GAAQ,IAAa,EAAWA,GAAQ,IAAM,EAAa,EAAWA,GAAQ,IAAM,GAAa,EAAWA,GAAQ,IAAM,GAAa,EACpIA,GAAQ,IAAM,GAAQ,GAAK,CACpC,CA0DA,SAAST,EAAarjC,GACpB,IAAIs0B,EAAItxB,KAAK2gC,UAAY3gC,KAAK0gC,SAC1BvtC,EAtBN,SAA6B4tC,EAAM/jC,EAAKs0B,GACtC,GAAwB,OAAV,IAATt0B,EAAI,IAEP,OADA+jC,EAAKL,SAAW,EACT,SAET,GAAIK,EAAKL,SAAW,GAAK1jC,EAAI7B,OAAS,EAAG,CACvC,GAAwB,OAAV,IAAT6B,EAAI,IAEP,OADA+jC,EAAKL,SAAW,EACT,SAET,GAAIK,EAAKL,SAAW,GAAK1jC,EAAI7B,OAAS,GACZ,OAAV,IAAT6B,EAAI,IAEP,OADA+jC,EAAKL,SAAW,EACT,QAGb,CACF,CAKUM,CAAoBhhC,KAAMhD,GAClC,YAAUrD,IAANxG,EAAwBA,EACxB6M,KAAK0gC,UAAY1jC,EAAI7B,QACvB6B,EAAIoB,KAAK4B,KAAK4gC,SAAUtP,EAAG,EAAGtxB,KAAK0gC,UAC5B1gC,KAAK4gC,SAASphC,SAASQ,KAAKtC,SAAU,EAAGsC,KAAK2gC,aAEvD3jC,EAAIoB,KAAK4B,KAAK4gC,SAAUtP,EAAG,EAAGt0B,EAAI7B,aAClC6E,KAAK0gC,UAAY1jC,EAAI7B,QACvB,CA0BA,SAAS+kC,EAAUljC,EAAKvC,GACtB,IAAKuC,EAAI7B,OAASV,GAAK,IAAM,EAAG,CAC9B,IAAItH,EAAI6J,EAAIwC,SAAS,UAAW/E,GAChC,GAAItH,EAAG,CACL,IAAIuP,EAAIvP,EAAE6H,WAAW7H,EAAEgI,OAAS,GAChC,GAAIuH,GAAK,OAAUA,GAAK,MAKtB,OAJA1C,KAAK0gC,SAAW,EAChB1gC,KAAK2gC,UAAY,EACjB3gC,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,GACpC6E,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,GAC7BhI,EAAE2K,MAAM,GAAI,EAEvB,CACA,OAAO3K,CACT,CAIA,OAHA6M,KAAK0gC,SAAW,EAChB1gC,KAAK2gC,UAAY,EACjB3gC,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,GAC7B6B,EAAIwC,SAAS,UAAW/E,EAAGuC,EAAI7B,OAAS,EACjD,CAIA,SAASglC,EAASnjC,GAChB,IAAI7J,EAAI6J,GAAOA,EAAI7B,OAAS6E,KAAKnC,MAAMb,GAAO,GAC9C,GAAIgD,KAAK0gC,SAAU,CACjB,IAAIxkC,EAAM8D,KAAK2gC,UAAY3gC,KAAK0gC,SAChC,OAAOvtC,EAAI6M,KAAK4gC,SAASphC,SAAS,UAAW,EAAGtD,EAClD,CACA,OAAO/I,CACT,CAEA,SAASmtC,EAAWtjC,EAAKvC,GACvB,IAAI+F,GAAKxD,EAAI7B,OAASV,GAAK,EAC3B,OAAU,IAAN+F,EAAgBxD,EAAIwC,SAAS,SAAU/E,IAC3CuF,KAAK0gC,SAAW,EAAIlgC,EACpBR,KAAK2gC,UAAY,EACP,IAANngC,EACFR,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,IAEpC6E,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,GACpC6E,KAAK4gC,SAAS,GAAK5jC,EAAIA,EAAI7B,OAAS,IAE/B6B,EAAIwC,SAAS,SAAU/E,EAAGuC,EAAI7B,OAASqF,GAChD,CAEA,SAAS+/B,EAAUvjC,GACjB,IAAI7J,EAAI6J,GAAOA,EAAI7B,OAAS6E,KAAKnC,MAAMb,GAAO,GAC9C,OAAIgD,KAAK0gC,SAAiBvtC,EAAI6M,KAAK4gC,SAASphC,SAAS,SAAU,EAAG,EAAIQ,KAAK0gC,UACpEvtC,CACT,CAGA,SAASqtC,EAAYxjC,GACnB,OAAOA,EAAIwC,SAASQ,KAAKtC,SAC3B,CAEA,SAAS+iC,EAAUzjC,GACjB,OAAOA,GAAOA,EAAI7B,OAAS6E,KAAKnC,MAAMb,GAAO,EAC/C,CA1NAhD,EAAQ,EAAgBukC,EA6BxBA,EAAcphC,UAAUU,MAAQ,SAAUb,GACxC,GAAmB,IAAfA,EAAI7B,OAAc,MAAO,GAC7B,IAAIhI,EACAsH,EACJ,GAAIuF,KAAK0gC,SAAU,CAEjB,QAAU/mC,KADVxG,EAAI6M,KAAKogC,SAASpjC,IACG,MAAO,GAC5BvC,EAAIuF,KAAK0gC,SACT1gC,KAAK0gC,SAAW,CAClB,MACEjmC,EAAI,EAEN,OAAIA,EAAIuC,EAAI7B,OAAehI,EAAIA,EAAI6M,KAAKmrB,KAAKnuB,EAAKvC,GAAKuF,KAAKmrB,KAAKnuB,EAAKvC,GAC/DtH,GAAK,EACd,EAEAorC,EAAcphC,UAAUjB,IAwGxB,SAAiBc,GACf,IAAI7J,EAAI6J,GAAOA,EAAI7B,OAAS6E,KAAKnC,MAAMb,GAAO,GAC9C,OAAIgD,KAAK0gC,SAAiBvtC,EAAI,SACvBA,CACT,EAzGAorC,EAAcphC,UAAUguB,KA0FxB,SAAkBnuB,EAAKvC,GACrB,IAAIwmC,EArEN,SAA6BF,EAAM/jC,EAAKvC,GACtC,IAAI+G,EAAIxE,EAAI7B,OAAS,EACrB,GAAIqG,EAAI/G,EAAG,OAAO,EAClB,IAAImlC,EAAKiB,EAAc7jC,EAAIwE,IAC3B,GAAIo+B,GAAM,EAER,OADIA,EAAK,IAAGmB,EAAKL,SAAWd,EAAK,GAC1BA,EAET,KAAMp+B,EAAI/G,IAAa,IAARmlC,EAAW,OAAO,EAEjC,GADAA,EAAKiB,EAAc7jC,EAAIwE,IACnBo+B,GAAM,EAER,OADIA,EAAK,IAAGmB,EAAKL,SAAWd,EAAK,GAC1BA,EAET,KAAMp+B,EAAI/G,IAAa,IAARmlC,EAAW,OAAO,EAEjC,GADAA,EAAKiB,EAAc7jC,EAAIwE,IACnBo+B,GAAM,EAIR,OAHIA,EAAK,IACI,IAAPA,EAAUA,EAAK,EAAOmB,EAAKL,SAAWd,EAAK,GAE1CA,EAET,OAAO,CACT,CA8CcsB,CAAoBlhC,KAAMhD,EAAKvC,GAC3C,IAAKuF,KAAK0gC,SAAU,OAAO1jC,EAAIwC,SAAS,OAAQ/E,GAChDuF,KAAK2gC,UAAYM,EACjB,IAAI/kC,EAAMc,EAAI7B,QAAU8lC,EAAQjhC,KAAK0gC,UAErC,OADA1jC,EAAIoB,KAAK4B,KAAK4gC,SAAU,EAAG1kC,GACpBc,EAAIwC,SAAS,OAAQ/E,EAAGyB,EACjC,EA9FAqiC,EAAcphC,UAAUijC,SAAW,SAAUpjC,GAC3C,GAAIgD,KAAK0gC,UAAY1jC,EAAI7B,OAEvB,OADA6B,EAAIoB,KAAK4B,KAAK4gC,SAAU5gC,KAAK2gC,UAAY3gC,KAAK0gC,SAAU,EAAG1gC,KAAK0gC,UACzD1gC,KAAK4gC,SAASphC,SAASQ,KAAKtC,SAAU,EAAGsC,KAAK2gC,WAEvD3jC,EAAIoB,KAAK4B,KAAK4gC,SAAU5gC,KAAK2gC,UAAY3gC,KAAK0gC,SAAU,EAAG1jC,EAAI7B,QAC/D6E,KAAK0gC,UAAY1jC,EAAI7B,MACvB,4CCrIAgmC,EAAAA,GAAMC,YAAYC,EAAAA,sFCIlB,SAASzvC,EAAM0vC,GACb,OAAOA,EAAI,GAAM,CACnB,CACA,MAAMC,EAAMA,CAACD,EAAGnT,EAAGqT,IAAMhwC,KAAK+T,IAAI/T,KAAKsR,IAAIw+B,EAAGE,GAAIrT,GAClD,SAASsT,EAAIH,GACX,OAAOC,EAAI3vC,EAAU,KAAJ0vC,GAAW,EAAG,IACjC,CAIA,SAASI,EAAIJ,GACX,OAAOC,EAAI3vC,EAAU,IAAJ0vC,GAAU,EAAG,IAChC,CACA,SAASK,EAAIL,GACX,OAAOC,EAAI3vC,EAAM0vC,EAAI,MAAQ,IAAK,EAAG,EACvC,CACA,SAASM,EAAIN,GACX,OAAOC,EAAI3vC,EAAU,IAAJ0vC,GAAU,EAAG,IAChC,CAEA,MAAMO,EAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAGC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIv2B,EAAG,GAAIw2B,EAAG,GAAIv9B,EAAG,GAAI/F,EAAG,GAAI8D,EAAG,GAAI+Q,EAAG,GAAIzP,EAAG,GAAIm+B,EAAG,IACrJC,EAAM,IAAI,oBACV7Q,EAAK3yB,GAAKwjC,EAAQ,GAAJxjC,GACd4yB,EAAK5yB,GAAKwjC,GAAS,IAAJxjC,IAAa,GAAKwjC,EAAQ,GAAJxjC,GACrCyjC,EAAKzjC,IAAW,IAAJA,IAAa,KAAY,GAAJA,GAyBvC,SAAS0jC,EAAUhB,GACjB,IAAIa,EAzBUb,IAAKe,EAAGf,EAAEnuC,IAAMkvC,EAAGf,EAAEiB,IAAMF,EAAGf,EAAE1iC,IAAMyjC,EAAGf,EAAE38B,GAyBjD69B,CAAQlB,GAAK/P,EAAKC,EAC1B,OAAO8P,EACH,IAAMa,EAAEb,EAAEnuC,GAAKgvC,EAAEb,EAAEiB,GAAKJ,EAAEb,EAAE1iC,GAJpB6jC,EAAC99B,EAAGw9B,IAAMx9B,EAAI,IAAMw9B,EAAEx9B,GAAK,GAIF89B,CAAMnB,EAAE38B,EAAGw9B,QAC5CxoC,CACN,CAEA,MAAM+oC,EAAS,+GACf,SAASC,EAASnB,EAAG9tB,EAAGya,GACtB,MAAMxpB,EAAI+O,EAAIliB,KAAKsR,IAAIqrB,EAAG,EAAIA,GACxBgU,EAAI,SAAC3hC,GAAC,IAAE8lB,EAAC5mB,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,IAAIc,EAAIghC,EAAI,IAAM,GAAE,OAAKrT,EAAIxpB,EAAInT,KAAK+T,IAAI/T,KAAKsR,IAAIwjB,EAAI,EAAG,EAAIA,EAAG,IAAK,EAAE,EACvF,MAAO,CAAC6b,EAAE,GAAIA,EAAE,GAAIA,EAAE,GACxB,CACA,SAASS,EAASpB,EAAG9tB,EAAG4tB,GACtB,MAAMa,EAAI,SAAC3hC,GAAC,IAAE8lB,EAAC5mB,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,IAAIc,EAAIghC,EAAI,IAAM,EAAC,OAAKF,EAAIA,EAAI5tB,EAAIliB,KAAK+T,IAAI/T,KAAKsR,IAAIwjB,EAAG,EAAIA,EAAG,GAAI,EAAE,EACrF,MAAO,CAAC6b,EAAE,GAAIA,EAAE,GAAIA,EAAE,GACxB,CACA,SAASU,EAASrB,EAAG9wB,EAAG9R,GACtB,MAAMkkC,EAAMH,EAASnB,EAAG,EAAG,IAC3B,IAAI/mC,EAMJ,IALIiW,EAAI9R,EAAI,IACVnE,EAAI,GAAKiW,EAAI9R,GACb8R,GAAKjW,EACLmE,GAAKnE,GAEFA,EAAI,EAAGA,EAAI,EAAGA,IACjBqoC,EAAIroC,IAAM,EAAIiW,EAAI9R,EAClBkkC,EAAIroC,IAAMiW,EAEZ,OAAOoyB,CACT,CAUA,SAASC,EAAQzB,GACf,MACMnuC,EAAImuC,EAAEnuC,EADE,IAERovC,EAAIjB,EAAEiB,EAFE,IAGR3jC,EAAI0iC,EAAE1iC,EAHE,IAIR2G,EAAM/T,KAAK+T,IAAIpS,EAAGovC,EAAG3jC,GACrBkE,EAAMtR,KAAKsR,IAAI3P,EAAGovC,EAAG3jC,GACrBuvB,GAAK5oB,EAAMzC,GAAO,EACxB,IAAI0+B,EAAG9tB,EAAGD,EAOV,OANIlO,IAAQzC,IACV2Q,EAAIlO,EAAMzC,EACV4Q,EAAIya,EAAI,GAAM1a,GAAK,EAAIlO,EAAMzC,GAAO2Q,GAAKlO,EAAMzC,GAC/C0+B,EArBJ,SAAkBruC,EAAGovC,EAAG3jC,EAAG6U,EAAGlO,GAC5B,OAAIpS,IAAMoS,GACCg9B,EAAI3jC,GAAK6U,GAAM8uB,EAAI3jC,EAAI,EAAI,GAElC2jC,IAAMh9B,GACA3G,EAAIzL,GAAKsgB,EAAI,GAEftgB,EAAIovC,GAAK9uB,EAAI,CACvB,CAaQuvB,CAAS7vC,EAAGovC,EAAG3jC,EAAG6U,EAAGlO,GACzBi8B,EAAQ,GAAJA,EAAS,IAER,CAAK,EAAJA,EAAO9tB,GAAK,EAAGya,EACzB,CACA,SAAS8U,EAAMd,EAAGx9B,EAAG/F,EAAG8D,GACtB,OACE7G,MAAMqD,QAAQyF,GACVw9B,EAAEx9B,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAChBw9B,EAAEx9B,EAAG/F,EAAG8D,IACZgc,IAAIgjB,EACR,CACA,SAASwB,EAAQ1B,EAAG9tB,EAAGya,GACrB,OAAO8U,EAAMN,EAAUnB,EAAG9tB,EAAGya,EAC/B,CAOA,SAASgV,EAAI3B,GACX,OAAQA,EAAI,IAAM,KAAO,GAC3B,CACA,SAAS4B,EAAShhC,GAChB,MAAM3B,EAAIiiC,EAAOW,KAAKjhC,GACtB,IACIk/B,EADA38B,EAAI,IAER,IAAKlE,EACH,OAEEA,EAAE,KAAO6gC,IACX38B,EAAIlE,EAAE,GAAKghC,GAAKhhC,EAAE,IAAMihC,GAAKjhC,EAAE,KAEjC,MAAM+gC,EAAI2B,GAAK1iC,EAAE,IACX6iC,GAAM7iC,EAAE,GAAK,IACb8iC,GAAM9iC,EAAE,GAAK,IAQnB,OANE6gC,EADW,QAAT7gC,EAAE,GAtBR,SAAiB+gC,EAAG9wB,EAAG9R,GACrB,OAAOqkC,EAAMJ,EAAUrB,EAAG9wB,EAAG9R,EAC/B,CAqBQ4kC,CAAQhC,EAAG8B,EAAIC,GACD,QAAT9iC,EAAE,GArBf,SAAiB+gC,EAAG9tB,EAAG4tB,GACrB,OAAO2B,EAAML,EAAUpB,EAAG9tB,EAAG4tB,EAC/B,CAoBQmC,CAAQjC,EAAG8B,EAAIC,GAEfL,EAAQ1B,EAAG8B,EAAIC,GAEd,CACLpwC,EAAGmuC,EAAE,GACLiB,EAAGjB,EAAE,GACL1iC,EAAG0iC,EAAE,GACL38B,EAAGA,EAEP,CAsBA,MAAM+Z,EAAM,CACV9Z,EAAG,OACH8+B,EAAG,QACHC,EAAG,KACHC,EAAG,MACHC,EAAG,KACHC,EAAG,SACHC,EAAG,QACHjC,EAAG,KACHkC,EAAG,KACHC,EAAG,KACHlC,EAAG,KACHC,EAAG,QACHC,EAAG,QACHp0B,EAAG,KACHq2B,EAAG,WACHx4B,EAAG,KACHy4B,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,KACHC,EAAG,QACHrC,EAAG,KACHsC,EAAG,KACHC,EAAG,OACHC,EAAG,KACHC,EAAG,QACHC,EAAG,MAECC,EAAU,CACdC,OAAQ,SACRC,YAAa,SACbC,KAAM,OACNC,UAAW,SACXC,KAAM,SACNC,MAAO,SACPC,OAAQ,SACRC,MAAO,IACPC,aAAc,SACdC,GAAI,KACJC,QAAS,SACTC,KAAM,SACNC,UAAW,SACXC,OAAQ,SACRC,SAAU,SACVC,QAAS,SACTC,IAAK,SACLC,YAAa,SACbC,QAAS,SACTC,QAAS,SACTC,KAAM,OACNC,IAAK,KACLC,MAAO,OACPC,QAAS,SACTC,KAAM,SACNC,KAAM,OACNC,KAAM,SACNC,OAAQ,SACRC,QAAS,SACTC,SAAU,SACVC,OAAQ,SACRC,MAAO,SACPC,IAAK,SACLC,OAAQ,SACRC,OAAQ,SACRC,KAAM,SACNC,MAAO,SACPC,MAAO,SACPC,IAAK,OACLC,OAAQ,SACRC,OAAQ,SACRC,SAAU,OACVC,OAAQ,SACRC,OAAQ,SACRC,SAAU,SACVC,SAAU,SACVC,SAAU,SACVC,SAAU,SACVC,OAAQ,SACRC,QAAS,SACTC,UAAW,SACXC,IAAK,SACLC,OAAQ,SACRC,IAAK,SACLC,IAAK,OACLC,MAAO,SACPC,IAAK,SACLC,QAAS,SACTC,OAAQ,SACRC,QAAS,SACTC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,OAAQ,SACRC,UAAW,SACXC,QAAS,SACTC,WAAY,SACZC,IAAK,SACLC,KAAM,SACNC,MAAO,SACPC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,QAAS,SACTC,IAAK,SACLC,KAAM,OACNC,QAAS,SACTC,IAAK,SACLC,OAAQ,SACRC,MAAO,SACPC,WAAY,SACZC,IAAK,KACLC,MAAO,SACPC,OAAQ,SACRC,OAAQ,SACRC,KAAM,SACNC,UAAW,OACXC,IAAK,SACLC,SAAU,SACVC,WAAY,SACZC,QAAS,SACTC,SAAU,SACVC,QAAS,SACTC,WAAY,SACZC,KAAM,KACNC,OAAQ,SACRC,KAAM,SACNC,QAAS,SACTC,MAAO,SACPC,QAAS,SACTC,KAAM,SACNC,UAAW,SACXC,OAAQ,SACRC,MAAO,SACPC,WAAY,SACZC,UAAW,SACXC,QAAS,SACTC,KAAM,SACNC,IAAK,SACLC,KAAM,SACNC,QAAS,SACTC,MAAO,SACPC,YAAa,SACbC,GAAI,SACJC,SAAU,SACVC,MAAO,SACPC,UAAW,SACXC,MAAO,SACPC,UAAW,SACXC,MAAO,SACPC,QAAS,SACTC,MAAO,SACPC,OAAQ,SACRC,MAAO,SACPC,IAAK,SACLC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,SAAU,OACVC,OAAQ,SACRC,IAAK,SACLC,IAAK,OACLC,MAAO,SACPC,OAAQ,SACRC,GAAI,SACJC,MAAO,SACPC,IAAK,SACLC,KAAM,SACNC,UAAW,SACXC,GAAI,SACJC,MAAO,UAmBT,IAAIC,EACJ,SAASC,EAAU/rC,GACZ8rC,IACHA,EApBJ,WACE,MAAME,EAAW,CAAC,EACZr7B,EAAO9V,OAAO8V,KAAK8xB,GACnBwJ,EAAQpxC,OAAO8V,KAAK2L,GAC1B,IAAIjkB,EAAG+G,EAAG8kB,EAAGgoB,EAAIC,EACjB,IAAK9zC,EAAI,EAAGA,EAAIsY,EAAK5X,OAAQV,IAAK,CAEhC,IADA6zC,EAAKC,EAAKx7B,EAAKtY,GACV+G,EAAI,EAAGA,EAAI6sC,EAAMlzC,OAAQqG,IAC5B8kB,EAAI+nB,EAAM7sC,GACV+sC,EAAKA,EAAG/oC,QAAQ8gB,EAAG5H,EAAI4H,IAEzBA,EAAIvkB,SAAS8iC,EAAQyJ,GAAK,IAC1BF,EAASG,GAAM,CAACjoB,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAU,IAAJA,EACjD,CACA,OAAO8nB,CACT,CAKYI,GACRN,EAAMO,YAAc,CAAC,EAAG,EAAG,EAAG,IAEhC,MAAM9pC,EAAIupC,EAAM9rC,EAAItC,eACpB,OAAO6E,GAAK,CACVxR,EAAGwR,EAAE,GACL49B,EAAG59B,EAAE,GACL/F,EAAG+F,EAAE,GACLA,EAAgB,IAAbA,EAAExJ,OAAewJ,EAAE,GAAK,IAE/B,CAEA,MAAM+pC,EAAS,uGAiCf,MAAMC,EAAKrN,GAAKA,GAAK,SAAgB,MAAJA,EAAqC,MAAzB9vC,KAAKmX,IAAI24B,EAAG,EAAM,KAAe,KACxE9jC,EAAO8jC,GAAKA,GAAK,OAAUA,EAAI,MAAQ9vC,KAAKmX,KAAK24B,EAAI,MAAS,MAAO,KAa3E,SAASsN,EAAOtN,EAAG7mC,EAAGo0C,GACpB,GAAIvN,EAAG,CACL,IAAI9mC,EAAMuoC,EAAQzB,GAClB9mC,EAAIC,GAAKjJ,KAAK+T,IAAI,EAAG/T,KAAKsR,IAAItI,EAAIC,GAAKD,EAAIC,GAAKo0C,EAAa,IAANp0C,EAAU,IAAM,IACvED,EAAM0oC,EAAQ1oC,GACd8mC,EAAEnuC,EAAIqH,EAAI,GACV8mC,EAAEiB,EAAI/nC,EAAI,GACV8mC,EAAE1iC,EAAIpE,EAAI,EACZ,CACF,CACA,SAASs0C,EAAMxN,EAAGx9B,GAChB,OAAOw9B,EAAIrkC,OAAO4hB,OAAO/a,GAAS,CAAC,EAAGw9B,GAAKA,CAC7C,CACA,SAASliC,EAAWuN,GAClB,IAAI20B,EAAI,CAACnuC,EAAG,EAAGovC,EAAG,EAAG3jC,EAAG,EAAG+F,EAAG,KAY9B,OAXI9I,MAAMqD,QAAQyN,GACZA,EAAMxR,QAAU,IAClBmmC,EAAI,CAACnuC,EAAGwZ,EAAM,GAAI41B,EAAG51B,EAAM,GAAI/N,EAAG+N,EAAM,GAAIhI,EAAG,KAC3CgI,EAAMxR,OAAS,IACjBmmC,EAAE38B,EAAI+8B,EAAI/0B,EAAM,OAIpB20B,EAAIwN,EAAMniC,EAAO,CAACxZ,EAAG,EAAGovC,EAAG,EAAG3jC,EAAG,EAAG+F,EAAG,KACrCA,EAAI+8B,EAAIJ,EAAE38B,GAEP28B,CACT,CACA,SAASyN,EAAc3sC,GACrB,MAAsB,MAAlBA,EAAI2iB,OAAO,GA3EjB,SAAkB3iB,GAChB,MAAM3B,EAAIiuC,EAAOrL,KAAKjhC,GACtB,IACIjP,EAAGovC,EAAG3jC,EADN+F,EAAI,IAER,GAAKlE,EAAL,CAGA,GAAIA,EAAE,KAAOtN,EAAG,CACd,MAAMmuC,GAAK7gC,EAAE,GACbkE,EAAIlE,EAAE,GAAKghC,EAAIH,GAAKC,EAAQ,IAAJD,EAAS,EAAG,IACtC,CAOA,OANAnuC,GAAKsN,EAAE,GACP8hC,GAAK9hC,EAAE,GACP7B,GAAK6B,EAAE,GACPtN,EAAI,KAAOsN,EAAE,GAAKghC,EAAItuC,GAAKouC,EAAIpuC,EAAG,EAAG,MACrCovC,EAAI,KAAO9hC,EAAE,GAAKghC,EAAIc,GAAKhB,EAAIgB,EAAG,EAAG,MACrC3jC,EAAI,KAAO6B,EAAE,GAAKghC,EAAI7iC,GAAK2iC,EAAI3iC,EAAG,EAAG,MAC9B,CACLzL,EAAGA,EACHovC,EAAGA,EACH3jC,EAAGA,EACH+F,EAAGA,EAfL,CAiBF,CAqDWqqC,CAAS5sC,GAEXghC,EAAShhC,EAClB,CACA,MAAM6sC,EACJnjC,WAAAA,CAAYa,GACV,GAAIA,aAAiBsiC,EACnB,OAAOtiC,EAET,MAAM1N,SAAc0N,EACpB,IAAI20B,EACS,WAATriC,EACFqiC,EAAIliC,EAAWuN,GACG,WAAT1N,IACTqiC,EAjcN,SAAkBl/B,GAChB,IACI+D,EADArL,EAAMsH,EAAIjH,OAmBd,MAjBe,MAAXiH,EAAI,KACM,IAARtH,GAAqB,IAARA,EACfqL,EAAM,CACJhT,EAAG,IAAsB,GAAhB0uC,EAAMz/B,EAAI,IACnBmgC,EAAG,IAAsB,GAAhBV,EAAMz/B,EAAI,IACnBxD,EAAG,IAAsB,GAAhBijC,EAAMz/B,EAAI,IACnBuC,EAAW,IAAR7J,EAA4B,GAAhB+mC,EAAMz/B,EAAI,IAAW,KAErB,IAARtH,GAAqB,IAARA,IACtBqL,EAAM,CACJhT,EAAG0uC,EAAMz/B,EAAI,KAAO,EAAIy/B,EAAMz/B,EAAI,IAClCmgC,EAAGV,EAAMz/B,EAAI,KAAO,EAAIy/B,EAAMz/B,EAAI,IAClCxD,EAAGijC,EAAMz/B,EAAI,KAAO,EAAIy/B,EAAMz/B,EAAI,IAClCuC,EAAW,IAAR7J,EAAa+mC,EAAMz/B,EAAI,KAAO,EAAIy/B,EAAMz/B,EAAI,IAAO,OAIrD+D,CACT,CA4aU+oC,CAASviC,IAAUwhC,EAAUxhC,IAAUoiC,EAAcpiC,IAE3D3M,KAAKmvC,KAAO7N,EACZthC,KAAKovC,SAAW9N,CAClB,CACA,SAAI+N,GACF,OAAOrvC,KAAKovC,MACd,CACA,OAAItM,GACF,IAAIxB,EAAIwN,EAAM9uC,KAAKmvC,MAInB,OAHI7N,IACFA,EAAE38B,EAAIg9B,EAAIL,EAAE38B,IAEP28B,CACT,CACA,OAAIwB,CAAIjkC,GACNmB,KAAKmvC,KAAO/vC,EAAWP,EACzB,CACAywC,SAAAA,GACE,OAAOtvC,KAAKovC,QArFG9N,EAqFgBthC,KAAKmvC,QAnFpC7N,EAAE38B,EAAI,IAAG,QAAA7S,OACGwvC,EAAEnuC,EAAC,MAAArB,OAAKwvC,EAAEiB,EAAC,MAAAzwC,OAAKwvC,EAAE1iC,EAAC,MAAA9M,OAAK6vC,EAAIL,EAAE38B,GAAE,YAAA7S,OACjCwvC,EAAEnuC,EAAC,MAAArB,OAAKwvC,EAAEiB,EAAC,MAAAzwC,OAAKwvC,EAAE1iC,EAAC,WAiFcjF,EArFhD,IAAmB2nC,CAsFjB,CACAgB,SAAAA,GACE,OAAOtiC,KAAKovC,OAAS9M,EAAUtiC,KAAKmvC,WAAQx1C,CAC9C,CACA41C,SAAAA,GACE,OAAOvvC,KAAKovC,OApVhB,SAAmB9N,GACjB,IAAKA,EACH,OAEF,MAAM38B,EAAIo+B,EAAQzB,GACZE,EAAI78B,EAAE,GACN+O,EAAIkuB,EAAIj9B,EAAE,IACVwpB,EAAIyT,EAAIj9B,EAAE,IAChB,OAAO28B,EAAE38B,EAAI,IAAG,QAAA7S,OACJ0vC,EAAC,MAAA1vC,OAAK4hB,EAAC,OAAA5hB,OAAMq8B,EAAC,OAAAr8B,OAAM6vC,EAAIL,EAAE38B,GAAE,YAAA7S,OAC7B0vC,EAAC,MAAA1vC,OAAK4hB,EAAC,OAAA5hB,OAAMq8B,EAAC,KAC3B,CAyUyBohB,CAAUvvC,KAAKmvC,WAAQx1C,CAC9C,CACA61C,GAAAA,CAAIl/C,EAAOm/C,GACT,GAAIn/C,EAAO,CACT,MAAMo/C,EAAK1vC,KAAK8iC,IACV6M,EAAKr/C,EAAMwyC,IACjB,IAAI8M,EACJ,MAAMte,EAAIme,IAAWG,EAAK,GAAMH,EAC1B/+B,EAAI,EAAI4gB,EAAI,EACZ3sB,EAAI+qC,EAAG/qC,EAAIgrC,EAAGhrC,EACdkrC,IAAOn/B,EAAI/L,KAAO,EAAI+L,GAAKA,EAAI/L,IAAM,EAAI+L,EAAI/L,IAAM,GAAK,EAC9DirC,EAAK,EAAIC,EACTH,EAAGv8C,EAAI,IAAO08C,EAAKH,EAAGv8C,EAAIy8C,EAAKD,EAAGx8C,EAAI,GACtCu8C,EAAGnN,EAAI,IAAOsN,EAAKH,EAAGnN,EAAIqN,EAAKD,EAAGpN,EAAI,GACtCmN,EAAG9wC,EAAI,IAAOixC,EAAKH,EAAG9wC,EAAIgxC,EAAKD,EAAG/wC,EAAI,GACtC8wC,EAAG/qC,EAAI2sB,EAAIoe,EAAG/qC,GAAK,EAAI2sB,GAAKqe,EAAGhrC,EAC/B3E,KAAK8iC,IAAM4M,CACb,CACA,OAAO1vC,IACT,CACA8vC,WAAAA,CAAYx/C,EAAOy/C,GAIjB,OAHIz/C,IACF0P,KAAKmvC,KAvGX,SAAqBa,EAAMC,EAAMF,GAC/B,MAAM58C,EAAIqK,EAAKmkC,EAAIqO,EAAK78C,IAClBovC,EAAI/kC,EAAKmkC,EAAIqO,EAAKzN,IAClB3jC,EAAIpB,EAAKmkC,EAAIqO,EAAKpxC,IACxB,MAAO,CACLzL,EAAGuuC,EAAIiN,EAAGx7C,EAAI48C,GAAKvyC,EAAKmkC,EAAIsO,EAAK98C,IAAMA,KACvCovC,EAAGb,EAAIiN,EAAGpM,EAAIwN,GAAKvyC,EAAKmkC,EAAIsO,EAAK1N,IAAMA,KACvC3jC,EAAG8iC,EAAIiN,EAAG/vC,EAAImxC,GAAKvyC,EAAKmkC,EAAIsO,EAAKrxC,IAAMA,KACvC+F,EAAGqrC,EAAKrrC,EAAIorC,GAAKE,EAAKtrC,EAAIqrC,EAAKrrC,GAEnC,CA6FkBmrC,CAAY9vC,KAAKmvC,KAAM7+C,EAAM6+C,KAAMY,IAE1C/vC,IACT,CACA8uC,KAAAA,GACE,OAAO,IAAIG,EAAMjvC,KAAK8iC,IACxB,CACAL,KAAAA,CAAM99B,GAEJ,OADA3E,KAAKmvC,KAAKxqC,EAAI+8B,EAAI/8B,GACX3E,IACT,CACAkwC,OAAAA,CAAQrB,GAGN,OAFY7uC,KAAKmvC,KACbxqC,GAAK,EAAIkqC,EACN7uC,IACT,CACAmwC,SAAAA,GACE,MAAMrN,EAAM9iC,KAAKmvC,KACXxuC,EAAM/O,EAAc,GAARkxC,EAAI3vC,EAAkB,IAAR2vC,EAAIP,EAAmB,IAARO,EAAIlkC,GAEnD,OADAkkC,EAAI3vC,EAAI2vC,EAAIP,EAAIO,EAAIlkC,EAAI+B,EACjBX,IACT,CACAowC,OAAAA,CAAQvB,GAGN,OAFY7uC,KAAKmvC,KACbxqC,GAAK,EAAIkqC,EACN7uC,IACT,CACAqwC,MAAAA,GACE,MAAM/O,EAAIthC,KAAKmvC,KAIf,OAHA7N,EAAEnuC,EAAI,IAAMmuC,EAAEnuC,EACdmuC,EAAEiB,EAAI,IAAMjB,EAAEiB,EACdjB,EAAE1iC,EAAI,IAAM0iC,EAAE1iC,EACPoB,IACT,CACAtJ,OAAAA,CAAQm4C,GAEN,OADAD,EAAO5uC,KAAKmvC,KAAM,EAAGN,GACd7uC,IACT,CACArJ,MAAAA,CAAOk4C,GAEL,OADAD,EAAO5uC,KAAKmvC,KAAM,GAAIN,GACf7uC,IACT,CACAswC,QAAAA,CAASzB,GAEP,OADAD,EAAO5uC,KAAKmvC,KAAM,EAAGN,GACd7uC,IACT,CACAuwC,UAAAA,CAAW1B,GAET,OADAD,EAAO5uC,KAAKmvC,KAAM,GAAIN,GACf7uC,IACT,CACAwwC,MAAAA,CAAOC,GAEL,OAtaJ,SAAgBnP,EAAGmP,GACjB,IAAIjP,EAAIuB,EAAQzB,GAChBE,EAAE,GAAK2B,EAAI3B,EAAE,GAAKiP,GAClBjP,EAAI0B,EAAQ1B,GACZF,EAAEnuC,EAAIquC,EAAE,GACRF,EAAEiB,EAAIf,EAAE,GACRF,EAAE1iC,EAAI4iC,EAAE,EACV,CA8ZIgP,CAAOxwC,KAAKmvC,KAAMsB,GACXzwC,IACT,EC3jBK,SAAS0wC,IACJ,CAML,MAAMC,EAAO,MAClB,IAAI34B,EAAK,EACT,MAAO,IAAMA,GACd,EAHmB,GAUb,SAAS44B,EAAc7/C,GAC5B,OAAiB,OAAVA,GAAmC,qBAAVA,CAClC,CAOO,SAASmO,EAAqBnO,GACnC,GAAI8K,MAAMqD,SAAWrD,MAAMqD,QAAQnO,GACjC,OAAO,EAET,MAAMkO,EAAOhC,OAAOE,UAAUqC,SAASsB,KAAK/P,GAC5C,MAAyB,YAArBkO,EAAKnB,MAAM,EAAG,IAAuC,WAAnBmB,EAAKnB,OAAO,EAIpD,CAOO,SAAS+yC,EAAS9/C,GACvB,OAAiB,OAAVA,GAA4D,oBAA1CkM,OAAOE,UAAUqC,SAASsB,KAAK/P,EAC1D,CAMA,SAAS+/C,EAAe//C,GACtB,OAAyB,kBAAVA,GAAsBA,aAAiB4Q,SAAWqE,UAAUjV,EAC7E,CAUO,SAASggD,EAAgBhgD,EAAgBigD,GAC9C,OAAOF,EAAe//C,GAASA,EAAQigD,CACzC,CAOO,SAASC,EAAkBlgD,EAAsBigD,GACtD,MAAwB,qBAAVjgD,EAAwBigD,EAAejgD,CACvD,OAOamgD,EAAcA,CAACngD,EAAwBogD,IACjC,kBAAVpgD,GAAsBA,EAAMqgD,SAAS,KAC1CC,WAAWtgD,GAAS,IAAMogD,GACvBpgD,EASA,SAASi3B,EACdta,EACAO,EACAqjC,GAEA,GAAI5jC,GAAyB,oBAAZA,EAAG5M,KAClB,OAAO4M,EAAGhK,MAAM4tC,EAASrjC,EAE7B,CAuBO,SAASsjC,EACdC,EACA9jC,EACA4jC,EACAG,GAEA,IAAIh3C,EAAWK,EAAaiY,EAC5B,GAAI7T,EAAQsyC,GAEV,GADA12C,EAAM02C,EAASr2C,OACXs2C,EACF,IAAKh3C,EAAIK,EAAM,EAAGL,GAAK,EAAGA,IACxBiT,EAAG5M,KAAKwwC,EAASE,EAAS/2C,GAAIA,QAGhC,IAAKA,EAAI,EAAGA,EAAIK,EAAKL,IACnBiT,EAAG5M,KAAKwwC,EAASE,EAAS/2C,GAAIA,QAG7B,GAAIo2C,EAASW,GAGlB,IAFAz+B,EAAO9V,OAAO8V,KAAKy+B,GACnB12C,EAAMiY,EAAK5X,OACNV,EAAI,EAAGA,EAAIK,EAAKL,IACnBiT,EAAG5M,KAAKwwC,EAASE,EAASz+B,EAAKtY,IAAKsY,EAAKtY,GAG/C,CAQO,SAASi3C,EAAeC,EAAuBC,GACpD,IAAIn3C,EAAWo3C,EAAcC,EAAqBC,EAElD,IAAKJ,IAAOC,GAAMD,EAAGx2C,SAAWy2C,EAAGz2C,OACjC,OAAO,EAGT,IAAKV,EAAI,EAAGo3C,EAAOF,EAAGx2C,OAAQV,EAAIo3C,IAAQp3C,EAIxC,GAHAq3C,EAAKH,EAAGl3C,GACRs3C,EAAKH,EAAGn3C,GAEJq3C,EAAGE,eAAiBD,EAAGC,cAAgBF,EAAGr/B,QAAUs/B,EAAGt/B,MACzD,OAAO,EAIX,OAAO,CACT,CAMO,SAASq8B,EAAShwB,GACvB,GAAI5f,EAAQ4f,GACV,OAAOA,EAAOJ,IAAIowB,GAGpB,GAAI+B,EAAS/xB,GAAS,CACpB,MAAMpZ,EAASzI,OAAOtJ,OAAO,MACvBof,EAAO9V,OAAO8V,KAAK+L,GACnBmzB,EAAOl/B,EAAK5X,OAClB,IAAImrB,EAAI,EAER,KAAOA,EAAI2rB,IAAQ3rB,EACjB5gB,EAAOqN,EAAKuT,IAAMwoB,EAAMhwB,EAAO/L,EAAKuT,KAGtC,OAAO5gB,EAGT,OAAOoZ,CACT,CAEA,SAASozB,EAAWp/B,GAClB,OAAmE,IAA5D,CAAC,YAAa,YAAa,eAAe9W,QAAQ8W,EAC3D,CAOO,SAASq/B,EAAQr/B,EAAapN,EAAmBoZ,EAAmBmJ,GACzE,IAAKiqB,EAAWp/B,GACd,OAGF,MAAMs/B,EAAO1sC,EAAOoN,GACdu/B,EAAOvzB,EAAOhM,GAEhB+9B,EAASuB,IAASvB,EAASwB,GAE7BC,EAAMF,EAAMC,EAAMpqB,GAElBviB,EAAOoN,GAAOg8B,EAAMuD,EAExB,CA0BO,SAASC,EAAS5sC,EAAWoZ,EAAqBmJ,GACvD,MAAMsqB,EAAUrzC,EAAQ4f,GAAUA,EAAS,CAACA,GACtC+yB,EAAOU,EAAQp3C,OAErB,IAAK01C,EAASnrC,GACZ,OAAOA,EAIT,MAAM8sC,GADNvqB,EAAUA,GAAW,CAAC,GACCuqB,QAAUL,EACjC,IAAIpmB,EAEJ,IAAK,IAAItxB,EAAI,EAAGA,EAAIo3C,IAAQp3C,EAAG,CAE7B,GADAsxB,EAAUwmB,EAAQ93C,IACbo2C,EAAS9kB,GACZ,SAGF,MAAMhZ,EAAO9V,OAAO8V,KAAKgZ,GACzB,IAAK,IAAIzF,EAAI,EAAG2rB,EAAOl/B,EAAK5X,OAAQmrB,EAAI2rB,IAAQ3rB,EAC9CksB,EAAOz/B,EAAKuT,GAAI5gB,EAAQqmB,EAAS9D,EAErC,CAEA,OAAOviB,CACT,CAgBO,SAAS+sC,EAAW/sC,EAAWoZ,GAEpC,OAAOwzB,EAAS5sC,EAAQoZ,EAAQ,CAAC0zB,OAAQE,IAC3C,CAMO,SAASA,GAAU5/B,EAAapN,EAAmBoZ,GACxD,IAAKozB,EAAWp/B,GACd,OAGF,MAAMs/B,EAAO1sC,EAAOoN,GACdu/B,EAAOvzB,EAAOhM,GAEhB+9B,EAASuB,IAASvB,EAASwB,GAC7BI,EAAQL,EAAMC,GACJp1C,OAAOE,UAAU4hB,eAAeje,KAAK4E,EAAQoN,KACvDpN,EAAOoN,GAAOg8B,EAAMuD,GAExB,CAaA,MAAMM,GAAe,CAEnB,GAAIrR,GAAKA,EAET18B,EAAGguC,GAAKA,EAAEhuC,EACVC,EAAG+tC,GAAKA,EAAE/tC,GAqCL,SAASguC,GAAiBh0C,EAAgBiU,GAC/C,MAAM3D,EAAWwjC,GAAa7/B,KAAS6/B,GAAa7/B,GAhBtD,SAAyBA,GACvB,MAAMC,EAjBD,SAAmBD,GACxB,MAAMzX,EAAQyX,EAAI3F,MAAM,KAClB4F,EAAiB,GACvB,IAAIvY,EAAM,GACV,IAAK,MAAMs4C,KAAQz3C,EACjBb,GAAOs4C,EACHt4C,EAAI42C,SAAS,MACf52C,EAAMA,EAAIsD,MAAM,GAAI,GAAK,KAEzBiV,EAAKvX,KAAKhB,GACVA,EAAM,IAGV,OAAOuY,CACT,CAGeggC,CAAUjgC,GACvB,OAAOjU,IACL,IAAK,MAAMynB,KAAKvT,EAAM,CACpB,GAAU,KAANuT,EAGF,MAEFznB,EAAMA,GAAOA,EAAIynB,EACnB,CACA,OAAOznB,CAAA,CAEX,CAG6Dm0C,CAAgBlgC,IAC3E,OAAO3D,EAAStQ,EAClB,CAKO,SAASo0C,GAAY7wC,GAC1B,OAAOA,EAAI2iB,OAAO,GAAGlE,cAAgBze,EAAItE,MAAM,EACjD,OAGao1C,GAAWniD,GAAoC,qBAAVA,EAErCoiD,GAAcpiD,GAAsE,oBAAVA,EAG1EqiD,GAAYA,CAAIzuC,EAAW/F,KACtC,GAAI+F,EAAEjU,OAASkO,EAAElO,KACf,OAAO,EAGT,IAAK,MAAM+vB,KAAQ9b,EACjB,IAAK/F,EAAEy0C,IAAI5yB,GACT,OAAO,EAIX,OAAO,CAAI,EC9YN,MAAMhvB,GAAKD,KAAKC,GACV6hD,GAAM,EAAI7hD,GACV8hD,GAAQD,GAAM7hD,GACd+hD,GAAW7xC,OAAO8xC,kBAClBC,GAAcjiD,GAAK,IACnBkiD,GAAUliD,GAAK,EACfmiD,GAAaniD,GAAK,EAClBoiD,GAAqB,EAALpiD,GAAS,EAEzBqiD,GAAQtiD,KAAKsiD,MACbC,GAAOviD,KAAKuiD,KAElB,SAASC,GAAapvC,EAAWC,EAAWovC,GACjD,OAAOziD,KAAKub,IAAInI,EAAIC,GAAKovC,CAC3B,CAKO,SAASC,GAAQ7nC,GACtB,MAAM8nC,EAAe3iD,KAAKI,MAAMya,GAChCA,EAAQ2nC,GAAa3nC,EAAO8nC,EAAc9nC,EAAQ,KAAQ8nC,EAAe9nC,EACzE,MAAM+nC,EAAY5iD,KAAKmX,IAAI,GAAInX,KAAKib,MAAMqnC,GAAMznC,KAC1CgoC,EAAWhoC,EAAQ+nC,EAEzB,OADqBC,GAAY,EAAI,EAAIA,GAAY,EAAI,EAAIA,GAAY,EAAI,EAAI,IAC3DD,CACxB,CAyBO,SAASE,GAAS9zC,GACvB,OAAQ+N,MAAM8iC,WAAW7wC,KAAiBwF,SAASxF,EACrD,CAUO,SAAS+zC,GACdh1C,EACAmG,EACAqW,GAEA,IAAIthB,EAAWo3C,EAAc9gD,EAE7B,IAAK0J,EAAI,EAAGo3C,EAAOtyC,EAAMpE,OAAQV,EAAIo3C,EAAMp3C,IACzC1J,EAAQwO,EAAM9E,GAAGshB,GACZxN,MAAMxd,KACT2U,EAAO5C,IAAMtR,KAAKsR,IAAI4C,EAAO5C,IAAK/R,GAClC2U,EAAOH,IAAM/T,KAAK+T,IAAIG,EAAOH,IAAKxU,GAGxC,CAEO,SAASyjD,GAAUC,GACxB,OAAOA,GAAWhjD,GAAK,IACzB,CAEO,SAASijD,GAAUC,GACxB,OAAOA,GAAW,IAAMljD,GAC1B,CASO,SAASmjD,GAAehwC,GAC7B,IAAKksC,EAAelsC,GAClB,OAEF,IAAIZ,EAAI,EACJstB,EAAI,EACR,KAAO9/B,KAAKI,MAAMgT,EAAIZ,GAAKA,IAAMY,GAC/BZ,GAAK,GACLstB,IAEF,OAAOA,CACT,CAGO,SAASujB,GACdC,EACAC,GAEA,MAAMC,EAAsBD,EAAWnwC,EAAIkwC,EAAYlwC,EACjDqwC,EAAsBF,EAAWlwC,EAAIiwC,EAAYjwC,EACjDqwC,EAA2B1jD,KAAK2jD,KAAKH,EAAsBA,EAAsBC,EAAsBA,GAE7G,IAAIG,EAAQ5jD,KAAK6jD,MAAMJ,EAAqBD,GAM5C,OAJII,GAAU,GAAM3jD,KAClB2jD,GAAS9B,IAGJ,CACL8B,QACAE,SAAUJ,EAEd,CAEO,SAASK,GAAsBC,EAAYC,GAChD,OAAOjkD,KAAK2jD,KAAK3jD,KAAKmX,IAAI8sC,EAAI7wC,EAAI4wC,EAAI5wC,EAAG,GAAKpT,KAAKmX,IAAI8sC,EAAI5wC,EAAI2wC,EAAI3wC,EAAG,GACxE,CAMO,SAAS6wC,GAAW/wC,EAAW/F,GACpC,OAAQ+F,EAAI/F,EAAI20C,IAASD,GAAM7hD,EACjC,CAMO,SAASkkD,GAAgBhxC,GAC9B,OAAQA,EAAI2uC,GAAMA,IAAOA,EAC3B,CAKO,SAASsC,GAAcR,EAAen5C,EAAeC,EAAa25C,GACvE,MAAMlxC,EAAIgxC,GAAgBP,GACpB1hC,EAAIiiC,GAAgB15C,GACpB+H,EAAI2xC,GAAgBz5C,GACpB45C,EAAeH,GAAgBjiC,EAAI/O,GACnCoxC,EAAaJ,GAAgB3xC,EAAIW,GACjCqxC,EAAeL,GAAgBhxC,EAAI+O,GACnCuiC,EAAaN,GAAgBhxC,EAAIX,GACvC,OAAOW,IAAM+O,GAAK/O,IAAMX,GAAM6xC,GAAyBniC,IAAM1P,GACvD8xC,EAAeC,GAAcC,EAAeC,CACpD,CASO,SAASC,GAAYnlD,EAAe+R,EAAayC,GACtD,OAAO/T,KAAK+T,IAAIzC,EAAKtR,KAAKsR,IAAIyC,EAAKxU,GACrC,CAiBO,SAASolD,GAAWplD,EAAekL,EAAeC,GAA6B,IAAhB+3C,EAAUv0C,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,QAC9E,OAAO3O,GAASS,KAAKsR,IAAI7G,EAAOC,GAAO+3C,GAAWljD,GAASS,KAAK+T,IAAItJ,EAAOC,GAAO+3C,CACpF,CCpLO,SAASmC,GACd5oC,EACAzc,EACAslD,GAEAA,EAAMA,GAAA,CAAS5jC,GAAUjF,EAAMiF,GAAS1hB,GACxC,IAEIulD,EAFA3zC,EAAK6K,EAAMrS,OAAS,EACpByH,EAAK,EAGT,KAAOD,EAAKC,EAAK,GACf0zC,EAAO1zC,EAAKD,GAAO,EACf0zC,EAAIC,GACN1zC,EAAK0zC,EAEL3zC,EAAK2zC,EAIT,MAAO,CAAC1zC,KAAID,KACd,CAUO,MAAM4zC,GAAeA,CAC1B/oC,EACAsF,EACA/hB,EACAwX,IAEA6tC,GAAQ5oC,EAAOzc,EAAOwX,EAClBkK,IACA,MAAM+jC,EAAKhpC,EAAMiF,GAAOK,GACxB,OAAO0jC,EAAKzlD,GAASylD,IAAOzlD,GAASyc,EAAMiF,EAAQ,GAAGK,KAAS/hB,CAAA,EAE/D0hB,GAASjF,EAAMiF,GAAOK,GAAO/hB,GAStB0lD,GAAgBA,CAC3BjpC,EACAsF,EACA/hB,IAEAqlD,GAAQ5oC,EAAOzc,GAAO0hB,GAASjF,EAAMiF,GAAOK,IAAQ/hB,IAyBtD,MAAM2lD,GAAc,CAAC,OAAQ,MAAO,QAAS,SAAU,WA0DhD,SAASC,GAAoBp3C,EAAOuQ,GACzC,MAAM8mC,EAAOr3C,EAAMs3C,SACnB,IAAKD,EACH,OAGF,MAAMzkC,EAAYykC,EAAKzkC,UACjBM,EAAQN,EAAUnW,QAAQ8T,IACjB,IAAX2C,GACFN,EAAUoU,OAAO9T,EAAO,GAGtBN,EAAUhX,OAAS,IAIvBu7C,GAAYjsB,SAAS3X,WACZvT,EAAMuT,EAAI,WAGZvT,EAAMs3C,SACf,CAKO,SAASC,GAAgB5mB,GAC9B,MAAMlrB,EAAM,IAAI+xC,IAAO7mB,GAEvB,OAAIlrB,EAAItU,OAASw/B,EAAM/0B,OACd+0B,EAGFr0B,MAAM2B,KAAKwH,EACpB,CCnLa,MAAAgyC,GACW,qBAAXC,OACF,SAASjvB,GACd,OAAOA,GACT,EAEKivB,OAAOC,sBAOT,SAASC,GACdzpC,EACA4jC,GAEA,IAAI8F,EAAY,GACZC,GAAU,EAEd,OAAO,WAAyB,QAAAC,EAAA53C,UAAAvE,OAAb8S,EAAW,IAAApS,MAAAy7C,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAXtpC,EAAWspC,GAAA73C,UAAA63C,GAE5BH,EAAYnpC,EACPopC,IACHA,GAAU,EACVL,GAAiBl2C,KAAKm2C,QAAQ,KAC5BI,GAAU,EACV3pC,EAAGhK,MAAM4tC,EAAS8F,EAAA,IAGxB,CACF,CAsBO,MAAMI,GAAsBC,GAAgD,UAAVA,EAAoB,OAAmB,QAAVA,EAAkB,QAAU,SAMrHC,GAAiBA,CAACD,EAAmCx7C,EAAeC,IAA0B,UAAVu7C,EAAoBx7C,EAAkB,QAAVw7C,EAAkBv7C,GAAOD,EAAQC,GAAO,EAe9J,SAASy7C,GAAiC/0B,EAAqCg1B,EAAwBC,GAC5G,MAAMC,EAAaF,EAAOz8C,OAE1B,IAAIc,EAAQ,EACR0U,EAAQmnC,EAEZ,GAAIl1B,EAAKm1B,QAAS,CAChB,MAAM,OAACC,EAAA,QAAQC,GAAWr1B,EACpBs1B,EAAOF,EAAOE,MACd,IAACp1C,EAAG,IAAEyC,EAAG,WAAE4yC,EAAU,WAAEC,GAAcJ,EAAOK,gBAE9CF,IACFl8C,EAAQi6C,GAAY1kD,KAAKsR,IAEvByzC,GAAa0B,EAASC,EAAMp1C,GAAKF,GAEjCi1C,EAAqBC,EAAavB,GAAaqB,EAAQM,EAAMF,EAAOM,iBAAiBx1C,IAAMF,IAC7F,EAAGk1C,EAAa,IAGhBnnC,EADEynC,EACMlC,GAAY1kD,KAAK+T,IAEvBgxC,GAAa0B,EAASD,EAAOE,KAAM3yC,GAAK,GAAM5C,GAAK,EAEnDk1C,EAAqB,EAAItB,GAAaqB,EAAQM,EAAMF,EAAOM,iBAAiB/yC,IAAM,GAAM5C,GAAK,GAC/F1G,EAAO67C,GAAc77C,EAEb67C,EAAa77C,EAIzB,MAAO,CAACA,QAAO0U,QACjB,CAQO,SAAS4nC,GAAoB31B,GAClC,MAAM,OAAC41B,EAAM,OAAEC,EAAA,aAAQC,GAAgB91B,EACjC+1B,EAAY,CAChBC,KAAMJ,EAAO11C,IACb+1C,KAAML,EAAOjzC,IACbuzC,KAAML,EAAO31C,IACbi2C,KAAMN,EAAOlzC,KAEf,IAAKmzC,EAEH,OADA91B,EAAK81B,aAAeC,GACb,EAET,MAAMK,EAAUN,EAAaE,OAASJ,EAAO11C,KAC1C41C,EAAaG,OAASL,EAAOjzC,KAC7BmzC,EAAaI,OAASL,EAAO31C,KAC7B41C,EAAaK,OAASN,EAAOlzC,IAGhC,OADAtI,OAAO4hB,OAAO65B,EAAcC,GACrBK,CACT,CC/IA,MAAMC,GAAUlJ,GAAoB,IAANA,GAAiB,IAANA,EACnCmJ,GAAYA,CAACnJ,EAAWr8B,EAAW4d,KAAgB9/B,KAAKmX,IAAI,EAAG,IAAMonC,GAAK,IAAMv+C,KAAK2nD,KAAKpJ,EAAIr8B,GAAK4/B,GAAMhiB,GACzG8nB,GAAaA,CAACrJ,EAAWr8B,EAAW4d,IAAc9/B,KAAKmX,IAAI,GAAI,GAAKonC,GAAKv+C,KAAK2nD,KAAKpJ,EAAIr8B,GAAK4/B,GAAMhiB,GAAK,EAOvG+nB,GAAU,CACdC,OAASvJ,GAAcA,EAEvBwJ,WAAaxJ,GAAcA,EAAIA,EAE/ByJ,YAAczJ,IAAeA,GAAKA,EAAI,GAEtC0J,cAAgB1J,IAAgBA,GAAK,IAAO,EACxC,GAAMA,EAAIA,GACT,MAAUA,GAAMA,EAAI,GAAK,GAE9B2J,YAAc3J,GAAcA,EAAIA,EAAIA,EAEpC4J,aAAe5J,IAAeA,GAAK,GAAKA,EAAIA,EAAI,EAEhD6J,eAAiB7J,IAAgBA,GAAK,IAAO,EACzC,GAAMA,EAAIA,EAAIA,EACd,KAAQA,GAAK,GAAKA,EAAIA,EAAI,GAE9B8J,YAAc9J,GAAcA,EAAIA,EAAIA,EAAIA,EAExC+J,aAAe/J,MAAiBA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,GAEtDgK,eAAiBhK,IAAgBA,GAAK,IAAO,EACzC,GAAMA,EAAIA,EAAIA,EAAIA,GACjB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,GAEnCiK,YAAcjK,GAAcA,EAAIA,EAAIA,EAAIA,EAAIA,EAE5CkK,aAAelK,IAAeA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAExDmK,eAAiBnK,IAAgBA,GAAK,IAAO,EACzC,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EACtB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAEtCoK,WAAapK,GAAuC,EAAxBv+C,KAAK4oD,IAAIrK,EAAI4D,IAEzC0G,YAActK,GAAcv+C,KAAK2nD,IAAIpJ,EAAI4D,IAEzC2G,cAAgBvK,IAAe,IAAOv+C,KAAK4oD,IAAI3oD,GAAKs+C,GAAK,GAEzDwK,WAAaxK,GAAqB,IAAPA,EAAY,EAAIv+C,KAAKmX,IAAI,EAAG,IAAMonC,EAAI,IAEjEyK,YAAczK,GAAqB,IAAPA,EAAY,EAA4B,EAAvBv+C,KAAKmX,IAAI,GAAI,GAAKonC,GAE/D0K,cAAgB1K,GAAckJ,GAAOlJ,GAAKA,EAAIA,EAAI,GAC9C,GAAMv+C,KAAKmX,IAAI,EAAG,IAAU,EAAJonC,EAAQ,IAChC,IAAyC,EAAjCv+C,KAAKmX,IAAI,GAAI,IAAU,EAAJonC,EAAQ,KAEvC2K,WAAa3K,GAAcA,GAAM,EAAKA,IAAMv+C,KAAK2jD,KAAK,EAAIpF,EAAIA,GAAK,GAEnE4K,YAAc5K,GAAcv+C,KAAK2jD,KAAK,GAAKpF,GAAK,GAAKA,GAErD6K,cAAgB7K,IAAgBA,GAAK,IAAO,GACvC,IAAOv+C,KAAK2jD,KAAK,EAAIpF,EAAIA,GAAK,GAC/B,IAAOv+C,KAAK2jD,KAAK,GAAKpF,GAAK,GAAKA,GAAK,GAEzC8K,cAAgB9K,GAAckJ,GAAOlJ,GAAKA,EAAImJ,GAAUnJ,EAAG,KAAO,IAElE+K,eAAiB/K,GAAckJ,GAAOlJ,GAAKA,EAAIqJ,GAAWrJ,EAAG,KAAO,IAEpEgL,gBAAAA,CAAiBhL,GACf,MAAMr8B,EAAI,MAEV,OAAOulC,GAAOlJ,GAAKA,EACjBA,EAAI,GACA,GAAMmJ,GAAc,EAAJnJ,EAAOr8B,EAHnB,KAIJ,GAAM,GAAM0lC,GAAe,EAAJrJ,EAAQ,EAAGr8B,EAJ9B,IAKZ,EAEAsnC,UAAAA,CAAWjL,GACT,MAAMr8B,EAAI,QACV,OAAOq8B,EAAIA,IAAMr8B,EAAI,GAAKq8B,EAAIr8B,EAChC,EAEAunC,WAAAA,CAAYlL,GACV,MAAMr8B,EAAI,QACV,OAAQq8B,GAAK,GAAKA,IAAMr8B,EAAI,GAAKq8B,EAAIr8B,GAAK,CAC5C,EAEAwnC,aAAAA,CAAcnL,GACZ,IAAIr8B,EAAI,QACR,OAAKq8B,GAAK,IAAO,EACDA,EAAIA,IAAuB,GAAhBr8B,GAAM,QAAeq8B,EAAIr8B,GAA3C,GAEF,KAAQq8B,GAAK,GAAKA,IAAuB,GAAhBr8B,GAAM,QAAeq8B,EAAIr8B,GAAK,EAChE,EAEAynC,aAAepL,GAAc,EAAIsJ,GAAQ+B,cAAc,EAAIrL,GAE3DqL,aAAAA,CAAcrL,GACZ,MAAMtvC,EAAI,OACJgT,EAAI,KACV,OAAIs8B,EAAK,EAAIt8B,EACJhT,EAAIsvC,EAAIA,EAEbA,EAAK,EAAIt8B,EACJhT,GAAKsvC,GAAM,IAAMt8B,GAAMs8B,EAAI,IAEhCA,EAAK,IAAMt8B,EACNhT,GAAKsvC,GAAM,KAAOt8B,GAAMs8B,EAAI,MAE9BtvC,GAAKsvC,GAAM,MAAQt8B,GAAMs8B,EAAI,OACtC,EAEAsL,gBAAkBtL,GAAeA,EAAI,GACH,GAA9BsJ,GAAQ8B,aAAiB,EAAJpL,GACc,GAAnCsJ,GAAQ+B,cAAkB,EAAJrL,EAAQ,GAAW,ICpHxC,SAASuL,GAAoBvqD,GAClC,GAAIA,GAA0B,kBAAVA,EAAoB,CACtC,MAAMkO,EAAOlO,EAAMyO,WACnB,MAAgB,2BAATP,GAA8C,4BAATA,EAG9C,OAAO,CACT,CAWO,SAAS3O,GAAMS,GACpB,OAAOuqD,GAAoBvqD,GAASA,EAAQ,IAAIk+C,EAAMl+C,EACxD,CAKO,SAASwqD,GAAcxqD,GAC5B,OAAOuqD,GAAoBvqD,GACvBA,EACA,IAAIk+C,EAAMl+C,GAAOu/C,SAAS,IAAK35C,OAAO,IAAK2rC,WACjD,CC/BA,MAAMkZ,GAAU,CAAC,IAAK,IAAK,cAAe,SAAU,WAC9CC,GAAS,CAAC,QAAS,cAAe,mBCAxC,MAAMC,GAAY,IAAIC,IAaf,SAASC,GAAaz/C,EAAa0/C,EAAgB5zB,GACxD,OAZF,SAAyB4zB,EAAgB5zB,GACvCA,EAAUA,GAAW,CAAC,EACtB,MAAM6zB,EAAWD,EAASE,KAAKC,UAAU/zB,GACzC,IAAIg0B,EAAYP,GAAUp3C,IAAIw3C,GAK9B,OAJKG,IACHA,EAAY,IAAIC,KAAKC,aAAaN,EAAQ5zB,GAC1CyzB,GAAU12C,IAAI82C,EAAUG,IAEnBA,CACT,CAGSG,CAAgBP,EAAQ5zB,GAASo0B,OAAOlgD,EACjD,CCRA,MAAMmgD,GAAa,CAOjBC,OAAOxrD,GACEmO,EAAQnO,GAAkCA,EAAS,GAAKA,EAWjEyrD,OAAAA,CAAQC,EAAWhqC,EAAOiqC,GACxB,GAAkB,IAAdD,EACF,MAAO,IAGT,MAAMZ,EAAS77C,KAAK28C,MAAM10B,QAAQ4zB,OAClC,IAAIe,EACAC,EAAQJ,EAEZ,GAAIC,EAAMvhD,OAAS,EAAG,CAEpB,MAAM2hD,EAAUtrD,KAAK+T,IAAI/T,KAAKub,IAAI2vC,EAAM,GAAG3rD,OAAQS,KAAKub,IAAI2vC,EAAMA,EAAMvhD,OAAS,GAAGpK,SAChF+rD,EAAU,MAAQA,EAAU,QAC9BF,EAAW,cAGbC,EAyCN,SAAwBJ,EAAWC,GAGjC,IAAIG,EAAQH,EAAMvhD,OAAS,EAAIuhD,EAAM,GAAG3rD,MAAQ2rD,EAAM,GAAG3rD,MAAQ2rD,EAAM,GAAG3rD,MAAQ2rD,EAAM,GAAG3rD,MAGvFS,KAAKub,IAAI8vC,IAAU,GAAKJ,IAAcjrD,KAAKib,MAAMgwC,KAEnDI,EAAQJ,EAAYjrD,KAAKib,MAAMgwC,IAEjC,OAAOI,CACT,CApDcE,CAAeN,EAAWC,GAGpC,MAAMM,EAAWlJ,GAAMtiD,KAAKub,IAAI8vC,IAO1BI,EAAa1uC,MAAMyuC,GAAY,EAAIxrD,KAAK+T,IAAI/T,KAAKsR,KAAK,EAAItR,KAAKib,MAAMuwC,GAAW,IAAK,GAErF/0B,EAAU,CAAC20B,WAAUM,sBAAuBD,EAAYE,sBAAuBF,GAGrF,OAFAhgD,OAAO4hB,OAAOoJ,EAASjoB,KAAKioB,QAAQy0B,MAAML,QAEnCT,GAAaa,EAAWZ,EAAQ5zB,EACzC,EAWAm1B,WAAAA,CAAYX,EAAWhqC,EAAOiqC,GAC5B,GAAkB,IAAdD,EACF,MAAO,IAET,MAAMY,EAASX,EAAMjqC,GAAO6qC,aAAgBb,EAAajrD,KAAKmX,IAAI,GAAInX,KAAKib,MAAMqnC,GAAM2I,KACvF,MAAI,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,IAAI12C,SAASs3C,IAAW5qC,EAAQ,GAAMiqC,EAAMvhD,OACxDmhD,GAAWE,QAAQ17C,KAAKd,KAAMy8C,EAAWhqC,EAAOiqC,GAElD,EACT,GAsBF,IAAAa,GAAe,CAACjB,qBC/FHkB,GAAYvgD,OAAOtJ,OAAO,MAC1B8pD,GAAcxgD,OAAOtJ,OAAO,MAOzC,SAAS+pD,GAAS3oC,EAAMjC,GACtB,IAAKA,EACH,OAAOiC,EAET,MAAMhC,EAAOD,EAAI3F,MAAM,KACvB,IAAK,IAAI1S,EAAI,EAAG+F,EAAIuS,EAAK5X,OAAQV,EAAI+F,IAAK/F,EAAG,CAC3C,MAAM6rB,EAAIvT,EAAKtY,GACfsa,EAAOA,EAAKuR,KAAOvR,EAAKuR,GAAKrpB,OAAOtJ,OAAO,MAC7C,CACA,OAAOohB,CACT,CAEA,SAAS/P,GAAI9S,EAAMsoB,EAAO+hC,GACxB,MAAqB,kBAAV/hC,EACF83B,EAAMoL,GAASxrD,EAAMsoB,GAAQ+hC,GAE/BjK,EAAMoL,GAASxrD,EAAM,IAAKsoB,EACnC,CAMO,MAAMmjC,GACX7xC,WAAAA,CAAY8xC,EAAcC,GACxB79C,KAAKpM,eAAY+F,EACjBqG,KAAK1I,gBAAkB,kBACvB0I,KAAK89C,YAAc,kBACnB99C,KAAK1P,MAAQ,OACb0P,KAAK+9C,SAAW,CAAC,EACjB/9C,KAAKg+C,iBAAoB9rC,GAAYA,EAAQyqC,MAAMsB,SAASC,sBAC5Dl+C,KAAKm+C,SAAW,CAAC,EACjBn+C,KAAKmQ,OAAS,CACZ,YACA,WACA,QACA,aACA,aAEFnQ,KAAKo+C,KAAO,CACVC,OAAQ,qDACR3tD,KAAM,GACNC,MAAO,SACP2tD,WAAY,IACZ7O,OAAQ,MAEVzvC,KAAKu+C,MAAQ,CAAC,EACdv+C,KAAKw+C,qBAAuB,CAACC,EAAKx2B,IAAYszB,GAActzB,EAAQ3wB,iBACpE0I,KAAK0+C,iBAAmB,CAACD,EAAKx2B,IAAYszB,GAActzB,EAAQ61B,aAChE99C,KAAK2+C,WAAa,CAACF,EAAKx2B,IAAYszB,GAActzB,EAAQ33B,OAC1D0P,KAAK4+C,UAAY,IACjB5+C,KAAK6+C,YAAc,CACjBpoD,KAAM,UACNqoD,WAAW,EACXC,kBAAkB,GAEpB/+C,KAAKg/C,qBAAsB,EAC3Bh/C,KAAKi/C,QAAU,KACfj/C,KAAKk/C,QAAU,KACfl/C,KAAKm/C,SAAU,EACfn/C,KAAKo/C,QAAU,CAAC,EAChBp/C,KAAKq/C,YAAa,EAClBr/C,KAAKs/C,WAAQ3lD,EACbqG,KAAKu/C,OAAS,CAAC,EACfv/C,KAAKw/C,UAAW,EAChBx/C,KAAKy/C,yBAA0B,EAE/Bz/C,KAAK0/C,SAAS9B,GACd59C,KAAK0D,MAAMm6C,EACb,CAMA74C,GAAAA,CAAIwV,EAAO+hC,GACT,OAAOv3C,GAAIhF,KAAMwa,EAAO+hC,EAC1B,CAKAj4C,GAAAA,CAAIkW,GACF,OAAOkjC,GAAS19C,KAAMwa,EACxB,CAMAklC,QAAAA,CAASllC,EAAO+hC,GACd,OAAOv3C,GAAIy4C,GAAajjC,EAAO+hC,EACjC,CAEAoD,QAAAA,CAASnlC,EAAO+hC,GACd,OAAOv3C,GAAIw4C,GAAWhjC,EAAO+hC,EAC/B,CAmBAqD,KAAAA,CAAMplC,EAAOnmB,EAAMwrD,EAAaC,GAC9B,MAAMC,EAAcrC,GAAS19C,KAAMwa,GAC7BwlC,EAAoBtC,GAAS19C,KAAM6/C,GACnCI,EAAc,IAAM5rD,EAE1B4I,OAAOijD,iBAAiBH,EAAa,CAEnC,CAACE,GAAc,CACblvD,MAAOgvD,EAAY1rD,GACnB2X,UAAU,GAGZ,CAAC3X,GAAO,CACNgQ,YAAY,EACZC,GAAAA,GACE,MAAM67C,EAAQngD,KAAKigD,GACbv6C,EAASs6C,EAAkBF,GACjC,OAAIjP,EAASsP,GACJljD,OAAO4hB,OAAO,CAAC,EAAGnZ,EAAQy6C,GAE5BlP,EAAekP,EAAOz6C,EAC/B,EACAV,GAAAA,CAAIjU,GACFiP,KAAKigD,GAAelvD,CACtB,IAGN,CAEA2S,KAAAA,CAAM08C,GACJA,EAAS31B,SAAS/mB,GAAUA,EAAM1D,OACpC,EAIF,IAAAqgD,GAA+B,IAAI1C,GAAS,CAC1C2C,YAAcjsD,IAAUA,EAAKksD,WAAW,MACxCC,WAAansD,GAAkB,WAATA,EACtBkqD,MAAO,CACLkC,UAAW,eAEb5B,YAAa,CACXyB,aAAa,EACbE,YAAY,IAEb,CH3KI,SAAiCH,GACtCA,EAASr7C,IAAI,YAAa,CACxB07C,WAAO/mD,EACPgnD,SAAU,IACVC,OAAQ,eACRlzC,QAAI/T,EACJ6D,UAAM7D,EACN8e,UAAM9e,EACNg1C,QAAIh1C,EACJsF,UAAMtF,IAGR0mD,EAASX,SAAS,YAAa,CAC7Be,WAAW,EACXD,YAAY,EACZF,YAAcjsD,GAAkB,eAATA,GAAkC,eAATA,GAAkC,OAATA,IAG3EgsD,EAASr7C,IAAI,aAAc,CACzBy2C,OAAQ,CACNx8C,KAAM,QACNqqB,WAAYmyB,IAEdD,QAAS,CACPv8C,KAAM,SACNqqB,WAAYkyB,MAIhB6E,EAASX,SAAS,aAAc,CAC9Be,UAAW,cAGbJ,EAASr7C,IAAI,cAAe,CAC1B67C,OAAQ,CACNjtD,UAAW,CACT+sD,SAAU,MAGdG,OAAQ,CACNltD,UAAW,CACT+sD,SAAU,IAGdI,KAAM,CACJC,WAAY,CACVvF,OAAQ,CACNj+C,KAAM,eAERyjD,QAAS,CACPhiD,KAAM,UACN0hD,SAAU,KAIhBO,KAAM,CACJF,WAAY,CACVvF,OAAQ,CACN9M,GAAI,eAENsS,QAAS,CACPhiD,KAAM,UACN2hD,OAAQ,SACRlzC,GAAI4zB,GAAS,EAAJA,MAKnB,EIvEO,SAA8B+e,GACnCA,EAASr7C,IAAI,SAAU,CACrBm8C,aAAa,EACbC,QAAS,CACP3pD,IAAK,EACLC,MAAO,EACPC,OAAQ,EACRH,KAAM,IAGZ,ECRO,SAA4B6oD,GACjCA,EAASr7C,IAAI,QAAS,CACpBxR,SAAS,EACTkO,QAAQ,EACR+vC,SAAS,EACT4P,aAAa,EASbC,OAAQ,QAERC,MAAM,EAMNC,MAAO,EAGPC,KAAM,CACJjuD,SAAS,EACTkuD,UAAW,EACXC,iBAAiB,EACjBC,WAAW,EACXC,WAAY,EACZC,UAAWA,CAACC,EAAM95B,IAAYA,EAAQy5B,UACtCM,UAAWA,CAACD,EAAM95B,IAAYA,EAAQ33B,MACtCoR,QAAQ,GAGVugD,OAAQ,CACNzuD,SAAS,EACT0uD,KAAM,GACNC,WAAY,EACZ5vD,MAAO,GAITgpB,MAAO,CAEL/nB,SAAS,EAGT23B,KAAM,GAGNi2B,QAAS,CACP3pD,IAAK,EACLE,OAAQ,IAKZ+kD,MAAO,CACL0F,YAAa,EACbC,YAAa,GACbC,QAAQ,EACRC,gBAAiB,EACjBC,gBAAiB,GACjBpB,QAAS,EACT5tD,SAAS,EACTivD,UAAU,EACVC,gBAAiB,EACjBC,YAAa,EAEb36B,SAAUu1B,GAAMjB,WAAWC,OAC3BqG,MAAO,CAAC,EACRC,MAAO,CAAC,EACRpL,MAAO,SACPqL,WAAY,OAEZC,mBAAmB,EACnBC,cAAe,4BACfC,gBAAiB,KAIrB5C,EAAST,MAAM,cAAe,QAAS,GAAI,SAC3CS,EAAST,MAAM,aAAc,QAAS,GAAI,eAC1CS,EAAST,MAAM,eAAgB,QAAS,GAAI,eAC5CS,EAAST,MAAM,cAAe,QAAS,GAAI,SAE3CS,EAASX,SAAS,QAAS,CACzBe,WAAW,EACXH,YAAcjsD,IAAUA,EAAKksD,WAAW,YAAclsD,EAAKksD,WAAW,UAAqB,aAATlsD,GAAgC,WAATA,EACzGmsD,WAAansD,GAAkB,eAATA,GAAkC,mBAATA,GAAsC,SAATA,IAG9EgsD,EAASX,SAAS,SAAU,CAC1Be,UAAW,UAGbJ,EAASX,SAAS,cAAe,CAC/BY,YAAcjsD,GAAkB,oBAATA,GAAuC,aAATA,EACrDmsD,WAAansD,GAAkB,oBAATA,GAE1B,IClEO,SAAS6uD,GACdzE,EACAt/C,EACAgkD,EACAC,EACA3lD,GAEA,IAAI4lD,EAAYlkD,EAAK1B,GAQrB,OAPK4lD,IACHA,EAAYlkD,EAAK1B,GAAUghD,EAAI6E,YAAY7lD,GAAQlL,MACnD4wD,EAAG3nD,KAAKiC,IAEN4lD,EAAYD,IACdA,EAAUC,GAELD,CACT,CASO,SAASG,GACd9E,EACAL,EACAoF,EACAC,GAGA,IAAItkD,GADJskD,EAAQA,GAAS,CAAC,GACDtkD,KAAOskD,EAAMtkD,MAAQ,CAAC,EACnCgkD,EAAKM,EAAMC,eAAiBD,EAAMC,gBAAkB,GAEpDD,EAAMrF,OAASA,IACjBj/C,EAAOskD,EAAMtkD,KAAO,CAAC,EACrBgkD,EAAKM,EAAMC,eAAiB,GAC5BD,EAAMrF,KAAOA,GAGfK,EAAIkF,OAEJlF,EAAIL,KAAOA,EACX,IAAIgF,EAAU,EACd,MAAMvR,EAAO2R,EAAcroD,OAC3B,IAAIV,EAAW+G,EAAWoiD,EAAcC,EAAwBC,EAChE,IAAKrpD,EAAI,EAAGA,EAAIo3C,EAAMp3C,IAIpB,GAHAopD,EAAQL,EAAc/oD,QAGRd,IAAVkqD,GAAiC,OAAVA,GAAmB3kD,EAAQ2kD,IAE/C,GAAI3kD,EAAQ2kD,GAGjB,IAAKriD,EAAI,EAAGoiD,EAAOC,EAAM1oD,OAAQqG,EAAIoiD,EAAMpiD,IACzCsiD,EAAcD,EAAMriD,QAEA7H,IAAhBmqD,GAA6C,OAAhBA,GAAyB5kD,EAAQ4kD,KAChEV,EAAUF,GAAazE,EAAKt/C,EAAMgkD,EAAIC,EAASU,SARnDV,EAAUF,GAAazE,EAAKt/C,EAAMgkD,EAAIC,EAASS,GAcnDpF,EAAIsF,UAEJ,MAAMC,EAAQb,EAAGhoD,OAAS,EAC1B,GAAI6oD,EAAQR,EAAcroD,OAAQ,CAChC,IAAKV,EAAI,EAAGA,EAAIupD,EAAOvpD,WACd0E,EAAKgkD,EAAG1oD,IAEjB0oD,EAAG58B,OAAO,EAAGy9B,GAEf,OAAOZ,CACT,CAUO,SAASa,GAAYtH,EAAcuH,EAAe3xD,GACvD,MAAMyrD,EAAmBrB,EAAMwH,wBACzBC,EAAsB,IAAV7xD,EAAcf,KAAK+T,IAAIhT,EAAQ,EAAG,IAAO,EAC3D,OAAOf,KAAKI,OAAOsyD,EAAQE,GAAapG,GAAoBA,EAAmBoG,CACjF,CAKO,SAASC,GAAYC,EAA2B7F,IACrDA,EAAMA,GAAO6F,EAAOC,WAAW,OAE3BZ,OAGJlF,EAAI+F,iBACJ/F,EAAIgG,UAAU,EAAG,EAAGH,EAAO/xD,MAAO+xD,EAAO9xD,QACzCisD,EAAIsF,SACN,CASO,SAASW,GACdjG,EACAx2B,EACArjB,EACAC,GAGA8/C,GAAgBlG,EAAKx2B,EAASrjB,EAAGC,EAAG,KACtC,CAGO,SAAS8/C,GACdlG,EACAx2B,EACArjB,EACAC,EACA6L,GAEA,IAAIzR,EAAc2lD,EAAiBC,EAAiBn0D,EAAco0D,EAAsBvyD,EAAewyD,EAAkBC,EACzH,MAAMr0D,EAAQs3B,EAAQg9B,WAChBC,EAAWj9B,EAAQi9B,SACnBC,EAASl9B,EAAQk9B,OACvB,IAAIC,GAAOF,GAAY,GAAKxR,GAE5B,GAAI/iD,GAA0B,kBAAVA,IAClBsO,EAAOtO,EAAM6O,WACA,8BAATP,GAAiD,+BAATA,GAM1C,OALAw/C,EAAIkF,OACJlF,EAAI4G,UAAUzgD,EAAGC,GACjB45C,EAAIjO,OAAO4U,GACX3G,EAAI6G,UAAU30D,GAAQA,EAAM4B,MAAQ,GAAI5B,EAAM6B,OAAS,EAAG7B,EAAM4B,MAAO5B,EAAM6B,aAC7EisD,EAAIsF,UAKR,KAAIx1C,MAAM42C,IAAWA,GAAU,GAA/B,CAMA,OAFA1G,EAAI8G,YAEI50D,GAEN,QACM+f,EACF+tC,EAAI+G,QAAQ5gD,EAAGC,EAAG6L,EAAI,EAAGy0C,EAAQ,EAAG,EAAG7R,IAEvCmL,EAAIgH,IAAI7gD,EAAGC,EAAGsgD,EAAQ,EAAG7R,IAE3BmL,EAAIiH,YACJ,MACF,IAAK,WACHnzD,EAAQme,EAAIA,EAAI,EAAIy0C,EACpB1G,EAAIkH,OAAO/gD,EAAIpT,KAAK2nD,IAAIiM,GAAO7yD,EAAOsS,EAAIrT,KAAK4oD,IAAIgL,GAAOD,GAC1DC,GAAOvR,GACP4K,EAAImH,OAAOhhD,EAAIpT,KAAK2nD,IAAIiM,GAAO7yD,EAAOsS,EAAIrT,KAAK4oD,IAAIgL,GAAOD,GAC1DC,GAAOvR,GACP4K,EAAImH,OAAOhhD,EAAIpT,KAAK2nD,IAAIiM,GAAO7yD,EAAOsS,EAAIrT,KAAK4oD,IAAIgL,GAAOD,GAC1D1G,EAAIiH,YACJ,MACF,IAAK,cAQHZ,EAAwB,KAATK,EACfz0D,EAAOy0D,EAASL,EAChBF,EAAUpzD,KAAK4oD,IAAIgL,EAAMxR,IAAcljD,EACvCq0D,EAAWvzD,KAAK4oD,IAAIgL,EAAMxR,KAAeljC,EAAIA,EAAI,EAAIo0C,EAAep0D,GACpEm0D,EAAUrzD,KAAK2nD,IAAIiM,EAAMxR,IAAcljD,EACvCs0D,EAAWxzD,KAAK2nD,IAAIiM,EAAMxR,KAAeljC,EAAIA,EAAI,EAAIo0C,EAAep0D,GACpE+tD,EAAIgH,IAAI7gD,EAAImgD,EAAUlgD,EAAIggD,EAASC,EAAcM,EAAM3zD,GAAI2zD,EAAMzR,IACjE8K,EAAIgH,IAAI7gD,EAAIogD,EAAUngD,EAAI+/C,EAASE,EAAcM,EAAMzR,GAASyR,GAChE3G,EAAIgH,IAAI7gD,EAAImgD,EAAUlgD,EAAIggD,EAASC,EAAcM,EAAKA,EAAMzR,IAC5D8K,EAAIgH,IAAI7gD,EAAIogD,EAAUngD,EAAI+/C,EAASE,EAAcM,EAAMzR,GAASyR,EAAM3zD,IACtEgtD,EAAIiH,YACJ,MACF,IAAK,OACH,IAAKR,EAAU,CACbx0D,EAAOc,KAAKq0D,QAAUV,EACtB5yD,EAAQme,EAAIA,EAAI,EAAIhgB,EACpB+tD,EAAIqH,KAAKlhD,EAAIrS,EAAOsS,EAAInU,EAAM,EAAI6B,EAAO,EAAI7B,GAC7C,MAEF00D,GAAOxR,GAET,IAAK,UACHmR,EAAWvzD,KAAK4oD,IAAIgL,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxCP,EAAUpzD,KAAK4oD,IAAIgL,GAAOD,EAC1BN,EAAUrzD,KAAK2nD,IAAIiM,GAAOD,EAC1BH,EAAWxzD,KAAK2nD,IAAIiM,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxC1G,EAAIkH,OAAO/gD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAImH,OAAOhhD,EAAIogD,EAAUngD,EAAI+/C,GAC7BnG,EAAImH,OAAOhhD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAImH,OAAOhhD,EAAIogD,EAAUngD,EAAI+/C,GAC7BnG,EAAIiH,YACJ,MACF,IAAK,WACHN,GAAOxR,GAET,IAAK,QACHmR,EAAWvzD,KAAK4oD,IAAIgL,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxCP,EAAUpzD,KAAK4oD,IAAIgL,GAAOD,EAC1BN,EAAUrzD,KAAK2nD,IAAIiM,GAAOD,EAC1BH,EAAWxzD,KAAK2nD,IAAIiM,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxC1G,EAAIkH,OAAO/gD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAImH,OAAOhhD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAIkH,OAAO/gD,EAAIogD,EAAUngD,EAAI+/C,GAC7BnG,EAAImH,OAAOhhD,EAAIogD,EAAUngD,EAAI+/C,GAC7B,MACF,IAAK,OACHG,EAAWvzD,KAAK4oD,IAAIgL,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxCP,EAAUpzD,KAAK4oD,IAAIgL,GAAOD,EAC1BN,EAAUrzD,KAAK2nD,IAAIiM,GAAOD,EAC1BH,EAAWxzD,KAAK2nD,IAAIiM,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxC1G,EAAIkH,OAAO/gD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAImH,OAAOhhD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAIkH,OAAO/gD,EAAIogD,EAAUngD,EAAI+/C,GAC7BnG,EAAImH,OAAOhhD,EAAIogD,EAAUngD,EAAI+/C,GAC7BQ,GAAOxR,GACPmR,EAAWvzD,KAAK4oD,IAAIgL,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxCP,EAAUpzD,KAAK4oD,IAAIgL,GAAOD,EAC1BN,EAAUrzD,KAAK2nD,IAAIiM,GAAOD,EAC1BH,EAAWxzD,KAAK2nD,IAAIiM,IAAQ10C,EAAIA,EAAI,EAAIy0C,GACxC1G,EAAIkH,OAAO/gD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAImH,OAAOhhD,EAAImgD,EAAUlgD,EAAIggD,GAC7BpG,EAAIkH,OAAO/gD,EAAIogD,EAAUngD,EAAI+/C,GAC7BnG,EAAImH,OAAOhhD,EAAIogD,EAAUngD,EAAI+/C,GAC7B,MACF,IAAK,OACHA,EAAUl0C,EAAIA,EAAI,EAAIlf,KAAK4oD,IAAIgL,GAAOD,EACtCN,EAAUrzD,KAAK2nD,IAAIiM,GAAOD,EAC1B1G,EAAIkH,OAAO/gD,EAAIggD,EAAS//C,EAAIggD,GAC5BpG,EAAImH,OAAOhhD,EAAIggD,EAAS//C,EAAIggD,GAC5B,MACF,IAAK,OACHpG,EAAIkH,OAAO/gD,EAAGC,GACd45C,EAAImH,OAAOhhD,EAAIpT,KAAK4oD,IAAIgL,IAAQ10C,EAAIA,EAAI,EAAIy0C,GAAStgD,EAAIrT,KAAK2nD,IAAIiM,GAAOD,GACzE,MACF,KAAK,EACH1G,EAAIiH,YAIRjH,EAAIrrD,OACA60B,EAAQ89B,YAAc,GACxBtH,EAAItqD,SAER,CASO,SAAS6xD,GACdC,EACAlkC,EACAmkC,GAIA,OAFAA,EAASA,GAAU,IAEXnkC,GAASkkC,GAASA,EAAMrhD,EAAImd,EAAKvqB,KAAO0uD,GAAUD,EAAMrhD,EAAImd,EAAKrqB,MAAQwuD,GACjFD,EAAMphD,EAAIkd,EAAKtqB,IAAMyuD,GAAUD,EAAMphD,EAAIkd,EAAKpqB,OAASuuD,CACzD,CAEO,SAASC,GAAS1H,EAA+B18B,GACtD08B,EAAIkF,OACJlF,EAAI8G,YACJ9G,EAAIqH,KAAK/jC,EAAKvqB,KAAMuqB,EAAKtqB,IAAKsqB,EAAKrqB,MAAQqqB,EAAKvqB,KAAMuqB,EAAKpqB,OAASoqB,EAAKtqB,KACzEgnD,EAAI8C,MACN,CAEO,SAAS6E,GAAW3H,GACzBA,EAAIsF,SACN,CAKO,SAASsC,GACd5H,EACA6H,EACA5gD,EACApR,EACAmC,GAEA,IAAK6vD,EACH,OAAO7H,EAAImH,OAAOlgD,EAAOd,EAAGc,EAAOb,GAErC,GAAa,WAATpO,EAAmB,CACrB,MAAM8vD,GAAYD,EAAS1hD,EAAIc,EAAOd,GAAK,EAC3C65C,EAAImH,OAAOW,EAAUD,EAASzhD,GAC9B45C,EAAImH,OAAOW,EAAU7gD,EAAOb,EAC9B,KAAoB,UAATpO,MAAuBnC,EAChCmqD,EAAImH,OAAOU,EAAS1hD,EAAGc,EAAOb,GAE9B45C,EAAImH,OAAOlgD,EAAOd,EAAG0hD,EAASzhD,GAEhC45C,EAAImH,OAAOlgD,EAAOd,EAAGc,EAAOb,EAC9B,CAKO,SAAS2hD,GACd/H,EACA6H,EACA5gD,EACApR,GAEA,IAAKgyD,EACH,OAAO7H,EAAImH,OAAOlgD,EAAOd,EAAGc,EAAOb,GAErC45C,EAAIgI,cACFnyD,EAAOgyD,EAASI,KAAOJ,EAASK,KAChCryD,EAAOgyD,EAASM,KAAON,EAASO,KAChCvyD,EAAOoR,EAAOihD,KAAOjhD,EAAOghD,KAC5BpyD,EAAOoR,EAAOmhD,KAAOnhD,EAAOkhD,KAC5BlhD,EAAOd,EACPc,EAAOb,EACX,CAwBA,SAASiiD,GACPrI,EACA75C,EACAC,EACAkiD,EACA7jC,GAEA,GAAIA,EAAK8jC,eAAiB9jC,EAAK+jC,UAAW,CAQxC,MAAMC,EAAUzI,EAAI6E,YAAYyD,GAC1BvvD,EAAOoN,EAAIsiD,EAAQC,sBACnBzvD,EAAQkN,EAAIsiD,EAAQE,uBACpB3vD,EAAMoN,EAAIqiD,EAAQG,wBAClB1vD,EAASkN,EAAIqiD,EAAQI,yBACrBC,EAAcrkC,EAAK8jC,eAAiBvvD,EAAME,GAAU,EAAIA,EAE9D8mD,EAAI+I,YAAc/I,EAAIgJ,UACtBhJ,EAAI8G,YACJ9G,EAAIiD,UAAYx+B,EAAKwkC,iBAAmB,EACxCjJ,EAAIkH,OAAOnuD,EAAM+vD,GACjB9I,EAAImH,OAAOluD,EAAO6vD,GAClB9I,EAAItqD,SAER,CAEA,SAASwzD,GAAalJ,EAA+Bv7B,GACnD,MAAM0kC,EAAWnJ,EAAIgJ,UAErBhJ,EAAIgJ,UAAYvkC,EAAK5yB,MACrBmuD,EAAIoJ,SAAS3kC,EAAK1rB,KAAM0rB,EAAKzrB,IAAKyrB,EAAK3wB,MAAO2wB,EAAK1wB,QACnDisD,EAAIgJ,UAAYG,CAClB,CAKO,SAASlkC,GACd+6B,EACAtzB,EACAvmB,EACAC,EACAu5C,GAEA,IADAl7B,EAAuBxjB,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,MAEvB,MAAMooD,EAAQ5oD,EAAQisB,GAAQA,EAAO,CAACA,GAChCh3B,EAAS+uB,EAAK7vB,YAAc,GAA0B,KAArB6vB,EAAK6kC,YAC5C,IAAIttD,EAAWssD,EAMf,IAJAtI,EAAIkF,OACJlF,EAAIL,KAAOA,EAAK3gD,OA7ElB,SAAuBghD,EAA+Bv7B,GAChDA,EAAK8kC,aACPvJ,EAAI4G,UAAUniC,EAAK8kC,YAAY,GAAI9kC,EAAK8kC,YAAY,IAGjDpX,EAAc1tB,EAAKgiC,WACtBzG,EAAIjO,OAAOttB,EAAKgiC,UAGdhiC,EAAK5yB,QACPmuD,EAAIgJ,UAAYvkC,EAAK5yB,OAGnB4yB,EAAK+kC,YACPxJ,EAAIwJ,UAAY/kC,EAAK+kC,WAGnB/kC,EAAKglC,eACPzJ,EAAIyJ,aAAehlC,EAAKglC,aAE5B,CA0DEC,CAAc1J,EAAKv7B,GAEdzoB,EAAI,EAAGA,EAAIqtD,EAAM3sD,SAAUV,EAC9BssD,EAAOe,EAAMrtD,GAETyoB,EAAKklC,UACPT,GAAalJ,EAAKv7B,EAAKklC,UAGrBj0D,IACE+uB,EAAK6kC,cACPtJ,EAAI+I,YAActkC,EAAK6kC,aAGpBnX,EAAc1tB,EAAK7vB,eACtBorD,EAAIiD,UAAYx+B,EAAK7vB,aAGvBorD,EAAI4J,WAAWtB,EAAMniD,EAAGC,EAAGqe,EAAKolC,WAGlC7J,EAAI8J,SAASxB,EAAMniD,EAAGC,EAAGqe,EAAKolC,UAC9BxB,GAAarI,EAAK75C,EAAGC,EAAGkiD,EAAM7jC,GAE9Bre,GAAKlD,OAAOy8C,EAAKE,YAGnBG,EAAIsF,SACN,CAOO,SAASyE,GACd/J,EACAqH,GAEA,MAAM,EAAClhD,EAAC,EAAEC,EAAC,EAAE6L,EAAC,EAAE8wB,EAAC,OAAE2jB,GAAUW,EAG7BrH,EAAIgH,IAAI7gD,EAAIugD,EAAOsD,QAAS5jD,EAAIsgD,EAAOsD,QAAStD,EAAOsD,QAAS,IAAMh3D,GAAIA,IAAI,GAG9EgtD,EAAImH,OAAOhhD,EAAGC,EAAI28B,EAAI2jB,EAAOuD,YAG7BjK,EAAIgH,IAAI7gD,EAAIugD,EAAOuD,WAAY7jD,EAAI28B,EAAI2jB,EAAOuD,WAAYvD,EAAOuD,WAAYj3D,GAAIkiD,IAAS,GAG1F8K,EAAImH,OAAOhhD,EAAI8L,EAAIy0C,EAAOwD,YAAa9jD,EAAI28B,GAG3Cid,EAAIgH,IAAI7gD,EAAI8L,EAAIy0C,EAAOwD,YAAa9jD,EAAI28B,EAAI2jB,EAAOwD,YAAaxD,EAAOwD,YAAahV,GAAS,GAAG,GAGhG8K,EAAImH,OAAOhhD,EAAI8L,EAAG7L,EAAIsgD,EAAOyD,UAG7BnK,EAAIgH,IAAI7gD,EAAI8L,EAAIy0C,EAAOyD,SAAU/jD,EAAIsgD,EAAOyD,SAAUzD,EAAOyD,SAAU,GAAIjV,IAAS,GAGpF8K,EAAImH,OAAOhhD,EAAIugD,EAAOsD,QAAS5jD,EACjC,CCpgBA,MAAMgkD,GAAc,uCACdC,GAAa,wEAcZ,SAASC,GAAah4D,EAAwBL,GACnD,MAAMs4D,GAAW,GAAKj4D,GAAOk4D,MAAMJ,IACnC,IAAKG,GAA0B,WAAfA,EAAQ,GACtB,OAAc,IAAPt4D,EAKT,OAFAK,GAASi4D,EAAQ,GAETA,EAAQ,IACd,IAAK,KACH,OAAOj4D,EACT,IAAK,IACHA,GAAS,IAMb,OAAOL,EAAOK,CAChB,CAEA,MAAMm4D,GAAgB5nB,IAAgBA,GAAK,EAQpC,SAAS6nB,GAAkBp4D,EAAwCd,GACxE,MAAMkW,EAAM,CAAC,EACPijD,EAAWvY,EAAS5gD,GACpB8iB,EAAOq2C,EAAWnsD,OAAO8V,KAAK9iB,GAASA,EACvCmR,EAAOyvC,EAAS9/C,GAClBq4D,EACEx5B,GAAQqhB,EAAelgD,EAAM6+B,GAAO7+B,EAAMd,EAAM2/B,KAChDA,GAAQ7+B,EAAM6+B,GAChB,IAAM7+B,EAEV,IAAK,MAAM6+B,KAAQ7c,EACjB5M,EAAIypB,GAAQs5B,GAAa9nD,EAAKwuB,IAEhC,OAAOzpB,CACT,CAUO,SAASkjD,GAAOt4D,GACrB,OAAOo4D,GAAkBp4D,EAAO,CAAC0G,IAAK,IAAKC,MAAO,IAAKC,OAAQ,IAAKH,KAAM,KAC5E,CASO,SAAS8xD,GAAcv4D,GAC5B,OAAOo4D,GAAkBp4D,EAAO,CAAC,UAAW,WAAY,aAAc,eACxE,CAUO,SAASw4D,GAAUx4D,GACxB,MAAM8N,EAAMwqD,GAAOt4D,GAKnB,OAHA8N,EAAItM,MAAQsM,EAAIrH,KAAOqH,EAAInH,MAC3BmH,EAAIrM,OAASqM,EAAIpH,IAAMoH,EAAIlH,OAEpBkH,CACT,CAUO,SAAS2qD,GAAOvhC,EAA4BwhC,GACjDxhC,EAAUA,GAAW,CAAC,EACtBwhC,EAAWA,GAAYpJ,GAASjC,KAEhC,IAAI1tD,EAAOugD,EAAehpB,EAAQv3B,KAAM+4D,EAAS/4D,MAE7B,kBAATA,IACTA,EAAOqR,SAASrR,EAAM,KAExB,IAAIC,EAAQsgD,EAAehpB,EAAQt3B,MAAO84D,EAAS94D,OAC/CA,KAAW,GAAKA,GAAOs4D,MAAMH,MAC/B5kD,QAAQ0M,KAAK,kCAAoCjgB,EAAQ,KACzDA,OAAQgJ,GAGV,MAAMykD,EAAO,CACXC,OAAQpN,EAAehpB,EAAQo2B,OAAQoL,EAASpL,QAChDC,WAAYyK,GAAa9X,EAAehpB,EAAQq2B,WAAYmL,EAASnL,YAAa5tD,GAClFA,OACAC,QACA8+C,OAAQwB,EAAehpB,EAAQwnB,OAAQga,EAASha,QAChDhyC,OAAQ,IAIV,OADA2gD,EAAK3gD,ODlHA,SAAsB2gD,GAC3B,OAAKA,GAAQxN,EAAcwN,EAAK1tD,OAASkgD,EAAcwN,EAAKC,QACnD,MAGDD,EAAKztD,MAAQytD,EAAKztD,MAAQ,IAAM,KACrCytD,EAAK3O,OAAS2O,EAAK3O,OAAS,IAAM,IACnC2O,EAAK1tD,KAAO,MACZ0tD,EAAKC,MACT,CCyGgBqL,CAAatL,GACpBA,CACT,CAaO,SAAStvC,GAAQ66C,EAAwBz3C,EAAkBO,EAAgBm3C,GAChF,IACInvD,EAAWo3C,EAAc9gD,EADzB84D,GAAY,EAGhB,IAAKpvD,EAAI,EAAGo3C,EAAO8X,EAAOxuD,OAAQV,EAAIo3C,IAAQp3C,EAE5C,GADA1J,EAAQ44D,EAAOlvD,QACDd,IAAV5I,SAGY4I,IAAZuY,GAA0C,oBAAVnhB,IAClCA,EAAQA,EAAMmhB,GACd23C,GAAY,QAEAlwD,IAAV8Y,GAAuBvT,EAAQnO,KACjCA,EAAQA,EAAM0hB,EAAQ1hB,EAAMoK,QAC5B0uD,GAAY,QAEAlwD,IAAV5I,GAIF,OAHI64D,IAASC,IACXD,EAAKC,WAAY,GAEZ94D,CAGb,CA0BO,SAAS+4D,GAAcC,EAAuB73C,GACnD,OAAOjV,OAAO4hB,OAAO5hB,OAAOtJ,OAAOo2D,GAAgB73C,EACrD,CCnLO,SAAS83C,GAIdC,GAKA,IAJAC,EAAWxqD,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAC,GAADA,UAAC,GAAD,CAAC,IAEZ+pD,EAA4B/pD,UAAAvE,OAAA,EAAAuE,UAAA,QAAA/F,EAC5BwwD,EAAAzqD,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAY,IAAMuqD,EAAO,GAEzB,MAAMG,GAJQ1qD,UAAAvE,OAAA,EAAAuE,UAAA,QAAA/F,IAIwBswD,EACd,qBAAbR,IACTA,EAAWY,GAAS,YAAaJ,IAEnC,MAAMxG,EAA6B,CACjC,CAACjnD,OAAO8tD,aAAc,SACtBC,YAAY,EACZC,QAASP,EACTQ,YAAaL,EACb3J,UAAWgJ,EACXiB,WAAYP,EACZxK,SAAWnlC,GAAqBwvC,GAAgB,CAACxvC,KAAUyvC,GAASC,EAAUE,EAAiBX,IAEjG,OAAO,IAAIkB,MAAMlH,EAAO,CAItBmH,eAAeA,CAAAllD,EAAQkqB,YACdlqB,EAAOkqB,UACPlqB,EAAOmlD,aACPZ,EAAO,GAAGr6B,IACV,GAMTtrB,IAAIA,CAAAoB,EAAQkqB,IACHk7B,GAAQplD,EAAQkqB,GACrB,IAoUR,SACEA,EACAs6B,EACAD,EACAc,GAEA,IAAIh6D,EACJ,IAAK,MAAM+qB,KAAUouC,EAEnB,GADAn5D,EAAQs5D,GAASW,GAAQlvC,EAAQ8T,GAAOq6B,GACnB,qBAAVl5D,EACT,OAAOk6D,GAAiBr7B,EAAM7+B,GAC1Bm6D,GAAkBjB,EAAQc,EAAOn7B,EAAM7+B,GACvCA,CAGV,CAnVco6D,CAAqBv7B,EAAMs6B,EAAUD,EAAQvkD,KAOvD0lD,yBAAyBA,CAAA1lD,EAAQkqB,IACxB9hB,QAAQs9C,yBAAyB1lD,EAAO8kD,QAAQ,GAAI56B,GAM7D/d,eAAiBA,IACR/D,QAAQ+D,eAAeo4C,EAAO,IAMvC5W,IAAIA,CAAA3tC,EAAQkqB,IACHy7B,GAAqB3lD,GAAQK,SAAS6pB,GAM/CzhB,QAAQzI,GACC2lD,GAAqB3lD,GAM9BV,GAAAA,CAAIU,EAAQkqB,EAAc7+B,GACxB,MAAMu6D,EAAU5lD,EAAO6lD,WAAa7lD,EAAO6lD,SAAWpB,KAGtD,OAFAzkD,EAAOkqB,GAAQ07B,EAAQ17B,GAAQ7+B,SACxB2U,EAAOmlD,OACP,CACT,GAEJ,CAUO,SAASW,GAIdT,EACA74C,EACAu5C,EACAC,GAEA,MAAMjI,EAA4B,CAChC8G,YAAY,EACZoB,OAAQZ,EACRa,SAAU15C,EACV25C,UAAWJ,EACX34B,OAAQ,IAAIikB,IACZ6G,aAAcA,GAAamN,EAAOW,GAClCI,WAAarN,GAAmB+M,GAAeT,EAAOtM,EAAKgN,EAAUC,GACrE/L,SAAWnlC,GAAqBgxC,GAAeT,EAAMpL,SAASnlC,GAAQtI,EAASu5C,EAAUC,IAE3F,OAAO,IAAIf,MAAMlH,EAAO,CAItBmH,eAAeA,CAAAllD,EAAQkqB,YACdlqB,EAAOkqB,UACPm7B,EAAMn7B,IACN,GAMTtrB,IAAG,CAACoB,EAAQkqB,EAAc5hB,IACjB88C,GAAQplD,EAAQkqB,GACrB,IAiFR,SACElqB,EACAkqB,EACA5hB,GAEA,MAAM,OAAC29C,EAAM,SAAEC,EAAQ,UAAEC,EAAWjO,aAAcH,GAAe/3C,EACjE,IAAI3U,EAAQ46D,EAAO/7B,GAGfujB,GAAWpiD,IAAU0sD,EAAYsO,aAAan8B,KAChD7+B,EAYJ,SACE6+B,EACAo8B,EACAtmD,EACAsI,GAEA,MAAM,OAAC29C,EAAA,SAAQC,EAAA,UAAUC,EAAS,OAAE/4B,GAAUptB,EAC9C,GAAIotB,EAAOugB,IAAIzjB,GACb,MAAM,IAAI7zB,MAAM,uBAAyBF,MAAM2B,KAAKs1B,GAAQn3B,KAAK,MAAQ,KAAOi0B,GAElFkD,EAAOm5B,IAAIr8B,GACX,IAAI7+B,EAAQi7D,EAASJ,EAAUC,GAAa79C,GAC5C8kB,EAAOo5B,OAAOt8B,GACVq7B,GAAiBr7B,EAAM7+B,KAEzBA,EAAQm6D,GAAkBS,EAAOnB,QAASmB,EAAQ/7B,EAAM7+B,IAE1D,OAAOA,CACT,CA9BYo7D,CAAmBv8B,EAAM7+B,EAAO2U,EAAQsI,IAE9C9O,EAAQnO,IAAUA,EAAMoK,SAC1BpK,EA6BJ,SACE6+B,EACA7+B,EACA2U,EACA0mD,GAEA,MAAM,OAACT,EAAM,SAAEC,EAAQ,UAAEC,EAAWjO,aAAcH,GAAe/3C,EAEjE,GAA8B,qBAAnBkmD,EAASn5C,OAAyB25C,EAAYx8B,GACvD,OAAO7+B,EAAM66D,EAASn5C,MAAQ1hB,EAAMoK,QAC/B,GAAI01C,EAAS9/C,EAAM,IAAK,CAE7B,MAAM2J,EAAM3J,EACNk5D,EAAS0B,EAAOnB,QAAQhsC,QAAO9K,GAAKA,IAAMhZ,IAChD3J,EAAQ,GACR,IAAK,MAAM0vB,KAAQ/lB,EAAK,CACtB,MAAMyU,EAAW+7C,GAAkBjB,EAAQ0B,EAAQ/7B,EAAMnP,GACzD1vB,EAAMyK,KAAKgwD,GAAer8C,EAAUy8C,EAAUC,GAAaA,EAAUj8B,GAAO6tB,GAC9E,EAEF,OAAO1sD,CACT,CAlDYs7D,CAAcz8B,EAAM7+B,EAAO2U,EAAQ+3C,EAAY2O,cAErDnB,GAAiBr7B,EAAM7+B,KAEzBA,EAAQy6D,GAAez6D,EAAO66D,EAAUC,GAAaA,EAAUj8B,GAAO6tB,IAExE,OAAO1sD,CACT,CArGcu7D,CAAoB5mD,EAAQkqB,EAAM5hB,KAO5Co9C,yBAAyBA,CAAA1lD,EAAQkqB,IACxBlqB,EAAOk4C,aAAa2O,QACvBz+C,QAAQulC,IAAI0X,EAAOn7B,GAAQ,CAACvrB,YAAY,EAAM4H,cAAc,QAAQtS,EACpEmU,QAAQs9C,yBAAyBL,EAAOn7B,GAM9C/d,eAAiBA,IACR/D,QAAQ+D,eAAek5C,GAMhC1X,IAAIA,CAAA3tC,EAAQkqB,IACH9hB,QAAQulC,IAAI0X,EAAOn7B,GAM5BzhB,QAAUA,IACDL,QAAQK,QAAQ48C,GAMzB/lD,IAAG,CAACU,EAAQkqB,EAAM7+B,KAChBg6D,EAAMn7B,GAAQ7+B,SACP2U,EAAOkqB,IACP,IAGb,CAKO,SAASguB,GACdmN,GAEY,IADZ1K,EAA+B3gD,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,IAAC8sD,YAAY,EAAMC,WAAW,GAE7D,MAAM,YAACnM,EAAcD,EAASmM,WAAU,WAAEhM,EAAaH,EAASoM,UAAS,SAAEC,EAAWrM,EAASkM,SAAWxB,EAC1G,MAAO,CACLwB,QAASG,EACTF,WAAYlM,EACZmM,UAAWjM,EACXuL,aAAc5Y,GAAWmN,GAAeA,EAAc,IAAMA,EAC5D8L,YAAajZ,GAAWqN,GAAcA,EAAa,IAAMA,EAE7D,CAEA,MAAMwK,GAAUA,CAAClvC,EAAgBznB,IAAiBynB,EAASA,EAASm3B,GAAY5+C,GAAQA,EAClF42D,GAAmBA,CAACr7B,EAAc7+B,IAAmB8/C,EAAS9/C,IAAmB,aAAT6+B,IAC1C,OAAjC3yB,OAAO4U,eAAe9gB,IAAmBA,EAAM+a,cAAgB7O,QAElE,SAAS6tD,GACPplD,EACAkqB,EACA9gB,GAEA,GAAI7R,OAAOE,UAAU4hB,eAAeje,KAAK4E,EAAQkqB,GAC/C,OAAOlqB,EAAOkqB,GAGhB,MAAM7+B,EAAQ+d,IAGd,OADApJ,EAAOkqB,GAAQ7+B,EACRA,CACT,CAmEA,SAAS47D,GACPlD,EACA75B,EACA7+B,GAEA,OAAOoiD,GAAWsW,GAAYA,EAAS75B,EAAM7+B,GAAS04D,CACxD,CAEA,MAAMmD,GAAWA,CAAC95C,EAAwB+Q,KAA8B,IAAR/Q,EAAe+Q,EAC5D,kBAAR/Q,EAAmB+/B,GAAiBhvB,EAAQ/Q,QAAOnZ,EAE9D,SAASkzD,GACP7nD,EACA8nD,EACAh6C,EACAi6C,EACAh8D,GAEA,IAAK,MAAM8yB,KAAUipC,EAAc,CACjC,MAAMtyC,EAAQoyC,GAAS95C,EAAK+Q,GAC5B,GAAIrJ,EAAO,CACTxV,EAAIinD,IAAIzxC,GACR,MAAMivC,EAAWkD,GAAgBnyC,EAAMimC,UAAW3tC,EAAK/hB,GACvD,GAAwB,qBAAb04D,GAA4BA,IAAa32C,GAAO22C,IAAasD,EAGtE,OAAOtD,OAEJ,IAAc,IAAVjvC,GAA6C,qBAAnBuyC,GAAkCj6C,IAAQi6C,EAG7E,OAAO,IAEX,CACA,OAAO,CACT,CAEA,SAAS7B,GACP4B,EACA39C,EACAygB,EACA7+B,GAEA,MAAMi8D,EAAa79C,EAASs7C,YACtBhB,EAAWkD,GAAgBx9C,EAASsxC,UAAW7wB,EAAM7+B,GACrDk8D,EAAY,IAAIH,KAAiBE,GACjChoD,EAAM,IAAI+xC,IAChB/xC,EAAIinD,IAAIl7D,GACR,IAAI+hB,EAAMo6C,GAAiBloD,EAAKioD,EAAWr9B,EAAM65B,GAAY75B,EAAM7+B,GACnE,OAAY,OAAR+hB,KAGoB,qBAAb22C,GAA4BA,IAAa75B,IAClD9c,EAAMo6C,GAAiBloD,EAAKioD,EAAWxD,EAAU32C,EAAK/hB,GAC1C,OAAR+hB,KAICk3C,GAAgBnuD,MAAM2B,KAAKwH,GAAM,CAAC,IAAKgoD,EAAYvD,GACxD,IAgBJ,SACEt6C,EACAygB,EACA7+B,GAEA,MAAM8yB,EAAS1U,EAASu7C,aAClB96B,KAAQ/L,IACZA,EAAO+L,GAAQ,CAAC,GAElB,MAAMlqB,EAASme,EAAO+L,GACtB,GAAI1wB,EAAQwG,IAAWmrC,EAAS9/C,GAE9B,OAAOA,EAET,OAAO2U,GAAU,CAAC,CACpB,CA/BUynD,CAAah+C,EAAUygB,EAAgB7+B,KACjD,CAEA,SAASm8D,GACPloD,EACAioD,EACAn6C,EACA22C,EACAhpC,GAEA,KAAO3N,GACLA,EAAM+5C,GAAU7nD,EAAKioD,EAAWn6C,EAAK22C,EAAUhpC,GAEjD,OAAO3N,CACT,CAoCA,SAASu3C,GAASv3C,EAAam3C,GAC7B,IAAK,MAAMzvC,KAASyvC,EAAQ,CAC1B,IAAKzvC,EACH,SAEF,MAAMzpB,EAAQypB,EAAM1H,GACpB,GAAqB,qBAAV/hB,EACT,OAAOA,CAEX,CACF,CAEA,SAASs6D,GAAqB3lD,GAC5B,IAAIqN,EAAOrN,EAAOmlD,MAIlB,OAHK93C,IACHA,EAAOrN,EAAOmlD,MAKlB,SAAkCZ,GAChC,MAAMjlD,EAAM,IAAI+xC,IAChB,IAAK,MAAMv8B,KAASyvC,EAClB,IAAK,MAAMn3C,KAAO7V,OAAO8V,KAAKyH,GAAOgE,QAAO8H,IAAMA,EAAEi6B,WAAW,OAC7Dv7C,EAAIinD,IAAIn5C,GAGZ,OAAOjX,MAAM2B,KAAKwH,EACpB,CAb0BooD,CAAyB1nD,EAAO8kD,UAEjDz3C,CACT,CAYO,SAASs6C,GACdzqC,EACAzjB,EACAlD,EACA0U,GAEA,MAAM,OAACqnC,GAAUp1B,GACX,IAAC9P,EAAM,KAAO9S,KAAKstD,SACnBxrD,EAAS,IAAIjG,MAAoB8U,GACvC,IAAIlW,EAAWo3C,EAAcp/B,EAAegO,EAE5C,IAAKhmB,EAAI,EAAGo3C,EAAOlhC,EAAOlW,EAAIo3C,IAAQp3C,EACpCgY,EAAQhY,EAAIwB,EACZwkB,EAAOthB,EAAKsT,GACZ3Q,EAAOrH,GAAK,CACVtH,EAAG6kD,EAAOuV,MAAM1a,GAAiBpyB,EAAM3N,GAAML,IAGjD,OAAO3Q,CACT,CClcA,MAAM0rD,GAAU7rD,OAAO6rD,SAAW,MAG5BC,GAAWA,CAAC7V,EAAuBn9C,IAAmCA,EAAIm9C,EAAOz8C,SAAWy8C,EAAOn9C,GAAGizD,MAAQ9V,EAAOn9C,GACrHkzD,GAAgB/O,GAAuC,MAAdA,EAAoB,IAAM,IAElE,SAASgP,GACdC,EACAC,EACAC,EACAhe,GAUA,MAAMuW,EAAWuH,EAAWH,KAAOI,EAAcD,EAC3C9hC,EAAU+hC,EACV5tC,EAAO6tC,EAAWL,KAAOI,EAAcC,EACvCC,EAAMzY,GAAsBxpB,EAASu6B,GACrC2H,EAAM1Y,GAAsBr1B,EAAM6L,GAExC,IAAImiC,EAAMF,GAAOA,EAAMC,GACnBE,EAAMF,GAAOD,EAAMC,GAGvBC,EAAM3/C,MAAM2/C,GAAO,EAAIA,EACvBC,EAAM5/C,MAAM4/C,GAAO,EAAIA,EAEvB,MAAMC,EAAKre,EAAIme,EACTG,EAAKte,EAAIoe,EAEf,MAAO,CACL7H,SAAU,CACR1hD,EAAGmnB,EAAQnnB,EAAIwpD,GAAMluC,EAAKtb,EAAI0hD,EAAS1hD,GACvCC,EAAGknB,EAAQlnB,EAAIupD,GAAMluC,EAAKrb,EAAIyhD,EAASzhD,IAEzCqb,KAAM,CACJtb,EAAGmnB,EAAQnnB,EAAIypD,GAAMnuC,EAAKtb,EAAI0hD,EAAS1hD,GACvCC,EAAGknB,EAAQlnB,EAAIwpD,GAAMnuC,EAAKrb,EAAIyhD,EAASzhD,IAG7C,CAsEO,SAASypD,GAAoB1W,GAAmD,IAA5BgH,EAAAl/C,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAuB,IAChF,MAAM6uD,EAAYZ,GAAa/O,GACzB4P,EAAY5W,EAAOz8C,OACnBszD,EAAmB5yD,MAAM2yD,GAAWp7D,KAAK,GACzCs7D,EAAe7yD,MAAM2yD,GAG3B,IAAI/zD,EAAGk0D,EAAkCC,EACrCC,EAAapB,GAAS7V,EAAQ,GAElC,IAAKn9C,EAAI,EAAGA,EAAI+zD,IAAa/zD,EAI3B,GAHAk0D,EAAcC,EACdA,EAAeC,EACfA,EAAapB,GAAS7V,EAAQn9C,EAAI,GAC7Bm0D,EAAL,CAIA,GAAIC,EAAY,CACd,MAAMC,EAAaD,EAAWjQ,GAAagQ,EAAahQ,GAGxD6P,EAAOh0D,GAAoB,IAAfq0D,GAAoBD,EAAWN,GAAaK,EAAaL,IAAcO,EAAa,EAElGJ,EAAGj0D,GAAMk0D,EACJE,EACE9a,GAAK0a,EAAOh0D,EAAI,MAAQs5C,GAAK0a,EAAOh0D,IAAO,GACzCg0D,EAAOh0D,EAAI,GAAKg0D,EAAOh0D,IAAM,EAFpBg0D,EAAOh0D,EAAI,GADNg0D,EAAOh0D,IAzFlC,SAAwBm9C,EAAuB6W,EAAkBC,GAC/D,MAAMF,EAAY5W,EAAOz8C,OAEzB,IAAI4zD,EAAgBC,EAAeC,EAAcC,EAA0BN,EACvEC,EAAapB,GAAS7V,EAAQ,GAClC,IAAK,IAAIn9C,EAAI,EAAGA,EAAI+zD,EAAY,IAAK/zD,EACnCm0D,EAAeC,EACfA,EAAapB,GAAS7V,EAAQn9C,EAAI,GAC7Bm0D,GAAiBC,IAIlB7a,GAAaya,EAAOh0D,GAAI,EAAG+yD,IAC7BkB,EAAGj0D,GAAKi0D,EAAGj0D,EAAI,GAAK,GAItBs0D,EAASL,EAAGj0D,GAAKg0D,EAAOh0D,GACxBu0D,EAAQN,EAAGj0D,EAAI,GAAKg0D,EAAOh0D,GAC3By0D,EAAmB19D,KAAKmX,IAAIomD,EAAQ,GAAKv9D,KAAKmX,IAAIqmD,EAAO,GACrDE,GAAoB,IAIxBD,EAAO,EAAIz9D,KAAK2jD,KAAK+Z,GACrBR,EAAGj0D,GAAKs0D,EAASE,EAAOR,EAAOh0D,GAC/Bi0D,EAAGj0D,EAAI,GAAKu0D,EAAQC,EAAOR,EAAOh0D,KAEtC,CAmEE00D,CAAevX,EAAQ6W,EAAQC,GAjEjC,SAAyB9W,EAAuB8W,GAA0C,IAA5B9P,EAAAl/C,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAuB,IACnF,MAAM6uD,EAAYZ,GAAa/O,GACzB4P,EAAY5W,EAAOz8C,OACzB,IAAI0hD,EAAe8R,EAAkCC,EACjDC,EAAapB,GAAS7V,EAAQ,GAElC,IAAK,IAAIn9C,EAAI,EAAGA,EAAI+zD,IAAa/zD,EAAG,CAIlC,GAHAk0D,EAAcC,EACdA,EAAeC,EACfA,EAAapB,GAAS7V,EAAQn9C,EAAI,IAC7Bm0D,EACH,SAGF,MAAMQ,EAASR,EAAahQ,GACtByQ,EAAST,EAAaL,GACxBI,IACF9R,GAASuS,EAAST,EAAY/P,IAAc,EAC5CgQ,EAAa,MAAD98D,OAAO8sD,IAAewQ,EAASvS,EAC3C+R,EAAa,MAAD98D,OAAOy8D,IAAec,EAASxS,EAAQ6R,EAAGj0D,IAEpDo0D,IACFhS,GAASgS,EAAWjQ,GAAawQ,GAAU,EAC3CR,EAAa,MAAD98D,OAAO8sD,IAAewQ,EAASvS,EAC3C+R,EAAa,MAAD98D,OAAOy8D,IAAec,EAASxS,EAAQ6R,EAAGj0D,GAE1D,CACF,CAwCE60D,CAAgB1X,EAAQ8W,EAAI9P,EAC9B,CAEA,SAAS2Q,GAAgBC,EAAY1sD,EAAayC,GAChD,OAAO/T,KAAK+T,IAAI/T,KAAKsR,IAAI0sD,EAAIjqD,GAAMzC,EACrC,CA2BO,SAAS2sD,GACd7X,EACA3vB,EACAlG,EACAtJ,EACAmmC,GAEA,IAAInkD,EAAWo3C,EAAcoU,EAAoByJ,EAOjD,GAJIznC,EAAQ0nC,WACV/X,EAASA,EAAOp5B,QAAQgxC,IAAQA,EAAG9B,QAGE,aAAnCzlC,EAAQ2nC,uBACVtB,GAAoB1W,EAAQgH,OACvB,CACL,IAAI/0B,EAAOpR,EAAOm/B,EAAOA,EAAOz8C,OAAS,GAAKy8C,EAAO,GACrD,IAAKn9C,EAAI,EAAGo3C,EAAO+F,EAAOz8C,OAAQV,EAAIo3C,IAAQp3C,EAC5CwrD,EAAQrO,EAAOn9C,GACfi1D,EAAgB9B,GACd/jC,EACAo8B,EACArO,EAAOpmD,KAAKsR,IAAIrI,EAAI,EAAGo3C,GAAQp5B,EAAO,EAAI,IAAMo5B,GAChD5pB,EAAQ4nC,SAEV5J,EAAMS,KAAOgJ,EAAcpJ,SAAS1hD,EACpCqhD,EAAMW,KAAO8I,EAAcpJ,SAASzhD,EACpCohD,EAAMU,KAAO+I,EAAcxvC,KAAKtb,EAChCqhD,EAAMY,KAAO6I,EAAcxvC,KAAKrb,EAChCglB,EAAOo8B,EAIPh+B,EAAQ6nC,iBA3Dd,SAAyBlY,EAAuB71B,GAC9C,IAAItnB,EAAGo3C,EAAMoU,EAAO8J,EAAQC,EACxBC,EAAajK,GAAepO,EAAO,GAAI71B,GAC3C,IAAKtnB,EAAI,EAAGo3C,EAAO+F,EAAOz8C,OAAQV,EAAIo3C,IAAQp3C,EAC5Cu1D,EAAaD,EACbA,EAASE,EACTA,EAAax1D,EAAIo3C,EAAO,GAAKmU,GAAepO,EAAOn9C,EAAI,GAAIsnB,GACtDguC,IAGL9J,EAAQrO,EAAOn9C,GACXu1D,IACF/J,EAAMS,KAAO6I,GAAgBtJ,EAAMS,KAAM3kC,EAAKvqB,KAAMuqB,EAAKrqB,OACzDuuD,EAAMW,KAAO2I,GAAgBtJ,EAAMW,KAAM7kC,EAAKtqB,IAAKsqB,EAAKpqB,SAEtDs4D,IACFhK,EAAMU,KAAO4I,GAAgBtJ,EAAMU,KAAM5kC,EAAKvqB,KAAMuqB,EAAKrqB,OACzDuuD,EAAMY,KAAO0I,GAAgBtJ,EAAMY,KAAM9kC,EAAKtqB,IAAKsqB,EAAKpqB,SAG9D,CAwCIm4D,CAAgBlY,EAAQ71B,EAE5B,CC9MO,SAASmuC,KACd,MAAyB,qBAAXjZ,QAA8C,qBAAbkZ,QACjD,CAKO,SAASC,GAAeC,GAC7B,IAAIxsC,EAASwsC,EAAQrlC,WAIrB,OAHInH,GAAgC,wBAAtBA,EAAOrkB,aACnBqkB,EAAUA,EAAsBysC,MAE3BzsC,CACT,CAOA,SAAS0sC,GAAcC,EAA6Bz7C,EAAmB07C,GACrE,IAAIC,EAYJ,MAX0B,kBAAfF,GACTE,EAAgB3uD,SAASyuD,EAAY,KAEJ,IAA7BA,EAAWx0D,QAAQ,OAErB00D,EAAgBA,EAAiB,IAAO37C,EAAKiW,WAAWylC,KAG1DC,EAAgBF,EAGXE,CACT,CAEA,MAAMC,GAAoBnnC,GACxBA,EAAQonC,cAAcC,YAAYF,iBAAiBnnC,EAAS,MAM9D,MAAMsnC,GAAY,CAAC,MAAO,QAAS,SAAU,QAC7C,SAASC,GAAmBh6D,EAA6BpG,EAAeqgE,GACtE,MAAM/iC,EAAS,CAAC,EAChB+iC,EAASA,EAAS,IAAMA,EAAS,GACjC,IAAK,IAAIv2D,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,MAAMsK,EAAM+rD,GAAUr2D,GACtBwzB,EAAOlpB,GAAOssC,WAAWt6C,EAAOpG,EAAQ,IAAMoU,EAAMisD,KAAY,CAClE,CAGA,OAFA/iC,EAAO17B,MAAQ07B,EAAOz2B,KAAOy2B,EAAOv2B,MACpCu2B,EAAOz7B,OAASy7B,EAAOx2B,IAAMw2B,EAAOt2B,OAC7Bs2B,CACT,CAEA,MAAMgjC,GAAeA,CAACrsD,EAAWC,EAAWa,KACzCd,EAAI,GAAKC,EAAI,MAAQa,IAAWA,EAAwBwrD,YAuCpD,SAASC,GACdC,EACAzU,GAEA,GAAI,WAAYyU,EACd,OAAOA,EAGT,MAAM,OAAC9M,EAAA,wBAAQH,GAA2BxH,EACpChsD,EAAQggE,GAAiBrM,GACzB+M,EAAgC,eAApB1gE,EAAM2gE,UAClBC,EAAWR,GAAmBpgE,EAAO,WACrC6gE,EAAUT,GAAmBpgE,EAAO,SAAU,UAC9C,EAACiU,EAAA,EAAGC,EAAA,IAAG4sD,GA7Cf,SACEztD,EACAsgD,GAMA,MAAMoN,EAAU1tD,EAAkB0tD,QAC5B5yC,EAAU4yC,GAAWA,EAAQv2D,OAASu2D,EAAQ,GAAK1tD,GACnD,QAAC2tD,EAAA,QAASC,GAAW9yC,EAC3B,IACIla,EAAGC,EADH4sD,GAAM,EAEV,GAAIR,GAAaU,EAASC,EAAS5tD,EAAE0B,QACnCd,EAAI+sD,EACJ9sD,EAAI+sD,MACC,CACL,MAAM9L,EAAOxB,EAAOuN,wBACpBjtD,EAAIka,EAAOgzC,QAAUhM,EAAKtuD,KAC1BqN,EAAIia,EAAOizC,QAAUjM,EAAKruD,IAC1Bg6D,GAAM,EAER,MAAO,CAAC7sD,IAAGC,IAAG4sD,MAChB,CAsBsBO,CAAkBZ,EAAO9M,GACvCM,EAAU2M,EAAS/5D,MAAQi6D,GAAOD,EAAQh6D,MAC1CqtD,EAAU0M,EAAS95D,KAAOg6D,GAAOD,EAAQ/5D,KAE/C,IAAI,MAAClF,EAAA,OAAOC,GAAUmqD,EAKtB,OAJI0U,IACF9+D,GAASg/D,EAASh/D,MAAQi/D,EAAQj/D,MAClCC,GAAU++D,EAAS/+D,OAASg/D,EAAQh/D,QAE/B,CACLoS,EAAGpT,KAAKI,OAAOgT,EAAIggD,GAAWryD,EAAQ+xD,EAAO/xD,MAAQ4xD,GACrDt/C,EAAGrT,KAAKI,OAAOiT,EAAIggD,GAAWryD,EAAS8xD,EAAO9xD,OAAS2xD,GAE3D,CA6BA,MAAM8N,GAAU3wB,GAAc9vC,KAAKI,MAAU,GAAJ0vC,GAAU,GAG5C,SAAS4wB,GACd5N,EACA6N,EACAC,EACAC,GAEA,MAAM1hE,EAAQggE,GAAiBrM,GACzBgO,EAAUvB,GAAmBpgE,EAAO,UACpC23D,EAAWiI,GAAc5/D,EAAM23D,SAAUhE,EAAQ,gBAAkB9Q,GACnE+e,EAAYhC,GAAc5/D,EAAM4hE,UAAWjO,EAAQ,iBAAmB9Q,GACtEgf,EAxCR,SAA0BlO,EAA2B/xD,EAAeC,GAClE,IAAI81D,EAAkBiK,EAEtB,QAAc54D,IAAVpH,QAAkCoH,IAAXnH,EAAsB,CAC/C,MAAMigE,EAAYrC,GAAe9L,GACjC,GAAKmO,EAGE,CACL,MAAM3M,EAAO2M,EAAUZ,wBACjBa,EAAiB/B,GAAiB8B,GAClCE,EAAkB5B,GAAmB2B,EAAgB,SAAU,SAC/DE,EAAmB7B,GAAmB2B,EAAgB,WAC5DngE,EAAQuzD,EAAKvzD,MAAQqgE,EAAiBrgE,MAAQogE,EAAgBpgE,MAC9DC,EAASszD,EAAKtzD,OAASogE,EAAiBpgE,OAASmgE,EAAgBngE,OACjE81D,EAAWiI,GAAcmC,EAAepK,SAAUmK,EAAW,eAC7DF,EAAYhC,GAAcmC,EAAeH,UAAWE,EAAW,qBAV/DlgE,EAAQ+xD,EAAOuO,YACfrgE,EAAS8xD,EAAOwO,aAYpB,MAAO,CACLvgE,QACAC,SACA81D,SAAUA,GAAY9U,GACtB+e,UAAWA,GAAa/e,GAE5B,CAewBuf,CAAiBzO,EAAQ6N,EAASC,GACxD,IAAI,MAAC7/D,EAAA,OAAOC,GAAUggE,EAEtB,GAAwB,gBAApB7hE,EAAM2gE,UAA6B,CACrC,MAAME,EAAUT,GAAmBpgE,EAAO,SAAU,SAC9C4gE,EAAWR,GAAmBpgE,EAAO,WAC3C4B,GAASg/D,EAASh/D,MAAQi/D,EAAQj/D,MAClCC,GAAU++D,EAAS/+D,OAASg/D,EAAQh/D,OAEtCD,EAAQf,KAAK+T,IAAI,EAAGhT,EAAQ+/D,EAAQ//D,OACpCC,EAAShB,KAAK+T,IAAI,EAAG8sD,EAAc9/D,EAAQ8/D,EAAc7/D,EAAS8/D,EAAQ9/D,QAC1ED,EAAQ0/D,GAAOzgE,KAAKsR,IAAIvQ,EAAO+1D,EAAUkK,EAAclK,WACvD91D,EAASy/D,GAAOzgE,KAAKsR,IAAItQ,EAAQ+/D,EAAWC,EAAcD,YACtDhgE,IAAUC,IAGZA,EAASy/D,GAAO1/D,EAAQ,IAU1B,YAPmCoH,IAAZw4D,QAAsCx4D,IAAby4D,IAE1BC,GAAeG,EAAchgE,QAAUA,EAASggE,EAAchgE,SAClFA,EAASggE,EAAchgE,OACvBD,EAAQ0/D,GAAOzgE,KAAKib,MAAMja,EAAS6/D,KAG9B,CAAC9/D,QAAOC,SACjB,CAQO,SAASwgE,GACdrW,EACAsW,EACAC,GAEA,MAAMC,EAAaF,GAAc,EAC3BG,EAAe5hE,KAAKib,MAAMkwC,EAAMnqD,OAAS2gE,GACzCE,EAAc7hE,KAAKib,MAAMkwC,EAAMpqD,MAAQ4gE,GAE7CxW,EAAMnqD,OAAShB,KAAKib,MAAMkwC,EAAMnqD,QAChCmqD,EAAMpqD,MAAQf,KAAKib,MAAMkwC,EAAMpqD,OAE/B,MAAM+xD,EAAS3H,EAAM2H,OAUrB,OALIA,EAAO3zD,QAAUuiE,IAAgB5O,EAAO3zD,MAAM6B,SAAW8xD,EAAO3zD,MAAM4B,SACxE+xD,EAAO3zD,MAAM6B,OAAS,GAAHV,OAAM6qD,EAAMnqD,OAAM,MACrC8xD,EAAO3zD,MAAM4B,MAAQ,GAAHT,OAAM6qD,EAAMpqD,MAAK,QAGjCoqD,EAAMwH,0BAA4BgP,GAC/B7O,EAAO9xD,SAAW4gE,GAClB9O,EAAO/xD,QAAU8gE,KACtB1W,EAAMwH,wBAA0BgP,EAChC7O,EAAO9xD,OAAS4gE,EAChB9O,EAAO/xD,MAAQ8gE,EACf1W,EAAM8B,IAAI6U,aAAaH,EAAY,EAAG,EAAGA,EAAY,EAAG,IACjD,EAGX,CAOa,MAAAI,GAAgC,WAC3C,IAAIC,GAAmB,EACvB,IACE,MAAMvrC,EAAU,CACd,WAAIwrC,GAEF,OADAD,GAAmB,GACZ,CACT,GAGFvc,OAAOvlC,iBAAiB,OAAQ,KAAMuW,GACtCgvB,OAAOrlC,oBAAoB,OAAQ,KAAMqW,EAC3C,CAAE,MAAOjkB,IAGT,OAAOwvD,CACT,CAhB6C,GA4BtC,SAASE,GACdlqC,EACAzN,GAEA,MAAMhrB,EAvOD,SAAkB2iC,EAAiB3X,GACxC,OAAO40C,GAAiBj9B,GAAIigC,iBAAiB53C,EAC/C,CAqOgB63C,CAASpqC,EAASzN,GAC1BitC,EAAUj4D,GAASA,EAAMk4D,MAAM,qBACrC,OAAOD,GAAWA,EAAQ,QAAKrvD,CACjC,CC5RO,SAASk6D,GAAavwB,EAAWC,EAAWwM,EAAWt5C,GAC5D,MAAO,CACLmO,EAAG0+B,EAAG1+B,EAAImrC,GAAKxM,EAAG3+B,EAAI0+B,EAAG1+B,GACzBC,EAAGy+B,EAAGz+B,EAAIkrC,GAAKxM,EAAG1+B,EAAIy+B,EAAGz+B,GAE7B,CAKO,SAASivD,GACdxwB,EACAC,EACAwM,EAAWt5C,GAEX,MAAO,CACLmO,EAAG0+B,EAAG1+B,EAAImrC,GAAKxM,EAAG3+B,EAAI0+B,EAAG1+B,GACzBC,EAAY,WAATpO,EAAoBs5C,EAAI,GAAMzM,EAAGz+B,EAAI0+B,EAAG1+B,EAC9B,UAATpO,EAAmBs5C,EAAI,EAAIzM,EAAGz+B,EAAI0+B,EAAG1+B,EACnCkrC,EAAI,EAAIxM,EAAG1+B,EAAIy+B,EAAGz+B,EAE5B,CAKO,SAASkvD,GAAqBzwB,EAAiBC,EAAiBwM,EAAWt5C,GAChF,MAAMu9D,EAAM,CAACpvD,EAAG0+B,EAAGqjB,KAAM9hD,EAAGy+B,EAAGujB,MACzBoN,EAAM,CAACrvD,EAAG2+B,EAAGmjB,KAAM7hD,EAAG0+B,EAAGqjB,MACzBjiD,EAAIkvD,GAAavwB,EAAI0wB,EAAKjkB,GAC1BnxC,EAAIi1D,GAAaG,EAAKC,EAAKlkB,GAC3BrtC,EAAImxD,GAAaI,EAAK1wB,EAAIwM,GAC1Bt8B,EAAIogD,GAAalvD,EAAG/F,EAAGmxC,GACvB/rC,EAAI6vD,GAAaj1D,EAAG8D,EAAGqtC,GAC7B,OAAO8jB,GAAapgD,EAAGzP,EAAG+rC,EAC5B,CCUO,SAASmkB,GAAcC,EAAcC,EAAe7hE,GACzD,OAAO4hE,EA3CqB,SAASC,EAAe7hE,GACpD,MAAO,CACLqS,EAAEA,GACOwvD,EAAQA,EAAQ7hE,EAAQqS,EAEjCyvD,QAAAA,CAAS3jD,GACPne,EAAQme,CACV,EACAu3C,UAAUxQ,GACM,WAAVA,EACKA,EAEQ,UAAVA,EAAoB,OAAS,QAEtC6c,MAAMA,CAAA1vD,EAAG7T,IACA6T,EAAI7T,EAEbwjE,WAAWA,CAAA3vD,EAAG4vD,IACL5vD,EAAI4vD,EAGjB,CAsBeC,CAAsBL,EAAO7hE,GAnBnC,CACLqS,EAAEA,GACOA,EAETyvD,QAAAA,CAAS3jD,GAAI,EAEbu3C,UAAUxQ,GACDA,EAET6c,MAAMA,CAAA1vD,EAAG7T,IACA6T,EAAI7T,EAEbwjE,WAAWA,CAAA3vD,EAAG8vD,IACL9vD,EAOb,CAEO,SAAS+vD,GAAsBlW,EAA+B7kD,GACnE,IAAIjJ,EAA4BikE,EACd,QAAdh7D,GAAqC,QAAdA,IACzBjJ,EAAQ8tD,EAAI6F,OAAO3zD,MACnBikE,EAAW,CACTjkE,EAAMgjE,iBAAiB,aACvBhjE,EAAMkkE,oBAAoB,cAG5BlkE,EAAMmkE,YAAY,YAAal7D,EAAW,aACzC6kD,EAAiDsW,kBAAoBH,EAE1E,CAEO,SAASI,GAAqBvW,EAA+BmW,QACjDj7D,IAAbi7D,WACMnW,EAAiDsW,kBACzDtW,EAAI6F,OAAO3zD,MAAMmkE,YAAY,YAAaF,EAAS,GAAIA,EAAS,IAEpE,CC/DA,SAASK,GAAWl5C,GAClB,MAAiB,UAAbA,EACK,CACLm5C,QAAStf,GACTlxC,QAASgxC,GACTzrB,UAAW0rB,IAGR,CACLuf,QAAS/e,GACTzxC,QAASA,CAACC,EAAG/F,IAAM+F,EAAI/F,EACvBqrB,UAAWrlB,GAAKA,EAEpB,CAEA,SAASuwD,GAAiBl+D,GAAkC,IAAlC,MAACgF,EAAK,IAAEC,EAAG,MAAEyU,EAAK,KAAE8H,EAAI,MAAE9nB,GAAMsG,EACxD,MAAO,CACLgF,MAAOA,EAAQ0U,EACfzU,IAAKA,EAAMyU,EACX8H,KAAMA,IAASvc,EAAMD,EAAQ,GAAK0U,IAAU,EAC5ChgB,QAEJ,CA4CO,SAASykE,GAAcC,EAASzd,EAAQ0J,GAC7C,IAAKA,EACH,MAAO,CAAC+T,GAGV,MAAM,SAACt5C,EAAU9f,MAAOq5D,EAAYp5D,IAAKq5D,GAAYjU,EAC/C3wC,EAAQinC,EAAOz8C,QACf,QAACuJ,EAAA,QAASwwD,EAAA,UAASjrC,GAAagrC,GAAWl5C,IAC3C,MAAC9f,EAAA,IAAOC,EAAA,KAAKuc,EAAA,MAAM9nB,GAlD3B,SAAoB0kE,EAASzd,EAAQ0J,GACnC,MAAM,SAACvlC,EAAU9f,MAAOq5D,EAAYp5D,IAAKq5D,GAAYjU,GAC/C,QAAC4T,EAAO,UAAEjrC,GAAagrC,GAAWl5C,GAClCpL,EAAQinC,EAAOz8C,OAErB,IACIV,EAAGo3C,GADH,MAAC51C,EAAK,IAAEC,EAAA,KAAKuc,GAAQ48C,EAGzB,GAAI58C,EAAM,CAGR,IAFAxc,GAAS0U,EACTzU,GAAOyU,EACFlW,EAAI,EAAGo3C,EAAOlhC,EAAOlW,EAAIo3C,GACvBqjB,EAAQjrC,EAAU2tB,EAAO37C,EAAQ0U,GAAOoL,IAAYu5C,EAAYC,KADjC96D,EAIpCwB,IACAC,IAEFD,GAAS0U,EACTzU,GAAOyU,EAMT,OAHIzU,EAAMD,IACRC,GAAOyU,GAEF,CAAC1U,QAAOC,MAAKuc,OAAM9nB,MAAO0kE,EAAQ1kE,MAC3C,CAwBoC6kE,CAAWH,EAASzd,EAAQ0J,GAExDrzB,EAAS,GACf,IAEIl9B,EAAOk1D,EAAOwP,EAFdC,GAAS,EACTC,EAAW,KAGf,MAEMC,EAAcA,IAAMF,GAFER,EAAQI,EAAYG,EAAW1kE,IAA6C,IAAnC2T,EAAQ4wD,EAAYG,GAGnFI,EAAaA,KAAOH,GAF6B,IAA7BhxD,EAAQ6wD,EAAUxkE,IAAgBmkE,EAAQK,EAAUE,EAAW1kE,GAIzF,IAAK,IAAI0J,EAAIwB,EAAO4tB,EAAO5tB,EAAOxB,GAAKyB,IAAOzB,EAC5CwrD,EAAQrO,EAAOn9C,EAAIkW,GAEfs1C,EAAMyH,OAIV38D,EAAQk5B,EAAUg8B,EAAMlqC,IAEpBhrB,IAAU0kE,IAIdC,EAASR,EAAQnkE,EAAOukE,EAAYC,GAEnB,OAAbI,GAAqBC,MACvBD,EAA0C,IAA/BjxD,EAAQ3T,EAAOukE,GAAoB76D,EAAIovB,GAGnC,OAAb8rC,GAAqBE,MACvB5nC,EAAOzyB,KAAK25D,GAAiB,CAACl5D,MAAO05D,EAAUz5D,IAAKzB,EAAGge,OAAM9H,QAAOhgB,WACpEglE,EAAW,MAEb9rC,EAAOpvB,EACPg7D,EAAY1kE,IAOd,OAJiB,OAAb4kE,GACF1nC,EAAOzyB,KAAK25D,GAAiB,CAACl5D,MAAO05D,EAAUz5D,MAAKuc,OAAM9H,QAAOhgB,WAG5Ds9B,CACT,CAYO,SAAS6nC,GAAe/O,EAAMzF,GACnC,MAAMrzB,EAAS,GACT8nC,EAAWhP,EAAKgP,SAEtB,IAAK,IAAIt7D,EAAI,EAAGA,EAAIs7D,EAAS56D,OAAQV,IAAK,CACxC,MAAMiQ,EAAM0qD,GAAcW,EAASt7D,GAAIssD,EAAKnP,OAAQ0J,GAChD52C,EAAIvP,QACN8yB,EAAOzyB,QAAQkP,EAEnB,CACA,OAAOujB,CACT,CAiHA,SAAS+nC,GAAcjP,EAAMgP,EAAUne,EAAQqe,GAC7C,OAAKA,GAAmBA,EAAenK,YAAelU,EAaxD,SAAyBmP,EAAMgP,EAAUne,EAAQqe,GAC/C,MAAMC,EAAenP,EAAKoP,OAAO5R,aAC3B6R,EAAYC,GAAUtP,EAAK9+B,UAC1BquC,cAAetkB,EAAc/pB,SAAS,SAAC0nC,IAAa5I,EACrDp2C,EAAQinC,EAAOz8C,OACf8yB,EAAS,GACf,IAAIsoC,EAAYH,EACZn6D,EAAQ85D,EAAS,GAAG95D,MACpBxB,EAAIwB,EAER,SAASu6D,EAAS9iD,EAAG1P,EAAGmqB,EAAGsoC,GACzB,MAAM71D,EAAM+uD,GAAY,EAAI,EAC5B,GAAIj8C,IAAM1P,EAAV,CAKA,IADA0P,GAAK/C,EACEinC,EAAOlkC,EAAI/C,GAAO+8C,MACvBh6C,GAAK9S,EAEP,KAAOg3C,EAAO5zC,EAAI2M,GAAO+8C,MACvB1pD,GAAKpD,EAEH8S,EAAI/C,IAAU3M,EAAI2M,IACpBsd,EAAOzyB,KAAK,CAACS,MAAOyX,EAAI/C,EAAOzU,IAAK8H,EAAI2M,EAAO8H,KAAM0V,EAAGx9B,MAAO8lE,IAC/DF,EAAYE,EACZx6D,EAAQ+H,EAAI2M,GAEhB,CAEA,IAAK,MAAM0kD,KAAWU,EAAU,CAC9B95D,EAAQ0zD,EAAW1zD,EAAQo5D,EAAQp5D,MACnC,IACItL,EADAk5B,EAAO+tB,EAAO37C,EAAQ0U,GAE1B,IAAKlW,EAAIwB,EAAQ,EAAGxB,GAAK46D,EAAQn5D,IAAKzB,IAAK,CACzC,MAAM+0D,EAAK5X,EAAOn9C,EAAIkW,GACtBhgB,EAAQ0lE,GAAUJ,EAAenK,WAAWhC,GAAcoM,EAAc,CACtEj3D,KAAM,UACNy3D,GAAI7sC,EACJyZ,GAAIksB,EACJmH,aAAcl8D,EAAI,GAAKkW,EACvBimD,YAAan8D,EAAIkW,EACjBqhC,mBAEE6kB,GAAalmE,EAAO4lE,IACtBC,EAASv6D,EAAOxB,EAAI,EAAG46D,EAAQ58C,KAAM89C,GAEvC1sC,EAAO2lC,EACP+G,EAAY5lE,CACd,CACIsL,EAAQxB,EAAI,GACd+7D,EAASv6D,EAAOxB,EAAI,EAAG46D,EAAQ58C,KAAM89C,EAEzC,CAEA,OAAOtoC,CACT,CAlES6oC,CAAgB/P,EAAMgP,EAAUne,EAAQqe,GAFtCF,CAGX,CAmEA,SAASM,GAAUpuC,GACjB,MAAO,CACL3wB,gBAAiB2wB,EAAQ3wB,gBACzBy/D,eAAgB9uC,EAAQ8uC,eACxBC,WAAY/uC,EAAQ+uC,WACpBC,iBAAkBhvC,EAAQgvC,iBAC1BC,gBAAiBjvC,EAAQivC,gBACzBnR,YAAa99B,EAAQ89B,YACrBjI,YAAa71B,EAAQ61B,YAEzB,CAEA,SAAS+Y,GAAalmE,EAAO4lE,GAC3B,IAAKA,EACH,OAAO,EAET,MAAM9S,EAAQ,GACRp+B,EAAW,SAASvS,EAAK/hB,GAC7B,OAAKuqD,GAAoBvqD,IAGpB0yD,EAAM19C,SAAShV,IAClB0yD,EAAMjoD,KAAKzK,GAEN0yD,EAAMznD,QAAQjL,IALZA,CAMX,EACA,OAAOgrD,KAAKC,UAAUrrD,EAAO00B,KAAc02B,KAAKC,UAAUua,EAAWlxC,EACvE,CChWO,MAAM8xC,GACXrrD,WAAAA,GACE9L,KAAKo3D,SAAW,KAChBp3D,KAAKq3D,QAAU,IAAI1b,IACnB37C,KAAK85B,UAAW,EAChB95B,KAAKs3D,eAAY39D,CACnB,CAKA49D,OAAAA,CAAQ5a,EAAO6a,EAAOC,EAAMx4D,GAC1B,MAAMy4D,EAAYF,EAAMrlD,UAAUlT,GAC5B04D,EAAWH,EAAM7W,SAEvB+W,EAAUjtC,SAAQ/c,GAAMA,EAAG,CACzBivC,QACAib,QAASJ,EAAMI,QACfD,WACAE,YAAarmE,KAAKsR,IAAI20D,EAAOD,EAAMv7D,MAAO07D,MAE9C,CAKAG,QAAAA,GACM93D,KAAKo3D,WAGTp3D,KAAK85B,UAAW,EAEhB95B,KAAKo3D,SAAWpgB,GAAiBl2C,KAAKm2C,QAAQ,KAC5Cj3C,KAAK+3D,UACL/3D,KAAKo3D,SAAW,KAEZp3D,KAAK85B,UACP95B,KAAK83D,cAGX,CAKAC,OAAAA,GAA2B,IAAnBN,EAAA/3D,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAOuwB,KAAK+nC,MACdp2D,EAAY,EAEhB5B,KAAKq3D,QAAQ5sC,SAAQ,CAAC+sC,EAAO7a,KAC3B,IAAK6a,EAAMS,UAAYT,EAAMtnC,MAAM/0B,OACjC,OAEF,MAAM+0B,EAAQsnC,EAAMtnC,MACpB,IAEIzP,EAFAhmB,EAAIy1B,EAAM/0B,OAAS,EACnB+8D,GAAO,EAGX,KAAOz9D,GAAK,IAAKA,EACfgmB,EAAOyP,EAAMz1B,GAETgmB,EAAK03C,SACH13C,EAAK23C,OAASZ,EAAM7W,WAGtB6W,EAAM7W,SAAWlgC,EAAK23C,QAExB33C,EAAK43C,KAAKZ,GACVS,GAAO,IAIPhoC,EAAMz1B,GAAKy1B,EAAMA,EAAM/0B,OAAS,GAChC+0B,EAAMxd,OAINwlD,IACFvb,EAAMub,OACNl4D,KAAKu3D,QAAQ5a,EAAO6a,EAAOC,EAAM,aAG9BvnC,EAAM/0B,SACTq8D,EAAMS,SAAU,EAChBj4D,KAAKu3D,QAAQ5a,EAAO6a,EAAOC,EAAM,YACjCD,EAAMI,SAAU,GAGlBh2D,GAAasuB,EAAM/0B,MAAM,IAG3B6E,KAAKs3D,UAAYG,EAEC,IAAd71D,IACF5B,KAAK85B,UAAW,EAEpB,CAKAw+B,SAAAA,CAAU3b,GACR,MAAM4b,EAASv4D,KAAKq3D,QACpB,IAAIG,EAAQe,EAAOj0D,IAAIq4C,GAavB,OAZK6a,IACHA,EAAQ,CACNS,SAAS,EACTL,SAAS,EACT1nC,MAAO,GACP/d,UAAW,CACTqmD,SAAU,GACVC,SAAU,KAGdF,EAAOvzD,IAAI23C,EAAO6a,IAEbA,CACT,CAOAkB,MAAAA,CAAO/b,EAAOyU,EAAOxyB,GACnB5+B,KAAKs4D,UAAU3b,GAAOxqC,UAAUi/C,GAAO51D,KAAKojC,EAC9C,CAOAqtB,GAAAA,CAAItP,EAAOzsB,GACJA,GAAUA,EAAM/0B,QAGrB6E,KAAKs4D,UAAU3b,GAAOzsB,MAAM10B,QAAQ00B,EACtC,CAMAmjB,GAAAA,CAAIsJ,GACF,OAAO38C,KAAKs4D,UAAU3b,GAAOzsB,MAAM/0B,OAAS,CAC9C,CAMAc,KAAAA,CAAM0gD,GACJ,MAAM6a,EAAQx3D,KAAKq3D,QAAQ/yD,IAAIq4C,GAC1B6a,IAGLA,EAAMS,SAAU,EAChBT,EAAMv7D,MAAQg0B,KAAK+nC,MACnBR,EAAM7W,SAAW6W,EAAMtnC,MAAM9Q,QAAO,CAACu5C,EAAKC,IAAQpnE,KAAK+T,IAAIozD,EAAKC,EAAIC,YAAY,GAChF74D,KAAK83D,WACP,CAEAG,OAAAA,CAAQtb,GACN,IAAK38C,KAAK85B,SACR,OAAO,EAET,MAAM09B,EAAQx3D,KAAKq3D,QAAQ/yD,IAAIq4C,GAC/B,SAAK6a,GAAUA,EAAMS,SAAYT,EAAMtnC,MAAM/0B,OAI/C,CAMA29D,IAAAA,CAAKnc,GACH,MAAM6a,EAAQx3D,KAAKq3D,QAAQ/yD,IAAIq4C,GAC/B,IAAK6a,IAAUA,EAAMtnC,MAAM/0B,OACzB,OAEF,MAAM+0B,EAAQsnC,EAAMtnC,MACpB,IAAIz1B,EAAIy1B,EAAM/0B,OAAS,EAEvB,KAAOV,GAAK,IAAKA,EACfy1B,EAAMz1B,GAAGs+D,SAEXvB,EAAMtnC,MAAQ,GACdlwB,KAAKu3D,QAAQ5a,EAAO6a,EAAOvnC,KAAK+nC,MAAO,WACzC,CAMAgB,MAAAA,CAAOrc,GACL,OAAO38C,KAAKq3D,QAAQnL,OAAOvP,EAC7B,EAIF,IAAAsc,GAA+B,IAAI9B,GCjNnC,MAAM1oB,GAAc,cACdyqB,GAAgB,CACpBC,QAAO,CAAC37D,EAAMmxC,EAAIyqB,IACTA,EAAS,GAAMzqB,EAAKnxC,EAO7BlN,KAAAA,CAAMkN,EAAMmxC,EAAIyqB,GACd,MAAMC,EAAK/oE,GAAakN,GAAQixC,IAC1BiB,EAAK2pB,EAAGhqB,OAAS/+C,GAAaq+C,GAAMF,IAC1C,OAAOiB,GAAMA,EAAGL,MACZK,EAAGF,IAAI6pB,EAAID,GAAQ92B,YACnBqM,CACN,EACA2qB,OAAM,CAAC97D,EAAMmxC,EAAIyqB,IACR57D,GAAQmxC,EAAKnxC,GAAQ47D,GAIjB,MAAMG,GACnBztD,WAAAA,CAAY0tD,EAAK9zD,EAAQkqB,EAAM+e,GAC7B,MAAM8qB,EAAe/zD,EAAOkqB,GAE5B+e,EAAK7/B,GAAQ,CAAC0qD,EAAI7qB,GAAIA,EAAI8qB,EAAcD,EAAIh8D,OAC5C,MAAMA,EAAOsR,GAAQ,CAAC0qD,EAAIh8D,KAAMi8D,EAAc9qB,IAE9C3uC,KAAKm4D,SAAU,EACfn4D,KAAK05D,IAAMF,EAAI9rD,IAAMwrD,GAAcM,EAAIv6D,aAAezB,GACtDwC,KAAK25D,QAAUtgB,GAAQmgB,EAAI5Y,SAAWvH,GAAQC,OAC9Ct5C,KAAK45D,OAASpoE,KAAKib,MAAMwjB,KAAK+nC,OAASwB,EAAI9Y,OAAS,IACpD1gD,KAAK64D,UAAY74D,KAAKo4D,OAAS5mE,KAAKib,MAAM+sD,EAAI7Y,UAC9C3gD,KAAK65D,QAAUL,EAAI/gD,KACnBzY,KAAK85D,QAAUp0D,EACf1F,KAAK+5D,MAAQnqC,EACb5vB,KAAKg6D,MAAQx8D,EACbwC,KAAKi6D,IAAMtrB,EACX3uC,KAAKk6D,eAAYvgE,CACnB,CAEAknD,MAAAA,GACE,OAAO7gD,KAAKm4D,OACd,CAEAgC,MAAAA,CAAOX,EAAK7qB,EAAI8oB,GACd,GAAIz3D,KAAKm4D,QAAS,CAChBn4D,KAAKu3D,SAAQ,GAEb,MAAMkC,EAAez5D,KAAK85D,QAAQ95D,KAAK+5D,OACjCK,EAAU3C,EAAOz3D,KAAK45D,OACtBvc,EAASr9C,KAAK64D,UAAYuB,EAChCp6D,KAAK45D,OAASnC,EACdz3D,KAAK64D,UAAYrnE,KAAKib,MAAMjb,KAAK+T,IAAI83C,EAAQmc,EAAI7Y,WACjD3gD,KAAKo4D,QAAUgC,EACfp6D,KAAK65D,QAAUL,EAAI/gD,KACnBzY,KAAKi6D,IAAMnrD,GAAQ,CAAC0qD,EAAI7qB,GAAIA,EAAI8qB,EAAcD,EAAIh8D,OAClDwC,KAAKg6D,MAAQlrD,GAAQ,CAAC0qD,EAAIh8D,KAAMi8D,EAAc9qB,IAElD,CAEAoqB,MAAAA,GACM/4D,KAAKm4D,UAEPn4D,KAAKq4D,KAAKpoC,KAAK+nC,OACfh4D,KAAKm4D,SAAU,EACfn4D,KAAKu3D,SAAQ,GAEjB,CAEAc,IAAAA,CAAKZ,GACH,MAAM2C,EAAU3C,EAAOz3D,KAAK45D,OACtBjZ,EAAW3gD,KAAK64D,UAChBjpC,EAAO5vB,KAAK+5D,MACZv8D,EAAOwC,KAAKg6D,MACZvhD,EAAOzY,KAAK65D,MACZlrB,EAAK3uC,KAAKi6D,IAChB,IAAIb,EAIJ,GAFAp5D,KAAKm4D,QAAU36D,IAASmxC,IAAOl2B,GAAS2hD,EAAUzZ,IAE7C3gD,KAAKm4D,QAGR,OAFAn4D,KAAK85D,QAAQlqC,GAAQ+e,OACrB3uC,KAAKu3D,SAAQ,GAIX6C,EAAU,EACZp6D,KAAK85D,QAAQlqC,GAAQpyB,GAIvB47D,EAAUgB,EAAUzZ,EAAY,EAChCyY,EAAS3gD,GAAQ2gD,EAAS,EAAI,EAAIA,EAASA,EAC3CA,EAASp5D,KAAK25D,QAAQnoE,KAAKsR,IAAI,EAAGtR,KAAK+T,IAAI,EAAG6zD,KAE9Cp5D,KAAK85D,QAAQlqC,GAAQ5vB,KAAK05D,IAAIl8D,EAAMmxC,EAAIyqB,GAC1C,CAEAiB,IAAAA,GACE,MAAMC,EAAWt6D,KAAKk6D,YAAcl6D,KAAKk6D,UAAY,IACrD,OAAO,IAAIrrD,SAAQ,CAAC9L,EAAKw3D,KACvBD,EAAS9+D,KAAK,CAACuH,MAAKw3D,OAAK,GAE7B,CAEAhD,OAAAA,CAAQiD,GACN,MAAMvhD,EAASuhD,EAAW,MAAQ,MAC5BF,EAAWt6D,KAAKk6D,WAAa,GACnC,IAAK,IAAIz/D,EAAI,EAAGA,EAAI6/D,EAASn/D,OAAQV,IACnC6/D,EAAS7/D,GAAGwe,IAEhB,EChHa,MAAMwhD,GACnB3uD,WAAAA,CAAY6wC,EAAO+d,GACjB16D,KAAKm2D,OAASxZ,EACd38C,KAAK26D,YAAc,IAAIhf,IACvB37C,KAAK46D,UAAUF,EACjB,CAEAE,SAAAA,CAAUF,GACR,IAAK7pB,EAAS6pB,GACZ,OAGF,MAAMG,EAAmB59D,OAAO8V,KAAKstC,GAASzsD,WACxCknE,EAAgB96D,KAAK26D,YAE3B19D,OAAOoR,oBAAoBqsD,GAAQjwC,SAAQ3X,IACzC,MAAM0mD,EAAMkB,EAAO5nD,GACnB,IAAK+9B,EAAS2oB,GACZ,OAEF,MAAMgB,EAAW,CAAC,EAClB,IAAK,MAAMhqC,KAAUqqC,EACnBL,EAAShqC,GAAUgpC,EAAIhpC,IAGxBtxB,EAAQs6D,EAAIlwC,aAAekwC,EAAIlwC,YAAc,CAACxW,IAAM2X,SAASmF,IACxDA,IAAS9c,GAAQgoD,EAAcznB,IAAIzjB,IACrCkrC,EAAc91D,IAAI4qB,EAAM4qC,KAE1B,GAEN,CAMAO,eAAAA,CAAgBr1D,EAAQ62C,GACtB,MAAMye,EAAaze,EAAOt0B,QACpBA,EAsGV,SAA8BviB,EAAQs1D,GACpC,IAAKA,EACH,OAEF,IAAI/yC,EAAUviB,EAAOuiB,QACrB,IAAKA,EAEH,YADAviB,EAAOuiB,QAAU+yC,GAGf/yC,EAAQgzC,UAGVv1D,EAAOuiB,QAAUA,EAAUhrB,OAAO4hB,OAAO,CAAC,EAAGoJ,EAAS,CAACgzC,SAAS,EAAOC,YAAa,CAAC,KAEvF,OAAOjzC,CACT,CArHoBkzC,CAAqBz1D,EAAQs1D,GAC7C,IAAK/yC,EACH,MAAO,GAGT,MAAM+4B,EAAahhD,KAAKo7D,kBAAkBnzC,EAAS+yC,GAYnD,OAXIA,EAAWC,SAmFnB,SAAkBja,EAAY13B,GAC5B,MAAM2uC,EAAU,GACVllD,EAAO9V,OAAO8V,KAAKuW,GACzB,IAAK,IAAI7uB,EAAI,EAAGA,EAAIsY,EAAK5X,OAAQV,IAAK,CACpC,MAAM4gE,EAAOra,EAAWjuC,EAAKtY,IACzB4gE,GAAQA,EAAKxa,UACfoX,EAAQz8D,KAAK6/D,EAAKhB,OAEtB,CAEA,OAAOxrD,QAAQysD,IAAIrD,EACrB,CA1FMsD,CAAS71D,EAAOuiB,QAAQizC,YAAaF,GAAYQ,MAAK,KACpD91D,EAAOuiB,QAAU+yC,CAAA,IAChB,SAKEha,CACT,CAKAoa,iBAAAA,CAAkB11D,EAAQ62C,GACxB,MAAMue,EAAgB96D,KAAK26D,YACrB3Z,EAAa,GACbiX,EAAUvyD,EAAOw1D,cAAgBx1D,EAAOw1D,YAAc,CAAC,GACvDjrE,EAAQgN,OAAO8V,KAAKwpC,GACpBkb,EAAOxnC,KAAK+nC,MAClB,IAAIv9D,EAEJ,IAAKA,EAAIxK,EAAMkL,OAAS,EAAGV,GAAK,IAAKA,EAAG,CACtC,MAAMm1B,EAAO3/B,EAAMwK,GACnB,GAAuB,MAAnBm1B,EAAK7K,OAAO,GACd,SAGF,GAAa,YAAT6K,EAAoB,CACtBoxB,EAAWxlD,QAAQwE,KAAK+6D,gBAAgBr1D,EAAQ62C,IAChD,SAEF,MAAMxrD,EAAQwrD,EAAO3sB,GACrB,IAAIh8B,EAAYqkE,EAAQroC,GACxB,MAAM4pC,EAAMsB,EAAcx2D,IAAIsrB,GAE9B,GAAIh8B,EAAW,CACb,GAAI4lE,GAAO5lE,EAAUitD,SAAU,CAE7BjtD,EAAUumE,OAAOX,EAAKzoE,EAAO0mE,GAC7B,SAEA7jE,EAAUmlE,SAGTS,GAAQA,EAAI7Y,UAMjBsX,EAAQroC,GAAQh8B,EAAY,IAAI2lE,GAAUC,EAAK9zD,EAAQkqB,EAAM7+B,GAC7DiwD,EAAWxlD,KAAK5H,IALd8R,EAAOkqB,GAAQ7+B,CAMnB,CACA,OAAOiwD,CACT,CASAmZ,MAAAA,CAAOz0D,EAAQ62C,GACb,GAA8B,IAA1Bv8C,KAAK26D,YAAYjqE,KAGnB,YADAuM,OAAO4hB,OAAOnZ,EAAQ62C,GAIxB,MAAMyE,EAAahhD,KAAKo7D,kBAAkB11D,EAAQ62C,GAElD,OAAIyE,EAAW7lD,QACb89D,GAAShN,IAAIjsD,KAAKm2D,OAAQnV,IACnB,QAFT,CAIF,ECvHF,SAASya,GAAUnc,EAAOoc,GACxB,MAAMx4C,EAAOo8B,GAASA,EAAMr3B,SAAW,CAAC,EAClCwpB,EAAUvuB,EAAKuuB,QACf3uC,OAAmBnJ,IAAbupB,EAAKpgB,IAAoB44D,EAAkB,EACjDn2D,OAAmB5L,IAAbupB,EAAK3d,IAAoBm2D,EAAkB,EACvD,MAAO,CACLz/D,MAAOw1C,EAAUlsC,EAAMzC,EACvB5G,IAAKu1C,EAAU3uC,EAAMyC,EAEzB,CAsCA,SAASo2D,GAAwBhf,EAAOif,GACtC,MAAM7oD,EAAO,GACP8oD,EAAWlf,EAAMmf,uBAAuBF,GAC9C,IAAInhE,EAAGo3C,EAEP,IAAKp3C,EAAI,EAAGo3C,EAAOgqB,EAAS1gE,OAAQV,EAAIo3C,IAAQp3C,EAC9CsY,EAAKvX,KAAKqgE,EAASphE,GAAGgY,OAExB,OAAOM,CACT,CAEA,SAASgpD,GAAW7vD,EAAOnb,EAAOirE,GAAuB,IAAd/zC,EAAAvoB,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAU,CAAC,EACpD,MAAMqT,EAAO7G,EAAM6G,KACbkpD,EAA8B,WAAjBh0C,EAAQxxB,KAC3B,IAAIgE,EAAGo3C,EAAMG,EAAckqB,EAE3B,GAAc,OAAVnrE,EAAJ,CAIA,IAAK0J,EAAI,EAAGo3C,EAAO9+B,EAAK5X,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAE7C,GADAu3C,GAAgBj/B,EAAKtY,GACjBu3C,IAAiBgqB,EAAS,CAC5B,GAAI/zC,EAAQqzC,IACV,SAEF,MAEFY,EAAahwD,EAAMqwC,OAAOvK,GACtBlB,EAASorB,KAAgBD,GAAyB,IAAVlrE,GAAegjD,GAAKhjD,KAAWgjD,GAAKmoB,MAC9EnrE,GAASmrE,EAEb,CACA,OAAOnrE,EACT,CAgBA,SAASorE,GAAU7c,EAAO18B,GACxB,MAAMw5C,EAAU9c,GAASA,EAAMr3B,QAAQm0C,QACvC,OAAOA,QAAwBziE,IAAZyiE,QAAwCziE,IAAfipB,EAAK1W,KACnD,CAcA,SAASmwD,GAAiBC,EAAQC,EAAUC,GAC1C,MAAMC,EAAWH,EAAOC,KAAcD,EAAOC,GAAY,CAAC,GAC1D,OAAOE,EAASD,KAAgBC,EAASD,GAAc,CAAC,EAC1D,CAEA,SAASE,GAAoBxwD,EAAOywD,EAAQC,EAAU39D,GACpD,IAAK,MAAM2jB,KAAQ+5C,EAAOE,wBAAwB59D,GAAMwyC,UAAW,CACjE,MAAM1gD,EAAQmb,EAAM0W,EAAKnQ,OACzB,GAAImqD,GAAa7rE,EAAQ,IAAQ6rE,GAAY7rE,EAAQ,EACnD,OAAO6xB,EAAKnQ,KAEhB,CAEA,OAAO,IACT,CAEA,SAASqqD,GAAaC,EAAYj7D,GAChC,MAAM,MAAC66C,EAAOqgB,YAAap6C,GAAQm6C,EAC7BT,EAAS3f,EAAMsgB,UAAYtgB,EAAMsgB,QAAU,CAAC,IAC5C,OAACjlB,EAAA,OAAQ2kB,EAAQlqD,MAAOu/B,GAAgBpvB,EACxCs6C,EAAQllB,EAAOE,KACfilB,EAAQR,EAAOzkB,KACfplC,EAlCR,SAAqBsqD,EAAYC,EAAYz6C,GAC3C,MAAO,GAAP9wB,OAAUsrE,EAAWplD,GAAE,KAAAlmB,OAAIurE,EAAWrlD,GAAE,KAAAlmB,OAAI8wB,EAAK1W,OAAS0W,EAAK3jB,KACjE,CAgCcq+D,CAAYtlB,EAAQ2kB,EAAQ/5C,GAClCivB,EAAO/vC,EAAO3G,OACpB,IAAI+Q,EAEJ,IAAK,IAAIzR,EAAI,EAAGA,EAAIo3C,IAAQp3C,EAAG,CAC7B,MAAMgmB,EAAO3e,EAAOrH,IACb,CAACyiE,GAAQzqD,EAAO,CAAC0qD,GAAQpsE,GAAS0vB,EAEzCvU,GADmBuU,EAAKw8C,UAAYx8C,EAAKw8C,QAAU,CAAC,IACjCE,GAASd,GAAiBC,EAAQxpD,EAAKL,GAC1DvG,EAAM8lC,GAAgBjhD,EAEtBmb,EAAMqxD,KAAOb,GAAoBxwD,EAAOywD,GAAQ,EAAM/5C,EAAK3jB,MAC3DiN,EAAMsxD,QAAUd,GAAoBxwD,EAAOywD,GAAQ,EAAO/5C,EAAK3jB,OAE1CiN,EAAMuxD,gBAAkBvxD,EAAMuxD,cAAgB,CAAC,IACvDzrB,GAAgBjhD,CAC/B,CACF,CAEA,SAAS2sE,GAAgB/gB,EAAOzE,GAC9B,MAAMqH,EAAS5C,EAAM4C,OACrB,OAAOtiD,OAAO8V,KAAKwsC,GAAQ/gC,QAAO1L,GAAOysC,EAAOzsC,GAAKolC,OAASA,IAAM1lC,OACtE,CA4BA,SAASmrD,GAAY/6C,EAAMsN,GAEzB,MAAM8hB,EAAepvB,EAAKm6C,WAAWtqD,MAC/BylC,EAAOt1B,EAAK+5C,QAAU/5C,EAAK+5C,OAAOzkB,KACxC,GAAKA,EAAL,CAIAhoB,EAAQA,GAAStN,EAAKq1B,QACtB,IAAK,MAAMn2C,KAAUouB,EAAO,CAC1B,MAAMosC,EAASx6D,EAAOm7D,QACtB,IAAKX,QAA2B3iE,IAAjB2iE,EAAOpkB,SAAsDv+C,IAA/B2iE,EAAOpkB,GAAMlG,GACxD,cAEKsqB,EAAOpkB,GAAMlG,QACer4C,IAA/B2iE,EAAOpkB,GAAMulB,oBAA4E9jE,IAA7C2iE,EAAOpkB,GAAMulB,cAAczrB,WAClEsqB,EAAOpkB,GAAMulB,cAAczrB,EAEtC,EACF,CAEA,MAAM4rB,GAAsBnnE,GAAkB,UAATA,GAA6B,SAATA,EACnDonE,GAAmBA,CAACC,EAAQC,IAAWA,EAASD,EAAS7gE,OAAO4hB,OAAO,CAAC,EAAGi/C,GAIlE,MAAME,GAqBnBlyD,WAAAA,CAAY6wC,EAAO3K,GACjBhyC,KAAK28C,MAAQA,EACb38C,KAAK+hD,KAAOpF,EAAM8B,IAClBz+C,KAAKyS,MAAQu/B,EACbhyC,KAAKi+D,gBAAkB,CAAC,EACxBj+D,KAAKg9D,YAAch9D,KAAKk+D,UACxBl+D,KAAKm+D,MAAQn+D,KAAKg9D,YAAY/9D,KAC9Be,KAAKioB,aAAUtuB,EAEfqG,KAAKstD,UAAW,EAChBttD,KAAKo+D,WAAQzkE,EACbqG,KAAKq+D,iBAAc1kE,EACnBqG,KAAKs+D,oBAAiB3kE,EACtBqG,KAAKu+D,gBAAa5kE,EAClBqG,KAAKw+D,gBAAa7kE,EAClBqG,KAAKy+D,qBAAsB,EAC3Bz+D,KAAK0+D,oBAAqB,EAC1B1+D,KAAK2+D,cAAWhlE,EAChBqG,KAAK4+D,UAAY,GACjB5+D,KAAK6+D,8BAAgCA,mBACrC7+D,KAAK8+D,2BAA6BA,gBAElC9+D,KAAK++D,YACP,CAEAA,UAAAA,GACE,MAAMn8C,EAAO5iB,KAAKg9D,YAClBh9D,KAAK46D,YACL56D,KAAKg/D,aACLp8C,EAAKq8C,SAAW9C,GAAUv5C,EAAK+5C,OAAQ/5C,GACvC5iB,KAAKk/D,cAEDl/D,KAAKioB,QAAQ70B,OAAS4M,KAAK28C,MAAMwiB,gBAAgB,WACnDj7D,QAAQ0M,KAAK,qKAEjB,CAEAwuD,WAAAA,CAAYptB,GACNhyC,KAAKyS,QAAUu/B,GACjB2rB,GAAY39D,KAAKg9D,aAEnBh9D,KAAKyS,MAAQu/B,CACf,CAEAgtB,UAAAA,GACE,MAAMriB,EAAQ38C,KAAK28C,MACb/5B,EAAO5iB,KAAKg9D,YACZqC,EAAUr/D,KAAKs/D,aAEfC,EAAWA,CAACrnB,EAAMtzC,EAAGC,EAAG1R,IAAe,MAAT+kD,EAAetzC,EAAa,MAATszC,EAAe/kD,EAAI0R,EAEpE26D,EAAM58C,EAAK68C,QAAUxuB,EAAeouB,EAAQI,QAAS/B,GAAgB/gB,EAAO,MAC5E+iB,EAAM98C,EAAK+8C,QAAU1uB,EAAeouB,EAAQM,QAASjC,GAAgB/gB,EAAO,MAC5EijB,EAAMh9C,EAAKi9C,QAAU5uB,EAAeouB,EAAQQ,QAASnC,GAAgB/gB,EAAO,MAC5EiC,EAAYh8B,EAAKg8B,UACjBkhB,EAAMl9C,EAAKm9C,QAAUR,EAAS3gB,EAAW4gB,EAAKE,EAAKE,GACnDI,EAAMp9C,EAAKq9C,QAAUV,EAAS3gB,EAAW8gB,EAAKF,EAAKI,GACzDh9C,EAAK41B,OAASx4C,KAAKkgE,cAAcV,GACjC58C,EAAK61B,OAASz4C,KAAKkgE,cAAcR,GACjC98C,EAAKu9C,OAASngE,KAAKkgE,cAAcN,GACjCh9C,EAAKo1B,OAASh4C,KAAKkgE,cAAcJ,GACjCl9C,EAAK+5C,OAAS38D,KAAKkgE,cAAcF,EACnC,CAEAV,UAAAA,GACE,OAAOt/D,KAAK28C,MAAMx9C,KAAK4+C,SAAS/9C,KAAKyS,MACvC,CAEAyrD,OAAAA,GACE,OAAOl+D,KAAK28C,MAAMyjB,eAAepgE,KAAKyS,MACxC,CAMAytD,aAAAA,CAAcG,GACZ,OAAOrgE,KAAK28C,MAAM4C,OAAO8gB,EAC3B,CAKAC,cAAAA,CAAehhB,GACb,MAAM18B,EAAO5iB,KAAKg9D,YAClB,OAAO1d,IAAU18B,EAAKo1B,OAClBp1B,EAAK+5C,OACL/5C,EAAKo1B,MACX,CAEAxjB,KAAAA,GACEx0B,KAAK+3D,QAAQ,QACf,CAKAwI,QAAAA,GACE,MAAM39C,EAAO5iB,KAAKg9D,YACdh9D,KAAKo+D,OACPznB,GAAoB32C,KAAKo+D,MAAOp+D,MAE9B4iB,EAAKq8C,UACPtB,GAAY/6C,EAEhB,CAKA49C,UAAAA,GACE,MAAMnB,EAAUr/D,KAAKs/D,aACfngE,EAAOkgE,EAAQlgE,OAASkgE,EAAQlgE,KAAO,IACvCi/D,EAAQp+D,KAAKo+D,MAMnB,GAAIvtB,EAAS1xC,GACXa,KAAKo+D,MA9QX,SAAkCj/D,GAChC,MAAM4T,EAAO9V,OAAO8V,KAAK5T,GACnBshE,EAAQ,IAAI5kE,MAAMkX,EAAK5X,QAC7B,IAAIV,EAAGo3C,EAAM/+B,EACb,IAAKrY,EAAI,EAAGo3C,EAAO9+B,EAAK5X,OAAQV,EAAIo3C,IAAQp3C,EAC1CqY,EAAMC,EAAKtY,GACXgmE,EAAMhmE,GAAK,CACTmK,EAAGkO,EACHjO,EAAG1F,EAAK2T,IAGZ,OAAO2tD,CACT,CAkQmBC,CAAyBvhE,QACjC,GAAIi/D,IAAUj/D,EAAM,CACzB,GAAIi/D,EAAO,CAETznB,GAAoBynB,EAAOp+D,MAE3B,MAAM4iB,EAAO5iB,KAAKg9D,YAClBW,GAAY/6C,GACZA,EAAKq1B,QAAU,GAEb94C,GAAQlC,OAAO0jE,aAAaxhE,KrBnQG2Q,EqBoQT9P,MrBpQET,EqBoQRJ,GrBnQd03C,SACRt3C,EAAMs3C,SAAS1kC,UAAU3W,KAAKsU,IAIhC7S,OAAOmH,eAAe7E,EAAO,WAAY,CACvC0M,cAAc,EACd5H,YAAY,EACZtT,MAAO,CACLohB,UAAW,CAACrC,MAIhB4mC,GAAYjsB,SAAS3X,IACnB,MAAMmG,EAAS,UAAYg6B,GAAYngC,GACjCkP,EAAOziB,EAAMuT,GAEnB7V,OAAOmH,eAAe7E,EAAOuT,EAAK,CAChC7G,cAAc,EACd5H,YAAY,EACZtT,KAAAA,GAAe,QAAA6vE,EAAAlhE,UAAAvE,OAAN8S,EAAI,IAAApS,MAAA+kE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ5yD,EAAI4yD,GAAAnhE,UAAAmhE,GACX,MAAM99D,EAAMif,EAAKte,MAAM1D,KAAMiO,GAQ7B,OANA1O,EAAMs3C,SAAS1kC,UAAUsY,SAASq2C,IACF,oBAAnBA,EAAO7nD,IAChB6nD,EAAO7nD,MAAWhL,MAIflL,CACT,GACA,MqBsOA/C,KAAK4+D,UAAY,GACjB5+D,KAAKo+D,MAAQj/D,ErBvQZ,IAA2BI,EAAOuQ,CqByQvC,CAEAovD,WAAAA,GACE,MAAMt8C,EAAO5iB,KAAKg9D,YAElBh9D,KAAKwgE,aAEDxgE,KAAK6+D,qBACPj8C,EAAKy8C,QAAU,IAAIr/D,KAAK6+D,mBAE5B,CAEAkC,qBAAAA,CAAsBC,GACpB,MAAMp+C,EAAO5iB,KAAKg9D,YACZqC,EAAUr/D,KAAKs/D,aACrB,IAAI2B,GAAe,EAEnBjhE,KAAKwgE,aAGL,MAAMU,EAAat+C,EAAKq8C,SACxBr8C,EAAKq8C,SAAW9C,GAAUv5C,EAAK+5C,OAAQ/5C,GAGnCA,EAAK1W,QAAUmzD,EAAQnzD,QACzB+0D,GAAe,EAEftD,GAAY/6C,GACZA,EAAK1W,MAAQmzD,EAAQnzD,OAKvBlM,KAAKmhE,gBAAgBH,IAGjBC,GAAgBC,IAAet+C,EAAKq8C,WACtCnC,GAAa98D,KAAM4iB,EAAKq1B,QAE5B,CAMA2iB,SAAAA,GACE,MAAMF,EAAS16D,KAAK28C,MAAM+d,OACpB0G,EAAY1G,EAAO2G,iBAAiBrhE,KAAKm+D,OACzClU,EAASyQ,EAAO4G,gBAAgBthE,KAAKs/D,aAAc8B,GAAW,GACpEphE,KAAKioB,QAAUyyC,EAAO6G,eAAetX,EAAQjqD,KAAKukD,cAClDvkD,KAAKstD,SAAWttD,KAAKioB,QAAQk3B,QAC7Bn/C,KAAKi+D,gBAAkB,CAAC,CAC1B,CAMA1Q,KAAAA,CAAMtxD,EAAO0U,GACX,MAAOqsD,YAAap6C,EAAMw7C,MAAOj/D,GAAQa,MACnC,OAACg4C,EAAA,SAAQinB,GAAYr8C,EACrBs6C,EAAQllB,EAAOE,KAErB,IAEIz9C,EAAGm+D,EAAK92D,EAFR0/D,EAAmB,IAAVvlE,GAAe0U,IAAUxR,EAAKhE,QAAgBynB,EAAKm1B,QAC5DluB,EAAO5tB,EAAQ,GAAK2mB,EAAKq1B,QAAQh8C,EAAQ,GAG7C,IAAsB,IAAlB+D,KAAKstD,SACP1qC,EAAKq1B,QAAU94C,EACfyjB,EAAKm1B,SAAU,EACfj2C,EAAS3C,MACJ,CAEH2C,EADE5C,EAAQC,EAAKlD,IACN+D,KAAKyhE,eAAe7+C,EAAMzjB,EAAMlD,EAAO0U,GACvCkgC,EAAS1xC,EAAKlD,IACd+D,KAAK0hE,gBAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GAExC3Q,KAAK2hE,mBAAmB/+C,EAAMzjB,EAAMlD,EAAO0U,GAGtD,MAAMixD,EAA6BA,IAAqB,OAAfhJ,EAAIsE,IAAoBrzC,GAAQ+uC,EAAIsE,GAASrzC,EAAKqzC,GAC3F,IAAKziE,EAAI,EAAGA,EAAIkW,IAASlW,EACvBmoB,EAAKq1B,QAAQx9C,EAAIwB,GAAS28D,EAAM92D,EAAOrH,GACnC+mE,IACEI,MACFJ,GAAS,GAEX33C,EAAO+uC,GAGXh2C,EAAKm1B,QAAUypB,EAGbvC,GACFnC,GAAa98D,KAAM8B,EAEvB,CAaA6/D,kBAAAA,CAAmB/+C,EAAMzjB,EAAMlD,EAAO0U,GACpC,MAAM,OAACqnC,EAAA,OAAQ2kB,GAAU/5C,EACnBs6C,EAAQllB,EAAOE,KACfilB,EAAQR,EAAOzkB,KACf2pB,EAAS7pB,EAAO8pB,YAChBC,EAAc/pB,IAAW2kB,EACzB76D,EAAS,IAAIjG,MAAM8U,GACzB,IAAIlW,EAAGo3C,EAAMp/B,EAEb,IAAKhY,EAAI,EAAGo3C,EAAOlhC,EAAOlW,EAAIo3C,IAAQp3C,EACpCgY,EAAQhY,EAAIwB,EACZ6F,EAAOrH,GAAK,CACV,CAACyiE,GAAQ6E,GAAe/pB,EAAOuV,MAAMsU,EAAOpvD,GAAQA,GACpD,CAAC0qD,GAAQR,EAAOpP,MAAMpuD,EAAKsT,GAAQA,IAGvC,OAAO3Q,CACT,CAaA2/D,cAAAA,CAAe7+C,EAAMzjB,EAAMlD,EAAO0U,GAChC,MAAM,OAAC6nC,EAAA,OAAQC,GAAU71B,EACnB9gB,EAAS,IAAIjG,MAAM8U,GACzB,IAAIlW,EAAGo3C,EAAMp/B,EAAOgO,EAEpB,IAAKhmB,EAAI,EAAGo3C,EAAOlhC,EAAOlW,EAAIo3C,IAAQp3C,EACpCgY,EAAQhY,EAAIwB,EACZwkB,EAAOthB,EAAKsT,GACZ3Q,EAAOrH,GAAK,CACVmK,EAAG4zC,EAAO+U,MAAM9sC,EAAK,GAAIhO,GACzB5N,EAAG4zC,EAAO8U,MAAM9sC,EAAK,GAAIhO,IAG7B,OAAO3Q,CACT,CAaA4/D,eAAAA,CAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACjC,MAAM,OAAC6nC,EAAA,OAAQC,GAAU71B,GACnB,SAACo/C,EAAW,aAAKC,EAAW,KAAOjiE,KAAKstD,SACxCxrD,EAAS,IAAIjG,MAAM8U,GACzB,IAAIlW,EAAGo3C,EAAMp/B,EAAOgO,EAEpB,IAAKhmB,EAAI,EAAGo3C,EAAOlhC,EAAOlW,EAAIo3C,IAAQp3C,EACpCgY,EAAQhY,EAAIwB,EACZwkB,EAAOthB,EAAKsT,GACZ3Q,EAAOrH,GAAK,CACVmK,EAAG4zC,EAAO+U,MAAM1a,GAAiBpyB,EAAMuhD,GAAWvvD,GAClD5N,EAAG4zC,EAAO8U,MAAM1a,GAAiBpyB,EAAMwhD,GAAWxvD,IAGtD,OAAO3Q,CACT,CAKAogE,SAAAA,CAAUzvD,GACR,OAAOzS,KAAKg9D,YAAY/kB,QAAQxlC,EAClC,CAKA0vD,cAAAA,CAAe1vD,GACb,OAAOzS,KAAKg9D,YAAY79D,KAAKsT,EAC/B,CAKAspD,UAAAA,CAAWzc,EAAOx9C,EAAQrL,GACxB,MAAMkmD,EAAQ38C,KAAK28C,MACb/5B,EAAO5iB,KAAKg9D,YACZjsE,EAAQ+Q,EAAOw9C,EAAMpH,MAK3B,OAAO6jB,GAJO,CACZhpD,KAAM4oD,GAAwBhf,GAAO,GACrCJ,OAAQz6C,EAAOm7D,QAAQ3d,EAAMpH,MAAMulB,eAEZ1sE,EAAO6xB,EAAKnQ,MAAO,CAAChc,QAC/C,CAKA2rE,qBAAAA,CAAsB/1D,EAAOizC,EAAOx9C,EAAQoK,GAC1C,MAAMm2D,EAAcvgE,EAAOw9C,EAAMpH,MACjC,IAAInnD,EAAwB,OAAhBsxE,EAAuB1uD,IAAM0uD,EACzC,MAAM9lB,EAASrwC,GAASpK,EAAOm7D,QAAQ3d,EAAMpH,MACzChsC,GAASqwC,IACXrwC,EAAMqwC,OAASA,EACfxrD,EAAQgrE,GAAW7vD,EAAOm2D,EAAariE,KAAKg9D,YAAYvqD,QAE1DpG,EAAMvJ,IAAMtR,KAAKsR,IAAIuJ,EAAMvJ,IAAK/R,GAChCsb,EAAM9G,IAAM/T,KAAK+T,IAAI8G,EAAM9G,IAAKxU,EAClC,CAKAuxE,SAAAA,CAAUhjB,EAAOijB,GACf,MAAM3/C,EAAO5iB,KAAKg9D,YACZ/kB,EAAUr1B,EAAKq1B,QACfupB,EAAS5+C,EAAKm1B,SAAWuH,IAAU18B,EAAKo1B,OACxCnG,EAAOoG,EAAQ98C,OACfqnE,EAAaxiE,KAAKsgE,eAAehhB,GACjCpzC,EA3YUu2D,EAACF,EAAU3/C,EAAM+5B,IAAU4lB,IAAa3/C,EAAKlL,QAAUkL,EAAKq8C,UAC3E,CAAClsD,KAAM4oD,GAAwBhf,GAAO,GAAOJ,OAAQ,MA0YxCkmB,CAAYF,EAAU3/C,EAAM5iB,KAAK28C,OACzCtwC,EAAQ,CAACvJ,IAAKnB,OAAO8xC,kBAAmBluC,IAAK5D,OAAO+gE,oBACnD5/D,IAAK6/D,EAAUp9D,IAAKq9D,GApf/B,SAAuBtjB,GACrB,MAAM,IAACx8C,EAAG,IAAEyC,EAAG,WAAE4yC,EAAU,WAAEC,GAAckH,EAAMjH,gBACjD,MAAO,CACLv1C,IAAKq1C,EAAar1C,EAAMnB,OAAO+gE,kBAC/Bn9D,IAAK6yC,EAAa7yC,EAAM5D,OAAO8xC,kBAEnC,CA8e2C4E,CAAcmqB,GACrD,IAAI/nE,EAAGqH,EAEP,SAAS+gE,IACP/gE,EAASm2C,EAAQx9C,GACjB,MAAMyhE,EAAap6D,EAAO0gE,EAAWtqB,MACrC,OAAQpH,EAAShvC,EAAOw9C,EAAMpH,QAAUyqB,EAAWzG,GAAc0G,EAAW1G,CAC9E,CAEA,IAAKzhE,EAAI,EAAGA,EAAIo3C,IACVgxB,MAGJ7iE,KAAKoiE,sBAAsB/1D,EAAOizC,EAAOx9C,EAAQoK,IAC7Cs1D,MALkB/mE,GAUxB,GAAI+mE,EAEF,IAAK/mE,EAAIo3C,EAAO,EAAGp3C,GAAK,IAAKA,EAC3B,IAAIooE,IAAJ,CAGA7iE,KAAKoiE,sBAAsB/1D,EAAOizC,EAAOx9C,EAAQoK,GACjD,MAGJ,OAAOG,CACT,CAEAy2D,kBAAAA,CAAmBxjB,GACjB,MAAMx9C,EAAS9B,KAAKg9D,YAAY/kB,QAC1BsE,EAAS,GACf,IAAI9hD,EAAGo3C,EAAM9gD,EAEb,IAAK0J,EAAI,EAAGo3C,EAAO/vC,EAAO3G,OAAQV,EAAIo3C,IAAQp3C,EAC5C1J,EAAQ+Q,EAAOrH,GAAG6kD,EAAMpH,MACpBpH,EAAS//C,IACXwrD,EAAO/gD,KAAKzK,GAGhB,OAAOwrD,CACT,CAMAwmB,cAAAA,GACE,OAAO,CACT,CAKAC,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,YACZhlB,EAASp1B,EAAKo1B,OACd2kB,EAAS/5C,EAAK+5C,OACd76D,EAAS9B,KAAKkiE,UAAUzvD,GAC9B,MAAO,CACL8F,MAAOy/B,EAAS,GAAKA,EAAOirB,iBAAiBnhE,EAAOk2C,EAAOE,OAAS,GACpEnnD,MAAO4rE,EAAS,GAAKA,EAAOsG,iBAAiBnhE,EAAO66D,EAAOzkB,OAAS,GAExE,CAKA6f,OAAAA,CAAQthE,GACN,MAAMmsB,EAAO5iB,KAAKg9D,YAClBh9D,KAAKm6D,OAAO1jE,GAAQ,WACpBmsB,EAAKsgD,MA9oBT,SAAgBnyE,GACd,IAAIg/C,EAAG58C,EAAGyL,EAAGuvB,EAWb,OATI0iB,EAAS9/C,IACXg/C,EAAIh/C,EAAM0G,IACVtE,EAAIpC,EAAM2G,MACVkH,EAAI7N,EAAM4G,OACVw2B,EAAIp9B,EAAMyG,MAEVu4C,EAAI58C,EAAIyL,EAAIuvB,EAAIp9B,EAGX,CACL0G,IAAKs4C,EACLr4C,MAAOvE,EACPwE,OAAQiH,EACRpH,KAAM22B,EACNrX,UAAoB,IAAV/lB,EAEd,CA2nBiBoyE,CAAOlyB,EAAejxC,KAAKioB,QAAQs5B,KA7pBpD,SAAqB/I,EAAQC,EAAQijB,GACnC,IAAwB,IAApBA,EACF,OAAO,EAET,MAAM92D,EAAI62D,GAAUjjB,EAAQkjB,GACtB72D,EAAI42D,GAAUhjB,EAAQijB,GAE5B,MAAO,CACLjkE,IAAKoN,EAAE3I,IACPxE,MAAOkN,EAAE1I,IACTvE,OAAQkN,EAAE5I,MACVzE,KAAMoN,EAAE3I,MAEZ,CAgpB0DmnE,CAAYxgD,EAAK41B,OAAQ51B,EAAK61B,OAAQz4C,KAAK+iE,mBACnG,CAKA5I,MAAAA,CAAO1jE,GAAO,CAEdyhE,IAAAA,GACE,MAAMzZ,EAAMz+C,KAAK+hD,KACXpF,EAAQ38C,KAAK28C,MACb/5B,EAAO5iB,KAAKg9D,YACZ7e,EAAWv7B,EAAKzjB,MAAQ,GACxB4iB,EAAO46B,EAAM0mB,UACbxiB,EAAS,GACT5kD,EAAQ+D,KAAKu+D,YAAc,EAC3B5tD,EAAQ3Q,KAAKw+D,YAAergB,EAAShjD,OAASc,EAC9CwjD,EAA0Bz/C,KAAKioB,QAAQw3B,wBAC7C,IAAIhlD,EAMJ,IAJImoB,EAAKy8C,SACPz8C,EAAKy8C,QAAQnH,KAAKzZ,EAAK18B,EAAM9lB,EAAO0U,GAGjClW,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,IAASlW,EAAG,CACtC,MAAM+uB,EAAU20B,EAAS1jD,GACrB+uB,EAAQ9R,SAGR8R,EAAQq3B,QAAUpB,EACpBoB,EAAOrlD,KAAKguB,GAEZA,EAAQ0uC,KAAKzZ,EAAK18B,GAEtB,CAEA,IAAKtnB,EAAI,EAAGA,EAAIomD,EAAO1lD,SAAUV,EAC/BomD,EAAOpmD,GAAGy9D,KAAKzZ,EAAK18B,EAExB,CASA6xC,QAAAA,CAASnhD,EAAOouC,GACd,MAAMpqD,EAAOoqD,EAAS,SAAW,UACjC,YAAiBlnD,IAAV8Y,GAAuBzS,KAAKg9D,YAAYqC,QAC3Cr/D,KAAKsjE,6BAA6B7sE,GAClCuJ,KAAKujE,0BAA0B9wD,GAAS,EAAGhc,EACjD,CAKA8tD,UAAAA,CAAW9xC,EAAOouC,EAAQpqD,GACxB,MAAM4oE,EAAUr/D,KAAKs/D,aACrB,IAAIptD,EACJ,GAAIO,GAAS,GAAKA,EAAQzS,KAAKg9D,YAAY79D,KAAKhE,OAAQ,CACtD,MAAMquB,EAAUxpB,KAAKg9D,YAAY79D,KAAKsT,GACtCP,EAAUsX,EAAQm1C,WACfn1C,EAAQm1C,SA3jBjB,SAA2B96C,EAAQpR,EAAO+W,GACxC,OAAOsgC,GAAcjmC,EAAQ,CAC3Bg9B,QAAQ,EACR2iB,UAAW/wD,EACX3Q,YAAQnI,EACR8pE,SAAK9pE,EACL6vB,UACA/W,QACAhc,KAAM,UACNwI,KAAM,QAEV,CAgjB4BykE,CAAkB1jE,KAAKukD,aAAc9xC,EAAO+W,IAClEtX,EAAQpQ,OAAS9B,KAAKkiE,UAAUzvD,GAChCP,EAAQuxD,IAAMpE,EAAQlgE,KAAKsT,GAC3BP,EAAQO,MAAQP,EAAQsxD,UAAY/wD,OAEpCP,EAAUlS,KAAK2+D,WACZ3+D,KAAK2+D,SA9kBd,SAA8B96C,EAAQpR,GACpC,OAAOq3C,GAAcjmC,EACnB,CACEg9B,QAAQ,EACRwe,aAAS1lE,EACTq4C,aAAcv/B,EACdA,QACAhc,KAAM,UACNwI,KAAM,WAGZ,CAmkByB0kE,CAAqB3jE,KAAK28C,MAAM4H,aAAcvkD,KAAKyS,QACtEP,EAAQmtD,QAAUA,EAClBntD,EAAQO,MAAQP,EAAQ8/B,aAAehyC,KAAKyS,MAK9C,OAFAP,EAAQ2uC,SAAWA,EACnB3uC,EAAQzb,KAAOA,EACRyb,CACT,CAMAoxD,4BAAAA,CAA6B7sE,GAC3B,OAAOuJ,KAAK4jE,uBAAuB5jE,KAAK6+D,mBAAmB7mD,GAAIvhB,EACjE,CAOA8sE,yBAAAA,CAA0B9wD,EAAOhc,GAC/B,OAAOuJ,KAAK4jE,uBAAuB5jE,KAAK8+D,gBAAgB9mD,GAAIvhB,EAAMgc,EACpE,CAKAmxD,sBAAAA,CAAuBC,GAAsC,IAAzBptE,EAAAiJ,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAO,UAAW+S,EAAK/S,UAAAvE,OAAA,EAAAuE,UAAA,QAAA/F,EACzD,MAAMknD,EAAkB,WAATpqD,EACTgtD,EAAQzjD,KAAKi+D,gBACbniB,EAAW+nB,EAAc,IAAMptE,EAC/BqnE,EAASra,EAAM3H,GACfgoB,EAAU9jE,KAAKy+D,qBAAuBvrB,GAAQzgC,GACpD,GAAIqrD,EACF,OAAOD,GAAiBC,EAAQgG,GAElC,MAAMpJ,EAAS16D,KAAK28C,MAAM+d,OACpB0G,EAAY1G,EAAOqJ,wBAAwB/jE,KAAKm+D,MAAO0F,GACvD3Z,EAAWrJ,EAAS,IAAA/uD,OAAI+xE,EAAY,SAAQ,QAASA,EAAa,IAAM,CAACA,EAAa,IACtF5Z,EAASyQ,EAAO4G,gBAAgBthE,KAAKs/D,aAAc8B,GACnDlzB,EAAQjxC,OAAO8V,KAAKstC,GAASlC,SAAS0lB,IAItCtnB,EAASme,EAAOsJ,oBAAoB/Z,EAAQ/b,GADlCh8B,IAAMlS,KAAKukD,WAAW9xC,EAAOouC,EAAQpqD,IACayzD,GAalE,OAXI3N,EAAO0e,UAGT1e,EAAO0e,QAAU6I,EAKjBrgB,EAAM3H,GAAY7+C,OAAOgnE,OAAOpG,GAAiBthB,EAAQunB,KAGpDvnB,CACT,CAMA2nB,kBAAAA,CAAmBzxD,EAAOhf,EAAYotD,GACpC,MAAMlE,EAAQ38C,KAAK28C,MACb8G,EAAQzjD,KAAKi+D,gBACbniB,EAAW,aAAAhqD,OAAa2B,GACxBqqE,EAASra,EAAM3H,GACrB,GAAIgiB,EACF,OAAOA,EAET,IAAI71C,EACJ,IAAgC,IAA5B00B,EAAM10B,QAAQr0B,UAAqB,CACrC,MAAM8mE,EAAS16D,KAAK28C,MAAM+d,OACpB0G,EAAY1G,EAAOyJ,0BAA0BnkE,KAAKm+D,MAAO1qE,GACzDw2D,EAASyQ,EAAO4G,gBAAgBthE,KAAKs/D,aAAc8B,GACzDn5C,EAAUyyC,EAAO6G,eAAetX,EAAQjqD,KAAKukD,WAAW9xC,EAAOouC,EAAQptD,IAEzE,MAAMutD,EAAa,IAAIyZ,GAAW9d,EAAO10B,GAAWA,EAAQ+4B,YAI5D,OAHI/4B,GAAWA,EAAQsiC,aACrB9G,EAAM3H,GAAY7+C,OAAOgnE,OAAOjjB,IAE3BA,CACT,CAMAojB,gBAAAA,CAAiBn8C,GACf,GAAKA,EAAQgzC,QAGb,OAAOj7D,KAAKs+D,iBAAmBt+D,KAAKs+D,eAAiBrhE,OAAO4hB,OAAO,CAAC,EAAGoJ,GACzE,CAMAo8C,cAAAA,CAAe5tE,EAAM6tE,GACnB,OAAQA,GAAiB1G,GAAmBnnE,IAASuJ,KAAK28C,MAAM4nB,mBAClE,CAKAC,iBAAAA,CAAkBvoE,EAAOxF,GACvB,MAAMguE,EAAYzkE,KAAKujE,0BAA0BtnE,EAAOxF,GAClDiuE,EAA0B1kE,KAAKs+D,eAC/BgG,EAAgBtkE,KAAKokE,iBAAiBK,GACtCJ,EAAiBrkE,KAAKqkE,eAAe5tE,EAAM6tE,IAAmBA,IAAkBI,EAEtF,OADA1kE,KAAK2kE,oBAAoBL,EAAe7tE,EAAMguE,GACvC,CAACH,gBAAeD,iBACzB,CAMAO,aAAAA,CAAcp7C,EAAS/W,EAAO6W,EAAY7yB,GACpCmnE,GAAmBnnE,GACrBwG,OAAO4hB,OAAO2K,EAASF,GAEvBtpB,KAAKkkE,mBAAmBzxD,EAAOhc,GAAM0jE,OAAO3wC,EAASF,EAEzD,CAMAq7C,mBAAAA,CAAoBL,EAAe7tE,EAAMukE,GACnCsJ,IAAkB1G,GAAmBnnE,IACvCuJ,KAAKkkE,wBAAmBvqE,EAAWlD,GAAM0jE,OAAOmK,EAAetJ,EAEnE,CAKA6J,SAAAA,CAAUr7C,EAAS/W,EAAOhc,EAAMoqD,GAC9Br3B,EAAQq3B,OAASA,EACjB,MAAM54B,EAAUjoB,KAAK4zD,SAASnhD,EAAOouC,GACrC7gD,KAAKkkE,mBAAmBzxD,EAAOhc,EAAMoqD,GAAQsZ,OAAO3wC,EAAS,CAG3DvB,SAAW44B,GAAU7gD,KAAKokE,iBAAiBn8C,IAAaA,GAE5D,CAEA68C,gBAAAA,CAAiBt7C,EAASwoB,EAAcv/B,GACtCzS,KAAK6kE,UAAUr7C,EAAS/W,EAAO,UAAU,EAC3C,CAEAsyD,aAAAA,CAAcv7C,EAASwoB,EAAcv/B,GACnCzS,KAAK6kE,UAAUr7C,EAAS/W,EAAO,UAAU,EAC3C,CAKAuyD,wBAAAA,GACE,MAAMx7C,EAAUxpB,KAAKg9D,YAAYqC,QAE7B71C,GACFxpB,KAAK6kE,UAAUr7C,OAAS7vB,EAAW,UAAU,EAEjD,CAKAsrE,qBAAAA,GACE,MAAMz7C,EAAUxpB,KAAKg9D,YAAYqC,QAE7B71C,GACFxpB,KAAK6kE,UAAUr7C,OAAS7vB,EAAW,UAAU,EAEjD,CAKAwnE,eAAAA,CAAgBH,GACd,MAAM7hE,EAAOa,KAAKo+D,MACZjgB,EAAWn+C,KAAKg9D,YAAY79D,KAGlC,IAAK,MAAO8Z,EAAQisD,EAAMC,KAASnlE,KAAK4+D,UACtC5+D,KAAKiZ,GAAQisD,EAAMC,GAErBnlE,KAAK4+D,UAAY,GAEjB,MAAMwG,EAAUjnB,EAAShjD,OACnBkqE,EAAUlmE,EAAKhE,OACfwV,EAAQnf,KAAKsR,IAAIuiE,EAASD,GAE5Bz0D,GAKF3Q,KAAKutD,MAAM,EAAG58C,GAGZ00D,EAAUD,EACZplE,KAAKslE,gBAAgBF,EAASC,EAAUD,EAASpE,GACxCqE,EAAUD,GACnBplE,KAAKulE,gBAAgBF,EAASD,EAAUC,EAE5C,CAKAC,eAAAA,CAAgBrpE,EAAO0U,GAAgC,IAAzBqwD,IAAAthE,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,KAAAA,UAAA,GAC5B,MAAMkjB,EAAO5iB,KAAKg9D,YACZ79D,EAAOyjB,EAAKzjB,KACZjD,EAAMD,EAAQ0U,EACpB,IAAIlW,EAEJ,MAAM+qE,EAAQ9qE,IAEZ,IADAA,EAAIS,QAAUwV,EACTlW,EAAIC,EAAIS,OAAS,EAAGV,GAAKyB,EAAKzB,IACjCC,EAAID,GAAKC,EAAID,EAAIkW,EACnB,EAIF,IAFA60D,EAAKrmE,GAEA1E,EAAIwB,EAAOxB,EAAIyB,IAAOzB,EACzB0E,EAAK1E,GAAK,IAAIuF,KAAK8+D,gBAGjB9+D,KAAKstD,UACPkY,EAAK5iD,EAAKq1B,SAEZj4C,KAAKutD,MAAMtxD,EAAO0U,GAEdqwD,GACFhhE,KAAKylE,eAAetmE,EAAMlD,EAAO0U,EAAO,QAE5C,CAEA80D,cAAAA,CAAej8C,EAASvtB,EAAO0U,EAAOla,GAAO,CAK7C8uE,eAAAA,CAAgBtpE,EAAO0U,GACrB,MAAMiS,EAAO5iB,KAAKg9D,YAClB,GAAIh9D,KAAKstD,SAAU,CACjB,MAAMoY,EAAU9iD,EAAKq1B,QAAQ1xB,OAAOtqB,EAAO0U,GACvCiS,EAAKq8C,UACPtB,GAAY/6C,EAAM8iD,GAGtB9iD,EAAKzjB,KAAKonB,OAAOtqB,EAAO0U,EAC1B,CAKAg1D,KAAAA,CAAM13D,GACJ,GAAIjO,KAAKstD,SACPttD,KAAK4+D,UAAUpjE,KAAKyS,OACf,CACL,MAAOgL,EAAQisD,EAAMC,GAAQl3D,EAC7BjO,KAAKiZ,GAAQisD,EAAMC,GAErBnlE,KAAK28C,MAAMipB,aAAapqE,KAAK,CAACwE,KAAKyS,SAAUxE,GAC/C,CAEA43D,WAAAA,GACE,MAAMl1D,EAAQjR,UAAUvE,OACxB6E,KAAK2lE,MAAM,CAAC,kBAAmB3lE,KAAKs/D,aAAangE,KAAKhE,OAASwV,EAAOA,GACxE,CAEAm1D,UAAAA,GACE9lE,KAAK2lE,MAAM,CAAC,kBAAmB3lE,KAAKg9D,YAAY79D,KAAKhE,OAAS,EAAG,GACnE,CAEA4qE,YAAAA,GACE/lE,KAAK2lE,MAAM,CAAC,kBAAmB,EAAG,GACpC,CAEAK,aAAAA,CAAc/pE,EAAO0U,GACfA,GACF3Q,KAAK2lE,MAAM,CAAC,kBAAmB1pE,EAAO0U,IAExC,MAAMs1D,EAAWvmE,UAAUvE,OAAS,EAChC8qE,GACFjmE,KAAK2lE,MAAM,CAAC,kBAAmB1pE,EAAOgqE,GAE1C,CAEAC,cAAAA,GACElmE,KAAK2lE,MAAM,CAAC,kBAAmB,EAAGjmE,UAAUvE,QAC9C,EChhCF,SAASgrE,GAAqBvjD,GAC5B,MAAM08B,EAAQ18B,EAAKo1B,OACbuE,EAnBR,SAA2B+C,EAAOrgD,GAChC,IAAKqgD,EAAM8mB,OAAOC,KAAM,CACtB,MAAMC,EAAehnB,EAAMud,wBAAwB59D,GACnD,IAAIs9C,EAAS,GAEb,IAAK,IAAI9hD,EAAI,EAAGo3C,EAAOy0B,EAAanrE,OAAQV,EAAIo3C,EAAMp3C,IACpD8hD,EAASA,EAAOzqD,OAAOw0E,EAAa7rE,GAAGsiE,WAAW+F,mBAAmBxjB,IAEvEA,EAAM8mB,OAAOC,KAAOvvB,GAAayF,EAAOr3B,MAAK,CAACvgB,EAAG/F,IAAM+F,EAAI/F,KAE7D,OAAO0gD,EAAM8mB,OAAOC,IACtB,CAQiBE,CAAkBjnB,EAAO18B,EAAK3jB,MAC7C,IACIxE,EAAGo3C,EAAM20B,EAAM38C,EADf/mB,EAAMw8C,EAAMmnB,QAEhB,MAAMC,EAAmBA,KACV,QAATF,IAA4B,QAAVA,IAIlBtzB,GAAQrpB,KAEV/mB,EAAMtR,KAAKsR,IAAIA,EAAKtR,KAAKub,IAAIy5D,EAAO38C,IAAS/mB,IAE/C+mB,EAAO28C,EAAA,EAGT,IAAK/rE,EAAI,EAAGo3C,EAAO0K,EAAOphD,OAAQV,EAAIo3C,IAAQp3C,EAC5C+rE,EAAOlnB,EAAMhH,iBAAiBiE,EAAO9hD,IACrCisE,IAIF,IADA78C,OAAOlwB,EACFc,EAAI,EAAGo3C,EAAOyN,EAAM5C,MAAMvhD,OAAQV,EAAIo3C,IAAQp3C,EACjD+rE,EAAOlnB,EAAMqnB,gBAAgBlsE,GAC7BisE,IAGF,OAAO5jE,CACT,CA2FA,SAAS8jE,GAAWz2C,EAAO1P,EAAMk8C,EAAQliE,GAMvC,OALIyE,EAAQixB,GA5Bd,SAAuBA,EAAO1P,EAAMk8C,EAAQliE,GAC1C,MAAMosE,EAAalK,EAAOpP,MAAMp9B,EAAM,GAAI11B,GACpCqsE,EAAWnK,EAAOpP,MAAMp9B,EAAM,GAAI11B,GAClCqI,EAAMtR,KAAKsR,IAAI+jE,EAAYC,GAC3BvhE,EAAM/T,KAAK+T,IAAIshE,EAAYC,GACjC,IAAIC,EAAWjkE,EACXkkE,EAASzhE,EAET/T,KAAKub,IAAIjK,GAAOtR,KAAKub,IAAIxH,KAC3BwhE,EAAWxhE,EACXyhE,EAASlkE,GAKX2d,EAAKk8C,EAAOzkB,MAAQ8uB,EAEpBvmD,EAAKwmD,QAAU,CACbF,WACAC,SACA/qE,MAAO4qE,EACP3qE,IAAK4qE,EACLhkE,MACAyC,MAEJ,CAII2hE,CAAc/2C,EAAO1P,EAAMk8C,EAAQliE,GAEnCgmB,EAAKk8C,EAAOzkB,MAAQykB,EAAOpP,MAAMp9B,EAAO11B,GAEnCgmB,CACT,CAEA,SAAS0mD,GAAsBvkD,EAAMzjB,EAAMlD,EAAO0U,GAChD,MAAMqnC,EAASp1B,EAAKo1B,OACd2kB,EAAS/5C,EAAK+5C,OACdkF,EAAS7pB,EAAO8pB,YAChBC,EAAc/pB,IAAW2kB,EACzB76D,EAAS,GACf,IAAIrH,EAAGo3C,EAAMpxB,EAAM0P,EAEnB,IAAK11B,EAAIwB,EAAO41C,EAAO51C,EAAQ0U,EAAOlW,EAAIo3C,IAAQp3C,EAChD01B,EAAQhxB,EAAK1E,GACbgmB,EAAO,CAAC,EACRA,EAAKu3B,EAAOE,MAAQ6pB,GAAe/pB,EAAOuV,MAAMsU,EAAOpnE,GAAIA,GAC3DqH,EAAOtG,KAAKorE,GAAWz2C,EAAO1P,EAAMk8C,EAAQliE,IAE9C,OAAOqH,CACT,CAEA,SAASslE,GAAWC,GAClB,OAAOA,QAA8B1tE,IAApB0tE,EAAON,eAA4CptE,IAAlB0tE,EAAOL,MAC3D,CA8BA,SAASM,GAAiBh+C,EAAYrB,EAAS/b,EAAOuG,GACpD,IAAI80D,EAAOt/C,EAAQu/C,cACnB,MAAMzkE,EAAM,CAAC,EAEb,IAAKwkE,EAEH,YADAj+C,EAAWk+C,cAAgBzkE,GAI7B,IAAa,IAATwkE,EAEF,YADAj+C,EAAWk+C,cAAgB,CAAC/vE,KAAK,EAAMC,OAAO,EAAMC,QAAQ,EAAMH,MAAM,IAI1E,MAAM,MAACyE,EAAA,IAAOC,EAAA,QAAKu1C,EAAA,IAASh6C,EAAA,OAAKE,GAnCnC,SAAqB2xB,GACnB,IAAImoB,EAASx1C,EAAOC,EAAKzE,EAAKE,EAiB9B,OAhBI2xB,EAAWm+C,YACbh2B,EAAUnoB,EAAWtH,KAAOsH,EAAW1kB,EACvC3I,EAAQ,OACRC,EAAM,UAENu1C,EAAUnoB,EAAWtH,KAAOsH,EAAWzkB,EACvC5I,EAAQ,SACRC,EAAM,OAEJu1C,GACFh6C,EAAM,MACNE,EAAS,UAETF,EAAM,QACNE,EAAS,OAEJ,CAACsE,QAAOC,MAAKu1C,UAASh6C,MAAKE,SACpC,CAgB6C+vE,CAAYp+C,GAE1C,WAATi+C,GAAqBr7D,IACvBod,EAAWq+C,oBAAqB,GAC3Bz7D,EAAMqxD,MAAQ,KAAO9qD,EACxB80D,EAAO9vE,GACGyU,EAAMsxD,SAAW,KAAO/qD,EAClC80D,EAAO5vE,GAEPoL,EAAI6kE,GAAUjwE,EAAQsE,EAAOC,EAAKu1C,KAAY,EAC9C81B,EAAO9vE,IAIXsL,EAAI6kE,GAAUL,EAAMtrE,EAAOC,EAAKu1C,KAAY,EAC5CnoB,EAAWk+C,cAAgBzkE,CAC7B,CAEA,SAAS6kE,GAAUL,EAAM5iE,EAAG/F,EAAG6yC,GAU/B,IAAco2B,EAAM91B,EAAI+1B,EAHtB,OANIr2B,GASkBq2B,EARClpE,EACrB2oE,EAAOQ,GADPR,GAQUM,EAREN,MAQIx1B,EAREptC,GASCmjE,EAAKD,IAASC,EAAK/1B,EAAK81B,EARrBjpE,EAAG+F,IAEzB4iE,EAAOQ,GAASR,EAAM5iE,EAAG/F,GAEpB2oE,CACT,CAMA,SAASQ,GAASzmC,EAAGrlC,EAAOC,GAC1B,MAAa,UAANolC,EAAgBrlC,EAAc,QAANqlC,EAAcplC,EAAMolC,CACrD,CAEA,SAAS0mC,GAAiB1+C,EAAUryB,EAAmB43C,GAAO,IAAxB,cAACo5B,GAAchxE,EACnDqyB,EAAW2+C,cAAkC,SAAlBA,EACb,IAAVp5B,EAAc,IAAO,EACrBo5B,CACN,EDyyBAtqD,EAAAA,EAAAA,GAz0BqBqgD,GAAA,WAKD,CAAC,IAAErgD,EAAAA,EAAAA,GALFqgD,GAAA,qBAUS,OAAIrgD,EAAAA,EAAAA,GAVbqgD,GAAA,kBAeM,MCmBZ,MAAMkK,WAAsBlK,GAgDzC2D,kBAAAA,CAAmB/+C,EAAMzjB,EAAMlD,EAAO0U,GACpC,OAAOw2D,GAAsBvkD,EAAMzjB,EAAMlD,EAAO0U,EAClD,CAOA8wD,cAAAA,CAAe7+C,EAAMzjB,EAAMlD,EAAO0U,GAChC,OAAOw2D,GAAsBvkD,EAAMzjB,EAAMlD,EAAO0U,EAClD,CAOA+wD,eAAAA,CAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACjC,MAAM,OAACqnC,EAAA,OAAQ2kB,GAAU/5C,GACnB,SAACo/C,EAAW,aAAKC,EAAW,KAAOjiE,KAAKstD,SACxC6a,EAA2B,MAAhBnwB,EAAOE,KAAe8pB,EAAWC,EAC5CmG,EAA2B,MAAhBzL,EAAOzkB,KAAe8pB,EAAWC,EAC5CngE,EAAS,GACf,IAAIrH,EAAGo3C,EAAMpxB,EAAM5hB,EACnB,IAAKpE,EAAIwB,EAAO41C,EAAO51C,EAAQ0U,EAAOlW,EAAIo3C,IAAQp3C,EAChDoE,EAAMM,EAAK1E,GACXgmB,EAAO,CAAC,EACRA,EAAKu3B,EAAOE,MAAQF,EAAOuV,MAAM1a,GAAiBh0C,EAAKspE,GAAW1tE,GAClEqH,EAAOtG,KAAKorE,GAAW/zB,GAAiBh0C,EAAKupE,GAAW3nD,EAAMk8C,EAAQliE,IAExE,OAAOqH,CACT,CAKAsgE,qBAAAA,CAAsB/1D,EAAOizC,EAAOx9C,EAAQoK,GAC1CH,MAAMq2D,sBAAsB/1D,EAAOizC,EAAOx9C,EAAQoK,GAClD,MAAMm7D,EAASvlE,EAAOmlE,QAClBI,GAAU/nB,IAAUt/C,KAAKg9D,YAAYL,SAEvCtwD,EAAMvJ,IAAMtR,KAAKsR,IAAIuJ,EAAMvJ,IAAKukE,EAAOvkE,KACvCuJ,EAAM9G,IAAM/T,KAAK+T,IAAI8G,EAAM9G,IAAK8hE,EAAO9hE,KAE3C,CAMAw9D,cAAAA,GACE,OAAO,CACT,CAKAC,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,aACZ,OAAChlB,EAAA,OAAQ2kB,GAAU/5C,EACnB9gB,EAAS9B,KAAKkiE,UAAUzvD,GACxB40D,EAASvlE,EAAOmlE,QAChBl2E,EAAQq2E,GAAWC,GACrB,IAAMA,EAAOprE,MAAQ,KAAOorE,EAAOnrE,IAAM,IACzC,GAAKygE,EAAOsG,iBAAiBnhE,EAAO66D,EAAOzkB,OAE/C,MAAO,CACL3/B,MAAO,GAAKy/B,EAAOirB,iBAAiBnhE,EAAOk2C,EAAOE,OAClDnnD,QAEJ,CAEAguE,UAAAA,GACE/+D,KAAKy+D,qBAAsB,EAE3B1yD,MAAMgzD,aAEO/+D,KAAKg9D,YACb9wD,MAAQlM,KAAKs/D,aAAapzD,KACjC,CAEAiuD,MAAAA,CAAO1jE,GACL,MAAMmsB,EAAO5iB,KAAKg9D,YAClBh9D,KAAKylE,eAAe7iD,EAAKzjB,KAAM,EAAGyjB,EAAKzjB,KAAKhE,OAAQ1E,EACtD,CAEAgvE,cAAAA,CAAe4C,EAAMpsE,EAAO0U,EAAOla,GACjC,MAAM+9B,EAAiB,UAAT/9B,GACR,MAACgc,EAAOuqD,aAAa,OAACL,IAAW38D,KACjCgiB,EAAO26C,EAAO2L,eACdb,EAAa9K,EAAO4L,eACpBC,EAAQxoE,KAAKyoE,aACb,cAACnE,EAAa,eAAED,GAAkBrkE,KAAKwkE,kBAAkBvoE,EAAOxF,GAEtE,IAAK,IAAIgE,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,EAAOlW,IAAK,CAC1C,MAAMqH,EAAS9B,KAAKkiE,UAAUznE,GACxBiuE,EAAUl0C,GAASoc,EAAc9uC,EAAO66D,EAAOzkB,OAAS,CAACl2B,OAAMoP,KAAMpP,GAAQhiB,KAAK2oE,yBAAyBluE,GAC3GmuE,EAAU5oE,KAAK6oE,yBAAyBpuE,EAAG+tE,GAC3Ct8D,GAASpK,EAAOm7D,SAAW,CAAC,GAAGN,EAAOzkB,MAEtC5uB,EAAa,CACjBm+C,aACAzlD,KAAM0mD,EAAQ1mD,KACd2lD,oBAAqBz7D,GAASk7D,GAAWtlE,EAAOmlE,UAAax0D,IAAUvG,EAAMqxD,MAAQ9qD,IAAUvG,EAAMsxD,QACrG54D,EAAG6iE,EAAaiB,EAAQt3C,KAAOw3C,EAAQE,OACvCjkE,EAAG4iE,EAAamB,EAAQE,OAASJ,EAAQt3C,KACzC5+B,OAAQi1E,EAAamB,EAAQl4E,KAAOc,KAAKub,IAAI27D,EAAQh4E,MACrD6B,MAAOk1E,EAAaj2E,KAAKub,IAAI27D,EAAQh4E,MAAQk4E,EAAQl4E,MAGnD2zE,IACF/6C,EAAWrB,QAAUq8C,GAAiBtkE,KAAKujE,0BAA0B9oE,EAAG4tE,EAAK5tE,GAAGomD,OAAS,SAAWpqD,IAEtG,MAAMwxB,EAAUqB,EAAWrB,SAAWogD,EAAK5tE,GAAGwtB,QAC9Cq/C,GAAiBh+C,EAAYrB,EAAS/b,EAAOuG,GAC7Cu1D,GAAiB1+C,EAAYrB,EAASugD,EAAM35B,OAC5C7uC,KAAK4kE,cAAcyD,EAAK5tE,GAAIA,EAAG6uB,EAAY7yB,EAC7C,CACF,CASAsyE,UAAAA,CAAWxgE,EAAMi7D,GACf,MAAM,OAACxrB,GAAUh4C,KAAKg9D,YAChBnB,EAAW7jB,EAAO6kB,wBAAwB78D,KAAKm+D,OAClD3/C,QAAOoE,GAAQA,EAAKm6C,WAAW90C,QAAQ+gD,UACpC5M,EAAUpkB,EAAO/vB,QAAQm0C,QACzBE,EAAS,GAET2M,EAAYrmD,IAChB,MAAM9gB,EAAS8gB,EAAKm6C,WAAWmF,UAAUsB,GACnC7iE,EAAMmB,GAAUA,EAAO8gB,EAAK+5C,OAAOzkB,MAEzC,GAAItH,EAAcjwC,IAAQ4N,MAAM5N,GAC9B,OAAO,GAIX,IAAK,MAAMiiB,KAAQi5C,EACjB,SAAkBliE,IAAd6pE,IAA2ByF,EAASrmD,QASxB,IAAZw5C,IAAqD,IAAhCE,EAAOtgE,QAAQ4mB,EAAK1W,aAClCvS,IAAZyiE,QAAwCziE,IAAfipB,EAAK1W,QAC3BowD,EAAO9gE,KAAKonB,EAAK1W,OAEf0W,EAAKnQ,QAAUlK,GACjB,MAWJ,OAJK+zD,EAAOnhE,QACVmhE,EAAO9gE,UAAK7B,GAGP2iE,CACT,CAMA4M,cAAAA,CAAez2D,GACb,OAAOzS,KAAK+oE,gBAAWpvE,EAAW8Y,GAAOtX,MAC3C,CAUAguE,cAAAA,CAAen3B,EAAc39C,EAAMmvE,GACjC,MAAMlH,EAASt8D,KAAK+oE,WAAW/2B,EAAcwxB,GACvC/wD,OAAkB9Y,IAAVtF,EACVioE,EAAOtgE,QAAQ3H,IACd,EAEL,OAAmB,IAAXoe,EACJ6pD,EAAOnhE,OAAS,EAChBsX,CACN,CAKAg2D,SAAAA,GACE,MAAMvlD,EAAOljB,KAAKioB,QACZrF,EAAO5iB,KAAKg9D,YACZhlB,EAASp1B,EAAKo1B,OACdoxB,EAAS,GACf,IAAI3uE,EAAGo3C,EAEP,IAAKp3C,EAAI,EAAGo3C,EAAOjvB,EAAKzjB,KAAKhE,OAAQV,EAAIo3C,IAAQp3C,EAC/C2uE,EAAO5tE,KAAKw8C,EAAOM,iBAAiBt4C,KAAKkiE,UAAUznE,GAAGu9C,EAAOE,MAAOz9C,IAGtE,MAAM4uE,EAAenmD,EAAKmmD,aAG1B,MAAO,CACLvmE,IAHUumE,GAAgBlD,GAAqBvjD,GAI/CwmD,SACAntE,MAAO+7C,EAAOsxB,YACdptE,IAAK87C,EAAOuxB,UACZC,WAAYxpE,KAAKkpE,iBACjB5pB,MAAOtH,EACPgxB,QAAS9lD,EAAK8lD,QAEdn6B,MAAOw6B,EAAe,EAAInmD,EAAKumD,mBAAqBvmD,EAAKwmD,cAE7D,CAMAf,wBAAAA,CAAyBl2D,GACvB,MAAOuqD,aAAa,OAACL,EAAA,SAAQsC,EAAUxsD,MAAOu/B,GAAe/pB,SAAUjG,KAAM2nD,EAAS,aAAEC,IAAiB5pE,KACnG6pE,EAAaF,GAAa,EAC1B7nE,EAAS9B,KAAKkiE,UAAUzvD,GACxB40D,EAASvlE,EAAOmlE,QAChB6C,EAAW1C,GAAWC,GAC5B,IAGIj2C,EAAM1gC,EAHNK,EAAQ+Q,EAAO66D,EAAOzkB,MACtBj8C,EAAQ,EACRd,EAAS8jE,EAAWj/D,KAAK+7D,WAAWY,EAAQ76D,EAAQm9D,GAAYluE,EAGhEoK,IAAWpK,IACbkL,EAAQd,EAASpK,EACjBoK,EAASpK,GAGP+4E,IACF/4E,EAAQs2E,EAAON,SACf5rE,EAASksE,EAAOL,OAASK,EAAON,SAElB,IAAVh2E,GAAegjD,GAAKhjD,KAAWgjD,GAAKszB,EAAOL,UAC7C/qE,EAAQ,GAEVA,GAASlL,GAGX,MAAM81E,EAAcj2B,EAAc+4B,IAAeG,EAAuB7tE,EAAZ0tE,EAC5D,IAAI3nD,EAAO26C,EAAOrkB,iBAAiBuuB,GAWnC,GAREz1C,EADEpxB,KAAK28C,MAAMotB,kBAAkBt3D,GACxBkqD,EAAOrkB,iBAAiBr8C,EAAQd,GAGhC6mB,EAGTtxB,EAAO0gC,EAAOpP,EAEVxwB,KAAKub,IAAIrc,GAAQk5E,EAAc,CACjCl5E,EArZN,SAAiBA,EAAMisE,EAAQkN,GAC7B,OAAa,IAATn5E,EACKqjD,GAAKrjD,IAENisE,EAAO4L,eAAiB,GAAK,IAAM5L,EAAO75D,KAAO+mE,EAAa,GAAK,EAC7E,CAgZaG,CAAQt5E,EAAMisE,EAAQkN,GAAcD,EACvC74E,IAAU84E,IACZ7nD,GAAQtxB,EAAO,GAEjB,MAAMu5E,EAAatN,EAAOuN,mBAAmB,GACvCC,EAAWxN,EAAOuN,mBAAmB,GACrCpnE,EAAMtR,KAAKsR,IAAImnE,EAAYE,GAC3B5kE,EAAM/T,KAAK+T,IAAI0kE,EAAYE,GACjCnoD,EAAOxwB,KAAK+T,IAAI/T,KAAKsR,IAAIkf,EAAMzc,GAAMzC,GACrCsuB,EAAOpP,EAAOtxB,EAEVuuE,IAAa6K,IAEfhoE,EAAOm7D,QAAQN,EAAOzkB,MAAMulB,cAAczrB,GAAgB2qB,EAAOyN,iBAAiBh5C,GAAQurC,EAAOyN,iBAAiBpoD,IAItH,GAAIA,IAAS26C,EAAOrkB,iBAAiBuxB,GAAa,CAChD,MAAMQ,EAAWt2B,GAAKrjD,GAAQisE,EAAO2N,qBAAqBT,GAAc,EACxE7nD,GAAQqoD,EACR35E,GAAQ25E,EAGV,MAAO,CACL35E,OACAsxB,OACAoP,OACA03C,OAAQ13C,EAAO1gC,EAAO,EAE1B,CAKAm4E,wBAAAA,CAAyBp2D,EAAO+1D,GAC9B,MAAMlpB,EAAQkpB,EAAMlpB,MACdr3B,EAAUjoB,KAAKioB,QACfghD,EAAWhhD,EAAQghD,SACnBsB,EAAkBt5B,EAAehpB,EAAQsiD,gBAAiBt9D,KAChE,IAAI67D,EAAQp4E,EACZ,GAAI83E,EAAMQ,QAAS,CACjB,MAAMQ,EAAaP,EAAWjpE,KAAKkpE,eAAez2D,GAAS+1D,EAAMgB,WAC3Dn9D,EAAiC,SAAzB4b,EAAQohD,aAphB5B,SAAmC52D,EAAO+1D,EAAOvgD,EAASuhD,GACxD,MAAMJ,EAASZ,EAAMY,OACf5C,EAAO4C,EAAO32D,GACpB,IAAIoX,EAAOpX,EAAQ,EAAI22D,EAAO32D,EAAQ,GAAK,KACvCyN,EAAOzN,EAAQ22D,EAAOjuE,OAAS,EAAIiuE,EAAO32D,EAAQ,GAAK,KAC3D,MAAM+3D,EAAUviD,EAAQwhD,mBAEX,OAAT5/C,IAGFA,EAAO28C,GAAiB,OAATtmD,EAAgBsoD,EAAMtsE,IAAMssE,EAAMvsE,MAAQikB,EAAOsmD,IAGrD,OAATtmD,IAEFA,EAAOsmD,EAAOA,EAAO38C,GAGvB,MAAM5tB,EAAQuqE,GAAQA,EAAOh1E,KAAKsR,IAAI+mB,EAAM3J,IAAS,EAAIsqD,EAGzD,MAAO,CACL91C,MAHWljC,KAAKub,IAAImT,EAAO2J,GAAQ,EAAI2gD,EAGzBhB,EACd36B,MAAO5mB,EAAQyhD,cACfztE,QAEJ,CA2fUwuE,CAA0Bh4D,EAAO+1D,EAAOvgD,EAASuhD,GAjjB3D,SAAkC/2D,EAAO+1D,EAAOvgD,EAASuhD,GACvD,MAAM34E,EAAYo3B,EAAQohD,aAC1B,IAAI34E,EAAMm+C,EAaV,OAXI+B,EAAc//C,IAChBH,EAAO83E,EAAM1lE,IAAMmlB,EAAQwhD,mBAC3B56B,EAAQ5mB,EAAQyhD,gBAKhBh5E,EAAOG,EAAY24E,EACnB36B,EAAQ,GAGH,CACLna,MAAOhkC,EAAO84E,EACd36B,QACA5yC,MAAOusE,EAAMY,OAAO32D,GAAU/hB,EAAO,EAEzC,CA8hBUg6E,CAAyBj4D,EAAO+1D,EAAOvgD,EAASuhD,GAE9CmB,EAAa3qE,KAAKmpE,eAAenpE,KAAKyS,MAAOzS,KAAKg9D,YAAY9wD,MAAO+8D,EAAWx2D,OAAQ9Y,GAC9FmvE,EAASz8D,EAAMpQ,MAASoQ,EAAMqoB,MAAQi2C,EAAet+D,EAAMqoB,MAAQ,EACnEhkC,EAAOc,KAAKsR,IAAIynE,EAAiBl+D,EAAMqoB,MAAQroB,EAAMwiC,YAGrDi6B,EAASxpB,EAAMhH,iBAAiBt4C,KAAKkiE,UAAUzvD,GAAO6sC,EAAMpH,MAAOzlC,GACnE/hB,EAAOc,KAAKsR,IAAIynE,EAAiB/B,EAAM1lE,IAAM0lE,EAAM35B,OAGrD,MAAO,CACL7sB,KAAM8mD,EAASp4E,EAAO,EACtB0gC,KAAM03C,EAASp4E,EAAO,EACtBo4E,SACAp4E,OAEJ,CAEAwnE,IAAAA,GACE,MAAMt1C,EAAO5iB,KAAKg9D,YACZL,EAAS/5C,EAAK+5C,OACdiO,EAAQhoD,EAAKzjB,KACb0yC,EAAO+4B,EAAMzvE,OACnB,IAAIV,EAAI,EAER,KAAOA,EAAIo3C,IAAQp3C,EACsB,OAAnCuF,KAAKkiE,UAAUznE,GAAGkiE,EAAOzkB,OAC3B0yB,EAAMnwE,GAAGy9D,KAAKl4D,KAAK+hD,KAGzB,GAEFpkC,EAAAA,EAAAA,GA9YqBuqD,GAAsB,KAE7B,QAAMvqD,EAAAA,EAAAA,GAFCuqD,GAAsB,WAOvB,CAChBrJ,oBAAoB,EACpBC,gBAAiB,MAEjB2K,mBAAoB,GACpBC,cAAe,GACfV,SAAS,EAEThoB,WAAY,CACVxF,QAAS,CACPv8C,KAAM,SACNqqB,WAAY,CAAC,IAAK,IAAK,OAAQ,QAAS,eAG5C3L,EAAAA,EAAAA,GArBiBuqD,GAAsB,YA0BtB,CACjB3oB,OAAQ,CACNsrB,QAAS,CACP5rE,KAAM,WACNyC,QAAQ,EACR+/C,KAAM,CACJ//C,QAAQ,IAGZopE,QAAS,CACP7rE,KAAM,SACNoiD,aAAa,MCnSN,MAAM0pB,WAAyB/M,GAiC5Ce,UAAAA,GACE/+D,KAAKy+D,qBAAsB,EAC3B1yD,MAAMgzD,YACR,CAMA4C,kBAAAA,CAAmB/+C,EAAMzjB,EAAMlD,EAAO0U,GACpC,MAAM7O,EAASiK,MAAM41D,mBAAmB/+C,EAAMzjB,EAAMlD,EAAO0U,GAC3D,IAAK,IAAIlW,EAAI,EAAGA,EAAIqH,EAAO3G,OAAQV,IACjCqH,EAAOrH,GAAGwsE,QAAUjnE,KAAKujE,0BAA0B9oE,EAAIwB,GAAOkpD,OAEhE,OAAOrjD,CACT,CAMA2/D,cAAAA,CAAe7+C,EAAMzjB,EAAMlD,EAAO0U,GAChC,MAAM7O,EAASiK,MAAM01D,eAAe7+C,EAAMzjB,EAAMlD,EAAO0U,GACvD,IAAK,IAAIlW,EAAI,EAAGA,EAAIqH,EAAO3G,OAAQV,IAAK,CACtC,MAAMgmB,EAAOthB,EAAKlD,EAAQxB,GAC1BqH,EAAOrH,GAAGwsE,QAAUh2B,EAAexwB,EAAK,GAAIzgB,KAAKujE,0BAA0B9oE,EAAIwB,GAAOkpD,OACxF,CACA,OAAOrjD,CACT,CAMA4/D,eAAAA,CAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACjC,MAAM7O,EAASiK,MAAM21D,gBAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACxD,IAAK,IAAIlW,EAAI,EAAGA,EAAIqH,EAAO3G,OAAQV,IAAK,CACtC,MAAMgmB,EAAOthB,EAAKlD,EAAQxB,GAC1BqH,EAAOrH,GAAGwsE,QAAUh2B,EAAexwB,GAAQA,EAAKttB,IAAMstB,EAAKttB,EAAG6M,KAAKujE,0BAA0B9oE,EAAIwB,GAAOkpD,OAC1G,CACA,OAAOrjD,CACT,CAKAihE,cAAAA,GACE,MAAM5jE,EAAOa,KAAKg9D,YAAY79D,KAE9B,IAAIoG,EAAM,EACV,IAAK,IAAI9K,EAAI0E,EAAKhE,OAAS,EAAGV,GAAK,IAAKA,EACtC8K,EAAM/T,KAAK+T,IAAIA,EAAKpG,EAAK1E,GAAG/J,KAAKsP,KAAKujE,0BAA0B9oE,IAAM,GAExE,OAAO8K,EAAM,GAAKA,CACpB,CAKAy9D,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,YACZ6E,EAAS7hE,KAAK28C,MAAMx9C,KAAK0iE,QAAU,IACnC,OAACrpB,EAAA,OAAQC,GAAU71B,EACnB9gB,EAAS9B,KAAKkiE,UAAUzvD,GACxB7N,EAAI4zC,EAAOyqB,iBAAiBnhE,EAAO8C,GACnCC,EAAI4zC,EAAOwqB,iBAAiBnhE,EAAO+C,GACnC1R,EAAI2O,EAAOmlE,QAEjB,MAAO,CACL1uD,MAAOspD,EAAOpvD,IAAU,GACxB1hB,MAAO,IAAM6T,EAAI,KAAOC,GAAK1R,EAAI,KAAOA,EAAI,IAAM,IAEtD,CAEAgnE,MAAAA,CAAO1jE,GACL,MAAMmhD,EAAS53C,KAAKg9D,YAAY79D,KAGhCa,KAAKylE,eAAe7tB,EAAQ,EAAGA,EAAOz8C,OAAQ1E,EAChD,CAEAgvE,cAAAA,CAAe7tB,EAAQ37C,EAAO0U,EAAOla,GACnC,MAAM+9B,EAAiB,UAAT/9B,GACR,OAACuhD,EAAA,OAAQ2kB,GAAU38D,KAAKg9D,aACxB,cAACsH,EAAa,eAAED,GAAkBrkE,KAAKwkE,kBAAkBvoE,EAAOxF,GAChEymE,EAAQllB,EAAOE,KACfilB,EAAQR,EAAOzkB,KAErB,IAAK,IAAIz9C,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,EAAOlW,IAAK,CAC1C,MAAMwrD,EAAQrO,EAAOn9C,GACfqH,GAAU0yB,GAASx0B,KAAKkiE,UAAUznE,GAClC6uB,EAAa,CAAC,EACd8lC,EAAS9lC,EAAW4zC,GAAS1oC,EAAQwjB,EAAOkyB,mBAAmB,IAAOlyB,EAAOM,iBAAiBx2C,EAAOo7D,IACrG7N,EAAS/lC,EAAW6zC,GAAS3oC,EAAQmoC,EAAO2L,eAAiB3L,EAAOrkB,iBAAiBx2C,EAAOq7D,IAElG7zC,EAAWokC,KAAOn/C,MAAM6gD,IAAW7gD,MAAM8gD,GAErCgV,IACF/6C,EAAWrB,QAAUq8C,GAAiBtkE,KAAKujE,0BAA0B9oE,EAAGwrD,EAAMpF,OAAS,SAAWpqD,GAE9F+9B,IACFlL,EAAWrB,QAAQk9B,OAAS,IAIhCnlD,KAAK4kE,cAAc3e,EAAOxrD,EAAG6uB,EAAY7yB,EAC3C,CACF,CAOA8sE,yBAAAA,CAA0B9wD,EAAOhc,GAC/B,MAAMqL,EAAS9B,KAAKkiE,UAAUzvD,GAC9B,IAAI8pC,EAASxwC,MAAMw3D,0BAA0B9wD,EAAOhc,GAGhD8lD,EAAO0e,UACT1e,EAASt/C,OAAO4hB,OAAO,CAAC,EAAG09B,EAAQ,CAAC0e,SAAS,KAI/C,MAAM9V,EAAS5I,EAAO4I,OAMtB,MALa,WAAT1uD,IACF8lD,EAAO4I,OAAS,GAElB5I,EAAO4I,QAAUlU,EAAenvC,GAAUA,EAAOmlE,QAAS9hB,GAEnD5I,CACT,GACF5+B,EAAAA,EAAAA,GArKqBotD,GAAyB,KAEhC,WAASptD,EAAAA,EAAAA,GAFFotD,GAAyB,WAO1B,CAChBlM,oBAAoB,EACpBC,gBAAiB,QAEjB9d,WAAY,CACVxF,QAAS,CACPv8C,KAAM,SACNqqB,WAAY,CAAC,IAAK,IAAK,cAAe,eAG1C3L,EAAAA,EAAAA,GAjBiBotD,GAAyB,YAsBzB,CACjBxrB,OAAQ,CACN36C,EAAG,CACD3F,KAAM,UAER4F,EAAG,CACD5F,KAAM,aCKC,MAAM+rE,WAA2BhN,GA0F9ClyD,WAAAA,CAAY6wC,EAAO3K,GACjBjmC,MAAM4wC,EAAO3K,GAEbhyC,KAAKy+D,qBAAsB,EAC3Bz+D,KAAKirE,iBAActxE,EACnBqG,KAAKkrE,iBAAcvxE,EACnBqG,KAAK2xD,aAAUh4D,EACfqG,KAAK4xD,aAAUj4D,CACjB,CAEAqlE,UAAAA,GAAc,CAKdzR,KAAAA,CAAMtxD,EAAO0U,GACX,MAAMxR,EAAOa,KAAKs/D,aAAangE,KACzByjB,EAAO5iB,KAAKg9D,YAElB,IAAsB,IAAlBh9D,KAAKstD,SACP1qC,EAAKq1B,QAAU94C,MACV,CACL,IAOI1E,EAAGo3C,EAPHs5B,EAAU1wE,IAAO0E,EAAK1E,GAE1B,GAAIo2C,EAAS1xC,EAAKlD,IAAS,CACzB,MAAM,IAAC6W,EAAM,SAAW9S,KAAKstD,SAC7B6d,EAAU1wE,IAAOo4C,GAAiB1zC,EAAK1E,GAAIqY,GAI7C,IAAKrY,EAAIwB,EAAO41C,EAAO51C,EAAQ0U,EAAOlW,EAAIo3C,IAAQp3C,EAChDmoB,EAAKq1B,QAAQx9C,GAAK0wE,EAAO1wE,GAG/B,CAKA2wE,YAAAA,GACE,OAAO52B,GAAUx0C,KAAKioB,QAAQi9B,SAAW,GAC3C,CAKAmmB,iBAAAA,GACE,OAAO72B,GAAUx0C,KAAKioB,QAAQ12B,cAChC,CAMA+5E,mBAAAA,GACE,IAAIxoE,EAAMwwC,GACN/tC,GAAO+tC,GAEX,IAAK,IAAI74C,EAAI,EAAGA,EAAIuF,KAAK28C,MAAMx9C,KAAK4+C,SAAS5iD,SAAUV,EACrD,GAAIuF,KAAK28C,MAAM4uB,iBAAiB9wE,IAAMuF,KAAK28C,MAAMyjB,eAAe3lE,GAAGwE,OAASe,KAAKm+D,MAAO,CACtF,MAAMpB,EAAa/8D,KAAK28C,MAAMyjB,eAAe3lE,GAAGsiE,WAC1C7X,EAAW6X,EAAWqO,eACtB75E,EAAgBwrE,EAAWsO,oBAEjCvoE,EAAMtR,KAAKsR,IAAIA,EAAKoiD,GACpB3/C,EAAM/T,KAAK+T,IAAIA,EAAK2/C,EAAW3zD,GAInC,MAAO,CACL2zD,SAAUpiD,EACVvR,cAAegU,EAAMzC,EAEzB,CAKAq3D,MAAAA,CAAO1jE,GACL,MAAMkmD,EAAQ38C,KAAK28C,OACb,UAAC0mB,GAAa1mB,EACd/5B,EAAO5iB,KAAKg9D,YACZwO,EAAO5oD,EAAKzjB,KACZssE,EAAUzrE,KAAK0rE,oBAAsB1rE,KAAK2rE,aAAaH,GAAQxrE,KAAKioB,QAAQwjD,QAC5EG,EAAUp6E,KAAK+T,KAAK/T,KAAKsR,IAAIugE,EAAU9wE,MAAO8wE,EAAU7wE,QAAUi5E,GAAW,EAAG,GAChFI,EAASr6E,KAAKsR,K1B9HK/R,E0B8HYiP,KAAKioB,QAAQ4jD,O1B9HD16B,E0B8HSy6B,E1B7H3C,kBAAV76E,GAAsBA,EAAMqgD,SAAS,KAC1CC,WAAWtgD,GAAS,KACjBA,EAAQogD,G0B2HyD,G1B9H5C26B,IAAC/6E,EAAwBogD,E0B+HjD,MAAM46B,EAAc/rE,KAAKgsE,eAAehsE,KAAKyS,QAKvC,cAAClhB,EAAA,SAAe2zD,GAAYllD,KAAKsrE,uBACjC,OAACW,EAAA,OAAQC,EAAA,QAAQva,EAAA,QAASC,GAjNpC,SAA2B1M,EAAU3zD,EAAes6E,GAClD,IAAII,EAAS,EACTC,EAAS,EACTva,EAAU,EACVC,EAAU,EAEd,GAAIrgE,EAAgB+hD,GAAK,CACvB,MAAM64B,EAAajnB,EACbknB,EAAWD,EAAa56E,EACxB86E,EAAS76E,KAAK4oD,IAAI+xB,GAClBG,EAAS96E,KAAK2nD,IAAIgzB,GAClBI,EAAO/6E,KAAK4oD,IAAIgyB,GAChBI,EAAOh7E,KAAK2nD,IAAIizB,GAChBK,EAAUA,CAACr3B,EAAOzwC,EAAG/F,IAAMg3C,GAAcR,EAAO+2B,EAAYC,GAAU,GAAQ,EAAI56E,KAAK+T,IAAIZ,EAAGA,EAAIknE,EAAQjtE,EAAGA,EAAIitE,GACjHa,EAAUA,CAACt3B,EAAOzwC,EAAG/F,IAAMg3C,GAAcR,EAAO+2B,EAAYC,GAAU,IAAS,EAAI56E,KAAKsR,IAAI6B,EAAGA,EAAIknE,EAAQjtE,EAAGA,EAAIitE,GAClHc,EAAOF,EAAQ,EAAGJ,EAAQE,GAC1BK,EAAOH,EAAQ94B,GAAS24B,EAAQE,GAChCK,EAAOH,EAAQj7E,GAAI46E,EAAQE,GAC3BO,EAAOJ,EAAQj7E,GAAKkiD,GAAS24B,EAAQE,GAC3CP,GAAUU,EAAOE,GAAQ,EACzBX,GAAUU,EAAOE,GAAQ,EACzBnb,IAAYgb,EAAOE,GAAQ,EAC3Bjb,IAAYgb,EAAOE,GAAQ,EAE7B,MAAO,CAACb,SAAQC,SAAQva,UAASC,UACnC,CAwL+Cmb,CAAkB7nB,EAAU3zD,EAAes6E,GAChFvjB,GAAY+a,EAAU9wE,MAAQk5E,GAAWQ,EACzC1Z,GAAa8Q,EAAU7wE,OAASi5E,GAAWS,EAC3Cc,EAAYx7E,KAAK+T,IAAI/T,KAAKsR,IAAIwlD,EAAUiK,GAAa,EAAG,GACxD2Y,EAAch6B,EAAYlxC,KAAKioB,QAAQk9B,OAAQ6nB,GAE/CC,GAAgB/B,EADF15E,KAAK+T,IAAI2lE,EAAcW,EAAQ,IACA7rE,KAAKktE,gCACxDltE,KAAK2xD,QAAUA,EAAUuZ,EACzBlrE,KAAK4xD,QAAUA,EAAUsZ,EAEzBtoD,EAAKqe,MAAQjhC,KAAKmtE,iBAElBntE,KAAKkrE,YAAcA,EAAc+B,EAAejtE,KAAKotE,qBAAqBptE,KAAKyS,OAC/EzS,KAAKirE,YAAcz5E,KAAK+T,IAAIvF,KAAKkrE,YAAc+B,EAAelB,EAAa,GAE3E/rE,KAAKylE,eAAe+F,EAAM,EAAGA,EAAKrwE,OAAQ1E,EAC5C,CAKA42E,cAAAA,CAAe5yE,EAAG+5B,GAChB,MAAMtR,EAAOljB,KAAKioB,QACZrF,EAAO5iB,KAAKg9D,YACZzrE,EAAgByO,KAAKqrE,oBAC3B,OAAI72C,GAAUtR,EAAKtvB,UAAU05E,gBAAmBttE,KAAK28C,MAAMotB,kBAAkBtvE,IAA0B,OAApBmoB,EAAKq1B,QAAQx9C,IAAemoB,EAAKzjB,KAAK1E,GAAGid,OACnH,EAEF1X,KAAKutE,uBAAuB3qD,EAAKq1B,QAAQx9C,GAAKlJ,EAAgB+hD,GACvE,CAEAmyB,cAAAA,CAAe+F,EAAMvvE,EAAO0U,EAAOla,GACjC,MAAM+9B,EAAiB,UAAT/9B,EACRkmD,EAAQ38C,KAAK28C,MACb0mB,EAAY1mB,EAAM0mB,UAElBmK,EADO7wB,EAAM10B,QACQr0B,UACrB65E,GAAWpK,EAAU7rE,KAAO6rE,EAAU3rE,OAAS,EAC/Cg2E,GAAWrK,EAAU5rE,IAAM4rE,EAAU1rE,QAAU,EAC/Cg2E,EAAen5C,GAASg5C,EAAcG,aACtC1C,EAAc0C,EAAe,EAAI3tE,KAAKirE,YACtCC,EAAcyC,EAAe,EAAI3tE,KAAKkrE,aACtC,cAAC5G,EAAa,eAAED,GAAkBrkE,KAAKwkE,kBAAkBvoE,EAAOxF,GACtE,IACIgE,EADA0xE,EAAansE,KAAKorE,eAGtB,IAAK3wE,EAAI,EAAGA,EAAIwB,IAASxB,EACvB0xE,GAAcnsE,KAAKqtE,eAAe5yE,EAAG+5B,GAGvC,IAAK/5B,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,IAASlW,EAAG,CACtC,MAAMlJ,EAAgByO,KAAKqtE,eAAe5yE,EAAG+5B,GACvCixB,EAAM+lB,EAAK/wE,GACX6uB,EAAa,CACjB1kB,EAAG6oE,EAAUztE,KAAK2xD,QAClB9sD,EAAG6oE,EAAU1tE,KAAK4xD,QAClBua,aACAC,SAAUD,EAAa56E,EACvBA,gBACA25E,cACAD,eAEE5G,IACF/6C,EAAWrB,QAAUq8C,GAAiBtkE,KAAKujE,0BAA0B9oE,EAAGgrD,EAAI5E,OAAS,SAAWpqD,IAElG01E,GAAc56E,EAEdyO,KAAK4kE,cAAcnf,EAAKhrD,EAAG6uB,EAAY7yB,EACzC,CACF,CAEA02E,cAAAA,GACE,MAAMvqD,EAAO5iB,KAAKg9D,YACZ4Q,EAAWhrD,EAAKzjB,KACtB,IACI1E,EADAwmC,EAAQ,EAGZ,IAAKxmC,EAAI,EAAGA,EAAImzE,EAASzyE,OAAQV,IAAK,CACpC,MAAM1J,EAAQ6xB,EAAKq1B,QAAQx9C,GACb,OAAV1J,GAAmBwd,MAAMxd,KAAUiP,KAAK28C,MAAMotB,kBAAkBtvE,IAAOmzE,EAASnzE,GAAGid,SACrFupB,GAASzvC,KAAKub,IAAIhc,GAEtB,CAEA,OAAOkwC,CACT,CAEAssC,sBAAAA,CAAuBx8E,GACrB,MAAMkwC,EAAQjhC,KAAKg9D,YAAY/7B,MAC/B,OAAIA,EAAQ,IAAM1yB,MAAMxd,GACfuiD,IAAO9hD,KAAKub,IAAIhc,GAASkwC,GAE3B,CACT,CAEA+hC,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,YACZrgB,EAAQ38C,KAAK28C,MACbklB,EAASllB,EAAMx9C,KAAK0iE,QAAU,GAC9B9wE,EAAQ6qD,GAAah5B,EAAKq1B,QAAQxlC,GAAQkqC,EAAM10B,QAAQ4zB,QAE9D,MAAO,CACLtjC,MAAOspD,EAAOpvD,IAAU,GACxB1hB,QAEJ,CAEA26E,iBAAAA,CAAkBF,GAChB,IAAIjmE,EAAM,EACV,MAAMo3C,EAAQ38C,KAAK28C,MACnB,IAAIliD,EAAGo3C,EAAMjvB,EAAMm6C,EAAY90C,EAE/B,IAAKujD,EAEH,IAAK/wE,EAAI,EAAGo3C,EAAO8K,EAAMx9C,KAAK4+C,SAAS5iD,OAAQV,EAAIo3C,IAAQp3C,EACzD,GAAIkiD,EAAM4uB,iBAAiB9wE,GAAI,CAC7BmoB,EAAO+5B,EAAMyjB,eAAe3lE,GAC5B+wE,EAAO5oD,EAAKzjB,KACZ49D,EAAan6C,EAAKm6C,WAClB,MAKN,IAAKyO,EACH,OAAO,EAGT,IAAK/wE,EAAI,EAAGo3C,EAAO25B,EAAKrwE,OAAQV,EAAIo3C,IAAQp3C,EAC1CwtB,EAAU80C,EAAWwG,0BAA0B9oE,GACnB,UAAxBwtB,EAAQ4lD,cACVtoE,EAAM/T,KAAK+T,IAAIA,EAAK0iB,EAAQ89B,aAAe,EAAG99B,EAAQ6lD,kBAAoB,IAG9E,OAAOvoE,CACT,CAEAomE,YAAAA,CAAaH,GACX,IAAIjmE,EAAM,EAEV,IAAK,IAAI9K,EAAI,EAAGo3C,EAAO25B,EAAKrwE,OAAQV,EAAIo3C,IAAQp3C,EAAG,CACjD,MAAMwtB,EAAUjoB,KAAKujE,0BAA0B9oE,GAC/C8K,EAAM/T,KAAK+T,IAAIA,EAAK0iB,EAAQvmB,QAAU,EAAGumB,EAAQ8lD,aAAe,EAClE,CACA,OAAOxoE,CACT,CAMA6nE,oBAAAA,CAAqBp7B,GACnB,IAAIg8B,EAAmB,EAEvB,IAAK,IAAIvzE,EAAI,EAAGA,EAAIu3C,IAAgBv3C,EAC9BuF,KAAK28C,MAAM4uB,iBAAiB9wE,KAC9BuzE,GAAoBhuE,KAAKgsE,eAAevxE,IAI5C,OAAOuzE,CACT,CAKAhC,cAAAA,CAAeh6B,GACb,OAAOxgD,KAAK+T,IAAI0rC,EAAejxC,KAAK28C,MAAMx9C,KAAK4+C,SAAS/L,GAAcvC,OAAQ,GAAI,EACpF,CAMAy9B,6BAAAA,GACE,OAAOltE,KAAKotE,qBAAqBptE,KAAK28C,MAAMx9C,KAAK4+C,SAAS5iD,SAAW,CACvE,GACFwiB,EAAAA,EAAAA,GAvWqBqtD,GAA2B,KAElC,aAAWrtD,EAAAA,EAAAA,GAFJqtD,GAA2B,WAO5B,CAChBnM,oBAAoB,EACpBC,gBAAiB,MACjBlrE,UAAW,CAET05E,eAAe,EAEfK,cAAc,GAEhB3sB,WAAY,CACVxF,QAAS,CACPv8C,KAAM,SACNqqB,WAAY,CAAC,gBAAiB,WAAY,cAAe,cAAe,aAAc,IAAK,IAAK,SAAU,cAAe,aAI7HuiD,OAAQ,MAGR3mB,SAAU,EAGV3zD,cAAe,IAGf4zD,OAAQ,OAGRsmB,QAAS,EAET7sB,UAAW,OACXjhC,EAAAA,EAAAA,GAtCiBqtD,GAA2B,cAwCzB,CACnB1qB,YAAcjsD,GAAkB,YAATA,EACvBmsD,WAAansD,GAAkB,YAATA,IAAuBA,EAAKksD,WAAW,gBAAkBlsD,EAAKksD,WAAW,sBAC/F5iC,EAAAA,EAAAA,GA3CiBqtD,GAA2B,YAgD3B,CACjB3Y,YAAa,EAGbjT,QAAS,CACP6uB,OAAQ,CACNpM,OAAQ,CACNqM,cAAAA,CAAevxB,GACb,MAAMx9C,EAAOw9C,EAAMx9C,KACnB,GAAIA,EAAK0iE,OAAO1mE,QAAUgE,EAAK4+C,SAAS5iD,OAAQ,CAC9C,MAAO0mE,QAAQ,WAAC5c,EAAA,MAAY30D,IAAUqsD,EAAMsxB,OAAOhmD,QAEnD,OAAO9oB,EAAK0iE,OAAOnjD,KAAI,CAACnG,EAAO9d,KAC7B,MACM9J,EADOgsD,EAAMyjB,eAAe,GACfrD,WAAWnJ,SAASn5D,GAEvC,MAAO,CACL0wB,KAAM5S,EACNkvC,UAAW92D,EAAM2G,gBACjBkwD,YAAa72D,EAAMmtD,YACnBqwB,UAAW79E,EACXoxD,UAAW/wD,EAAMo1D,YACjBd,WAAYA,EACZvtC,QAASilC,EAAMotB,kBAAkBtvE,GAGjCgY,MAAOhY,EACR,IAGL,MAAO,EACT,GAGFykD,OAAAA,CAAQl7C,EAAGoqE,EAAYH,GACrBA,EAAOtxB,MAAM0xB,qBAAqBD,EAAW37D,OAC7Cw7D,EAAOtxB,MAAMwd,QACf,MCpHO,MAAMmU,WAAuBtQ,GA6B1Ce,UAAAA,GACE/+D,KAAKy+D,qBAAsB,EAC3Bz+D,KAAK0+D,oBAAqB,EAC1B3yD,MAAMgzD,YACR,CAEA5E,MAAAA,CAAO1jE,GACL,MAAMmsB,EAAO5iB,KAAKg9D,aACXqC,QAAStY,EAAM5nD,KAAMy4C,EAAS,GAAE,SAAE22B,GAAY3rD,EAE/Ci1B,EAAqB73C,KAAK28C,MAAM4nB,oBACtC,IAAI,MAACtoE,EAAA,MAAO0U,GAASgnC,GAAiC/0B,EAAMg1B,EAAQC,GAEpE73C,KAAKu+D,WAAatiE,EAClB+D,KAAKw+D,WAAa7tD,EAEd4nC,GAAoB31B,KACtB3mB,EAAQ,EACR0U,EAAQinC,EAAOz8C,QAIjB4rD,EAAKoP,OAASn2D,KAAK28C,MACnBoK,EAAKuP,cAAgBt2D,KAAKyS,MAC1Bs0C,EAAKynB,aAAeD,EAASC,WAC7BznB,EAAKnP,OAASA,EAEd,MAAM3vB,EAAUjoB,KAAKsjE,6BAA6B7sE,GAC7CuJ,KAAKioB,QAAQu3B,WAChBv3B,EAAQ89B,YAAc,GAExB99B,EAAQotC,QAAUr1D,KAAKioB,QAAQotC,QAC/Br1D,KAAK4kE,cAAc7d,OAAMptD,EAAW,CAClC80E,UAAW52B,EACX5vB,WACCxxB,GAGHuJ,KAAKylE,eAAe7tB,EAAQ37C,EAAO0U,EAAOla,EAC5C,CAEAgvE,cAAAA,CAAe7tB,EAAQ37C,EAAO0U,EAAOla,GACnC,MAAM+9B,EAAiB,UAAT/9B,GACR,OAACuhD,EAAA,OAAQ2kB,EAAA,SAAQsC,EAAA,SAAUsP,GAAYvuE,KAAKg9D,aAC5C,cAACsH,EAAa,eAAED,GAAkBrkE,KAAKwkE,kBAAkBvoE,EAAOxF,GAChEymE,EAAQllB,EAAOE,KACfilB,EAAQR,EAAOzkB,MACf,SAACyX,EAAA,QAAU0F,GAAWr1D,KAAKioB,QAC3BymD,EAAep6B,GAASqb,GAAYA,EAAWhuD,OAAO8xC,kBACtDk7B,EAAe3uE,KAAK28C,MAAM4nB,qBAAuB/vC,GAAkB,SAAT/9B,EAC1DyF,EAAMD,EAAQ0U,EACdi+D,EAAch3B,EAAOz8C,OAC3B,IAAI0zE,EAAa5yE,EAAQ,GAAK+D,KAAKkiE,UAAUjmE,EAAQ,GAErD,IAAK,IAAIxB,EAAI,EAAGA,EAAIm0E,IAAen0E,EAAG,CACpC,MAAMwrD,EAAQrO,EAAOn9C,GACf6uB,EAAaqlD,EAAe1oB,EAAQ,GAE1C,GAAIxrD,EAAIwB,GAASxB,GAAKyB,EAAK,CACzBotB,EAAWokC,MAAO,EAClB,SAGF,MAAM5rD,EAAS9B,KAAKkiE,UAAUznE,GACxBq0E,EAAWl+B,EAAc9uC,EAAOq7D,IAChC/N,EAAS9lC,EAAW4zC,GAASllB,EAAOM,iBAAiBx2C,EAAOo7D,GAAQziE,GACpE40D,EAAS/lC,EAAW6zC,GAAS3oC,GAASs6C,EAAWnS,EAAO2L,eAAiB3L,EAAOrkB,iBAAiB2mB,EAAWj/D,KAAK+7D,WAAWY,EAAQ76D,EAAQm9D,GAAYn9D,EAAOq7D,GAAQ1iE,GAE7K6uB,EAAWokC,KAAOn/C,MAAM6gD,IAAW7gD,MAAM8gD,IAAWyf,EACpDxlD,EAAWwvC,KAAOr+D,EAAI,GAAKjJ,KAAMub,IAAIjL,EAAOo7D,GAAS2R,EAAW3R,IAAWwR,EACvErZ,IACF/rC,EAAWxnB,OAASA,EACpBwnB,EAAWm6C,IAAM8K,EAASpvE,KAAK1E,IAG7B4pE,IACF/6C,EAAWrB,QAAUq8C,GAAiBtkE,KAAKujE,0BAA0B9oE,EAAGwrD,EAAMpF,OAAS,SAAWpqD,IAG/Fk4E,GACH3uE,KAAK4kE,cAAc3e,EAAOxrD,EAAG6uB,EAAY7yB,GAG3Co4E,EAAa/sE,CACf,CACF,CAKAihE,cAAAA,GACE,MAAMngD,EAAO5iB,KAAKg9D,YACZqC,EAAUz8C,EAAKy8C,QACfpd,EAASod,EAAQp3C,SAAWo3C,EAAQp3C,QAAQ89B,aAAe,EAC3D5mD,EAAOyjB,EAAKzjB,MAAQ,GAC1B,IAAKA,EAAKhE,OACR,OAAO8mD,EAET,MAAM4L,EAAa1uD,EAAK,GAAGzO,KAAKsP,KAAKujE,0BAA0B,IACzDwL,EAAY5vE,EAAKA,EAAKhE,OAAS,GAAGzK,KAAKsP,KAAKujE,0BAA0BpkE,EAAKhE,OAAS,IAC1F,OAAO3J,KAAK+T,IAAI08C,EAAQ4L,EAAYkhB,GAAa,CACnD,CAEA7W,IAAAA,GACE,MAAMt1C,EAAO5iB,KAAKg9D,YAClBp6C,EAAKy8C,QAAQ2P,oBAAoBhvE,KAAK28C,MAAM0mB,UAAWzgD,EAAKo1B,OAAOE,MACnEnsC,MAAMmsD,MACR,GACFv6C,EAAAA,EAAAA,GAzIqB2wD,GAAuB,KAE9B,SAAO3wD,EAAAA,EAAAA,GAFA2wD,GAAuB,WAOxB,CAChBzP,mBAAoB,OACpBC,gBAAiB,QAEjBtf,UAAU,EACVmQ,UAAU,KACVhyC,EAAAA,EAAAA,GAbiB2wD,GAAuB,YAkBvB,CACjB/uB,OAAQ,CACNsrB,QAAS,CACP5rE,KAAM,YAER6rE,QAAS,CACP7rE,KAAM,aC1BC,MAAMgwE,WAA4BjR,GAoF/ClyD,WAAAA,CAAY6wC,EAAO3K,GACjBjmC,MAAM4wC,EAAO3K,GAEbhyC,KAAKirE,iBAActxE,EACnBqG,KAAKkrE,iBAAcvxE,CACrB,CAEAqpE,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,YACZrgB,EAAQ38C,KAAK28C,MACbklB,EAASllB,EAAMx9C,KAAK0iE,QAAU,GAC9B9wE,EAAQ6qD,GAAah5B,EAAKq1B,QAAQxlC,GAAOtf,EAAGwpD,EAAM10B,QAAQ4zB,QAEhE,MAAO,CACLtjC,MAAOspD,EAAOpvD,IAAU,GACxB1hB,QAEJ,CAEA2wE,eAAAA,CAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACjC,OAAO08C,GAA4Bl8C,KAAKnR,KAAjCqtD,CAAuCzqC,EAAMzjB,EAAMlD,EAAO0U,EACnE,CAEAwpD,MAAAA,CAAO1jE,GACL,MAAM+0E,EAAOxrE,KAAKg9D,YAAY79D,KAE9Ba,KAAKkvE,gBACLlvE,KAAKylE,eAAe+F,EAAM,EAAGA,EAAKrwE,OAAQ1E,EAC5C,CAKA6rE,SAAAA,GACE,MAAM1/C,EAAO5iB,KAAKg9D,YACZ3wD,EAAQ,CAACvJ,IAAKnB,OAAO8xC,kBAAmBluC,IAAK5D,OAAO+gE,mBAgB1D,OAdA9/C,EAAKzjB,KAAKsrB,SAAQ,CAACjB,EAAS/W,KAC1B,MAAM3Q,EAAS9B,KAAKkiE,UAAUzvD,GAAOtf,GAEhCob,MAAMzM,IAAW9B,KAAK28C,MAAMotB,kBAAkBt3D,KAC7C3Q,EAASuK,EAAMvJ,MACjBuJ,EAAMvJ,IAAMhB,GAGVA,EAASuK,EAAM9G,MACjB8G,EAAM9G,IAAMzD,OAKXuK,CACT,CAKA6iE,aAAAA,GACE,MAAMvyB,EAAQ38C,KAAK28C,MACb0mB,EAAY1mB,EAAM0mB,UAClBngD,EAAOy5B,EAAM10B,QACbknD,EAAU39E,KAAKsR,IAAIugE,EAAU3rE,MAAQ2rE,EAAU7rE,KAAM6rE,EAAU1rE,OAAS0rE,EAAU5rE,KAElFyzE,EAAc15E,KAAK+T,IAAI4pE,EAAU,EAAG,GAEpClC,GAAgB/B,EADF15E,KAAK+T,IAAI2d,EAAKksD,iBAAmBlE,EAAe,IAAQhoD,EAAKksD,iBAAoB,EAAG,IACrDzyB,EAAM0yB,yBAEzDrvE,KAAKkrE,YAAcA,EAAe+B,EAAejtE,KAAKyS,MACtDzS,KAAKirE,YAAcjrE,KAAKkrE,YAAc+B,CACxC,CAEAxH,cAAAA,CAAe+F,EAAMvvE,EAAO0U,EAAOla,GACjC,MAAM+9B,EAAiB,UAAT/9B,EACRkmD,EAAQ38C,KAAK28C,MAEb6wB,EADO7wB,EAAM10B,QACQr0B,UACrB0rD,EAAQt/C,KAAKg9D,YAAYmD,OACzBsN,EAAUnuB,EAAMgwB,QAChB5B,EAAUpuB,EAAMiwB,QAChBC,EAAoBlwB,EAAMmwB,cAAc,GAAK,GAAMh+E,GACzD,IACIgJ,EADA26C,EAAQo6B,EAGZ,MAAME,EAAe,IAAM1vE,KAAK2vE,uBAEhC,IAAKl1E,EAAI,EAAGA,EAAIwB,IAASxB,EACvB26C,GAASp1C,KAAK4vE,cAAcn1E,EAAGhE,EAAMi5E,GAEvC,IAAKj1E,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,EAAOlW,IAAK,CACtC,MAAMgrD,EAAM+lB,EAAK/wE,GACjB,IAAI0xE,EAAa/2B,EACbg3B,EAAWh3B,EAAQp1C,KAAK4vE,cAAcn1E,EAAGhE,EAAMi5E,GAC/CxE,EAAcvuB,EAAMotB,kBAAkBtvE,GAAK6kD,EAAMuwB,8BAA8B7vE,KAAKkiE,UAAUznE,GAAGtH,GAAK,EAC1GiiD,EAAQg3B,EAEJ53C,IACEg5C,EAAcG,eAChBzC,EAAc,GAEZsC,EAAcF,gBAChBnB,EAAaC,EAAWoD,IAI5B,MAAMlmD,EAAa,CACjB1kB,EAAG6oE,EACH5oE,EAAG6oE,EACHzC,YAAa,EACbC,cACAiB,aACAC,WACAnkD,QAASjoB,KAAKujE,0BAA0B9oE,EAAGgrD,EAAI5E,OAAS,SAAWpqD,IAGrEuJ,KAAK4kE,cAAcnf,EAAKhrD,EAAG6uB,EAAY7yB,EACzC,CACF,CAEAk5E,oBAAAA,GACE,MAAM/sD,EAAO5iB,KAAKg9D,YAClB,IAAIrsD,EAAQ,EAQZ,OANAiS,EAAKzjB,KAAKsrB,SAAQ,CAACjB,EAAS/W,MACrBlE,MAAMvO,KAAKkiE,UAAUzvD,GAAOtf,IAAM6M,KAAK28C,MAAMotB,kBAAkBt3D,IAClE9B,OAIGA,CACT,CAKAi/D,aAAAA,CAAcn9D,EAAOhc,EAAMi5E,GACzB,OAAO1vE,KAAK28C,MAAMotB,kBAAkBt3D,GAChC+hC,GAAUx0C,KAAKujE,0BAA0B9wD,EAAOhc,GAAM2+C,OAASs6B,GAC/D,CACN,GACF/xD,EAAAA,EAAAA,GA/NqBsxD,GAA4B,KAEnC,cAAYtxD,EAAAA,EAAAA,GAFLsxD,GAA4B,WAO7B,CAChBnQ,gBAAiB,MACjBlrE,UAAW,CACT05E,eAAe,EACfK,cAAc,GAEhB3sB,WAAY,CACVxF,QAAS,CACPv8C,KAAM,SACNqqB,WAAY,CAAC,IAAK,IAAK,aAAc,WAAY,cAAe,iBAGpEs1B,UAAW,IACXutB,WAAY,KACZxuD,EAAAA,EAAAA,GArBiBsxD,GAA4B,YA0B5B,CACjB5c,YAAa,EAEbjT,QAAS,CACP6uB,OAAQ,CACNpM,OAAQ,CACNqM,cAAAA,CAAevxB,GACb,MAAMx9C,EAAOw9C,EAAMx9C,KACnB,GAAIA,EAAK0iE,OAAO1mE,QAAUgE,EAAK4+C,SAAS5iD,OAAQ,CAC9C,MAAO0mE,QAAQ,WAAC5c,EAAA,MAAY30D,IAAUqsD,EAAMsxB,OAAOhmD,QAEnD,OAAO9oB,EAAK0iE,OAAOnjD,KAAI,CAACnG,EAAO9d,KAC7B,MACM9J,EADOgsD,EAAMyjB,eAAe,GACfrD,WAAWnJ,SAASn5D,GAEvC,MAAO,CACL0wB,KAAM5S,EACNkvC,UAAW92D,EAAM2G,gBACjBkwD,YAAa72D,EAAMmtD,YACnBqwB,UAAW79E,EACXoxD,UAAW/wD,EAAMo1D,YACjBd,WAAYA,EACZvtC,QAASilC,EAAMotB,kBAAkBtvE,GAGjCgY,MAAOhY,EACR,IAGL,MAAO,EACT,GAGFykD,OAAAA,CAAQl7C,EAAGoqE,EAAYH,GACrBA,EAAOtxB,MAAM0xB,qBAAqBD,EAAW37D,OAC7Cw7D,EAAOtxB,MAAMwd,QACf,IAIJ5a,OAAQ,CACNpsD,EAAG,CACD8L,KAAM,eACN6wE,WAAY,CACVt8E,SAAS,GAEX6tD,aAAa,EACbI,KAAM,CACJsuB,UAAU,GAEZC,YAAa,CACXx8E,SAAS,GAEX24E,WAAY,MC/EL,MAAM8D,WAAsBjF,KAoB3CrtD,EAAAA,EAAAA,GApBqBsyD,GAAsB,KAE7B,QAAMtyD,EAAAA,EAAAA,GAFCsyD,GAAsB,WAOvB,CAEhBpE,OAAQ,EAGR3mB,SAAU,EAGV3zD,cAAe,IAGf4zD,OAAQ,SClBG,MAAM+qB,WAAwBlS,GAmC3CgF,gBAAAA,CAAiBvwD,GACf,MAAMkqD,EAAS38D,KAAKg9D,YAAYL,OAC1B76D,EAAS9B,KAAKkiE,UAAUzvD,GAE9B,MAAO,CACL8F,MAAOokD,EAAOmF,YAAYrvD,GAC1B1hB,MAAO,GAAK4rE,EAAOsG,iBAAiBnhE,EAAO66D,EAAOzkB,OAEtD,CAEAwpB,eAAAA,CAAgB9+C,EAAMzjB,EAAMlD,EAAO0U,GACjC,OAAO08C,GAA4Bl8C,KAAKnR,KAAjCqtD,CAAuCzqC,EAAMzjB,EAAMlD,EAAO0U,EACnE,CAEAwpD,MAAAA,CAAO1jE,GACL,MAAMmsB,EAAO5iB,KAAKg9D,YACZjW,EAAOnkC,EAAKy8C,QACZznB,EAASh1B,EAAKzjB,MAAQ,GACtB0iE,EAASj/C,EAAKo1B,OAAO8pB,YAK3B,GAFA/a,EAAKnP,OAASA,EAED,WAATnhD,EAAmB,CACrB,MAAMwxB,EAAUjoB,KAAKsjE,6BAA6B7sE,GAC7CuJ,KAAKioB,QAAQu3B,WAChBv3B,EAAQ89B,YAAc,GAGxB,MAAMz8B,EAAa,CACjBuwC,OAAO,EACPsW,UAAWtO,EAAO1mE,SAAWy8C,EAAOz8C,OACpC8sB,WAGFjoB,KAAK4kE,cAAc7d,OAAMptD,EAAW2vB,EAAY7yB,GAIlDuJ,KAAKylE,eAAe7tB,EAAQ,EAAGA,EAAOz8C,OAAQ1E,EAChD,CAEAgvE,cAAAA,CAAe7tB,EAAQ37C,EAAO0U,EAAOla,GACnC,MAAM6oD,EAAQt/C,KAAKg9D,YAAYmD,OACzB3rC,EAAiB,UAAT/9B,EAEd,IAAK,IAAIgE,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,EAAOlW,IAAK,CAC1C,MAAMwrD,EAAQrO,EAAOn9C,GACfwtB,EAAUjoB,KAAKujE,0BAA0B9oE,EAAGwrD,EAAMpF,OAAS,SAAWpqD,GACtE25E,EAAgB9wB,EAAM+wB,yBAAyB51E,EAAGuF,KAAKkiE,UAAUznE,GAAGtH,GAEpEyR,EAAI4vB,EAAQ8qB,EAAMgwB,QAAUc,EAAcxrE,EAC1CC,EAAI2vB,EAAQ8qB,EAAMiwB,QAAUa,EAAcvrE,EAE1CykB,EAAa,CACjB1kB,IACAC,IACAuwC,MAAOg7B,EAAch7B,MACrBsY,KAAMn/C,MAAM3J,IAAM2J,MAAM1J,GACxBojB,WAGFjoB,KAAK4kE,cAAc3e,EAAOxrD,EAAG6uB,EAAY7yB,EAC3C,CACF,GACFknB,EAAAA,EAAAA,GApGqBuyD,GAAwB,KAE/B,UAAQvyD,EAAAA,EAAAA,GAFDuyD,GAAwB,WAOzB,CAChBrR,mBAAoB,OACpBC,gBAAiB,QACjBlgB,UAAW,IACXY,UAAU,EACVrB,SAAU,CACR4I,KAAM,CACJ3zD,KAAM,aAGVuqB,EAAAA,EAAAA,GAjBiBuyD,GAAwB,YAsBxB,CACjB7d,YAAa,EAEb9S,OAAQ,CACNpsD,EAAG,CACD8L,KAAM,mBCzBC,MAAMqxE,WAA0BtS,GAoC7CgF,gBAAAA,CAAiBvwD,GACf,MAAMmQ,EAAO5iB,KAAKg9D,YACZ6E,EAAS7hE,KAAK28C,MAAMx9C,KAAK0iE,QAAU,IACnC,OAACrpB,EAAA,OAAQC,GAAU71B,EACnB9gB,EAAS9B,KAAKkiE,UAAUzvD,GACxB7N,EAAI4zC,EAAOyqB,iBAAiBnhE,EAAO8C,GACnCC,EAAI4zC,EAAOwqB,iBAAiBnhE,EAAO+C,GAEzC,MAAO,CACL0T,MAAOspD,EAAOpvD,IAAU,GACxB1hB,MAAO,IAAM6T,EAAI,KAAOC,EAAI,IAEhC,CAEAs1D,MAAAA,CAAO1jE,GACL,MAAMmsB,EAAO5iB,KAAKg9D,aACX79D,KAAMy4C,EAAS,IAAMh1B,EAEtBi1B,EAAqB73C,KAAK28C,MAAM4nB,oBACtC,IAAI,MAACtoE,EAAA,MAAO0U,GAASgnC,GAAiC/0B,EAAMg1B,EAAQC,GAUpE,GARA73C,KAAKu+D,WAAatiE,EAClB+D,KAAKw+D,WAAa7tD,EAEd4nC,GAAoB31B,KACtB3mB,EAAQ,EACR0U,EAAQinC,EAAOz8C,QAGb6E,KAAKioB,QAAQu3B,SAAU,CAGpBx/C,KAAK6+D,oBACR7+D,KAAKk/D,cAEP,MAAOG,QAAStY,EAAA,SAAMwnB,GAAY3rD,EAGlCmkC,EAAKoP,OAASn2D,KAAK28C,MACnBoK,EAAKuP,cAAgBt2D,KAAKyS,MAC1Bs0C,EAAKynB,aAAeD,EAASC,WAC7BznB,EAAKnP,OAASA,EAEd,MAAM3vB,EAAUjoB,KAAKsjE,6BAA6B7sE,GAClDwxB,EAAQotC,QAAUr1D,KAAKioB,QAAQotC,QAC/Br1D,KAAK4kE,cAAc7d,OAAMptD,EAAW,CAClC80E,UAAW52B,EACX5vB,WACCxxB,EACL,MAAWuJ,KAAK6+D,4BAEPj8C,EAAKy8C,QACZr/D,KAAK6+D,oBAAqB,GAI5B7+D,KAAKylE,eAAe7tB,EAAQ37C,EAAO0U,EAAOla,EAC5C,CAEAyoE,WAAAA,GACE,MAAM,SAAC1f,GAAYx/C,KAAKioB,SAEnBjoB,KAAK6+D,oBAAsBrf,IAC9Bx/C,KAAK6+D,mBAAqB7+D,KAAK28C,MAAM4zB,SAASC,WAAW,SAG3DzkE,MAAMmzD,aACR,CAEAuG,cAAAA,CAAe7tB,EAAQ37C,EAAO0U,EAAOla,GACnC,MAAM+9B,EAAiB,UAAT/9B,GACR,OAACuhD,EAAA,OAAQ2kB,EAAA,SAAQsC,EAAA,SAAUsP,GAAYvuE,KAAKg9D,YAC5CyH,EAAYzkE,KAAKujE,0BAA0BtnE,EAAOxF,GAClD6tE,EAAgBtkE,KAAKokE,iBAAiBK,GACtCJ,EAAiBrkE,KAAKqkE,eAAe5tE,EAAM6tE,GAC3CpH,EAAQllB,EAAOE,KACfilB,EAAQR,EAAOzkB,MACf,SAACyX,EAAA,QAAU0F,GAAWr1D,KAAKioB,QAC3BymD,EAAep6B,GAASqb,GAAYA,EAAWhuD,OAAO8xC,kBACtDk7B,EAAe3uE,KAAK28C,MAAM4nB,qBAAuB/vC,GAAkB,SAAT/9B,EAChE,IAAIo4E,EAAa5yE,EAAQ,GAAK+D,KAAKkiE,UAAUjmE,EAAQ,GAErD,IAAK,IAAIxB,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,IAASlW,EAAG,CAC1C,MAAMwrD,EAAQrO,EAAOn9C,GACfqH,EAAS9B,KAAKkiE,UAAUznE,GACxB6uB,EAAaqlD,EAAe1oB,EAAQ,GACpC6oB,EAAWl+B,EAAc9uC,EAAOq7D,IAChC/N,EAAS9lC,EAAW4zC,GAASllB,EAAOM,iBAAiBx2C,EAAOo7D,GAAQziE,GACpE40D,EAAS/lC,EAAW6zC,GAAS3oC,GAASs6C,EAAWnS,EAAO2L,eAAiB3L,EAAOrkB,iBAAiB2mB,EAAWj/D,KAAK+7D,WAAWY,EAAQ76D,EAAQm9D,GAAYn9D,EAAOq7D,GAAQ1iE,GAE7K6uB,EAAWokC,KAAOn/C,MAAM6gD,IAAW7gD,MAAM8gD,IAAWyf,EACpDxlD,EAAWwvC,KAAOr+D,EAAI,GAAKjJ,KAAMub,IAAIjL,EAAOo7D,GAAS2R,EAAW3R,IAAWwR,EACvErZ,IACF/rC,EAAWxnB,OAASA,EACpBwnB,EAAWm6C,IAAM8K,EAASpvE,KAAK1E,IAG7B4pE,IACF/6C,EAAWrB,QAAUq8C,GAAiBtkE,KAAKujE,0BAA0B9oE,EAAGwrD,EAAMpF,OAAS,SAAWpqD,IAG/Fk4E,GACH3uE,KAAK4kE,cAAc3e,EAAOxrD,EAAG6uB,EAAY7yB,GAG3Co4E,EAAa/sE,CACf,CAEA9B,KAAK2kE,oBAAoBL,EAAe7tE,EAAMguE,EAChD,CAKA1B,cAAAA,GACE,MAAMngD,EAAO5iB,KAAKg9D,YACZ79D,EAAOyjB,EAAKzjB,MAAQ,GAE1B,IAAKa,KAAKioB,QAAQu3B,SAAU,CAC1B,IAAIj6C,EAAM,EACV,IAAK,IAAI9K,EAAI0E,EAAKhE,OAAS,EAAGV,GAAK,IAAKA,EACtC8K,EAAM/T,KAAK+T,IAAIA,EAAKpG,EAAK1E,GAAG/J,KAAKsP,KAAKujE,0BAA0B9oE,IAAM,GAExE,OAAO8K,EAAM,GAAKA,EAGpB,MAAM85D,EAAUz8C,EAAKy8C,QACfpd,EAASod,EAAQp3C,SAAWo3C,EAAQp3C,QAAQ89B,aAAe,EAEjE,IAAK5mD,EAAKhE,OACR,OAAO8mD,EAGT,MAAM4L,EAAa1uD,EAAK,GAAGzO,KAAKsP,KAAKujE,0BAA0B,IACzDwL,EAAY5vE,EAAKA,EAAKhE,OAAS,GAAGzK,KAAKsP,KAAKujE,0BAA0BpkE,EAAKhE,OAAS,IAC1F,OAAO3J,KAAK+T,IAAI08C,EAAQ4L,EAAYkhB,GAAa,CACnD,GACFpxD,EAAAA,EAAAA,GA7KqB2yD,GAA0B,KAEjC,YAAU3yD,EAAAA,EAAAA,GAFH2yD,GAA0B,WAO3B,CAChBzR,oBAAoB,EACpBC,gBAAiB,QACjBtf,UAAU,EACVpsD,MAAM,KACNuqB,EAAAA,EAAAA,GAZiB2yD,GAA0B,YAiB1B,CAEjBzxB,YAAa,CACXpoD,KAAM,SAGR8oD,OAAQ,CACN36C,EAAG,CACD3F,KAAM,UAER4F,EAAG,CACD5F,KAAM,iNC+Bd,SAASwxE,KACP,MAAM,IAAI10E,MAAM,kFAClB,CAQA,MAAM20E,GAYJ,eAAO/wB,CACLgxB,GAEA1zE,OAAO4hB,OAAO6xD,GAAgBvzE,UAAWwzE,EAC3C,CAIA7kE,WAAAA,CAAYmc,IAAoBtK,EAAAA,EAAAA,GAAA,uBAC9B3d,KAAKioB,QAAUA,GAAW,CAAC,CAC7B,CAGAxZ,IAAAA,GAAQ,CAERmiE,OAAAA,GACE,OAAOH,IACT,CAEAljB,KAAAA,GACE,OAAOkjB,IACT,CAEAp0B,MAAAA,GACE,OAAOo0B,IACT,CAEAxkB,GAAAA,GACE,OAAOwkB,IACT,CAEAI,IAAAA,GACE,OAAOJ,IACT,CAEAK,OAAAA,GACE,OAAOL,IACT,CAEAM,KAAAA,GACE,OAAON,IACT,EAGF,IAAAO,GACSN,GC9GT,SAASO,GAAaC,EAASh5B,EAAMnnD,EAAO+tD,GAC1C,MAAM,WAACie,EAAU,KAAE59D,EAAA,QAAM44C,GAAWm5B,EAC9Bl5B,EAAS+kB,EAAWC,YAAYhlB,OACtC,GAAIA,GAAUE,IAASF,EAAOE,MAAiB,MAATA,GAAgBH,GAAW54C,EAAKhE,OAAQ,CAC5E,MAAMg2E,EAAen5B,EAAOo5B,eAAiB36B,GAAgBF,GAC7D,IAAKuI,EACH,OAAOqyB,EAAahyE,EAAM+4C,EAAMnnD,GAC3B,GAAIgsE,EAAWuB,eAAgB,CAIpC,MAAM5qC,EAAKv0B,EAAK,GACVkN,EAA+B,oBAAhBqnB,EAAG29C,UAA2B39C,EAAG29C,SAASn5B,GAC/D,GAAI7rC,EAAO,CACT,MAAMpQ,EAAQk1E,EAAahyE,EAAM+4C,EAAMnnD,EAAQsb,GACzCnQ,EAAMi1E,EAAahyE,EAAM+4C,EAAMnnD,EAAQsb,GAC7C,MAAO,CAACzJ,GAAI3G,EAAM2G,GAAID,GAAIzG,EAAIyG,MAKpC,MAAO,CAACC,GAAI,EAAGD,GAAIxD,EAAKhE,OAAS,EACnC,CAUA,SAASm2E,GAAyB30B,EAAOzE,EAAMhhD,EAAUmY,EAASyvC,GAChE,MAAM+c,EAAWlf,EAAM40B,+BACjBxgF,EAAQmG,EAASghD,GACvB,IAAK,IAAIz9C,EAAI,EAAGo3C,EAAOgqB,EAAS1gE,OAAQV,EAAIo3C,IAAQp3C,EAAG,CACrD,MAAM,MAACgY,EAAA,KAAOtT,GAAQ08D,EAASphE,IACzB,GAACmI,EAAA,GAAID,GAAMsuE,GAAapV,EAASphE,GAAIy9C,EAAMnnD,EAAO+tD,GACxD,IAAK,IAAIt9C,EAAIoB,EAAIpB,GAAKmB,IAAMnB,EAAG,CAC7B,MAAMgoB,EAAUrqB,EAAKqC,GAChBgoB,EAAQkkC,MACXr+C,EAAQma,EAAS/W,EAAOjR,EAE5B,CACF,CACF,CA2BA,SAASgwE,GAAkB70B,EAAOzlD,EAAUghD,EAAMu5B,EAAkB1yB,GAClE,MAAM7uB,EAAQ,GAEd,IAAK6uB,IAAqBpC,EAAM+0B,cAAcx6E,GAC5C,OAAOg5B,EAaT,OADAohD,GAAyB30B,EAAOzE,EAAMhhD,GATf,SAASsyB,EAASwoB,EAAcv/B,IAChDssC,GAAqBiH,GAAex8B,EAASmzB,EAAM0mB,UAAW,KAG/D75C,EAAQmoD,QAAQz6E,EAAS0N,EAAG1N,EAAS2N,EAAG4sE,IAC1CvhD,EAAM10B,KAAK,CAACguB,UAASwoB,eAAcv/B,SAEvC,IAEgE,GACzDyd,CACT,CAoCA,SAAS0hD,GAAyBj1B,EAAOzlD,EAAUghD,EAAM4G,EAAW2yB,EAAkB1yB,GACpF,IAAI7uB,EAAQ,GACZ,MAAM2hD,EA5ER,SAAkC35B,GAChC,MAAM45B,GAA8B,IAAvB55B,EAAKl8C,QAAQ,KACpB+1E,GAA8B,IAAvB75B,EAAKl8C,QAAQ,KAE1B,OAAO,SAASw5C,EAAKC,GACnB,MAAMu8B,EAASF,EAAOtgF,KAAKub,IAAIyoC,EAAI5wC,EAAI6wC,EAAI7wC,GAAK,EAC1CqtE,EAASF,EAAOvgF,KAAKub,IAAIyoC,EAAI3wC,EAAI4wC,EAAI5wC,GAAK,EAChD,OAAOrT,KAAK2jD,KAAK3jD,KAAKmX,IAAIqpE,EAAQ,GAAKxgF,KAAKmX,IAAIspE,EAAQ,GAC1D,CACF,CAmEyBC,CAAyBh6B,GAChD,IAAIi6B,EAAcxwE,OAAO8xC,kBAyBzB,OADA69B,GAAyB30B,EAAOzE,EAAMhhD,GAtBtC,SAAwBsyB,EAASwoB,EAAcv/B,GAC7C,MAAMk/D,EAAUnoD,EAAQmoD,QAAQz6E,EAAS0N,EAAG1N,EAAS2N,EAAG4sE,GACxD,GAAI3yB,IAAc6yB,EAChB,OAGF,MAAM7I,EAASt/C,EAAQ4oD,eAAeX,GAEtC,OADsB1yB,GAAoBpC,EAAM+0B,cAAc5I,MACzC6I,EACnB,OAGF,MAAMr8B,EAAWu8B,EAAe36E,EAAU4xE,GACtCxzB,EAAW68B,GACbjiD,EAAQ,CAAC,CAAC1G,UAASwoB,eAAcv/B,UACjC0/D,EAAc78B,GACLA,IAAa68B,GAEtBjiD,EAAM10B,KAAK,CAACguB,UAASwoB,eAAcv/B,SAEvC,IAGOyd,CACT,CAYA,SAASmiD,GAAgB11B,EAAOzlD,EAAUghD,EAAM4G,EAAW2yB,EAAkB1yB,GAC3E,OAAKA,GAAqBpC,EAAM+0B,cAAcx6E,GAI9B,MAATghD,GAAiB4G,EAEpB8yB,GAAyBj1B,EAAOzlD,EAAUghD,EAAM4G,EAAW2yB,EAAkB1yB,GA1EnF,SAA+BpC,EAAOzlD,EAAUghD,EAAMu5B,GACpD,IAAIvhD,EAAQ,GAYZ,OADAohD,GAAyB30B,EAAOzE,EAAMhhD,GATtC,SAAwBsyB,EAASwoB,EAAcv/B,GAC7C,MAAM,WAAC05D,EAAA,SAAYC,GAAY5iD,EAAQ8oD,SAAS,CAAC,aAAc,YAAab,IACtE,MAACr8B,GAASP,GAAkBrrB,EAAS,CAAC5kB,EAAG1N,EAAS0N,EAAGC,EAAG3N,EAAS2N,IAEnE+wC,GAAcR,EAAO+2B,EAAYC,IACnCl8C,EAAM10B,KAAK,CAACguB,UAASwoB,eAAcv/B,SAEvC,IAGOyd,CACT,CA2DMqiD,CAAsB51B,EAAOzlD,EAAUghD,EAAMu5B,GAJxC,EAMX,CAWA,SAASe,GAAa71B,EAAOzlD,EAAUghD,EAAM4G,EAAW2yB,GACtD,MAAMvhD,EAAQ,GACRuiD,EAAuB,MAATv6B,EAAe,WAAa,WAChD,IAAIw6B,GAAiB,EAWrB,OATApB,GAAyB30B,EAAOzE,EAAMhhD,GAAU,CAACsyB,EAASwoB,EAAcv/B,KAClE+W,EAAQipD,GAAav7E,EAASghD,GAAOu5B,KACvCvhD,EAAM10B,KAAK,CAACguB,UAASwoB,eAAcv/B,UACnCigE,EAAiBA,GAAkBlpD,EAAQmoD,QAAQz6E,EAAS0N,EAAG1N,EAAS2N,EAAG4sE,OAM3E3yB,IAAc4zB,EACT,GAEFxiD,CACT,CAMA,IAAAyiD,GAAe,CAEbrB,4BAGAsB,MAAO,CAYLngE,KAAAA,CAAMkqC,EAAO34C,EAAGikB,EAASwpD,GACvB,MAAMv6E,EAAWi6D,GAAoBntD,EAAG24C,GAElCzE,EAAOjwB,EAAQiwB,MAAQ,IACvB6G,EAAmB92B,EAAQ82B,mBAAoB,EAC/C7uB,EAAQjI,EAAQ62B,UAClB0yB,GAAkB70B,EAAOzlD,EAAUghD,EAAMu5B,EAAkB1yB,GAC3DszB,GAAgB11B,EAAOzlD,EAAUghD,GAAM,EAAOu5B,EAAkB1yB,GAC9DZ,EAAW,GAEjB,OAAKjuB,EAAM/0B,QAIXwhD,EAAM40B,+BAA+B9mD,SAAS7H,IAC5C,MAAMnQ,EAAQyd,EAAM,GAAGzd,MACjB+W,EAAU5G,EAAKzjB,KAAKsT,GAGtB+W,IAAYA,EAAQkkC,MACtBvP,EAAS3iD,KAAK,CAACguB,UAASwoB,aAAcpvB,EAAKnQ,MAAOA,aAI/C0rC,GAbE,EAcX,EAYAkhB,OAAAA,CAAQ1iB,EAAO34C,EAAGikB,EAASwpD,GACzB,MAAMv6E,EAAWi6D,GAAoBntD,EAAG24C,GAClCzE,EAAOjwB,EAAQiwB,MAAQ,KACvB6G,EAAmB92B,EAAQ82B,mBAAoB,EACrD,IAAI7uB,EAAQjI,EAAQ62B,UAChB0yB,GAAkB70B,EAAOzlD,EAAUghD,EAAMu5B,EAAkB1yB,GAC7DszB,GAAgB11B,EAAOzlD,EAAUghD,GAAM,EAAOu5B,EAAkB1yB,GAElE,GAAI7uB,EAAM/0B,OAAS,EAAG,CACpB,MAAM62C,EAAe9hB,EAAM,GAAG8hB,aACxB7yC,EAAOw9C,EAAMyjB,eAAepuB,GAAc7yC,KAChD+wB,EAAQ,GACR,IAAK,IAAIz1B,EAAI,EAAGA,EAAI0E,EAAKhE,SAAUV,EACjCy1B,EAAM10B,KAAK,CAACguB,QAASrqB,EAAK1E,GAAIu3C,eAAcv/B,MAAOhY,IAIvD,OAAOy1B,CACT,EAYA+1B,MAAK,CAACtJ,EAAO34C,EAAGikB,EAASwpD,IAIhBD,GAAkB70B,EAHRwU,GAAoBntD,EAAG24C,GAC3B10B,EAAQiwB,MAAQ,KAEmBu5B,EADvBxpD,EAAQ82B,mBAAoB,GAavD8zB,OAAAA,CAAQl2B,EAAO34C,EAAGikB,EAASwpD,GACzB,MAAMv6E,EAAWi6D,GAAoBntD,EAAG24C,GAClCzE,EAAOjwB,EAAQiwB,MAAQ,KACvB6G,EAAmB92B,EAAQ82B,mBAAoB,EACrD,OAAOszB,GAAgB11B,EAAOzlD,EAAUghD,EAAMjwB,EAAQ62B,UAAW2yB,EAAkB1yB,EACrF,EAWAn6C,EAAC,CAAC+3C,EAAO34C,EAAGikB,EAASwpD,IAEZe,GAAa71B,EADHwU,GAAoBntD,EAAG24C,GACH,IAAK10B,EAAQ62B,UAAW2yB,GAY/D5sE,EAAC,CAAC83C,EAAO34C,EAAGikB,EAASwpD,IAEZe,GAAa71B,EADHwU,GAAoBntD,EAAG24C,GACH,IAAK10B,EAAQ62B,UAAW2yB,KCpWnE,MAAMqB,GAAmB,CAAC,OAAQ,MAAO,QAAS,UAElD,SAASC,GAAiBxzE,EAAOrI,GAC/B,OAAOqI,EAAMif,QAAO8iB,GAAKA,EAAEv8B,MAAQ7N,GACrC,CAEA,SAAS87E,GAA4BzzE,EAAO24C,GAC1C,OAAO34C,EAAMif,QAAO8iB,IAA0C,IAArCwxC,GAAiB92E,QAAQslC,EAAEv8B,MAAeu8B,EAAEmwB,IAAIvZ,OAASA,GACpF,CAEA,SAAS+6B,GAAa1zE,EAAOkyC,GAC3B,OAAOlyC,EAAM2lB,MAAK,CAACvgB,EAAG/F,KACpB,MAAMkzC,EAAKL,EAAU7yC,EAAI+F,EACnBotC,EAAKN,EAAU9sC,EAAI/F,EACzB,OAAOkzC,EAAGrC,SAAWsC,EAAGtC,OACtBqC,EAAGr/B,MAAQs/B,EAAGt/B,MACdq/B,EAAGrC,OAASsC,EAAGtC,MAAM,GAE3B,CAuCA,SAASyjC,GAAcC,EAASC,GAC9B,MAAM9W,EAlBR,SAAqB6W,GACnB,MAAM7W,EAAS,CAAC,EAChB,IAAK,MAAM5gD,KAAQy3D,EAAS,CAC1B,MAAM,MAACjnE,EAAK,IAAEnH,EAAA,YAAKsuE,GAAe33D,EAClC,IAAKxP,IAAU4mE,GAAiB/sE,SAAShB,GACvC,SAEF,MAAM+tB,EAASwpC,EAAOpwD,KAAWowD,EAAOpwD,GAAS,CAACyE,MAAO,EAAG2iE,OAAQ,EAAG7jC,OAAQ,EAAG/+C,KAAM,IACxFoiC,EAAOniB,QACPmiB,EAAO2c,QAAU4jC,CACnB,CACA,OAAO/W,CACT,CAMiBiX,CAAYJ,IACrB,aAACK,EAAA,cAAcC,GAAiBL,EACtC,IAAI34E,EAAGo3C,EAAM6hC,EACb,IAAKj5E,EAAI,EAAGo3C,EAAOshC,EAAQh4E,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAChDi5E,EAASP,EAAQ14E,GACjB,MAAM,SAACk5E,GAAYD,EAAOjiB,IACpBvlD,EAAQowD,EAAOoX,EAAOxnE,OACtBktD,EAASltD,GAASwnE,EAAOL,YAAcnnE,EAAMujC,OAC/CikC,EAAOjM,YACTiM,EAAOnhF,MAAQ6mE,EAASA,EAASoa,EAAeG,GAAYP,EAAOQ,eACnEF,EAAOlhF,OAASihF,IAEhBC,EAAOnhF,MAAQihF,EACfE,EAAOlhF,OAAS4mE,EAASA,EAASqa,EAAgBE,GAAYP,EAAOS,gBAEzE,CACA,OAAOvX,CACT,CAsBA,SAASwX,GAAeC,EAAY1Q,EAAW1+D,EAAG/F,GAChD,OAAOpN,KAAK+T,IAAIwuE,EAAWpvE,GAAI0+D,EAAU1+D,IAAMnT,KAAK+T,IAAIwuE,EAAWn1E,GAAIykE,EAAUzkE,GACnF,CAEA,SAASo1E,GAAiBD,EAAYE,GACpCF,EAAWt8E,IAAMjG,KAAK+T,IAAIwuE,EAAWt8E,IAAKw8E,EAAWx8E,KACrDs8E,EAAWv8E,KAAOhG,KAAK+T,IAAIwuE,EAAWv8E,KAAMy8E,EAAWz8E,MACvDu8E,EAAWp8E,OAASnG,KAAK+T,IAAIwuE,EAAWp8E,OAAQs8E,EAAWt8E,QAC3Do8E,EAAWr8E,MAAQlG,KAAK+T,IAAIwuE,EAAWr8E,MAAOu8E,EAAWv8E,MAC3D,CAEA,SAASw8E,GAAW7Q,EAAW+P,EAAQM,EAAQpX,GAC7C,MAAM,IAACv3D,EAAA,IAAK0sD,GAAOiiB,EACbK,EAAa1Q,EAAU0Q,WAG7B,IAAKljC,EAAS9rC,GAAM,CACd2uE,EAAOhjF,OAET2yE,EAAUt+D,IAAQ2uE,EAAOhjF,MAE3B,MAAMwb,EAAQowD,EAAOoX,EAAOxnE,QAAU,CAACxb,KAAM,EAAGigB,MAAO,GACvDzE,EAAMxb,KAAOc,KAAK+T,IAAI2G,EAAMxb,KAAMgjF,EAAOjM,WAAahW,EAAIj/D,OAASi/D,EAAIl/D,OACvEmhF,EAAOhjF,KAAOwb,EAAMxb,KAAOwb,EAAMyE,MACjC0yD,EAAUt+D,IAAQ2uE,EAAOhjF,KAGvB+gE,EAAI0iB,YACNH,GAAiBD,EAAYtiB,EAAI0iB,cAGnC,MAAMC,EAAW5iF,KAAK+T,IAAI,EAAG6tE,EAAOiB,WAAaP,GAAeC,EAAY1Q,EAAW,OAAQ,UACzFiR,EAAY9iF,KAAK+T,IAAI,EAAG6tE,EAAOmB,YAAcT,GAAeC,EAAY1Q,EAAW,MAAO,WAC1FmR,EAAeJ,IAAa/Q,EAAU3yD,EACtC+jE,EAAgBH,IAAcjR,EAAU7hC,EAK9C,OAJA6hC,EAAU3yD,EAAI0jE,EACd/Q,EAAU7hC,EAAI8yC,EAGPZ,EAAOjM,WACV,CAACiN,KAAMF,EAActjF,MAAOujF,GAC5B,CAACC,KAAMD,EAAevjF,MAAOsjF,EACnC,CAgBA,SAASG,GAAWlN,EAAYpE,GAC9B,MAAM0Q,EAAa1Q,EAAU0Q,WAE7B,SAASa,EAAmB9jB,GAC1B,MAAM5K,EAAS,CAAC1uD,KAAM,EAAGC,IAAK,EAAGC,MAAO,EAAGC,OAAQ,GAInD,OAHAm5D,EAAUrmC,SAAS1lB,IACjBmhD,EAAOnhD,GAAOvT,KAAK+T,IAAI89D,EAAUt+D,GAAMgvE,EAAWhvE,GAAI,IAEjDmhD,CACT,CAEA,OACI0uB,EADGnN,EACgB,CAAC,OAAQ,SACT,CAAC,MAAO,UACjC,CAEA,SAASoN,GAASC,EAAOzR,EAAW+P,EAAQ9W,GAC1C,MAAMyY,EAAa,GACnB,IAAIt6E,EAAGo3C,EAAM6hC,EAAQjiB,EAAKujB,EAAOh8B,EAEjC,IAAKv+C,EAAI,EAAGo3C,EAAOijC,EAAM35E,OAAQ65E,EAAQ,EAAGv6E,EAAIo3C,IAAQp3C,EAAG,CACzDi5E,EAASoB,EAAMr6E,GACfg3D,EAAMiiB,EAAOjiB,IAEbA,EAAI0I,OACFuZ,EAAOnhF,OAAS8wE,EAAU3yD,EAC1BgjE,EAAOlhF,QAAU6wE,EAAU7hC,EAC3BmzC,GAAWjB,EAAOjM,WAAYpE,IAEhC,MAAM,KAACqR,EAAA,MAAMxjF,GAASgjF,GAAW7Q,EAAW+P,EAAQM,EAAQpX,GAI5D0Y,GAASN,GAAQK,EAAW55E,OAG5B69C,EAAUA,GAAW9nD,EAEhBugE,EAAIkiB,UACPoB,EAAWv5E,KAAKk4E,EAEpB,CAEA,OAAOsB,GAASH,GAASE,EAAY1R,EAAW+P,EAAQ9W,IAAWtjB,CACrE,CAEA,SAASi8B,GAAWxjB,EAAKj6D,EAAMC,EAAKlF,EAAOC,GACzCi/D,EAAIh6D,IAAMA,EACVg6D,EAAIj6D,KAAOA,EACXi6D,EAAI/5D,MAAQF,EAAOjF,EACnBk/D,EAAI95D,OAASF,EAAMjF,EACnBi/D,EAAIl/D,MAAQA,EACZk/D,EAAIj/D,OAASA,CACf,CAEA,SAAS0iF,GAAWJ,EAAOzR,EAAW+P,EAAQ9W,GAC5C,MAAM6Y,EAAc/B,EAAOhyB,QAC3B,IAAI,EAACx8C,EAAA,EAAGC,GAAKw+D,EAEb,IAAK,MAAMqQ,KAAUoB,EAAO,CAC1B,MAAMrjB,EAAMiiB,EAAOjiB,IACbvlD,EAAQowD,EAAOoX,EAAOxnE,QAAU,CAACyE,MAAO,EAAG2iE,OAAQ,EAAG7jC,OAAQ,GAC9DA,EAASikC,EAAQL,YAAcnnE,EAAMujC,QAAW,EACtD,GAAIikC,EAAOjM,WAAY,CACrB,MAAMl1E,EAAQ8wE,EAAU3yD,EAAI++B,EACtBj9C,EAAS0Z,EAAMxb,MAAQ+gE,EAAIj/D,OAC7B0gD,GAAQhnC,EAAMjQ,SAChB4I,EAAIqH,EAAMjQ,OAERw1D,EAAIkiB,SACNsB,GAAWxjB,EAAK0jB,EAAY39E,KAAMqN,EAAGuuE,EAAOiB,WAAac,EAAYz9E,MAAQy9E,EAAY39E,KAAMhF,GAE/FyiF,GAAWxjB,EAAK4R,EAAU7rE,KAAO0U,EAAMonE,OAAQzuE,EAAGtS,EAAOC,GAE3D0Z,EAAMjQ,MAAQ4I,EACdqH,EAAMonE,QAAU/gF,EAChBsS,EAAI4sD,EAAI95D,WACH,CACL,MAAMnF,EAAS6wE,EAAU7hC,EAAIiO,EACvBl9C,EAAQ2Z,EAAMxb,MAAQ+gE,EAAIl/D,MAC5B2gD,GAAQhnC,EAAMjQ,SAChB2I,EAAIsH,EAAMjQ,OAERw1D,EAAIkiB,SACNsB,GAAWxjB,EAAK7sD,EAAGuwE,EAAY19E,IAAKlF,EAAO6gF,EAAOmB,YAAcY,EAAYx9E,OAASw9E,EAAY19E,KAEjGw9E,GAAWxjB,EAAK7sD,EAAGy+D,EAAU5rE,IAAMyU,EAAMonE,OAAQ/gF,EAAOC,GAE1D0Z,EAAMjQ,MAAQ2I,EACdsH,EAAMonE,QAAU9gF,EAChBoS,EAAI6sD,EAAI/5D,MAEZ,CAEA2rE,EAAUz+D,EAAIA,EACdy+D,EAAUx+D,EAAIA,CAChB,CAwBA,IAAAsuE,GAAe,CAQbiC,MAAAA,CAAOz4B,EAAOl8B,GACPk8B,EAAMm4B,QACTn4B,EAAMm4B,MAAQ,IAIhBr0D,EAAKkzD,SAAWlzD,EAAKkzD,WAAY,EACjClzD,EAAKvpB,SAAWupB,EAAKvpB,UAAY,MACjCupB,EAAKgvB,OAAShvB,EAAKgvB,QAAU,EAE7BhvB,EAAK40D,QAAU50D,EAAK40D,SAAW,WAC7B,MAAO,CAAC,CACNC,EAAG,EACHpd,IAAAA,CAAKmL,GACH5iD,EAAKy3C,KAAKmL,EACZ,GAEJ,EAEA1mB,EAAMm4B,MAAMt5E,KAAKilB,EACnB,EAOA80D,SAAAA,CAAU54B,EAAO64B,GACf,MAAM/iE,EAAQkqC,EAAMm4B,MAAQn4B,EAAMm4B,MAAM94E,QAAQw5E,IAAe,GAChD,IAAX/iE,GACFkqC,EAAMm4B,MAAMvuD,OAAO9T,EAAO,EAE9B,EAQAmoD,SAAAA,CAAUje,EAAOl8B,EAAMwH,GACrBxH,EAAKkzD,SAAW1rD,EAAQ0rD,SACxBlzD,EAAKvpB,SAAW+wB,EAAQ/wB,SACxBupB,EAAKgvB,OAASxnB,EAAQwnB,MACxB,EAUA0qB,MAAAA,CAAOxd,EAAOpqD,EAAOC,EAAQijF,GAC3B,IAAK94B,EACH,OAGF,MAAMyE,EAAUmI,GAAU5M,EAAM10B,QAAQyrD,OAAOtyB,SACzCwyB,EAAiBpiF,KAAK+T,IAAIhT,EAAQ6uD,EAAQ7uD,MAAO,GACjDshF,EAAkBriF,KAAK+T,IAAI/S,EAAS4uD,EAAQ5uD,OAAQ,GACpDsiF,EA5QV,SAA0BA,GACxB,MAAMY,EA1DR,SAAmBZ,GACjB,MAAMY,EAAc,GACpB,IAAIj7E,EAAGo3C,EAAM4f,EAAK1sD,EAAKmH,EAAOmnE,EAE9B,IAAK54E,EAAI,EAAGo3C,GAAQijC,GAAS,IAAI35E,OAAQV,EAAIo3C,IAAQp3C,EACnDg3D,EAAMqjB,EAAMr6E,KACVvD,SAAU6N,EAAKkjB,SAAU/b,QAAOmnE,cAAc,IAAM5hB,GACtDikB,EAAYl6E,KAAK,CACfiX,MAAOhY,EACPg3D,MACA1sD,MACA0iE,WAAYhW,EAAI8W,eAChB94B,OAAQgiB,EAAIhiB,OACZvjC,MAAOA,GAAUnH,EAAMmH,EACvBmnE,gBAGJ,OAAOqC,CACT,CAwCsBC,CAAUb,GACxBnB,EAAWV,GAAayC,EAAYl3D,QAAO9C,GAAQA,EAAK+1C,IAAIkiB,YAAW,GACvEn8E,EAAOy7E,GAAaF,GAAiB2C,EAAa,SAAS,GAC3Dh+E,EAAQu7E,GAAaF,GAAiB2C,EAAa,UACnDj+E,EAAMw7E,GAAaF,GAAiB2C,EAAa,QAAQ,GACzD/9E,EAASs7E,GAAaF,GAAiB2C,EAAa,WACpDE,EAAmB5C,GAA4B0C,EAAa,KAC5DG,EAAiB7C,GAA4B0C,EAAa,KAEhE,MAAO,CACL/B,WACAmC,WAAYt+E,EAAK1F,OAAO2F,GACxBs+E,eAAgBr+E,EAAM5F,OAAO+jF,GAAgB/jF,OAAO6F,GAAQ7F,OAAO8jF,GACnEvS,UAAW0P,GAAiB2C,EAAa,aACzCM,SAAUx+E,EAAK1F,OAAO4F,GAAO5F,OAAO+jF,GACpCpO,WAAYhwE,EAAI3F,OAAO6F,GAAQ7F,OAAO8jF,GAE1C,CA0PkBK,CAAiBt5B,EAAMm4B,OAC/BoB,EAAgBpB,EAAMkB,SACtBG,EAAkBrB,EAAMrN,WAI9Bl2B,EAAKoL,EAAMm4B,OAAOrjB,IACgB,oBAArBA,EAAI2kB,cACb3kB,EAAI2kB,kBA+BR,MAAMC,EAA0BH,EAAc92D,QAAO,CAAC6hB,EAAOvlB,IAC3DA,EAAK+1C,IAAIxpC,UAAwC,IAA7BvM,EAAK+1C,IAAIxpC,QAAQz0B,QAAoBytC,EAAQA,EAAQ,GAAG,IAAM,EAE9EmyC,EAASn2E,OAAOgnE,OAAO,CAC3BoQ,WAAY9hF,EACZgiF,YAAa/hF,EACb4uD,UACAwyB,iBACAC,kBACAL,aAAcI,EAAiB,EAAIyC,EACnC5C,cAAeI,EAAkB,IAE7BE,EAAa92E,OAAO4hB,OAAO,CAAC,EAAGuiC,GACrC4yB,GAAiBD,EAAYxqB,GAAUksB,IACvC,MAAMpS,EAAYpmE,OAAO4hB,OAAO,CAC9Bk1D,aACArjE,EAAGkjE,EACHpyC,EAAGqyC,EACHjvE,EAAGw8C,EAAQ5pD,KACXqN,EAAGu8C,EAAQ3pD,KACV2pD,GAEGkb,EAAS4W,GAAcgD,EAAcpkF,OAAOqkF,GAAkB/C,GAGpEyB,GAASC,EAAMnB,SAAUtQ,EAAW+P,EAAQ9W,GAG5CuY,GAASqB,EAAe7S,EAAW+P,EAAQ9W,GAGvCuY,GAASsB,EAAiB9S,EAAW+P,EAAQ9W,IAE/CuY,GAASqB,EAAe7S,EAAW+P,EAAQ9W,GApRjD,SAA0B+G,GACxB,MAAM0Q,EAAa1Q,EAAU0Q,WAE7B,SAASuC,EAAUvxE,GACjB,MAAMwxE,EAAS/kF,KAAK+T,IAAIwuE,EAAWhvE,GAAOs+D,EAAUt+D,GAAM,GAE1D,OADAs+D,EAAUt+D,IAAQwxE,EACXA,CACT,CACAlT,EAAUx+D,GAAKyxE,EAAU,OACzBjT,EAAUz+D,GAAK0xE,EAAU,QACzBA,EAAU,SACVA,EAAU,SACZ,CA2QIE,CAAiBnT,GAGjB6R,GAAWJ,EAAMgB,WAAYzS,EAAW+P,EAAQ9W,GAGhD+G,EAAUz+D,GAAKy+D,EAAU3yD,EACzB2yD,EAAUx+D,GAAKw+D,EAAU7hC,EAEzB0zC,GAAWJ,EAAMiB,eAAgB1S,EAAW+P,EAAQ9W,GAEpD3f,EAAM0mB,UAAY,CAChB7rE,KAAM6rE,EAAU7rE,KAChBC,IAAK4rE,EAAU5rE,IACfC,MAAO2rE,EAAU7rE,KAAO6rE,EAAU3yD,EAClC/Y,OAAQ0rE,EAAU5rE,IAAM4rE,EAAU7hC,EAClChvC,OAAQ6wE,EAAU7hC,EAClBjvC,MAAO8wE,EAAU3yD,GAInB6gC,EAAKujC,EAAMzR,WAAYqQ,IACrB,MAAMjiB,EAAMiiB,EAAOjiB,IACnBx0D,OAAO4hB,OAAO4yC,EAAK9U,EAAM0mB,WACzB5R,EAAI0I,OAAOkJ,EAAU3yD,EAAG2yD,EAAU7hC,EAAG,CAAChqC,KAAM,EAAGC,IAAK,EAAGC,MAAO,EAAGC,OAAQ,GAAG,GAEhF,GC7ba,MAAM8+E,GAOnBC,cAAAA,CAAepyB,EAAQ+N,GAAc,CAQrCskB,cAAAA,CAAezkE,GACb,OAAO,CACT,CASAR,gBAAAA,CAAiBirC,EAAO19C,EAAM6Q,GAAW,CAQzC8B,mBAAAA,CAAoB+qC,EAAO19C,EAAM6Q,GAAW,CAK5CouC,mBAAAA,GACE,OAAO,CACT,CASAgU,cAAAA,CAAe1oC,EAASj3B,EAAOC,EAAQ6/D,GAGrC,OAFA9/D,EAAQf,KAAK+T,IAAI,EAAGhT,GAASi3B,EAAQj3B,OACrCC,EAASA,GAAUg3B,EAAQh3B,OACpB,CACLD,QACAC,OAAQhB,KAAK+T,IAAI,EAAG8sD,EAAc7gE,KAAKib,MAAMla,EAAQ8/D,GAAe7/D,GAExE,CAMAokF,UAAAA,CAAWtyB,GACT,OAAO,CACT,CAMAuyB,YAAAA,CAAanc,GAEb,ECrEa,MAAMoc,WAAsBL,GACzCC,cAAAA,CAAej2D,GAIb,OAAOA,GAAQA,EAAK8jC,YAAc9jC,EAAK8jC,WAAW,OAAS,IAC7D,CACAsyB,YAAAA,CAAanc,GACXA,EAAOzyC,QAAQr0B,WAAY,CAC7B,ECRF,MAAMmjF,GAAc,WAOdC,GAAc,CAClBC,WAAY,YACZC,UAAW,YACXC,SAAU,UACVC,aAAc,aACdC,YAAa,YACbC,YAAa,YACbC,UAAW,UACXC,aAAc,WACdC,WAAY,YAGRC,GAAgB3mF,GAAmB,OAAVA,GAA4B,KAAVA,EA8DjD,MAAM4mF,KAAuBpkB,IAA+B,CAACE,SAAS,GAMtE,SAASvkD,GAAeytC,EAAO19C,EAAM6Q,GACnC6sC,EAAM2H,OAAO1yC,oBAAoB3S,EAAM6Q,EAAU6nE,GACnD,CAcA,SAASC,GAAiBC,EAAUvzB,GAClC,IAAK,MAAMvvC,KAAQ8iE,EACjB,GAAI9iE,IAASuvC,GAAUvvC,EAAK+iE,SAASxzB,GACnC,OAAO,CAGb,CAEA,SAASyzB,GAAqBp7B,EAAO19C,EAAM6Q,GACzC,MAAMw0C,EAAS3H,EAAM2H,OACf0zB,EAAW,IAAIC,kBAAiBC,IACpC,IAAIC,GAAU,EACd,IAAK,MAAMhoD,KAAS+nD,EAClBC,EAAUA,GAAWP,GAAiBznD,EAAMioD,WAAY9zB,GACxD6zB,EAAUA,IAAYP,GAAiBznD,EAAMkoD,aAAc/zB,GAEzD6zB,GACFroE,OAIJ,OADAkoE,EAASM,QAAQnoB,SAAU,CAACooB,WAAW,EAAMC,SAAS,IAC/CR,CACT,CAEA,SAASS,GAAqB97B,EAAO19C,EAAM6Q,GACzC,MAAMw0C,EAAS3H,EAAM2H,OACf0zB,EAAW,IAAIC,kBAAiBC,IACpC,IAAIC,GAAU,EACd,IAAK,MAAMhoD,KAAS+nD,EAClBC,EAAUA,GAAWP,GAAiBznD,EAAMkoD,aAAc/zB,GAC1D6zB,EAAUA,IAAYP,GAAiBznD,EAAMioD,WAAY9zB,GAEvD6zB,GACFroE,OAIJ,OADAkoE,EAASM,QAAQnoB,SAAU,CAACooB,WAAW,EAAMC,SAAS,IAC/CR,CACT,CAEA,MAAMU,GAAqB,IAAI/8B,IAC/B,IAAIg9B,GAAsB,EAE1B,SAASC,KACP,MAAMC,EAAM5hC,OAAO+G,iBACf66B,IAAQF,KAGZA,GAAsBE,EACtBH,GAAmBjuD,SAAQ,CAACq2B,EAAQnE,KAC9BA,EAAMwH,0BAA4B00B,GACpC/3B,OAGN,CAgBA,SAASg4B,GAAqBn8B,EAAO19C,EAAM6Q,GACzC,MAAMw0C,EAAS3H,EAAM2H,OACfmO,EAAYnO,GAAU8L,GAAe9L,GAC3C,IAAKmO,EACH,OAEF,MAAM3R,EAAS3J,IAAU,CAAC5kD,EAAOC,KAC/B,MAAMke,EAAI+hD,EAAUI,YACpB/iD,EAASvd,EAAOC,GACZke,EAAI+hD,EAAUI,aAQhB/iD,MAEDmnC,QAGG+gC,EAAW,IAAIe,gBAAeb,IAClC,MAAM/nD,EAAQ+nD,EAAQ,GAChB3lF,EAAQ49B,EAAM6oD,YAAYzmF,MAC1BC,EAAS29B,EAAM6oD,YAAYxmF,OAInB,IAAVD,GAA0B,IAAXC,GAGnBsuD,EAAOvuD,EAAOC,EAAA,IAKhB,OAHAwlF,EAASM,QAAQ7lB,GAhDnB,SAAuC9V,EAAOmE,GACvC43B,GAAmBhoF,MACtBumD,OAAOvlC,iBAAiB,SAAUknE,IAEpCF,GAAmB1zE,IAAI23C,EAAOmE,EAChC,CA4CEm4B,CAA8Bt8B,EAAOmE,GAE9Bk3B,CACT,CAEA,SAASkB,GAAgBv8B,EAAO19C,EAAM+4E,GAChCA,GACFA,EAASmB,aAEE,WAATl6E,GAnDN,SAAyC09C,GACvC+7B,GAAmBxsB,OAAOvP,GACrB+7B,GAAmBhoF,MACtBumD,OAAOrlC,oBAAoB,SAAUgnE,GAEzC,CA+CIQ,CAAgCz8B,EAEpC,CAEA,SAAS08B,GAAqB18B,EAAO19C,EAAM6Q,GACzC,MAAMw0C,EAAS3H,EAAM2H,OACfyG,EAAQ5T,IAAWia,IAIL,OAAdzU,EAAM8B,KACR3uC,EA1IN,SAAyBshD,EAAOzU,GAC9B,MAAM19C,EAAO+3E,GAAY5lB,EAAMnyD,OAASmyD,EAAMnyD,MACxC,EAAC2F,EAAC,EAAEC,GAAKssD,GAAoBC,EAAOzU,GAC1C,MAAO,CACL19C,OACA09C,QACA28B,OAAQloB,EACRxsD,OAASjL,IAANiL,EAAkBA,EAAI,KACzBC,OAASlL,IAANkL,EAAkBA,EAAI,KAE7B,CAgIe00E,CAAgBnoB,EAAOzU,MAEjCA,GAIH,OAxJF,SAAqB5nC,EAAM9V,EAAM6Q,GAC/BiF,EAAKrD,iBAAiBzS,EAAM6Q,EAAU6nE,GACxC,CAoJEvlE,CAAYkyC,EAAQrlD,EAAM8rD,GAEnBA,CACT,CAMe,MAAMyuB,WAAoB/C,GAOvCC,cAAAA,CAAepyB,EAAQ+N,GAIrB,MAAMngD,EAAUoyC,GAAUA,EAAOC,YAAcD,EAAOC,WAAW,MASjE,OAAIryC,GAAWA,EAAQoyC,SAAWA,GA3OtC,SAAoBA,EAAQ+N,GAC1B,MAAM1hE,EAAQ2zD,EAAO3zD,MAIf8oF,EAAen1B,EAAOo1B,aAAa,UACnCC,EAAcr1B,EAAOo1B,aAAa,SAsBxC,GAnBAp1B,EAAOyyB,IAAe,CACpBnf,QAAS,CACPplE,OAAQinF,EACRlnF,MAAOonF,EACPhpF,MAAO,CACL6C,QAAS7C,EAAM6C,QACfhB,OAAQ7B,EAAM6B,OACdD,MAAO5B,EAAM4B,SAQnB5B,EAAM6C,QAAU7C,EAAM6C,SAAW,QAEjC7C,EAAM2gE,UAAY3gE,EAAM2gE,WAAa,aAEjComB,GAAciC,GAAc,CAC9B,MAAMC,EAAelmB,GAAapP,EAAQ,cACrB3qD,IAAjBigF,IACFt1B,EAAO/xD,MAAQqnF,GAInB,GAAIlC,GAAc+B,GAChB,GAA4B,KAAxBn1B,EAAO3zD,MAAM6B,OAIf8xD,EAAO9xD,OAAS8xD,EAAO/xD,OAAS8/D,GAAe,OAC1C,CACL,MAAMwnB,EAAgBnmB,GAAapP,EAAQ,eACrB3qD,IAAlBkgF,IACFv1B,EAAO9xD,OAASqnF,GAMxB,CA4LMC,CAAWx1B,EAAQ+N,GACZngD,GAGF,IACT,CAKAykE,cAAAA,CAAezkE,GACb,MAAMoyC,EAASpyC,EAAQoyC,OACvB,IAAKA,EAAOyyB,IACV,OAAO,EAGT,MAAMnf,EAAUtT,EAAOyyB,IAAanf,QACpC,CAAC,SAAU,SAASntC,SAASmF,IAC3B,MAAM7+B,EAAQ6mE,EAAQhoC,GAClBghB,EAAc7/C,GAChBuzD,EAAOy1B,gBAAgBnqD,GAEvB00B,EAAO01B,aAAapqD,EAAM7+B,MAI9B,MAAMJ,EAAQinE,EAAQjnE,OAAS,CAAC,EAahC,OAZAsM,OAAO8V,KAAKpiB,GAAO85B,SAAS3X,IAC1BwxC,EAAO3zD,MAAMmiB,GAAOniB,EAAMmiB,EAAI,IAQhCwxC,EAAO/xD,MAAQ+xD,EAAO/xD,aAEf+xD,EAAOyyB,KACP,CACT,CAQArlE,gBAAAA,CAAiBirC,EAAO19C,EAAM6Q,GAE5B9P,KAAK4R,oBAAoB+qC,EAAO19C,GAEhC,MAAMg7E,EAAUt9B,EAAMu9B,WAAav9B,EAAMu9B,SAAW,CAAC,GAM/C7qE,EALW,CACf8qE,OAAQpC,GACRqC,OAAQ3B,GACR33B,OAAQg4B,IAEe75E,IAASo6E,GAClCY,EAAQh7E,GAAQoQ,EAAQstC,EAAO19C,EAAM6Q,EACvC,CAOA8B,mBAAAA,CAAoB+qC,EAAO19C,GACzB,MAAMg7E,EAAUt9B,EAAMu9B,WAAav9B,EAAMu9B,SAAW,CAAC,GAC/CnvB,EAAQkvB,EAAQh7E,GAEtB,IAAK8rD,EACH,QAGe,CACfovB,OAAQjB,GACRkB,OAAQlB,GACRp4B,OAAQo4B,IAEej6E,IAASiQ,IAC1BytC,EAAO19C,EAAM8rD,GACrBkvB,EAAQh7E,QAAQtF,CAClB,CAEAukD,mBAAAA,GACE,OAAOjH,OAAO+G,gBAChB,CAQAkU,cAAAA,CAAe5N,EAAQ/xD,EAAOC,EAAQ6/D,GACpC,OAAOH,GAAe5N,EAAQ/xD,EAAOC,EAAQ6/D,EAC/C,CAKAukB,UAAAA,CAAWtyB,GACT,MAAMmO,EAAYrC,GAAe9L,GACjC,SAAUmO,IAAaA,EAAU4nB,YACnC,EC1Xa,MAAMC,GAAAxuE,WAAAA,IAAA6R,EAAAA,EAAAA,GAAA,kBAAAA,EAAAA,EAAAA,GAAA,kBAAAA,EAAAA,EAAAA,GAAA,eAOV,IAAKA,EAAAA,EAAAA,GAAA,wBAAAA,EAAAA,EAAAA,GAAA,2BAId48D,eAAAA,CAAgB9I,GACd,MAAM,EAAC7sE,EAAA,EAAGC,GAAK7E,KAAKsyE,SAAS,CAAC,IAAK,KAAMb,GACzC,MAAO,CAAC7sE,IAAGC,IACb,CAEA21E,QAAAA,GACE,OAAOlmC,GAASt0C,KAAK4E,IAAM0vC,GAASt0C,KAAK6E,EAC3C,CASAytE,QAAAA,CAASriF,EAAiBwqF,GACxB,MAAMjjB,EAAQx3D,KAAKk7D,YACnB,IAAKuf,IAAUjjB,EAEb,OAAOx3D,KAET,MAAMmG,EAA+B,CAAC,EAItC,OAHAlW,EAAMw6B,SAASmF,IACbzpB,EAAIypB,GAAQ4nC,EAAM5nC,IAAS4nC,EAAM5nC,GAAMixB,SAAW2W,EAAM5nC,GAAMqqC,IAAMj6D,KAAK4vB,EAAe,IAEnFzpB,CACT,EC3BK,SAASs8C,GAASnD,EAAO5C,GAC9B,MAAMg+B,EAAWp7B,EAAMr3B,QAAQy0B,MACzBi+B,EA8BR,SAA2Br7B,GACzB,MAAM59C,EAAS49C,EAAMr3B,QAAQvmB,OACvBmgD,EAAavC,EAAMs7B,YACnBC,EAAWv7B,EAAMmnB,QAAU5kB,GAAcngD,EAAS,EAAI,GACtDo5E,EAAWx7B,EAAMy7B,WAAal5B,EACpC,OAAOrwD,KAAKib,MAAMjb,KAAKsR,IAAI+3E,EAAUC,GACvC,CApC6BE,CAAkB17B,GACvC27B,EAAazpF,KAAKsR,IAAI43E,EAASQ,eAAiBP,EAAoBA,GACpEQ,EAAeT,EAAS73B,MAAMu4B,QAgEtC,SAAyB1+B,GACvB,MAAMzuB,EAAS,GACf,IAAIxzB,EAAGo3C,EACP,IAAKp3C,EAAI,EAAGo3C,EAAO6K,EAAMvhD,OAAQV,EAAIo3C,EAAMp3C,IACrCiiD,EAAMjiD,GAAGooD,OACX50B,EAAOzyB,KAAKf,GAGhB,OAAOwzB,CACT,CAzEgDotD,CAAgB3+B,GAAS,GACjE4+B,EAAkBH,EAAahgF,OAC/BmN,EAAQ6yE,EAAa,GACrB5yE,EAAO4yE,EAAaG,EAAkB,GACtCC,EAAW,GAGjB,GAAID,EAAkBL,EAEpB,OAwEJ,SAAoBv+B,EAAO6+B,EAAUJ,EAAc1P,GACjD,IAEIhxE,EAFAkW,EAAQ,EACRuP,EAAOi7D,EAAa,GAIxB,IADA1P,EAAUj6E,KAAKgqF,KAAK/P,GACfhxE,EAAI,EAAGA,EAAIiiD,EAAMvhD,OAAQV,IACxBA,IAAMylB,IACRq7D,EAAS//E,KAAKkhD,EAAMjiD,IACpBkW,IACAuP,EAAOi7D,EAAaxqE,EAAQ86D,GAGlC,CAtFIgQ,CAAW/+B,EAAO6+B,EAAUJ,EAAcG,EAAkBL,GACrDM,EAGT,MAAM9P,EA6BR,SAA0B0P,EAAcz+B,EAAOu+B,GAC7C,MAAMS,EA6FR,SAAwBhhF,GACtB,MAAMI,EAAMJ,EAAIS,OAChB,IAAIV,EAAGo2E,EAEP,GAAI/1E,EAAM,EACR,OAAO,EAGT,IAAK+1E,EAAOn2E,EAAI,GAAID,EAAI,EAAGA,EAAIK,IAAOL,EACpC,GAAIC,EAAID,GAAKC,EAAID,EAAI,KAAOo2E,EAC1B,OAAO,EAGX,OAAOA,CACT,CA3G2B8K,CAAeR,GAClC1P,EAAU/uB,EAAMvhD,OAAS8/E,EAI/B,IAAKS,EACH,OAAOlqF,KAAK+T,IAAIkmE,EAAS,GAG3B,MAAMmQ,EtC/BD,SAAoB7qF,GACzB,MAAMk9B,EAAmB,GACnBknB,EAAO3jD,KAAK2jD,KAAKpkD,GACvB,IAAI0J,EAEJ,IAAKA,EAAI,EAAGA,EAAI06C,EAAM16C,IAChB1J,EAAQ0J,IAAM,IAChBwzB,EAAOzyB,KAAKf,GACZwzB,EAAOzyB,KAAKzK,EAAQ0J,IAQxB,OALI06C,KAAiB,EAAPA,IACZlnB,EAAOzyB,KAAK25C,GAGdlnB,EAAO/I,MAAK,CAACvgB,EAAG/F,IAAM+F,EAAI/F,IAAG8T,MACtBub,CACT,CsCckB4tD,CAAWH,GAC3B,IAAK,IAAIjhF,EAAI,EAAGo3C,EAAO+pC,EAAQzgF,OAAS,EAAGV,EAAIo3C,EAAMp3C,IAAK,CACxD,MAAM2+D,EAASwiB,EAAQnhF,GACvB,GAAI2+D,EAASqS,EACX,OAAOrS,CAEX,CACA,OAAO5nE,KAAK+T,IAAIkmE,EAAS,EAC3B,CA/CkBqQ,CAAiBX,EAAcz+B,EAAOu+B,GAEtD,GAAIK,EAAkB,EAAG,CACvB,IAAI7gF,EAAGo3C,EACP,MAAMkqC,EAAkBT,EAAkB,EAAI9pF,KAAKI,OAAO2W,EAAOD,IAAUgzE,EAAkB,IAAM,KAEnG,IADA5tB,GAAKhR,EAAO6+B,EAAU9P,EAAS76B,EAAcmrC,GAAmB,EAAIzzE,EAAQyzE,EAAiBzzE,GACxF7N,EAAI,EAAGo3C,EAAOypC,EAAkB,EAAG7gF,EAAIo3C,EAAMp3C,IAChDizD,GAAKhR,EAAO6+B,EAAU9P,EAAS0P,EAAa1gF,GAAI0gF,EAAa1gF,EAAI,IAGnE,OADAizD,GAAKhR,EAAO6+B,EAAU9P,EAASljE,EAAMqoC,EAAcmrC,GAAmBr/B,EAAMvhD,OAASoN,EAAOwzE,GACrFR,EAGT,OADA7tB,GAAKhR,EAAO6+B,EAAU9P,GACf8P,CACT,CA6EA,SAAS7tB,GAAKhR,EAAO6+B,EAAU9P,EAASuQ,EAAYC,GAClD,MAAMhgF,EAAQg1C,EAAe+qC,EAAY,GACnC9/E,EAAM1K,KAAKsR,IAAImuC,EAAegrC,EAAUv/B,EAAMvhD,QAASuhD,EAAMvhD,QACnE,IACIA,EAAQV,EAAGylB,EADXvP,EAAQ,EAWZ,IARA86D,EAAUj6E,KAAKgqF,KAAK/P,GAChBwQ,IACF9gF,EAAS8gF,EAAWD,EACpBvQ,EAAUtwE,EAAS3J,KAAKib,MAAMtR,EAASswE,IAGzCvrD,EAAOjkB,EAEAikB,EAAO,GACZvP,IACAuP,EAAO1uB,KAAKI,MAAMqK,EAAQ0U,EAAQ86D,GAGpC,IAAKhxE,EAAIjJ,KAAK+T,IAAItJ,EAAO,GAAIxB,EAAIyB,EAAKzB,IAChCA,IAAMylB,IACRq7D,EAAS//E,KAAKkhD,EAAMjiD,IACpBkW,IACAuP,EAAO1uB,KAAKI,MAAMqK,EAAQ0U,EAAQ86D,GAGxC,EDzGA9tD,EAAAA,EAAAA,GAvCqB28D,GAAA,WAED,CAAC,IAAE38D,EAAAA,EAAAA,GAFF28D,GAAA,qBAGI3gF,GEAzB,MACMuiF,GAAiBA,CAAC58B,EAAOioB,EAAM7lE,IAAoB,QAAT6lE,GAA2B,SAATA,EAAkBjoB,EAAMioB,GAAQ7lE,EAAS49C,EAAMioB,GAAQ7lE,EACnHy6E,GAAgBA,CAACC,EAAalB,IAAkB1pF,KAAKsR,IAAIo4E,GAAiBkB,EAAaA,GAY7F,SAASC,GAAO3hF,EAAK4hF,GACnB,MAAMruD,EAAS,GACTsuD,EAAY7hF,EAAIS,OAASmhF,EACzBxhF,EAAMJ,EAAIS,OAChB,IAAIV,EAAI,EAER,KAAOA,EAAIK,EAAKL,GAAK8hF,EACnBtuD,EAAOzyB,KAAKd,EAAIlJ,KAAKib,MAAMhS,KAE7B,OAAOwzB,CACT,CAOA,SAASuuD,GAAoBl9B,EAAO7sC,EAAOgqE,GACzC,MAAMthF,EAASmkD,EAAM5C,MAAMvhD,OACrBuhF,EAAalrF,KAAKsR,IAAI2P,EAAOtX,EAAS,GACtCc,EAAQqjD,EAAMgqB,YACdptE,EAAMojD,EAAMiqB,UACZt1B,EAAU,KAChB,IACIvyC,EADAi7E,EAAYr9B,EAAMqnB,gBAAgB+V,GAGtC,KAAID,IAEA/6E,EADa,IAAXvG,EACO3J,KAAK+T,IAAIo3E,EAAY1gF,EAAOC,EAAMygF,GACxB,IAAVlqE,GACC6sC,EAAMqnB,gBAAgB,GAAKgW,GAAa,GAExCA,EAAYr9B,EAAMqnB,gBAAgB+V,EAAa,IAAM,EAEjEC,GAAaD,EAAajqE,EAAQ/Q,GAAUA,EAGxCi7E,EAAY1gF,EAAQg4C,GAAW0oC,EAAYzgF,EAAM+3C,IAIvD,OAAO0oC,CACT,CAuBA,SAASC,GAAkB30D,GACzB,OAAOA,EAAQ25B,UAAY35B,EAAQ45B,WAAa,CAClD,CAKA,SAASg7B,GAAe50D,EAASwhC,GAC/B,IAAKxhC,EAAQz0B,QACX,OAAO,EAGT,MAAM4qD,EAAOoL,GAAOvhC,EAAQm2B,KAAMqL,GAC5BrI,EAAUmI,GAAUthC,EAAQm5B,SAGlC,OAFcliD,EAAQ+oB,EAAQkD,MAAQlD,EAAQkD,KAAKhwB,OAAS,GAE5CijD,EAAKE,WAAc8C,EAAQ5uD,MAC7C,CAiBA,SAASsqF,GAAWrlC,EAAOvgD,EAAUu6C,GAEnC,IAAItrC,EAAMqxC,GAAmBC,GAI7B,OAHIhG,GAAyB,UAAbv6C,IAA2Bu6C,GAAwB,UAAbv6C,KACpDiP,EArHkBsxC,IAAoB,SAAVA,EAAmB,QAAoB,UAAVA,EAAoB,OAASA,EAqHhFslC,CAAa52E,IAEdA,CACT,CAuCe,MAAM62E,WAAc1C,GAGjCxuE,WAAAA,CAAY0tD,GACVztD,QAGA/L,KAAKgY,GAAKwhD,EAAIxhD,GAEdhY,KAAKf,KAAOu6D,EAAIv6D,KAEhBe,KAAKioB,aAAUtuB,EAEfqG,KAAKy+C,IAAM+a,EAAI/a,IAEfz+C,KAAK28C,MAAQ6c,EAAI7c,MAIjB38C,KAAKvI,SAAMkC,EAEXqG,KAAKrI,YAASgC,EAEdqG,KAAKxI,UAAOmC,EAEZqG,KAAKtI,WAAQiC,EAEbqG,KAAKzN,WAAQoH,EAEbqG,KAAKxN,YAASmH,EACdqG,KAAKi9E,SAAW,CACdzlF,KAAM,EACNE,MAAO,EACPD,IAAK,EACLE,OAAQ,GAGVqI,KAAKsoD,cAAW3uD,EAEhBqG,KAAKuyD,eAAY54D,EAEjBqG,KAAKk9E,gBAAavjF,EAElBqG,KAAKm9E,mBAAgBxjF,EAErBqG,KAAKo9E,iBAAczjF,EAEnBqG,KAAKq9E,kBAAe1jF,EAIpBqG,KAAKk4C,UAAOv+C,EAEZqG,KAAKs9E,mBAAgB3jF,EACrBqG,KAAK8C,SAAMnJ,EACXqG,KAAKuF,SAAM5L,EACXqG,KAAKu9E,YAAS5jF,EAEdqG,KAAK08C,MAAQ,GAEb18C,KAAKw9E,eAAiB,KAEtBx9E,KAAKy9E,YAAc,KAEnBz9E,KAAK09E,YAAc,KACnB19E,KAAKymE,QAAU,EACfzmE,KAAK+6E,WAAa,EAClB/6E,KAAK29E,kBAAoB,CAAC,EAE1B39E,KAAKspE,iBAAc3vE,EAEnBqG,KAAKupE,eAAY5vE,EACjBqG,KAAKoxE,gBAAiB,EACtBpxE,KAAK49E,cAAWjkF,EAChBqG,KAAK69E,cAAWlkF,EAChBqG,KAAK89E,mBAAgBnkF,EACrBqG,KAAK+9E,mBAAgBpkF,EACrBqG,KAAKg+E,aAAe,EACpBh+E,KAAKi+E,aAAe,EACpBj+E,KAAKomE,OAAS,CAAC,EACfpmE,KAAKk+E,mBAAoB,EACzBl+E,KAAK2+D,cAAWhlE,CAClB,CAMA8U,IAAAA,CAAKwZ,GACHjoB,KAAKioB,QAAUA,EAAQ6jC,WAAW9rD,KAAKukD,cAEvCvkD,KAAKk4C,KAAOjwB,EAAQiwB,KAGpBl4C,KAAK69E,SAAW79E,KAAKutD,MAAMtlC,EAAQnlB,KACnC9C,KAAK49E,SAAW59E,KAAKutD,MAAMtlC,EAAQ1iB,KACnCvF,KAAK+9E,cAAgB/9E,KAAKutD,MAAMtlC,EAAQk2D,cACxCn+E,KAAK89E,cAAgB99E,KAAKutD,MAAMtlC,EAAQm2D,aAC1C,CAQA7wB,KAAAA,CAAMkW,EAAKhxD,GACT,OAAOgxD,CACT,CAOAprB,aAAAA,GACE,IAAI,SAACwlC,EAAQ,SAAED,EAAQ,cAAEG,EAAA,cAAeD,GAAiB99E,KAKzD,OAJA69E,EAAW9sC,EAAgB8sC,EAAUl8E,OAAO8xC,mBAC5CmqC,EAAW7sC,EAAgB6sC,EAAUj8E,OAAO+gE,mBAC5Cqb,EAAgBhtC,EAAgBgtC,EAAep8E,OAAO8xC,mBACtDqqC,EAAgB/sC,EAAgB+sC,EAAen8E,OAAO+gE,mBAC/C,CACL5/D,IAAKiuC,EAAgB8sC,EAAUE,GAC/Bx4E,IAAKwrC,EAAgB6sC,EAAUE,GAC/B3lC,WAAYrH,EAAS+sC,GACrBzlC,WAAYtH,EAAS8sC,GAEzB,CAQAtb,SAAAA,CAAUC,GAER,IACIl2D,GADA,IAACvJ,EAAA,IAAKyC,EAAA,WAAK4yC,EAAA,WAAYC,GAAcp4C,KAAKq4C,gBAG9C,GAAIF,GAAcC,EAChB,MAAO,CAACt1C,MAAKyC,OAGf,MAAM84E,EAAQr+E,KAAK68D,0BACnB,IAAK,IAAIpiE,EAAI,EAAGo3C,EAAOwsC,EAAMljF,OAAQV,EAAIo3C,IAAQp3C,EAC/C4R,EAAQgyE,EAAM5jF,GAAGsiE,WAAWuF,UAAUtiE,KAAMuiE,GACvCpqB,IACHr1C,EAAMtR,KAAKsR,IAAIA,EAAKuJ,EAAMvJ,MAEvBs1C,IACH7yC,EAAM/T,KAAK+T,IAAIA,EAAK8G,EAAM9G,MAQ9B,OAHAzC,EAAMs1C,GAAct1C,EAAMyC,EAAMA,EAAMzC,EACtCyC,EAAM4yC,GAAcr1C,EAAMyC,EAAMzC,EAAMyC,EAE/B,CACLzC,IAAKiuC,EAAgBjuC,EAAKiuC,EAAgBxrC,EAAKzC,IAC/CyC,IAAKwrC,EAAgBxrC,EAAKwrC,EAAgBjuC,EAAKyC,IAEnD,CAOA4uE,UAAAA,GACE,MAAO,CACL38E,KAAMwI,KAAKo9E,aAAe,EAC1B3lF,IAAKuI,KAAKk9E,YAAc,EACxBxlF,MAAOsI,KAAKq9E,cAAgB,EAC5B1lF,OAAQqI,KAAKm9E,eAAiB,EAElC,CAOAmB,QAAAA,GACE,OAAOt+E,KAAK08C,KACd,CAKAolB,SAAAA,GACE,MAAM3iE,EAAOa,KAAK28C,MAAMx9C,KACxB,OAAOa,KAAKioB,QAAQ45C,SAAW7hE,KAAKuoE,eAAiBppE,EAAKo/E,QAAUp/E,EAAKq/E,UAAYr/E,EAAK0iE,QAAU,EACtG,CAKA4c,aAAAA,GAAgD,IAAlCpb,EAAY3jE,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAAM,KAAK28C,MAAM0mB,UAEnC,OADcrjE,KAAKy9E,cAAgBz9E,KAAKy9E,YAAcz9E,KAAK0+E,mBAAmBrb,GAEhF,CAGA+S,YAAAA,GACEp2E,KAAKomE,OAAS,CAAC,EACfpmE,KAAKk+E,mBAAoB,CAC3B,CAMAS,YAAAA,GACE32D,EAAKhoB,KAAKioB,QAAQ02D,aAAc,CAAC3+E,MACnC,CAUAm6D,MAAAA,CAAO7R,EAAUiK,EAAWD,GAC1B,MAAM,YAACjR,EAAW,MAAEG,EAAO9E,MAAOg+B,GAAY16E,KAAKioB,QAC7C22D,EAAalE,EAASkE,WAG5B5+E,KAAK2+E,eAGL3+E,KAAKsoD,SAAWA,EAChBtoD,KAAKuyD,UAAYA,EACjBvyD,KAAKi9E,SAAW3qB,EAAUr1D,OAAO4hB,OAAO,CACtCrnB,KAAM,EACNE,MAAO,EACPD,IAAK,EACLE,OAAQ,GACP26D,GAEHtyD,KAAK08C,MAAQ,KACb18C,KAAK09E,YAAc,KACnB19E,KAAKw9E,eAAiB,KACtBx9E,KAAKy9E,YAAc,KAGnBz9E,KAAK6+E,sBACL7+E,KAAK8+E,gBACL9+E,KAAK++E,qBAEL/+E,KAAK+6E,WAAa/6E,KAAKuoE,eACnBvoE,KAAKzN,MAAQ+/D,EAAQ96D,KAAO86D,EAAQ56D,MACpCsI,KAAKxN,OAAS8/D,EAAQ76D,IAAM66D,EAAQ36D,OAGnCqI,KAAKk+E,oBACRl+E,KAAKg/E,mBACLh/E,KAAKi/E,sBACLj/E,KAAKk/E,kBACLl/E,KAAKu9E,O3BpPJ,SAAmB4B,EAAuC39B,EAAwBH,GACvF,MAAM,IAACv+C,EAAA,IAAKyC,GAAO45E,EACb5I,EAASrlC,EAAYsQ,GAAQj8C,EAAMzC,GAAO,GAC1Cs8E,EAAWA,CAACruF,EAAek7D,IAAgB5K,GAAyB,IAAVtwD,EAAc,EAAIA,EAAQk7D,EAC1F,MAAO,CACLnpD,IAAKs8E,EAASt8E,GAAMtR,KAAKub,IAAIwpE,IAC7BhxE,IAAK65E,EAAS75E,EAAKgxE,GAEvB,C2B4OoB8I,CAAUr/E,KAAMwhD,EAAOH,GACrCrhD,KAAKk+E,mBAAoB,GAG3Bl+E,KAAKs/E,mBAELt/E,KAAK08C,MAAQ18C,KAAKu/E,cAAgB,GAGlCv/E,KAAKw/E,kBAIL,MAAMC,EAAkBb,EAAa5+E,KAAK08C,MAAMvhD,OAChD6E,KAAK0/E,sBAAsBD,EAAkBpD,GAAOr8E,KAAK08C,MAAOkiC,GAAc5+E,KAAK08C,OAMnF18C,KAAK46D,YAGL56D,KAAK2/E,+BACL3/E,KAAK4/E,yBACL5/E,KAAK6/E,8BAGDnF,EAASlnF,UAAYknF,EAASj4B,UAAgC,SAApBi4B,EAAS57D,UACrD9e,KAAK08C,MAAQ+F,GAASziD,KAAMA,KAAK08C,OACjC18C,KAAK09E,YAAc,KACnB19E,KAAK8/E,iBAGHL,GAEFz/E,KAAK0/E,sBAAsB1/E,KAAK08C,OAGlC18C,KAAK+/E,YACL//E,KAAKggF,MACLhgF,KAAKigF,WAILjgF,KAAKkgF,aACP,CAKAtlB,SAAAA,GACE,IACIqP,EAAYE,EADZgW,EAAgBngF,KAAKioB,QAAQwpB,QAG7BzxC,KAAKuoE,gBACP0B,EAAajqE,KAAKxI,KAClB2yE,EAAWnqE,KAAKtI,QAEhBuyE,EAAajqE,KAAKvI,IAClB0yE,EAAWnqE,KAAKrI,OAEhBwoF,GAAiBA,GAEnBngF,KAAKspE,YAAcW,EACnBjqE,KAAKupE,UAAYY,EACjBnqE,KAAKoxE,eAAiB+O,EACtBngF,KAAKymE,QAAU0D,EAAWF,EAC1BjqE,KAAKogF,eAAiBpgF,KAAKioB,QAAQo4D,aACrC,CAEAH,WAAAA,GACEl4D,EAAKhoB,KAAKioB,QAAQi4D,YAAa,CAAClgF,MAClC,CAIA6+E,mBAAAA,GACE72D,EAAKhoB,KAAKioB,QAAQ42D,oBAAqB,CAAC7+E,MAC1C,CACA8+E,aAAAA,GAEM9+E,KAAKuoE,gBAEPvoE,KAAKzN,MAAQyN,KAAKsoD,SAClBtoD,KAAKxI,KAAO,EACZwI,KAAKtI,MAAQsI,KAAKzN,QAElByN,KAAKxN,OAASwN,KAAKuyD,UAGnBvyD,KAAKvI,IAAM,EACXuI,KAAKrI,OAASqI,KAAKxN,QAIrBwN,KAAKo9E,YAAc,EACnBp9E,KAAKk9E,WAAa,EAClBl9E,KAAKq9E,aAAe,EACpBr9E,KAAKm9E,cAAgB,CACvB,CACA4B,kBAAAA,GACE/2D,EAAKhoB,KAAKioB,QAAQ82D,mBAAoB,CAAC/+E,MACzC,CAEAsgF,UAAAA,CAAWjsF,GACT2L,KAAK28C,MAAM4jC,cAAclsF,EAAM2L,KAAKukD,cACpCv8B,EAAKhoB,KAAKioB,QAAQ5zB,GAAO,CAAC2L,MAC5B,CAGAg/E,gBAAAA,GACEh/E,KAAKsgF,WAAW,mBAClB,CACArB,mBAAAA,GAAuB,CACvBC,eAAAA,GACEl/E,KAAKsgF,WAAW,kBAClB,CAGAhB,gBAAAA,GACEt/E,KAAKsgF,WAAW,mBAClB,CAIAf,UAAAA,GACE,MAAO,EACT,CACAC,eAAAA,GACEx/E,KAAKsgF,WAAW,kBAClB,CAEAE,2BAAAA,GACEx4D,EAAKhoB,KAAKioB,QAAQu4D,4BAA6B,CAACxgF,MAClD,CAKAygF,kBAAAA,CAAmB/jC,GACjB,MAAMg+B,EAAW16E,KAAKioB,QAAQy0B,MAC9B,IAAIjiD,EAAGo3C,EAAMwmB,EACb,IAAK59D,EAAI,EAAGo3C,EAAO6K,EAAMvhD,OAAQV,EAAIo3C,EAAMp3C,IACzC49D,EAAO3b,EAAMjiD,GACb49D,EAAK9/C,MAAQyP,EAAK0yD,EAAS1yD,SAAU,CAACqwC,EAAKtnE,MAAO0J,EAAGiiD,GAAQ18C,KAEjE,CACA0gF,0BAAAA,GACE14D,EAAKhoB,KAAKioB,QAAQy4D,2BAA4B,CAAC1gF,MACjD,CAIA2/E,4BAAAA,GACE33D,EAAKhoB,KAAKioB,QAAQ03D,6BAA8B,CAAC3/E,MACnD,CACA4/E,sBAAAA,GACE,MAAM33D,EAAUjoB,KAAKioB,QACfyyD,EAAWzyD,EAAQy0B,MACnBikC,EAAWxE,GAAcn8E,KAAK08C,MAAMvhD,OAAQ8sB,EAAQy0B,MAAMw+B,eAC1D94B,EAAcs4B,EAASt4B,aAAe,EACtCC,EAAcq4B,EAASr4B,YAC7B,IACIP,EAAWyQ,EAAWquB,EADtBtD,EAAgBl7B,EAGpB,IAAKpiD,KAAK6gF,eAAiBnG,EAASlnF,SAAW4uD,GAAeC,GAAes+B,GAAY,IAAM3gF,KAAKuoE,eAElG,YADAvoE,KAAKs9E,cAAgBl7B,GAIvB,MAAM0+B,EAAa9gF,KAAK+gF,iBAClBC,EAAgBF,EAAWG,OAAO1uF,MAClC2uF,EAAiBJ,EAAWK,QAAQ3uF,OAIpC81D,EAAWpS,GAAYl2C,KAAK28C,MAAMpqD,MAAQyuF,EAAe,EAAGhhF,KAAKsoD,UACvExG,EAAY75B,EAAQvmB,OAAS1B,KAAKsoD,SAAWq4B,EAAWr4B,GAAYq4B,EAAW,GAG3EK,EAAgB,EAAIl/B,IACtBA,EAAYwG,GAAYq4B,GAAY14D,EAAQvmB,OAAS,GAAM,IAC3D6wD,EAAYvyD,KAAKuyD,UAAYqqB,GAAkB30D,EAAQw5B,MACvDi5B,EAASt5B,QAAUy7B,GAAe50D,EAAQ1M,MAAOvb,KAAK28C,MAAM10B,QAAQm2B,MACpEwiC,EAAmBpvF,KAAK2jD,KAAK6rC,EAAgBA,EAAgBE,EAAiBA,GAC9E5D,EAAgB5oC,GAAUljD,KAAKsR,IAC7BtR,KAAK4vF,KAAKlrC,IAAa4qC,EAAWK,QAAQ3uF,OAAS,GAAKsvD,GAAY,EAAG,IACvEtwD,KAAK4vF,KAAKlrC,GAAYqc,EAAYquB,GAAmB,EAAG,IAAMpvF,KAAK4vF,KAAKlrC,GAAYgrC,EAAiBN,GAAmB,EAAG,MAE7HtD,EAAgB9rF,KAAK+T,IAAI68C,EAAa5wD,KAAKsR,IAAIu/C,EAAai7B,KAG9Dt9E,KAAKs9E,cAAgBA,CACvB,CACAuC,2BAAAA,GACE73D,EAAKhoB,KAAKioB,QAAQ43D,4BAA6B,CAAC7/E,MAClD,CACA8/E,aAAAA,GAAiB,CAIjBC,SAAAA,GACE/3D,EAAKhoB,KAAKioB,QAAQ83D,UAAW,CAAC//E,MAChC,CACAggF,GAAAA,GAEE,MAAM7Q,EAAU,CACd58E,MAAO,EACPC,OAAQ,IAGJ,MAACmqD,EAAO10B,SAAUy0B,MAAOg+B,EAAUn/D,MAAO8lE,EAAW5/B,KAAM6/B,IAAathF,KACxExM,EAAUwM,KAAK6gF,aACftY,EAAevoE,KAAKuoE,eAE1B,GAAI/0E,EAAS,CACX,MAAM+tF,EAAc1E,GAAewE,EAAW1kC,EAAM10B,QAAQm2B,MAU5D,GATImqB,GACF4G,EAAQ58E,MAAQyN,KAAKsoD,SACrB6mB,EAAQ38E,OAASoqF,GAAkB0E,GAAYC,IAE/CpS,EAAQ38E,OAASwN,KAAKuyD,UACtB4c,EAAQ58E,MAAQqqF,GAAkB0E,GAAYC,GAI5C7G,EAASlnF,SAAWwM,KAAK08C,MAAMvhD,OAAQ,CACzC,MAAM,MAACmN,EAAA,KAAOC,EAAA,OAAM04E,EAAA,QAAQE,GAAWnhF,KAAK+gF,iBACtCS,EAAiC,EAAnB9G,EAASt5B,QACvBqgC,EAAejtC,GAAUx0C,KAAKs9E,eAC9BljC,EAAM5oD,KAAK4oD,IAAIqnC,GACftoC,EAAM3nD,KAAK2nD,IAAIsoC,GAErB,GAAIlZ,EAAc,CAEhB,MAAMmZ,EAAchH,EAASp4B,OAAS,EAAInJ,EAAM8nC,EAAO1uF,MAAQ6nD,EAAM+mC,EAAQ3uF,OAC7E28E,EAAQ38E,OAAShB,KAAKsR,IAAI9C,KAAKuyD,UAAW4c,EAAQ38E,OAASkvF,EAAcF,OACpE,CAGL,MAAMG,EAAajH,EAASp4B,OAAS,EAAIlI,EAAM6mC,EAAO1uF,MAAQ4mD,EAAMgoC,EAAQ3uF,OAE5E28E,EAAQ58E,MAAQf,KAAKsR,IAAI9C,KAAKsoD,SAAU6mB,EAAQ58E,MAAQovF,EAAaH,GAEvExhF,KAAK4hF,kBAAkBt5E,EAAOC,EAAM4wC,EAAKiB,IAI7Cp6C,KAAK6hF,iBAEDtZ,GACFvoE,KAAKzN,MAAQyN,KAAKymE,QAAU9pB,EAAMpqD,MAAQyN,KAAKi9E,SAASzlF,KAAOwI,KAAKi9E,SAASvlF,MAC7EsI,KAAKxN,OAAS28E,EAAQ38E,SAEtBwN,KAAKzN,MAAQ48E,EAAQ58E,MACrByN,KAAKxN,OAASwN,KAAKymE,QAAU9pB,EAAMnqD,OAASwN,KAAKi9E,SAASxlF,IAAMuI,KAAKi9E,SAAStlF,OAElF,CAEAiqF,iBAAAA,CAAkBt5E,EAAOC,EAAM4wC,EAAKiB,GAClC,MAAOsC,OAAO,MAACjF,EAAA,QAAO2J,GAAQ,SAAElqD,GAAY8I,KAAKioB,QAC3C65D,EAAmC,IAAvB9hF,KAAKs9E,cACjByE,EAAgC,QAAb7qF,GAAoC,MAAd8I,KAAKk4C,KAEpD,GAAIl4C,KAAKuoE,eAAgB,CACvB,MAAMyZ,EAAahiF,KAAK2mE,gBAAgB,GAAK3mE,KAAKxI,KAC5CyqF,EAAcjiF,KAAKtI,MAAQsI,KAAK2mE,gBAAgB3mE,KAAK08C,MAAMvhD,OAAS,GAC1E,IAAIiiF,EAAc,EACdC,EAAe,EAIfyE,EACEC,GACF3E,EAAchjC,EAAM9xC,EAAM/V,MAC1B8qF,EAAelkC,EAAM5wC,EAAK/V,SAE1B4qF,EAAcjkC,EAAM7wC,EAAM9V,OAC1B6qF,EAAejjC,EAAM7xC,EAAKhW,OAET,UAAVklD,EACT4lC,EAAe90E,EAAKhW,MACD,QAAVklD,EACT2lC,EAAc90E,EAAM/V,MACD,UAAVklD,IACT2lC,EAAc90E,EAAM/V,MAAQ,EAC5B8qF,EAAe90E,EAAKhW,MAAQ,GAI9ByN,KAAKo9E,YAAc5rF,KAAK+T,KAAK63E,EAAc4E,EAAa5gC,GAAWphD,KAAKzN,OAASyN,KAAKzN,MAAQyvF,GAAa,GAC3GhiF,KAAKq9E,aAAe7rF,KAAK+T,KAAK83E,EAAe4E,EAAc7gC,GAAWphD,KAAKzN,OAASyN,KAAKzN,MAAQ0vF,GAAc,OAC1G,CACL,IAAI/E,EAAa30E,EAAK/V,OAAS,EAC3B2qF,EAAgB70E,EAAM9V,OAAS,EAErB,UAAVilD,GACFylC,EAAa,EACbC,EAAgB70E,EAAM9V,QACH,QAAVilD,IACTylC,EAAa30E,EAAK/V,OAClB2qF,EAAgB,GAGlBn9E,KAAKk9E,WAAaA,EAAa97B,EAC/BphD,KAAKm9E,cAAgBA,EAAgB/7B,EAEzC,CAMAygC,cAAAA,GACM7hF,KAAKi9E,WACPj9E,KAAKi9E,SAASzlF,KAAOhG,KAAK+T,IAAIvF,KAAKo9E,YAAap9E,KAAKi9E,SAASzlF,MAC9DwI,KAAKi9E,SAASxlF,IAAMjG,KAAK+T,IAAIvF,KAAKk9E,WAAYl9E,KAAKi9E,SAASxlF,KAC5DuI,KAAKi9E,SAASvlF,MAAQlG,KAAK+T,IAAIvF,KAAKq9E,aAAcr9E,KAAKi9E,SAASvlF,OAChEsI,KAAKi9E,SAAStlF,OAASnG,KAAK+T,IAAIvF,KAAKm9E,cAAen9E,KAAKi9E,SAAStlF,QAEtE,CAEAsoF,QAAAA,GACEj4D,EAAKhoB,KAAKioB,QAAQg4D,SAAU,CAACjgF,MAC/B,CAMAuoE,YAAAA,GACE,MAAM,KAACrwB,EAAA,SAAMhhD,GAAY8I,KAAKioB,QAC9B,MAAoB,QAAb/wB,GAAmC,WAAbA,GAAkC,MAATghD,CACxD,CAIAgqC,UAAAA,GACE,OAAOliF,KAAKioB,QAAQ0rD,QACtB,CAMA+L,qBAAAA,CAAsBhjC,GAMpB,IAAIjiD,EAAGo3C,EACP,IANA7xC,KAAKwgF,8BAELxgF,KAAKygF,mBAAmB/jC,GAInBjiD,EAAI,EAAGo3C,EAAO6K,EAAMvhD,OAAQV,EAAIo3C,EAAMp3C,IACrCm2C,EAAc8L,EAAMjiD,GAAG8d,SACzBmkC,EAAMn2B,OAAO9rB,EAAG,GAChBo3C,IACAp3C,KAIJuF,KAAK0gF,4BACP,CAMAK,cAAAA,GACE,IAAID,EAAa9gF,KAAK09E,YAEtB,IAAKoD,EAAY,CACf,MAAMlC,EAAa5+E,KAAKioB,QAAQy0B,MAAMkiC,WACtC,IAAIliC,EAAQ18C,KAAK08C,MACbkiC,EAAaliC,EAAMvhD,SACrBuhD,EAAQ2/B,GAAO3/B,EAAOkiC,IAGxB5+E,KAAK09E,YAAcoD,EAAa9gF,KAAKmiF,mBAAmBzlC,EAAOA,EAAMvhD,OAAQ6E,KAAKioB,QAAQy0B,MAAMw+B,eAGlG,OAAO4F,CACT,CAQAqB,kBAAAA,CAAmBzlC,EAAOvhD,EAAQ+/E,GAChC,MAAM,IAACz8B,EAAKk/B,kBAAmByE,GAAUpiF,KACnCqiF,EAAS,GACTC,EAAU,GACV/F,EAAY/qF,KAAKib,MAAMtR,EAASghF,GAAchhF,EAAQ+/E,IAC5D,IAEIzgF,EAAG+G,EAAGoiD,EAAMrrC,EAAOgqE,EAAUC,EAAY/+B,EAAOnF,EAAY/rD,EAAOC,EAAQiwF,EAF3EC,EAAkB,EAClBC,EAAmB,EAGvB,IAAKloF,EAAI,EAAGA,EAAIU,EAAQV,GAAK8hF,EAAW,CAQtC,GAPAhkE,EAAQmkC,EAAMjiD,GAAG8d,MACjBgqE,EAAWviF,KAAK4iF,wBAAwBnoF,GACxCgkD,EAAIL,KAAOokC,EAAaD,EAAS9kF,OACjCgmD,EAAQ2+B,EAAOI,GAAcJ,EAAOI,IAAe,CAACrjF,KAAM,CAAC,EAAGgkD,GAAI,IAClE7E,EAAaikC,EAASjkC,WACtB/rD,EAAQC,EAAS,EAEZo+C,EAAcr4B,IAAWrZ,EAAQqZ,IAG/B,GAAIrZ,EAAQqZ,GAEjB,IAAK/W,EAAI,EAAGoiD,EAAOrrC,EAAMpd,OAAQqG,EAAIoiD,IAAQpiD,EAC3CihF,EAAqClqE,EAAM/W,GAEtCovC,EAAc6xC,IAAiBvjF,EAAQujF,KAC1ClwF,EAAQ2wD,GAAazE,EAAKgF,EAAMtkD,KAAMskD,EAAMN,GAAI5wD,EAAOkwF,GACvDjwF,GAAU8rD,QATd/rD,EAAQ2wD,GAAazE,EAAKgF,EAAMtkD,KAAMskD,EAAMN,GAAI5wD,EAAOgmB,GACvD/lB,EAAS8rD,EAYX+jC,EAAO7mF,KAAKjJ,GACZ+vF,EAAQ9mF,KAAKhJ,GACbkwF,EAAkBlxF,KAAK+T,IAAIhT,EAAOmwF,GAClCC,EAAmBnxF,KAAK+T,IAAI/S,EAAQmwF,EACtC,EAhxBJ,SAAwBP,EAAQjnF,GAC9Bo2C,EAAK6wC,GAAS3+B,IACZ,MAAMN,EAAKM,EAAMN,GACXa,EAAQb,EAAGhoD,OAAS,EAC1B,IAAIV,EACJ,GAAIupD,EAAQ7oD,EAAQ,CAClB,IAAKV,EAAI,EAAGA,EAAIupD,IAASvpD,SAChBgpD,EAAMtkD,KAAKgkD,EAAG1oD,IAEvB0oD,EAAG58B,OAAO,EAAGy9B,MAGnB,CAqwBIN,CAAe0+B,EAAQjnF,GAEvB,MAAM8lF,EAASoB,EAAOrmF,QAAQ0mF,GACxBvB,EAAUmB,EAAQtmF,QAAQ2mF,GAE1BE,EAAWp3D,IAAA,CAAUl5B,MAAO8vF,EAAO52D,IAAQ,EAAGj5B,OAAQ8vF,EAAQ72D,IAAQ,IAE5E,MAAO,CACLnjB,MAAOu6E,EAAQ,GACft6E,KAAMs6E,EAAQ1nF,EAAS,GACvB8lF,OAAQ4B,EAAQ5B,GAChBE,QAAS0B,EAAQ1B,GACjBkB,SACAC,UAEJ,CAOArf,gBAAAA,CAAiBlyE,GACf,OAAOA,CACT,CASAunD,gBAAAA,CAAiBvnD,EAAO0hB,GACtB,OAAOkB,GACT,CAQAy2D,gBAAAA,CAAiBlmB,GAAQ,CAQzByiB,eAAAA,CAAgBl0D,GACd,MAAMiqC,EAAQ18C,KAAK08C,MACnB,OAAIjqC,EAAQ,GAAKA,EAAQiqC,EAAMvhD,OAAS,EAC/B,KAEF6E,KAAKs4C,iBAAiBoE,EAAMjqC,GAAO1hB,MAC5C,CAQAm5E,kBAAAA,CAAmB4Y,GACb9iF,KAAKoxE,iBACP0R,EAAU,EAAIA,GAGhB,MAAM5+B,EAAQlkD,KAAKspE,YAAcwZ,EAAU9iF,KAAKymE,QAChD,OvCnuBKvwB,GuCmuBcl2C,KAAKogF,eAAiBn8B,GAAYjkD,KAAK28C,MAAOuH,EAAO,GAAKA,GvCnuBpD,MAAO,MuCouBlC,CAMA6+B,kBAAAA,CAAmB7+B,GACjB,MAAM4+B,GAAW5+B,EAAQlkD,KAAKspE,aAAetpE,KAAKymE,QAClD,OAAOzmE,KAAKoxE,eAAiB,EAAI0R,EAAUA,CAC7C,CAOAxa,YAAAA,GACE,OAAOtoE,KAAKs4C,iBAAiBt4C,KAAKgjF,eACpC,CAKAA,YAAAA,GACE,MAAM,IAAClgF,EAAG,IAAEyC,GAAOvF,KAEnB,OAAO8C,EAAM,GAAKyC,EAAM,EAAIA,EAC1BzC,EAAM,GAAKyC,EAAM,EAAIzC,EACrB,CACJ,CAKAyhD,UAAAA,CAAW9xC,GACT,MAAMiqC,EAAQ18C,KAAK08C,OAAS,GAE5B,GAAIjqC,GAAS,GAAKA,EAAQiqC,EAAMvhD,OAAQ,CACtC,MAAMk9D,EAAO3b,EAAMjqC,GACnB,OAAO4lD,EAAKsG,WACbtG,EAAKsG,SAt1BV,SAA2B96C,EAAQpR,EAAO4lD,GACxC,OAAOvO,GAAcjmC,EAAQ,CAC3Bw0C,OACA5lD,QACAxT,KAAM,QAEV,CAg1BqBgkF,CAAkBjjF,KAAKukD,aAAc9xC,EAAO4lD,IAE7D,OAAOr4D,KAAK2+D,WACZ3+D,KAAK2+D,SA/1BA7U,GA+1B8B9pD,KAAK28C,MAAM4H,aA/1BnB,CAC3BjF,MA81B4Dt/C,KA71B5Df,KAAM,UA81BR,CAMA27E,SAAAA,GACE,MAAMsI,EAAcljF,KAAKioB,QAAQy0B,MAG3BymC,EAAM3uC,GAAUx0C,KAAKs9E,eACrBljC,EAAM5oD,KAAKub,IAAIvb,KAAK4oD,IAAI+oC,IACxBhqC,EAAM3nD,KAAKub,IAAIvb,KAAK2nD,IAAIgqC,IAExBrC,EAAa9gF,KAAK+gF,iBAClB3/B,EAAU8hC,EAAYxgC,iBAAmB,EACzChyC,EAAIowE,EAAaA,EAAWG,OAAO1uF,MAAQ6uD,EAAU,EACrD5f,EAAIs/C,EAAaA,EAAWK,QAAQ3uF,OAAS4uD,EAAU,EAG7D,OAAOphD,KAAKuoE,eACR/mC,EAAI4Y,EAAM1pC,EAAIyoC,EAAMzoC,EAAI0pC,EAAM5Y,EAAI2X,EAClC3X,EAAI2X,EAAMzoC,EAAI0pC,EAAM5Y,EAAI4Y,EAAM1pC,EAAIyoC,CACxC,CAMA0nC,UAAAA,GACE,MAAMrtF,EAAUwM,KAAKioB,QAAQz0B,QAE7B,MAAgB,SAAZA,IACOA,EAGJwM,KAAK68D,0BAA0B1hE,OAAS,CACjD,CAKAioF,qBAAAA,CAAsB/f,GACpB,MAAMnrB,EAAOl4C,KAAKk4C,KACZyE,EAAQ38C,KAAK28C,MACb10B,EAAUjoB,KAAKioB,SACf,KAACw5B,EAAI,SAAEvqD,EAAA,OAAU+qD,GAAUh6B,EAC3BvmB,EAAS+/C,EAAK//C,OACd6mE,EAAevoE,KAAKuoE,eAEpB6T,EADQp8E,KAAK08C,MACOvhD,QAAUuG,EAAS,EAAI,GAC3C2hF,EAAKzG,GAAkBn7B,GACvBvxB,EAAQ,GAERozD,EAAarhC,EAAO6J,WAAW9rD,KAAKukD,cACpCg/B,EAAYD,EAAW9vF,QAAU8vF,EAAW/wF,MAAQ,EACpDixF,EAAgBD,EAAY,EAC5BE,EAAmB,SAASv/B,GAChC,OAAOD,GAAYtH,EAAOuH,EAAOq/B,EACnC,EACA,IAAIG,EAAajpF,EAAGkiF,EAAWgH,EAC3BC,EAAKC,EAAKC,EAAKC,EAAKC,EAAIC,EAAIC,EAAIC,EAEpC,GAAiB,QAAbjtF,EACFwsF,EAAcD,EAAiBzjF,KAAKrI,QACpCksF,EAAM7jF,KAAKrI,OAAS0rF,EACpBU,EAAML,EAAcF,EACpBS,EAAKR,EAAiBpgB,EAAU5rE,KAAO+rF,EACvCW,EAAK9gB,EAAU1rE,YACV,GAAiB,WAAbT,EACTwsF,EAAcD,EAAiBzjF,KAAKvI,KACpCwsF,EAAK5gB,EAAU5rE,IACf0sF,EAAKV,EAAiBpgB,EAAU1rE,QAAU6rF,EAC1CK,EAAMH,EAAcF,EACpBO,EAAM/jF,KAAKvI,IAAM4rF,OACZ,GAAiB,SAAbnsF,EACTwsF,EAAcD,EAAiBzjF,KAAKtI,OACpCksF,EAAM5jF,KAAKtI,MAAQ2rF,EACnBS,EAAMJ,EAAcF,EACpBQ,EAAKP,EAAiBpgB,EAAU7rE,MAAQgsF,EACxCU,EAAK7gB,EAAU3rE,WACV,GAAiB,UAAbR,EACTwsF,EAAcD,EAAiBzjF,KAAKxI,MACpCwsF,EAAK3gB,EAAU7rE,KACf0sF,EAAKT,EAAiBpgB,EAAU3rE,OAAS8rF,EACzCI,EAAMF,EAAcF,EACpBM,EAAM9jF,KAAKxI,KAAO6rF,OACb,GAAa,MAATnrC,EAAc,CACvB,GAAiB,WAAbhhD,EACFwsF,EAAcD,GAAkBpgB,EAAU5rE,IAAM4rE,EAAU1rE,QAAU,EAAI,SACnE,GAAIk5C,EAAS35C,GAAW,CAC7B,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvBV,EAAcD,EAAiBzjF,KAAK28C,MAAM4C,OAAO6kC,GAAgB9rC,iBAAiBvnD,IAGpFkzF,EAAK5gB,EAAU5rE,IACf0sF,EAAK9gB,EAAU1rE,OACfksF,EAAMH,EAAcF,EACpBO,EAAMF,EAAMR,OACP,GAAa,MAATnrC,EAAc,CACvB,GAAiB,WAAbhhD,EACFwsF,EAAcD,GAAkBpgB,EAAU7rE,KAAO6rE,EAAU3rE,OAAS,QAC/D,GAAIm5C,EAAS35C,GAAW,CAC7B,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvBV,EAAcD,EAAiBzjF,KAAK28C,MAAM4C,OAAO6kC,GAAgB9rC,iBAAiBvnD,IAGpF6yF,EAAMF,EAAcF,EACpBM,EAAMF,EAAMP,EACZW,EAAK3gB,EAAU7rE,KACf0sF,EAAK7gB,EAAU3rE,MAGjB,MAAM+S,EAAQwmC,EAAehpB,EAAQy0B,MAAMw+B,cAAekB,GACpDhhE,EAAO5pB,KAAK+T,IAAI,EAAG/T,KAAKgqF,KAAKY,EAAc3xE,IACjD,IAAKhQ,EAAI,EAAGA,EAAI2hF,EAAa3hF,GAAK2gB,EAAM,CACtC,MAAMlJ,EAAUlS,KAAKukD,WAAW9pD,GAC1B4pF,EAAc5iC,EAAKqK,WAAW55C,GAC9BoyE,EAAoBriC,EAAO6J,WAAW55C,GAEtCwvC,EAAY2iC,EAAY3iC,UACxB6iC,EAAYF,EAAY/zF,MACxB0mE,EAAastB,EAAkBpiC,MAAQ,GACvC+U,EAAmBqtB,EAAkBniC,WAErCL,EAAYuiC,EAAYviC,UACxBE,EAAYqiC,EAAYriC,UACxBwiC,EAAiBH,EAAYG,gBAAkB,GAC/CC,EAAuBJ,EAAYI,qBAEzC9H,EAAYH,GAAoBx8E,KAAMvF,EAAGiH,QAGvB/H,IAAdgjF,IAIJgH,EAAmB1/B,GAAYtH,EAAOggC,EAAWj7B,GAE7C6mB,EACFqb,EAAME,EAAME,EAAKE,EAAKP,EAEtBE,EAAME,EAAME,EAAKE,EAAKR,EAGxBzzD,EAAM10B,KAAK,CACTooF,MACAC,MACAC,MACAC,MACAC,KACAC,KACAC,KACAC,KACA5xF,MAAOmvD,EACPpxD,MAAOi0F,EACPvtB,aACAC,mBACAnV,YACAE,YACAwiC,iBACAC,yBAEJ,CAKA,OAHAzkF,KAAKg+E,aAAe5B,EACpBp8E,KAAKi+E,aAAeyF,EAEbxzD,CACT,CAKAwuD,kBAAAA,CAAmBrb,GACjB,MAAMnrB,EAAOl4C,KAAKk4C,KACZjwB,EAAUjoB,KAAKioB,SACf,SAAC/wB,EAAUwlD,MAAOwmC,GAAej7D,EACjCsgD,EAAevoE,KAAKuoE,eACpB7rB,EAAQ18C,KAAK08C,OACb,MAACjF,EAAA,WAAOqL,EAAA,QAAY1B,EAAO,OAAEkB,GAAU4gC,EACvCG,EAAKzG,GAAkB30D,EAAQw5B,MAC/BijC,EAAiBrB,EAAKjiC,EACtBujC,EAAkBriC,GAAUlB,EAAUsjC,EACtCx/B,GAAY1Q,GAAUx0C,KAAKs9E,eAC3BptD,EAAQ,GACd,IAAIz1B,EAAGo3C,EAAMwmB,EAAM9/C,EAAO3T,EAAGC,EAAGojD,EAAW/D,EAAO9F,EAAME,EAAYsmC,EAAWC,EAC3E38B,EAAe,SAEnB,GAAiB,QAAbhxD,EACF2N,EAAI7E,KAAKrI,OAASgtF,EAClB18B,EAAYjoD,KAAK8kF,+BACZ,GAAiB,WAAb5tF,EACT2N,EAAI7E,KAAKvI,IAAMktF,EACf18B,EAAYjoD,KAAK8kF,+BACZ,GAAiB,SAAb5tF,EAAqB,CAC9B,MAAMiP,EAAMnG,KAAK+kF,wBAAwB1B,GACzCp7B,EAAY9hD,EAAI8hD,UAChBrjD,EAAIuB,EAAIvB,OACH,GAAiB,UAAb1N,EAAsB,CAC/B,MAAMiP,EAAMnG,KAAK+kF,wBAAwB1B,GACzCp7B,EAAY9hD,EAAI8hD,UAChBrjD,EAAIuB,EAAIvB,OACH,GAAa,MAATszC,EAAc,CACvB,GAAiB,WAAbhhD,EACF2N,GAAMw+D,EAAU5rE,IAAM4rE,EAAU1rE,QAAU,EAAK+sF,OAC1C,GAAI7zC,EAAS35C,GAAW,CAC7B,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvBv/E,EAAI7E,KAAK28C,MAAM4C,OAAO6kC,GAAgB9rC,iBAAiBvnD,GAAS2zF,EAElEz8B,EAAYjoD,KAAK8kF,+BACZ,GAAa,MAAT5sC,EAAc,CACvB,GAAiB,WAAbhhD,EACF0N,GAAMy+D,EAAU7rE,KAAO6rE,EAAU3rE,OAAS,EAAKgtF,OAC1C,GAAI7zC,EAAS35C,GAAW,CAC7B,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvBx/E,EAAI5E,KAAK28C,MAAM4C,OAAO6kC,GAAgB9rC,iBAAiBvnD,GAEzDk3D,EAAYjoD,KAAK+kF,wBAAwB1B,GAAIp7B,UAGlC,MAAT/P,IACY,UAAVT,EACFyQ,EAAe,MACI,QAAVzQ,IACTyQ,EAAe,WAInB,MAAM44B,EAAa9gF,KAAK+gF,iBACxB,IAAKtmF,EAAI,EAAGo3C,EAAO6K,EAAMvhD,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAC9C49D,EAAO3b,EAAMjiD,GACb8d,EAAQ8/C,EAAK9/C,MAEb,MAAM8rE,EAAcnB,EAAYp3B,WAAW9rD,KAAKukD,WAAW9pD,IAC3DypD,EAAQlkD,KAAK2mE,gBAAgBlsE,GAAKyoF,EAAYvgC,YAC9CvE,EAAOp+C,KAAK4iF,wBAAwBnoF,GACpC6jD,EAAaF,EAAKE,WAClBsmC,EAAY1lF,EAAQqZ,GAASA,EAAMpd,OAAS,EAC5C,MAAM6pF,EAAYJ,EAAY,EACxBt0F,EAAQ+zF,EAAY/zF,MACpBy3D,EAAcs8B,EAAY7hC,gBAC1BnvD,EAAcgxF,EAAY9hC,gBAChC,IA4CI6F,EA5CA68B,EAAgBh9B,EA8CpB,GA5CIsgB,GACF3jE,EAAIs/C,EAEc,UAAd+D,IAEAg9B,EADExqF,IAAMo3C,EAAO,EACE7xC,KAAKioB,QAAQwpB,QAAoB,OAAV,QACzB,IAANh3C,EACQuF,KAAKioB,QAAQwpB,QAAmB,QAAT,OAExB,UAMhBozC,EAFa,QAAb3tF,EACiB,SAAf4rD,GAAsC,IAAboC,GACb0/B,EAAYtmC,EAAaA,EAAa,EAC5B,WAAfwE,GACKg+B,EAAWK,QAAQ3uF,OAAS,EAAIwyF,EAAY1mC,EAAaA,GAEzDwiC,EAAWK,QAAQ3uF,OAAS8rD,EAAa,EAItC,SAAfwE,GAAsC,IAAboC,EACd5G,EAAa,EACF,WAAfwE,EACIg+B,EAAWK,QAAQ3uF,OAAS,EAAIwyF,EAAY1mC,EAE5CwiC,EAAWK,QAAQ3uF,OAASoyF,EAAYtmC,EAGrDgE,IACFuiC,IAAe,GAEA,IAAb3/B,GAAmBm/B,EAAYthC,oBACjCn+C,GAAK05C,EAAc,EAAK9sD,KAAK2nD,IAAI+L,MAGnCrgD,EAAIq/C,EACJ2gC,GAAc,EAAID,GAAatmC,EAAa,GAK1C+lC,EAAYthC,kBAAmB,CACjC,MAAMmiC,EAAe37B,GAAU86B,EAAYphC,iBACrCzwD,EAASsuF,EAAWwB,QAAQ7nF,GAC5BlI,EAAQuuF,EAAWuB,OAAO5nF,GAEhC,IAAIhD,EAAMotF,EAAaK,EAAaztF,IAChCD,EAAO,EAAI0tF,EAAa1tF,KAE5B,OAAQ0wD,GACR,IAAK,SACHzwD,GAAOjF,EAAS,EAChB,MACF,IAAK,SACHiF,GAAOjF,EAMT,OAAQy1D,GACR,IAAK,SACHzwD,GAAQjF,EAAQ,EAChB,MACF,IAAK,QACHiF,GAAQjF,EAMV61D,EAAW,CACT5wD,OACAC,MACAlF,MAAOA,EAAQ2yF,EAAa3yF,MAC5BC,OAAQA,EAAS0yF,EAAa1yF,OAE9BlC,MAAO+zF,EAAYrhC,eAIvB9yB,EAAM10B,KAAK,CACT+c,QACA6lC,OACAymC,aACA58D,QAAS,CACPi9B,WACA50D,QACAy3D,cACA10D,cACA40D,UAAWg9B,EACX/8B,eACAF,YAAa,CAACpjD,EAAGC,GACjBujD,aAGN,CAEA,OAAOl4B,CACT,CAEA40D,uBAAAA,GACE,MAAM,SAAC5tF,EAAA,MAAUwlD,GAAS18C,KAAKioB,QAG/B,IAFkBusB,GAAUx0C,KAAKs9E,eAG/B,MAAoB,QAAbpmF,EAAqB,OAAS,QAGvC,IAAIugD,EAAQ,SAUZ,MARoB,UAAhBiF,EAAMjF,MACRA,EAAQ,OACiB,QAAhBiF,EAAMjF,MACfA,EAAQ,QACiB,UAAhBiF,EAAMjF,QACfA,EAAQ,SAGHA,CACT,CAEAstC,uBAAAA,CAAwB1B,GACtB,MAAM,SAACnsF,EAAUwlD,OAAO,WAACoG,EAAA,OAAYR,EAAA,QAAQlB,IAAYphD,KAAKioB,QAExDy8D,EAAiBrB,EAAKjiC,EACtB6/B,EAFajhF,KAAK+gF,iBAEEE,OAAO1uF,MAEjC,IAAI01D,EACArjD,EA0DJ,MAxDiB,SAAb1N,EACEorD,GACF19C,EAAI5E,KAAKtI,MAAQ0pD,EAEE,SAAf0B,EACFmF,EAAY,OACY,WAAfnF,GACTmF,EAAY,SACZrjD,GAAMq8E,EAAS,IAEfh5B,EAAY,QACZrjD,GAAKq8E,KAGPr8E,EAAI5E,KAAKtI,MAAQgtF,EAEE,SAAf5hC,EACFmF,EAAY,QACY,WAAfnF,GACTmF,EAAY,SACZrjD,GAAMq8E,EAAS,IAEfh5B,EAAY,OACZrjD,EAAI5E,KAAKxI,OAGS,UAAbN,EACLorD,GACF19C,EAAI5E,KAAKxI,KAAO4pD,EAEG,SAAf0B,EACFmF,EAAY,QACY,WAAfnF,GACTmF,EAAY,SACZrjD,GAAMq8E,EAAS,IAEfh5B,EAAY,OACZrjD,GAAKq8E,KAGPr8E,EAAI5E,KAAKxI,KAAOktF,EAEG,SAAf5hC,EACFmF,EAAY,OACY,WAAfnF,GACTmF,EAAY,SACZrjD,GAAKq8E,EAAS,IAEdh5B,EAAY,QACZrjD,EAAI5E,KAAKtI,QAIbuwD,EAAY,QAGP,CAACA,YAAWrjD,IACrB,CAKAugF,iBAAAA,GACE,GAAInlF,KAAKioB,QAAQy0B,MAAM4F,OACrB,OAGF,MAAM3F,EAAQ38C,KAAK28C,MACbzlD,EAAW8I,KAAKioB,QAAQ/wB,SAE9B,MAAiB,SAAbA,GAAoC,UAAbA,EAClB,CAACO,IAAK,EAAGD,KAAMwI,KAAKxI,KAAMG,OAAQglD,EAAMnqD,OAAQkF,MAAOsI,KAAKtI,OAClD,QAAbR,GAAmC,WAAbA,EACnB,CAACO,IAAKuI,KAAKvI,IAAKD,KAAM,EAAGG,OAAQqI,KAAKrI,OAAQD,MAAOilD,EAAMpqD,YADlE,CAGJ,CAKA6yF,cAAAA,GACE,MAAM,IAAC3mC,EAAKx2B,SAAS,gBAAC3wB,GAAgB,KAAEE,EAAI,IAAEC,EAAA,MAAKlF,EAAA,OAAOC,GAAUwN,KAChE1I,IACFmnD,EAAIkF,OACJlF,EAAIgJ,UAAYnwD,EAChBmnD,EAAIoJ,SAASrwD,EAAMC,EAAKlF,EAAOC,GAC/BisD,EAAIsF,UAER,CAEAumB,oBAAAA,CAAqBv5E,GACnB,MAAM0wD,EAAOzhD,KAAKioB,QAAQw5B,KAC1B,IAAKzhD,KAAK6gF,eAAiBp/B,EAAKjuD,QAC9B,OAAO,EAET,MACMif,EADQzS,KAAK08C,MACC2oC,WAAUt1C,GAAKA,EAAEh/C,QAAUA,IAC/C,GAAI0hB,GAAS,EAAG,CAEd,OADagvC,EAAKqK,WAAW9rD,KAAKukD,WAAW9xC,IACjCivC,UAEd,OAAO,CACT,CAKA4jC,QAAAA,CAASjiB,GACP,MAAM5hB,EAAOzhD,KAAKioB,QAAQw5B,KACpBhD,EAAMz+C,KAAKy+C,IACXvuB,EAAQlwB,KAAKw9E,iBAAmBx9E,KAAKw9E,eAAiBx9E,KAAKojF,sBAAsB/f,IACvF,IAAI5oE,EAAGo3C,EAEP,MAAM0zC,EAAWA,CAACjiD,EAAIC,EAAI5yC,KACnBA,EAAM4B,OAAU5B,EAAML,QAG3BmuD,EAAIkF,OACJlF,EAAIiD,UAAY/wD,EAAM4B,MACtBksD,EAAI+I,YAAc72D,EAAML,MACxBmuD,EAAI+mC,YAAY70F,EAAMqmE,YAAc,IACpCvY,EAAIgnC,eAAiB90F,EAAMsmE,iBAE3BxY,EAAI8G,YACJ9G,EAAIkH,OAAOriB,EAAG1+B,EAAG0+B,EAAGz+B,GACpB45C,EAAImH,OAAOriB,EAAG3+B,EAAG2+B,EAAG1+B,GACpB45C,EAAItqD,SACJsqD,EAAIsF,UAAS,EAGf,GAAItC,EAAKjuD,QACP,IAAKiH,EAAI,EAAGo3C,EAAO3hB,EAAM/0B,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAC9C,MAAMgmB,EAAOyP,EAAMz1B,GAEfgnD,EAAKE,iBACP4jC,EACE,CAAC3gF,EAAG6b,EAAKujE,GAAIn/E,EAAG4b,EAAKwjE,IACrB,CAACr/E,EAAG6b,EAAKyjE,GAAIr/E,EAAG4b,EAAK0jE,IACrB1jE,GAIAghC,EAAKG,WACP2jC,EACE,CAAC3gF,EAAG6b,EAAKmjE,IAAK/+E,EAAG4b,EAAKojE,KACtB,CAACj/E,EAAG6b,EAAKqjE,IAAKj/E,EAAG4b,EAAKsjE,KACtB,CACEzzF,MAAOmwB,EAAKuhC,UACZzvD,MAAOkuB,EAAKqhC,UACZkV,WAAYv2C,EAAK+jE,eACjBvtB,iBAAkBx2C,EAAKgkE,sBAI/B,CAEJ,CAKAiB,UAAAA,GACE,MAAM,MAAC/oC,EAAA,IAAO8B,EAAKx2B,SAAS,OAACg6B,EAAM,KAAER,IAASzhD,KACxCsjF,EAAarhC,EAAO6J,WAAW9rD,KAAKukD,cACpCg/B,EAAYthC,EAAOzuD,QAAU8vF,EAAW/wF,MAAQ,EACtD,IAAKgxF,EACH,OAEF,MAAMoC,EAAgBlkC,EAAKqK,WAAW9rD,KAAKukD,WAAW,IAAI7C,UACpDgiC,EAAc1jF,KAAKi+E,aACzB,IAAI+F,EAAIE,EAAID,EAAIE,EAEZnkF,KAAKuoE,gBACPyb,EAAK//B,GAAYtH,EAAO38C,KAAKxI,KAAM+rF,GAAaA,EAAY,EAC5DW,EAAKjgC,GAAYtH,EAAO38C,KAAKtI,MAAOiuF,GAAiBA,EAAgB,EACrE1B,EAAKE,EAAKT,IAEVO,EAAKhgC,GAAYtH,EAAO38C,KAAKvI,IAAK8rF,GAAaA,EAAY,EAC3DY,EAAKlgC,GAAYtH,EAAO38C,KAAKrI,OAAQguF,GAAiBA,EAAgB,EACtE3B,EAAKE,EAAKR,GAEZjlC,EAAIkF,OACJlF,EAAIiD,UAAY4hC,EAAW/wF,MAC3BksD,EAAI+I,YAAc87B,EAAWhzF,MAE7BmuD,EAAI8G,YACJ9G,EAAIkH,OAAOq+B,EAAIC,GACfxlC,EAAImH,OAAOs+B,EAAIC,GACf1lC,EAAItqD,SAEJsqD,EAAIsF,SACN,CAKA6hC,UAAAA,CAAWviB,GAGT,IAFoBrjE,KAAKioB,QAAQy0B,MAEhBlpD,QACf,OAGF,MAAMirD,EAAMz+C,KAAKy+C,IAEX18B,EAAO/hB,KAAKmlF,oBACdpjE,GACFokC,GAAS1H,EAAK18B,GAGhB,MAAMmO,EAAQlwB,KAAKy+E,cAAcpb,GACjC,IAAK,MAAM5iD,KAAQyP,EAAO,CACxB,MAAM21D,EAAoBplE,EAAKwH,QACzBs6D,EAAW9hE,EAAK29B,KAGtB16B,GAAW+6B,EAFGh+B,EAAKlI,MAEI,EADbkI,EAAKokE,WACctC,EAAUsD,EACzC,CAEI9jE,GACFqkC,GAAW3H,EAEf,CAKAqnC,SAAAA,GACE,MAAM,IAACrnC,EAAKx2B,SAAS,SAAC/wB,EAAQ,MAAEqkB,EAAK,QAAEk2B,IAAYzxC,KAEnD,IAAKub,EAAM/nB,QACT,OAGF,MAAM4qD,EAAOoL,GAAOjuC,EAAM6iC,MACpBgD,EAAUmI,GAAUhuC,EAAM6lC,SAC1B3J,EAAQl8B,EAAMk8B,MACpB,IAAI/1C,EAAS08C,EAAKE,WAAa,EAEd,WAAbpnD,GAAsC,WAAbA,GAAyB25C,EAAS35C,IAC7DwK,GAAU0/C,EAAQzpD,OACduH,EAAQqc,EAAM4P,QAChBzpB,GAAU08C,EAAKE,YAAc/iC,EAAM4P,KAAKhwB,OAAS,KAGnDuG,GAAU0/C,EAAQ3pD,IAGpB,MAAM,OAACsuF,EAAA,OAAQC,EAAA,SAAQ19B,EAAQ,SAAEpD,GAh8CrC,SAAmB5F,EAAO59C,EAAQxK,EAAUugD,GAC1C,MAAM,IAAChgD,EAAG,KAAED,EAAI,OAAEG,EAAM,MAAED,EAAK,MAAEilD,GAAS2C,GACpC,UAAC+jB,EAAA,OAAW9jB,GAAU5C,EAC5B,IACI2L,EAAUy9B,EAAQC,EADlB9gC,EAAW,EAEf,MAAM1yD,EAASmF,EAASF,EAClBlF,EAAQmF,EAAQF,EAEtB,GAAI8nD,EAAMipB,eAAgB,CAGxB,GAFAwd,EAASruC,GAAeD,EAAOjgD,EAAME,GAEjCm5C,EAAS35C,GAAW,CACtB,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvB4B,EAASzmC,EAAO6kC,GAAgB9rC,iBAAiBvnD,GAASyB,EAASkP,OAEnEskF,EADsB,WAAb9uF,GACCmsE,EAAU1rE,OAAS0rE,EAAU5rE,KAAO,EAAIjF,EAASkP,EAElDw6E,GAAe58B,EAAOpoD,EAAUwK,GAE3C4mD,EAAW5wD,EAAQF,MACd,CACL,GAAIq5C,EAAS35C,GAAW,CACtB,MAAMktF,EAAiBnnF,OAAO8V,KAAK7b,GAAU,GACvCnG,EAAQmG,EAASktF,GACvB2B,EAASxmC,EAAO6kC,GAAgB9rC,iBAAiBvnD,GAASwB,EAAQmP,OAElEqkF,EADsB,WAAb7uF,GACCmsE,EAAU7rE,KAAO6rE,EAAU3rE,OAAS,EAAInF,EAAQmP,EAEjDw6E,GAAe58B,EAAOpoD,EAAUwK,GAE3CskF,EAAStuC,GAAeD,EAAO9/C,EAAQF,GACvCytD,EAAwB,SAAbhuD,GAAuBy8C,GAAUA,GAE9C,MAAO,CAACoyC,SAAQC,SAAQ19B,WAAUpD,WACpC,CA65CiD+gC,CAAUjmF,KAAM0B,EAAQxK,EAAUugD,GAE/E/zB,GAAW+6B,EAAKljC,EAAM4P,KAAM,EAAG,EAAGizB,EAAM,CACtC9tD,MAAOirB,EAAMjrB,MACbg4D,WACApD,WACA+C,UAAW60B,GAAWrlC,EAAOvgD,EAAUu6C,GACvCyW,aAAc,SACdF,YAAa,CAAC+9B,EAAQC,IAE1B,CAEA9tB,IAAAA,CAAKmL,GACErjE,KAAK6gF,eAIV7gF,KAAKolF,iBACLplF,KAAKslF,SAASjiB,GACdrjE,KAAK0lF,aACL1lF,KAAK8lF,YACL9lF,KAAK4lF,WAAWviB,GAClB,CAMAgS,OAAAA,GACE,MAAMnyD,EAAOljB,KAAKioB,QACZi+D,EAAKhjE,EAAKw5B,OAASx5B,EAAKw5B,MAAM44B,GAAK,EACnC6Q,EAAKl1C,EAAe/tB,EAAKu+B,MAAQv+B,EAAKu+B,KAAK6zB,GAAI,GAC/C8Q,EAAKn1C,EAAe/tB,EAAK++B,QAAU/+B,EAAK++B,OAAOqzB,EAAG,GAExD,OAAKt1E,KAAK6gF,cAAgB7gF,KAAKk4D,OAAS8kB,GAAM7/E,UAAU+6D,KAUjD,CAAC,CACNod,EAAG6Q,EACHjuB,KAAOmL,IACLrjE,KAAKolF,iBACLplF,KAAKslF,SAASjiB,GACdrjE,KAAK8lF,WAAW,GAEjB,CACDxQ,EAAG8Q,EACHluB,KAAMA,KACJl4D,KAAK0lF,YAAY,GAElB,CACDpQ,EAAG4Q,EACHhuB,KAAOmL,IACLrjE,KAAK4lF,WAAWviB,EAAA,IAvBX,CAAC,CACNiS,EAAG4Q,EACHhuB,KAAOmL,IACLrjE,KAAKk4D,KAAKmL,EAAA,GAuBlB,CAOAxG,uBAAAA,CAAwB59D,GACtB,MAAMo/E,EAAQr+E,KAAK28C,MAAM40B,+BACnB8U,EAASrmF,KAAKk4C,KAAO,SACrBjqB,EAAS,GACf,IAAIxzB,EAAGo3C,EAEP,IAAKp3C,EAAI,EAAGo3C,EAAOwsC,EAAMljF,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAC9C,MAAMmoB,EAAOy7D,EAAM5jF,GACfmoB,EAAKyjE,KAAYrmF,KAAKgY,IAAQ/Y,GAAQ2jB,EAAK3jB,OAASA,GACtDgvB,EAAOzyB,KAAKonB,EAEhB,CACA,OAAOqL,CACT,CAOA20D,uBAAAA,CAAwBnwE,GAEtB,OAAO+2C,GADMxpD,KAAKioB,QAAQy0B,MAAMoP,WAAW9rD,KAAKukD,WAAW9xC,IACxC2rC,KACrB,CAKAkoC,UAAAA,GACE,MAAMC,EAAWvmF,KAAK4iF,wBAAwB,GAAGtkC,WACjD,OAAQt+C,KAAKuoE,eAAiBvoE,KAAKzN,MAAQyN,KAAKxN,QAAU+zF,CAC5D,EC/pDa,MAAMC,GACnB16E,WAAAA,CAAY7M,EAAMub,EAAOmlC,GACvB3/C,KAAKf,KAAOA,EACZe,KAAKwa,MAAQA,EACbxa,KAAK2/C,SAAWA,EAChB3/C,KAAKkwB,MAAQjzB,OAAOtJ,OAAO,KAC7B,CAEA8yF,SAAAA,CAAUxnF,GACR,OAAOhC,OAAOE,UAAUupF,cAAc5lF,KAAKd,KAAKf,KAAK9B,UAAW8B,EAAK9B,UACvE,CAMAikC,QAAAA,CAAS3gB,GACP,MAAM3c,EAAQ7G,OAAO4U,eAAe4O,GACpC,IAAIkmE,GAyFR,SAA2B7iF,GACzB,MAAO,OAAQA,GAAS,aAAcA,CACxC,EAzFQ8iF,CAAkB9iF,KAEpB6iF,EAAc3mF,KAAKohC,SAASt9B,IAG9B,MAAMosB,EAAQlwB,KAAKkwB,MACblY,EAAKyI,EAAKzI,GACVwC,EAAQxa,KAAKwa,MAAQ,IAAMxC,EAEjC,IAAKA,EACH,MAAM,IAAIjc,MAAM,2BAA6B0kB,GAG/C,OAAIzI,KAAMkY,IAKVA,EAAMlY,GAAMyI,EAsChB,SAA0BA,EAAMjG,EAAOmsE,GAErC,MAAME,EAAev0C,EAAMr1C,OAAOtJ,OAAO,MAAO,CAC9CgzF,EAActmC,GAAS/7C,IAAIqiF,GAAe,CAAC,EAC3CtmC,GAAS/7C,IAAIkW,GACbiG,EAAK4/B,WAGPA,GAASr7C,IAAIwV,EAAOqsE,GAEhBpmE,EAAKqmE,eASX,SAAuBtsE,EAAOusE,GAC5B9pF,OAAO8V,KAAKg0E,GAAQt8D,SAAQ1O,IAC1B,MAAMirE,EAAgBjrE,EAAS5O,MAAM,KAC/B85E,EAAaD,EAAct0E,MAC3Bw0E,EAAc,CAAC1sE,GAAO1oB,OAAOk1F,GAAerrF,KAAK,KACjDN,EAAQ0rF,EAAOhrE,GAAU5O,MAAM,KAC/B2yC,EAAazkD,EAAMqX,MACnBmtC,EAAcxkD,EAAMM,KAAK,KAC/B0kD,GAAST,MAAMsnC,EAAaD,EAAYpnC,EAAaC,EAAA,GAEzD,CAlBIqnC,CAAc3sE,EAAOiG,EAAKqmE,eAGxBrmE,EAAKg9B,aACP4C,GAASX,SAASllC,EAAOiG,EAAKg9B,YAElC,CAtDI2pC,CAAiB3mE,EAAMjG,EAAOmsE,GAC1B3mF,KAAK2/C,UACPU,GAASV,SAASl/B,EAAKzI,GAAIyI,EAAK+8B,YANzBhjC,CAUX,CAMAlW,GAAAA,CAAI0T,GACF,OAAOhY,KAAKkwB,MAAMlY,EACpB,CAKAqvE,UAAAA,CAAW5mE,GACT,MAAMyP,EAAQlwB,KAAKkwB,MACblY,EAAKyI,EAAKzI,GACVwC,EAAQxa,KAAKwa,MAEfxC,KAAMkY,UACDA,EAAMlY,GAGXwC,GAASxC,KAAMqoC,GAAS7lC,YACnB6lC,GAAS7lC,GAAOxC,GACnBhY,KAAK2/C,iBACAnC,GAAUxlC,GAGvB,ECtEK,MAAMsvE,GACXx7E,WAAAA,GACE9L,KAAKunF,YAAc,IAAIf,GAAcxoB,GAAmB,YAAY,GACpEh+D,KAAKm+C,SAAW,IAAIqoC,GAAclM,GAAS,YAC3Ct6E,KAAKo/C,QAAU,IAAIonC,GAAcvpF,OAAQ,WACzC+C,KAAKu/C,OAAS,IAAIinC,GAAcxJ,GAAO,UAGvCh9E,KAAKwnF,iBAAmB,CAACxnF,KAAKunF,YAAavnF,KAAKu/C,OAAQv/C,KAAKm+C,SAC/D,CAKA8N,GAAAA,GAAa,QAAA2U,EAAAlhE,UAAAvE,OAAN8S,EAAI,IAAApS,MAAA+kE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ5yD,EAAI4yD,GAAAnhE,UAAAmhE,GACT7gE,KAAKynF,MAAM,WAAYx5E,EACzB,CAEA+qD,MAAAA,GAAgB,QAAA1hB,EAAA53C,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAy7C,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJtpC,EAAIspC,GAAA73C,UAAA63C,GACZv3C,KAAKynF,MAAM,aAAcx5E,EAC3B,CAKAy5E,cAAAA,GAAwB,QAAAC,EAAAjoF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAA8rF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ35E,EAAI25E,GAAAloF,UAAAkoF,GACpB5nF,KAAKynF,MAAM,WAAYx5E,EAAMjO,KAAKunF,YACpC,CAKAroB,WAAAA,GAAqB,QAAA2oB,EAAAnoF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAgsF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ75E,EAAI65E,GAAApoF,UAAAooF,GACjB9nF,KAAKynF,MAAM,WAAYx5E,EAAMjO,KAAKm+C,SACpC,CAKA4pC,UAAAA,GAAoB,QAAAC,EAAAtoF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAmsF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJh6E,EAAIg6E,GAAAvoF,UAAAuoF,GAChBjoF,KAAKynF,MAAM,WAAYx5E,EAAMjO,KAAKo/C,QACpC,CAKA8oC,SAAAA,GAAmB,QAAAC,EAAAzoF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAssF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJn6E,EAAIm6E,GAAA1oF,UAAA0oF,GACfpoF,KAAKynF,MAAM,WAAYx5E,EAAMjO,KAAKu/C,OACpC,CAMA8oC,aAAAA,CAAcrwE,GACZ,OAAOhY,KAAKsoF,KAAKtwE,EAAIhY,KAAKunF,YAAa,aACzC,CAMA/W,UAAAA,CAAWx4D,GACT,OAAOhY,KAAKsoF,KAAKtwE,EAAIhY,KAAKm+C,SAAU,UACtC,CAMAoqC,SAAAA,CAAUvwE,GACR,OAAOhY,KAAKsoF,KAAKtwE,EAAIhY,KAAKo/C,QAAS,SACrC,CAMAopC,QAAAA,CAASxwE,GACP,OAAOhY,KAAKsoF,KAAKtwE,EAAIhY,KAAKu/C,OAAQ,QACpC,CAKAkpC,iBAAAA,GAA2B,QAAAC,EAAAhpF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAA6sF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ16E,EAAI06E,GAAAjpF,UAAAipF,GACvB3oF,KAAKynF,MAAM,aAAcx5E,EAAMjO,KAAKunF,YACtC,CAKAqB,cAAAA,GAAwB,QAAAC,EAAAnpF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAgtF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJ76E,EAAI66E,GAAAppF,UAAAopF,GACpB9oF,KAAKynF,MAAM,aAAcx5E,EAAMjO,KAAKm+C,SACtC,CAKA4qC,aAAAA,GAAuB,QAAAC,EAAAtpF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAmtF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJh7E,EAAIg7E,GAAAvpF,UAAAupF,GACnBjpF,KAAKynF,MAAM,aAAcx5E,EAAMjO,KAAKo/C,QACtC,CAKA8pC,YAAAA,GAAsB,QAAAC,EAAAzpF,UAAAvE,OAAN8S,EAAI,IAAApS,MAAAstF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJn7E,EAAIm7E,GAAA1pF,UAAA0pF,GAClBppF,KAAKynF,MAAM,aAAcx5E,EAAMjO,KAAKu/C,OACtC,CAKAkoC,KAAAA,CAAMxuE,EAAQhL,EAAMo7E,GAClB,IAAIp7E,GAAMwc,SAAQrtB,IAChB,MAAMksF,EAAMD,GAAiBrpF,KAAKupF,oBAAoBnsF,GAClDisF,GAAiBC,EAAI7C,UAAUrpF,IAASksF,IAAQtpF,KAAKo/C,SAAWhiD,EAAI4a,GACtEhY,KAAKwpF,MAAMvwE,EAAQqwE,EAAKlsF,GAMxBm0C,EAAKn0C,GAAKqjB,IAOR,MAAMgpE,EAAUJ,GAAiBrpF,KAAKupF,oBAAoB9oE,GAC1DzgB,KAAKwpF,MAAMvwE,EAAQwwE,EAAShpE,EAAA,MAIpC,CAKA+oE,KAAAA,CAAMvwE,EAAQs3D,EAAUmZ,GACtB,MAAMC,EAAc12C,GAAYh6B,GAChC+O,EAAK0hE,EAAU,SAAWC,GAAc,GAAID,GAC5CnZ,EAASt3D,GAAQywE,GACjB1hE,EAAK0hE,EAAU,QAAUC,GAAc,GAAID,EAC7C,CAKAH,mBAAAA,CAAoBtqF,GAClB,IAAK,IAAIxE,EAAI,EAAGA,EAAIuF,KAAKwnF,iBAAiBrsF,OAAQV,IAAK,CACrD,MAAM6uF,EAAMtpF,KAAKwnF,iBAAiB/sF,GAClC,GAAI6uF,EAAI7C,UAAUxnF,GAChB,OAAOqqF,CAEX,CAEA,OAAOtpF,KAAKo/C,OACd,CAKAkpC,IAAAA,CAAKtwE,EAAIqxE,EAAepqF,GACtB,MAAMwhB,EAAO4oE,EAAc/kF,IAAI0T,GAC/B,QAAare,IAAT8mB,EACF,MAAM,IAAI1kB,MAAM,IAAMic,EAAK,yBAA2B/Y,EAAO,KAE/D,OAAOwhB,CACT,EAKF,IAAA8vD,GAA+B,IAAI+W,GCtKpB,MAAMsC,GACnB99E,WAAAA,GACE9L,KAAK6pF,MAAQ,EACf,CAYAC,MAAAA,CAAOntC,EAAOotC,EAAM97E,EAAMuQ,GACX,eAATurE,IACF/pF,KAAK6pF,MAAQ7pF,KAAKgqF,mBAAmBrtC,GAAO,GAC5C38C,KAAKu3D,QAAQv3D,KAAK6pF,MAAOltC,EAAO,YAGlC,MAAMc,EAAcj/B,EAASxe,KAAK49C,aAAajB,GAAOn+B,OAAOA,GAAUxe,KAAK49C,aAAajB,GACnF1uB,EAASjuB,KAAKu3D,QAAQ9Z,EAAad,EAAOotC,EAAM97E,GAMtD,MAJa,iBAAT87E,IACF/pF,KAAKu3D,QAAQ9Z,EAAad,EAAO,QACjC38C,KAAKu3D,QAAQv3D,KAAK6pF,MAAOltC,EAAO,cAE3B1uB,CACT,CAKAspC,OAAAA,CAAQ9Z,EAAad,EAAOotC,EAAM97E,GAChCA,EAAOA,GAAQ,CAAC,EAChB,IAAK,MAAMg8E,KAAcxsC,EAAa,CACpC,MAAMysC,EAASD,EAAWC,OAG1B,IAA6C,IAAzCliE,EAFWkiE,EAAOH,GACP,CAACptC,EAAO1uC,EAAMg8E,EAAWhiE,SACPiiE,IAAqBj8E,EAAKk8E,WACzD,OAAO,CAEX,CAEA,OAAO,CACT,CAEAC,UAAAA,GAMOx5C,EAAc5wC,KAAKomE,UACtBpmE,KAAKqqF,UAAYrqF,KAAKomE,OACtBpmE,KAAKomE,YAASzsE,EAElB,CAMAikD,YAAAA,CAAajB,GACX,GAAI38C,KAAKomE,OACP,OAAOpmE,KAAKomE,OAGd,MAAM3oB,EAAcz9C,KAAKomE,OAASpmE,KAAKgqF,mBAAmBrtC,GAI1D,OAFA38C,KAAKsqF,oBAAoB3tC,GAElBc,CACT,CAEAusC,kBAAAA,CAAmBrtC,EAAO2e,GACxB,MAAMZ,EAAS/d,GAASA,EAAM+d,OACxBzyC,EAAUgpB,EAAeypB,EAAOzyC,SAAWyyC,EAAOzyC,QAAQm3B,QAAS,CAAC,GACpEA,EAqBV,SAAoBsb,GAClB,MAAM6vB,EAAW,CAAC,EACZnrC,EAAU,GACVrsC,EAAO9V,OAAO8V,KAAKw9D,GAASnxB,QAAQlvB,OAC1C,IAAK,IAAIz1B,EAAI,EAAGA,EAAIsY,EAAK5X,OAAQV,IAC/B2kD,EAAQ5jD,KAAK+0E,GAASgY,UAAUx1E,EAAKtY,KAGvC,MAAM0lD,EAAQua,EAAOtb,SAAW,GAChC,IAAK,IAAI3kD,EAAI,EAAGA,EAAI0lD,EAAMhlD,OAAQV,IAAK,CACrC,MAAMyvF,EAAS/pC,EAAM1lD,IAEY,IAA7B2kD,EAAQpjD,QAAQkuF,KAClB9qC,EAAQ5jD,KAAK0uF,GACbK,EAASL,EAAOlyE,KAAM,EAE1B,CAEA,MAAO,CAAConC,UAASmrC,WACnB,CAxCoBC,CAAW9vB,GAE3B,OAAmB,IAAZzyC,GAAsBqzC,EAkDjC,SAA2B3e,EAAK5kD,EAAuBkwB,EAASqzC,GAAK,IAAnC,QAAClc,EAAO,SAAEmrC,GAASxyF,EACnD,MAAMk2B,EAAS,GACT/b,EAAUyqC,EAAM4H,aAEtB,IAAK,MAAM2lC,KAAU9qC,EAAS,CAC5B,MAAMpnC,EAAKkyE,EAAOlyE,GACZkL,EAAOunE,GAAQxiE,EAAQjQ,GAAKsjD,GACrB,OAATp4C,GAGJ+K,EAAOzyB,KAAK,CACV0uF,SACAjiE,QAASyiE,GAAW/tC,EAAM+d,OAAQ,CAACwvB,SAAQ/pC,MAAOoqC,EAASvyE,IAAMkL,EAAMhR,IAE3E,CAEA,OAAO+b,CACT,CAnE4C08D,CAAkBhuC,EAAOyC,EAASn3B,EAASqzC,GAAhD,EACrC,CAMAgvB,mBAAAA,CAAoB3tC,GAClB,MAAMiuC,EAAsB5qF,KAAKqqF,WAAa,GACxC5sC,EAAcz9C,KAAKomE,OACnByK,EAAOA,CAAClsE,EAAG/F,IAAM+F,EAAE6Z,QAAO5Z,IAAMhG,EAAEisF,MAAKhmF,GAAKD,EAAEslF,OAAOlyE,KAAOnT,EAAEqlF,OAAOlyE,OAC3EhY,KAAKu3D,QAAQsZ,EAAK+Z,EAAqBntC,GAAcd,EAAO,QAC5D38C,KAAKu3D,QAAQsZ,EAAKpzB,EAAamtC,GAAsBjuC,EAAO,QAC9D,EA2BF,SAAS8tC,GAAQxiE,EAASqzC,GACxB,OAAKA,IAAmB,IAAZrzC,GAGI,IAAZA,EACK,CAAC,EAEHA,EALE,IAMX,CAqBA,SAASyiE,GAAWhwB,EAAMhiE,EAAmBwqB,EAAMhR,GAAS,IAAhC,OAACg4E,EAAM,MAAE/pC,GAAMznD,EACzC,MAAMqa,EAAO2nD,EAAOowB,gBAAgBZ,GAC9BjgC,EAASyQ,EAAO4G,gBAAgBp+C,EAAMnQ,GAK5C,OAJIotC,GAAS+pC,EAAO7pC,UAElB4J,EAAOzuD,KAAK0uF,EAAO7pC,UAEdqa,EAAO6G,eAAetX,EAAQ/3C,EAAS,CAAC,IAAK,CAElDs6C,YAAY,EACZC,WAAW,EACXF,SAAS,GAEb,CClLO,SAASw+B,GAAa9rF,EAAMgpB,GACjC,MAAM+iE,EAAkB3qC,GAAStC,SAAS9+C,IAAS,CAAC,EAEpD,QADwBgpB,EAAQ81B,UAAY,CAAC,GAAG9+C,IAAS,CAAC,GACpC2/C,WAAa32B,EAAQ22B,WAAaosC,EAAgBpsC,WAAa,GACvF,CAgBA,SAASqsC,GAAcjzE,GACrB,GAAW,MAAPA,GAAqB,MAAPA,GAAqB,MAAPA,EAC9B,OAAOA,CAEX,CAWO,SAASkzE,GAAclzE,GAC5B,GAAIizE,GAAcjzE,GAChB,OAAOA,EACR,QAAAmzE,EAAAzrF,UAAAvE,OAHkCiwF,EAAY,IAAAvvF,MAAAsvF,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAZD,EAAYC,EAAA,GAAA3rF,UAAA2rF,GAI/C,IAAK,MAAMnoE,KAAQkoE,EAAc,CAC/B,MAAMlzC,EAAOh1B,EAAKg1B,OAbH,SADOhhD,EAeAgsB,EAAKhsB,WAdU,WAAbA,EACjB,IAEQ,SAAbA,GAAoC,UAAbA,EAClB,SADT,IAYO8gB,EAAG7c,OAAS,GAAK8vF,GAAcjzE,EAAG,GAAGlY,eAC1C,GAAIo4C,EACF,OAAOA,CAEX,CApBF,IAA0BhhD,EAqBxB,MAAM,IAAI6E,MAAA,6BAAAjK,OAAmCkmB,EAAG,uDAClD,CAEA,SAASszE,GAAmBtzE,EAAIkgC,EAAMmnB,GACpC,GAAIA,EAAQnnB,EAAO,YAAclgC,EAC/B,MAAO,CAACkgC,OAEZ,CAYA,SAASqzC,GAAiB7wB,EAAQzyC,GAChC,MAAMujE,EAAgBhuC,GAAUkd,EAAOz7D,OAAS,CAACsgD,OAAQ,CAAC,GACpDksC,EAAexjE,EAAQs3B,QAAU,CAAC,EAClCmsC,EAAiBX,GAAarwB,EAAOz7D,KAAMgpB,GAC3Cs3B,EAAStiD,OAAOtJ,OAAO,MAqC7B,OAlCAsJ,OAAO8V,KAAK04E,GAAchhE,SAAQzS,IAChC,MAAM2zE,EAAYF,EAAazzE,GAC/B,IAAK64B,EAAS86C,GACZ,OAAOznF,QAAQC,MAAM,0CAADrS,OAA2CkmB,IAEjE,GAAI2zE,EAAUhgC,OACZ,OAAOznD,QAAQ0M,KAAK,kDAAD9e,OAAmDkmB,IAExE,MAAMkgC,EAAOgzC,GAAclzE,EAAI2zE,EAzBnC,SAAkC3zE,EAAI0iD,GACpC,GAAIA,EAAOv7D,MAAQu7D,EAAOv7D,KAAK4+C,SAAU,CACvC,MAAM6tC,EAAUlxB,EAAOv7D,KAAK4+C,SAASv/B,QAAQ/K,GAAMA,EAAEgsD,UAAYznD,GAAMvE,EAAEksD,UAAY3nD,IACrF,GAAI4zE,EAAQzwF,OACV,OAAOmwF,GAAmBtzE,EAAI,IAAK4zE,EAAQ,KAAON,GAAmBtzE,EAAI,IAAK4zE,EAAQ,IAG1F,MAAO,CAAC,CACV,CAiB8CC,CAAyB7zE,EAAI0iD,GAASra,GAASd,OAAOosC,EAAU1sF,OACpG6sF,EAlEV,SAAmC5zC,EAAM0G,GACvC,OAAO1G,IAAS0G,EAAY,UAAY,SAC1C,CAgEsBmtC,CAA0B7zC,EAAMwzC,GAC5CM,EAAsBR,EAAcjsC,QAAU,CAAC,EACrDA,EAAOvnC,GAAMy6B,EAAQx1C,OAAOtJ,OAAO,MAAO,CAAC,CAACukD,QAAOyzC,EAAWK,EAAoB9zC,GAAO8zC,EAAoBF,IAAY,IAI3HpxB,EAAOv7D,KAAK4+C,SAAStzB,SAAQ40C,IAC3B,MAAMpgE,EAAOogE,EAAQpgE,MAAQy7D,EAAOz7D,KAC9B2/C,EAAYygB,EAAQzgB,WAAamsC,GAAa9rF,EAAMgpB,GAEpD+jE,GADkBxuC,GAAUv+C,IAAS,CAAC,GACAsgD,QAAU,CAAC,EACvDtiD,OAAO8V,KAAKi5E,GAAqBvhE,SAAQwhE,IACvC,MAAM/zC,EAxFZ,SAAmClgC,EAAI4mC,GACrC,IAAI1G,EAAOlgC,EAMX,MALW,YAAPA,EACFkgC,EAAO0G,EACS,YAAP5mC,IACTkgC,EAAqB,MAAd0G,EAAoB,IAAM,KAE5B1G,CACT,CAgFmBg0C,CAA0BD,EAAWrtC,GAC5C5mC,EAAKqnD,EAAQnnB,EAAO,WAAaA,EACvCqH,EAAOvnC,GAAMunC,EAAOvnC,IAAO/a,OAAOtJ,OAAO,MACzC8+C,EAAQ8M,EAAOvnC,GAAK,CAAC,CAACkgC,QAAOuzC,EAAazzE,GAAKg0E,EAAoBC,IAAY,GAC/E,IAIJhvF,OAAO8V,KAAKwsC,GAAQ90B,SAAQ3X,IAC1B,MAAMwsC,EAAQC,EAAOzsC,GACrB2/B,EAAQ6M,EAAO,CAACe,GAASd,OAAOD,EAAMrgD,MAAOohD,GAASf,OAAO,IAGxDC,CACT,CAEA,SAAS4sC,GAAYzxB,GACnB,MAAMzyC,EAAUyyC,EAAOzyC,UAAYyyC,EAAOzyC,QAAU,CAAC,GAErDA,EAAQm3B,QAAUnO,EAAehpB,EAAQm3B,QAAS,CAAC,GACnDn3B,EAAQs3B,OAASgsC,GAAiB7wB,EAAQzyC,EAC5C,CAEA,SAASmkE,GAASjtF,GAIhB,OAHAA,EAAOA,GAAQ,CAAC,GACX4+C,SAAW5+C,EAAK4+C,UAAY,GACjC5+C,EAAK0iE,OAAS1iE,EAAK0iE,QAAU,GACtB1iE,CACT,CAWA,MAAMktF,GAAW,IAAI1wC,IACf2wC,GAAa,IAAIv1C,IAEvB,SAASw1C,GAAWzwC,EAAU0wC,GAC5B,IAAIz5E,EAAOs5E,GAAS/nF,IAAIw3C,GAMxB,OALK/oC,IACHA,EAAOy5E,IACPH,GAASrnF,IAAI82C,EAAU/oC,GACvBu5E,GAAWrgC,IAAIl5C,IAEVA,CACT,CAEA,MAAM05E,GAAaA,CAACznF,EAAKnG,EAAKiU,KAC5B,MAAMoQ,EAAO2vB,GAAiBh0C,EAAKiU,QACtBnZ,IAATupB,GACFle,EAAIinD,IAAI/oC,IAIG,MAAMwpE,GACnB5gF,WAAAA,CAAY4uD,GACV16D,KAAK2sF,QA/BT,SAAoBjyB,GAMlB,OALAA,EAASA,GAAU,CAAC,GACbv7D,KAAOitF,GAAS1xB,EAAOv7D,MAE9BgtF,GAAYzxB,GAELA,CACT,CAwBmBkyB,CAAWlyB,GAC1B16D,KAAK6sF,YAAc,IAAIlxC,IACvB37C,KAAK8sF,eAAiB,IAAInxC,GAC5B,CAEA,YAAIsC,GACF,OAAOj+C,KAAK2sF,QAAQ1uC,QACtB,CAEA,QAAIh/C,GACF,OAAOe,KAAK2sF,QAAQ1tF,IACtB,CAEA,QAAIA,CAAKA,GACPe,KAAK2sF,QAAQ1tF,KAAOA,CACtB,CAEA,QAAIE,GACF,OAAOa,KAAK2sF,QAAQxtF,IACtB,CAEA,QAAIA,CAAKA,GACPa,KAAK2sF,QAAQxtF,KAAOitF,GAASjtF,EAC/B,CAEA,WAAI8oB,GACF,OAAOjoB,KAAK2sF,QAAQ1kE,OACtB,CAEA,WAAIA,CAAQA,GACVjoB,KAAK2sF,QAAQ1kE,QAAUA,CACzB,CAEA,WAAIm3B,GACF,OAAOp/C,KAAK2sF,QAAQvtC,OACtB,CAEA+a,MAAAA,GACE,MAAMO,EAAS16D,KAAK2sF,QACpB3sF,KAAK+sF,aACLZ,GAAYzxB,EACd,CAEAqyB,UAAAA,GACE/sF,KAAK6sF,YAAYG,QACjBhtF,KAAK8sF,eAAeE,OACtB,CAQA3rB,gBAAAA,CAAiB4rB,GACf,OAAOV,GAAWU,GAChB,IAAM,CAAC,CAAC,YAADn7F,OACOm7F,GACZ,MAEN,CASA9oB,yBAAAA,CAA0B8oB,EAAax5F,GACrC,OAAO84F,GAAA,GAAAz6F,OAAcm7F,EAAA,gBAAAn7F,OAA0B2B,IAC7C,IAAM,CACJ,CAAC,YAAD3B,OACcm7F,EAAA,iBAAAn7F,OAA2B2B,GAAA,eAAA3B,OACxB2B,IAGjB,CAAC,YAAD3B,OACcm7F,GACZ,MAGR,CAUAlpB,uBAAAA,CAAwBkpB,EAAappB,GACnC,OAAO0oB,GAAA,GAAAz6F,OAAcm7F,EAAA,KAAAn7F,OAAe+xE,IAClC,IAAM,CAAC,CAAC,YAAD/xE,OACOm7F,EAAA,cAAAn7F,OAAwB+xE,GAAA,YAAA/xE,OACxBm7F,GAAA,YAAAn7F,OACA+xE,GACZ,MAEN,CAOAinB,eAAAA,CAAgBZ,GACd,MAAMlyE,EAAKkyE,EAAOlyE,GACZ/Y,EAAOe,KAAKf,KAClB,OAAOstF,GAAA,GAAAz6F,OAAcmN,EAAA,YAAAnN,OAAekmB,IAClC,IAAM,CAAC,CAAC,WAADlmB,OACMkmB,MACRkyE,EAAOgD,wBAA0B,MAE1C,CAKAC,aAAAA,CAAcC,EAAWC,GACvB,MAAMR,EAAc7sF,KAAK6sF,YACzB,IAAIppC,EAAQopC,EAAYvoF,IAAI8oF,GAK5B,OAJK3pC,IAAS4pC,IACZ5pC,EAAQ,IAAI9H,IACZkxC,EAAY7nF,IAAIooF,EAAW3pC,IAEtBA,CACT,CAQA6d,eAAAA,CAAgB8rB,EAAWE,EAAUD,GACnC,MAAM,QAACplE,EAAO,KAAEhpB,GAAQe,KAClByjD,EAAQzjD,KAAKmtF,cAAcC,EAAWC,GACtCvvB,EAASra,EAAMn/C,IAAIgpF,GACzB,GAAIxvB,EACF,OAAOA,EAGT,MAAM7T,EAAS,IAAIlT,IAEnBu2C,EAAS7iE,SAAQ1X,IACXq6E,IACFnjC,EAAOgC,IAAImhC,GACXr6E,EAAK0X,SAAQ3X,GAAO25E,GAAWxiC,EAAQmjC,EAAWt6E,MAEpDC,EAAK0X,SAAQ3X,GAAO25E,GAAWxiC,EAAQhiC,EAASnV,KAChDC,EAAK0X,SAAQ3X,GAAO25E,GAAWxiC,EAAQzM,GAAUv+C,IAAS,CAAC,EAAG6T,KAC9DC,EAAK0X,SAAQ3X,GAAO25E,GAAWxiC,EAAQ5J,GAAUvtC,KACjDC,EAAK0X,SAAQ3X,GAAO25E,GAAWxiC,EAAQxM,GAAa3qC,IAAA,IAGtD,MAAMvT,EAAQ1D,MAAM2B,KAAKysD,GAOzB,OANqB,IAAjB1qD,EAAMpE,QACRoE,EAAM/D,KAAKyB,OAAOtJ,OAAO,OAEvB24F,GAAWj5C,IAAIi6C,IACjB7pC,EAAMz+C,IAAIsoF,EAAU/tF,GAEfA,CACT,CAMAguF,iBAAAA,GACE,MAAM,QAACtlE,EAAO,KAAEhpB,GAAQe,KAExB,MAAO,CACLioB,EACAu1B,GAAUv+C,IAAS,CAAC,EACpBohD,GAAStC,SAAS9+C,IAAS,CAAC,EAC5B,CAACA,QACDohD,GACA5C,GAEJ,CASAumB,mBAAAA,CAAoB/Z,EAAQ/b,EAAOh8B,GAA0B,IAAjBg4C,EAAWxqD,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAC,GAADA,UAAC,GAAD,CAAC,IACtD,MAAMuuB,EAAS,CAACgtC,SAAS,IACnB,SAAC9rD,EAAQ,YAAEq+E,GAAeC,GAAYztF,KAAK8sF,eAAgB7iC,EAAQC,GACzE,IAAIjiC,EAAU9Y,EACd,GAkDJ,SAAqB47C,EAAO7c,GAC1B,MAAM,aAAC6d,EAAY,YAAEK,GAAexO,GAAamN,GAEjD,IAAK,MAAMn7B,KAAQse,EAAO,CACxB,MAAMse,EAAaT,EAAan8B,GAC1B68B,EAAYL,EAAYx8B,GACxB7+B,GAAS07D,GAAaD,IAAezB,EAAMn7B,GACjD,GAAK48B,IAAerZ,GAAWpiD,IAAU28F,GAAY38F,KAC/C07D,GAAavtD,EAAQnO,GACzB,OAAO,CAEX,CACA,OAAO,CACT,CA/DQ48F,CAAYx+E,EAAU++B,GAAQ,CAChCjgB,EAAOgtC,SAAU,EAIjBhzC,EAAUujC,GAAer8C,EAHzB+C,EAAUihC,GAAWjhC,GAAWA,IAAYA,EAExBlS,KAAKuhE,eAAetX,EAAQ/3C,EAASs7E,IAI3D,IAAK,MAAM59D,KAAQse,EACjBjgB,EAAO2B,GAAQ3H,EAAQ2H,GAEzB,OAAO3B,CACT,CAQAszC,cAAAA,CAAetX,EAAQ/3C,GAA8C,IAArCg4C,EAAWxqD,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAC,GAADA,UAAC,GAAD,CAAC,IAAKgsD,EAAkBhsD,UAAAvE,OAAA,EAAAuE,UAAA,QAAA/F,EACjE,MAAM,SAACwV,GAAYs+E,GAAYztF,KAAK8sF,eAAgB7iC,EAAQC,GAC5D,OAAOrZ,EAAS3+B,GACZs5C,GAAer8C,EAAU+C,OAASvY,EAAW+xD,GAC7Cv8C,CACN,EAGF,SAASs+E,GAAYG,EAAe3jC,EAAQC,GAC1C,IAAIzG,EAAQmqC,EAActpF,IAAI2lD,GACzBxG,IACHA,EAAQ,IAAI9H,IACZiyC,EAAc5oF,IAAIilD,EAAQxG,IAE5B,MAAM3H,EAAWoO,EAASvuD,OAC1B,IAAImiE,EAASra,EAAMn/C,IAAIw3C,GACvB,IAAKgiB,EAAQ,CAEXA,EAAS,CACP3uD,SAFe66C,GAAgBC,EAAQC,GAGvCsjC,YAAatjC,EAAS1rC,QAAO8S,IAAMA,EAAExxB,cAAciG,SAAS,YAE9D09C,EAAMz+C,IAAI82C,EAAUgiB,GAEtB,OAAOA,CACT,CAEA,MAAM4vB,GAAc38F,GAAS8/C,EAAS9/C,IACjCkM,OAAOoR,oBAAoBtd,GAAOquB,QAAO,CAACu5C,EAAK7lD,IAAQ6lD,GAAOxlB,GAAWpiD,EAAM+hB,MAAO,GC9X3F,MAAM+6E,GAAkB,CAAC,MAAO,SAAU,OAAQ,QAAS,aAC3D,SAASC,GAAqB52F,EAAUghD,GACtC,MAAoB,QAAbhhD,GAAmC,WAAbA,IAAiE,IAAvC22F,GAAgB7xF,QAAQ9E,IAA6B,MAATghD,CACrG,CAEA,SAAS61C,GAAcC,EAAIC,GACzB,OAAO,SAAStpF,EAAG/F,GACjB,OAAO+F,EAAEqpF,KAAQpvF,EAAEovF,GACfrpF,EAAEspF,GAAMrvF,EAAEqvF,GACVtpF,EAAEqpF,GAAMpvF,EAAEovF,EAChB,CACF,CAEA,SAASE,GAAqBh8E,GAC5B,MAAMyqC,EAAQzqC,EAAQyqC,MAChBke,EAAmBle,EAAM10B,QAAQr0B,UAEvC+oD,EAAM4jC,cAAc,eACpBv4D,EAAa6yC,GAAoBA,EAAiBszB,WAAY,CAACj8E,GAAUyqC,EAC3E,CAEA,SAASyxC,GAAoBl8E,GAC3B,MAAMyqC,EAAQzqC,EAAQyqC,MAChBke,EAAmBle,EAAM10B,QAAQr0B,UACvCo0B,EAAa6yC,GAAoBA,EAAiBwzB,WAAY,CAACn8E,GAAUyqC,EAC3E,CAMA,SAAS2xC,GAAU7tE,GAYjB,OAXIyvC,MAAqC,kBAATzvC,EAC9BA,EAAO0vC,SAASjjC,eAAezM,GACtBA,GAAQA,EAAKtlB,SAEtBslB,EAAOA,EAAK,IAGVA,GAAQA,EAAK6jC,SAEf7jC,EAAOA,EAAK6jC,QAEP7jC,CACT,CAEA,MAAM8tE,GAAY,CAAC,EACbC,GAAY17E,IAChB,MAAMwxC,EAASgqC,GAAUx7E,GACzB,OAAO7V,OAAOs/C,OAAOgyC,IAAW/vE,QAAQ9b,GAAMA,EAAE4hD,SAAWA,IAAQ5xC,KAAK,EAG1E,SAAS+7E,GAAgB5vF,EAAK5C,EAAOupE,GACnC,MAAMzyD,EAAO9V,OAAO8V,KAAKlU,GACzB,IAAK,MAAMiU,KAAOC,EAAM,CACtB,MAAM27E,GAAU57E,EAChB,GAAI47E,GAAUzyF,EAAO,CACnB,MAAMlL,EAAQ8N,EAAIiU,UACXjU,EAAIiU,IACP0yD,EAAO,GAAKkpB,EAASzyF,KACvB4C,EAAI6vF,EAASlpB,GAAQz0E,GAG3B,CACF,CAmBA,SAAS49F,GAAervC,EAAO+jB,EAAWurB,GACxC,OAAOtvC,EAAMr3B,QAAQs5B,KAAOjC,EAAMsvC,GAASvrB,EAAUurB,EACvD,CAeA,MAAMztD,GASJ,eAAOC,GACLmvC,GAAStkB,OAAOvsD,WAChBmvF,IACF,CAEA,iBAAOxH,GACL9W,GAASvX,UAAUt5D,WACnBmvF,IACF,CAGA/iF,WAAAA,CAAY2U,EAAMquE,GAChB,MAAMp0B,EAAS16D,KAAK06D,OAAS,IAAIgyB,GAAOoC,GAClCC,EAAgBT,GAAU7tE,GAC1BuuE,EAAgBR,GAASO,GAC/B,GAAIC,EACF,MAAM,IAAIjzF,MACR,4CAA+CizF,EAAch3E,GAA7D,kDACgDg3E,EAAc1qC,OAAOtsC,GAAK,oBAI9E,MAAMiQ,EAAUyyC,EAAO6G,eAAe7G,EAAO6yB,oBAAqBvtF,KAAKukD,cAEvEvkD,KAAKi+C,SAAW,IAAKyc,EAAOzc,UCpJzB,SAAyBqG,GAC9B,OAAK4L,MAAiD,qBAApB++B,iBAAmC3qC,aAAkB2qC,gBAC9EnY,GAEF0C,EACT,CD+I4C0V,CAAgBH,IACxD/uF,KAAKi+C,SAAS44B,aAAanc,GAE3B,MAAMxoD,EAAUlS,KAAKi+C,SAASy4B,eAAeqY,EAAe9mE,EAAQoqC,aAC9D/N,EAASpyC,GAAWA,EAAQoyC,OAC5B9xD,EAAS8xD,GAAUA,EAAO9xD,OAC1BD,EAAQ+xD,GAAUA,EAAO/xD,MAE/ByN,KAAKgY,GAAK24B,IACV3wC,KAAKy+C,IAAMvsC,EACXlS,KAAKskD,OAASA,EACdtkD,KAAKzN,MAAQA,EACbyN,KAAKxN,OAASA,EACdwN,KAAKqoB,SAAWJ,EAIhBjoB,KAAKmvF,aAAenvF,KAAKqyD,YACzBryD,KAAKq1E,QAAU,GACfr1E,KAAKovF,UAAY,GACjBpvF,KAAKi9D,aAAUtjE,EACfqG,KAAK80E,MAAQ,GACb90E,KAAKmkD,6BAA0BxqD,EAC/BqG,KAAKqjE,eAAY1pE,EACjBqG,KAAKm4D,QAAU,GACfn4D,KAAKqvF,gBAAa11F,EAClBqG,KAAKoR,WAAa,CAAC,EAEnBpR,KAAKsvF,0BAAuB31F,EAC5BqG,KAAKuvF,gBAAkB,GACvBvvF,KAAKu/C,OAAS,CAAC,EACfv/C,KAAKwvF,SAAW,IAAI5F,GACpB5pF,KAAKk6E,SAAW,CAAC,EACjBl6E,KAAKyvF,eAAiB,CAAC,EACvBzvF,KAAK0vF,UAAW,EAChB1vF,KAAKukE,yBAAsB5qE,EAC3BqG,KAAK2+D,cAAWhlE,EAChBqG,KAAK2vF,U1C9IF,SAA4CjiF,EAA8BgzC,GAC/E,IAAIkvC,EACJ,OAAO,WAAyB,QAAAjI,EAAAjoF,UAAAvE,OAAb8S,EAAW,IAAApS,MAAA8rF,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAX35E,EAAW25E,GAAAloF,UAAAkoF,GAO5B,OANIlnC,GACFmvC,aAAaD,GACbA,EAAUE,WAAWpiF,EAAIgzC,EAAOzyC,IAEhCP,EAAGhK,MAAM1D,KAAMiO,GAEVyyC,CACT,CACF,C0CmIqBqvC,EAASt5F,GAAQuJ,KAAKm6D,OAAO1jE,IAAOwxB,EAAQ+nE,aAAe,GAC5EhwF,KAAK4lE,aAAe,GAGpB2oB,GAAUvuF,KAAKgY,IAAMhY,KAEhBkS,GAAYoyC,GASjB2U,GAASP,OAAO14D,KAAM,WAAYkuF,IAClCj1B,GAASP,OAAO14D,KAAM,WAAYouF,IAElCpuF,KAAKiwF,cACDjwF,KAAK0vF,UACP1vF,KAAKm6D,UATLj2D,QAAQC,MAAM,oEAWlB,CAEA,eAAIkuD,GACF,MAAOpqC,SAAS,YAACoqC,EAAW,oBAAErT,GAAoB,MAAEzsD,EAAA,OAAOC,EAAM,aAAE28F,GAAgBnvF,KACnF,OAAK4wC,EAAcyhB,GAKfrT,GAAuBmwC,EAElBA,EAIF38F,EAASD,EAAQC,EAAS,KATxB6/D,CAUX,CAEA,QAAIlzD,GACF,OAAOa,KAAK06D,OAAOv7D,IACrB,CAEA,QAAIA,CAAKA,GACPa,KAAK06D,OAAOv7D,KAAOA,CACrB,CAEA,WAAI8oB,GACF,OAAOjoB,KAAKqoB,QACd,CAEA,WAAIJ,CAAQA,GACVjoB,KAAK06D,OAAOzyC,QAAUA,CACxB,CAEA,YAAIsoD,GACF,OAAOA,EACT,CAKA0f,WAAAA,GAeE,OAbAjwF,KAAKugF,cAAc,cAEfvgF,KAAKioB,QAAQo3B,WACfr/C,KAAK8gD,SAELkS,GAAYhzD,KAAMA,KAAKioB,QAAQ+1B,kBAGjCh+C,KAAKkwF,aAGLlwF,KAAKugF,cAAc,aAEZvgF,IACT,CAEAgtF,KAAAA,GAEE,OADA3oC,GAAYrkD,KAAKskD,OAAQtkD,KAAKy+C,KACvBz+C,IACT,CAEA84D,IAAAA,GAEE,OADAG,GAASH,KAAK94D,MACPA,IACT,CAOA8gD,MAAAA,CAAOvuD,EAAOC,GACPymE,GAAShB,QAAQj4D,MAGpBA,KAAKmwF,kBAAoB,CAAC59F,QAAOC,UAFjCwN,KAAKowF,QAAQ79F,EAAOC,EAIxB,CAEA49F,OAAAA,CAAQ79F,EAAOC,GACb,MAAMy1B,EAAUjoB,KAAKioB,QACfq8B,EAAStkD,KAAKskD,OACd+N,EAAcpqC,EAAQ+2B,qBAAuBh/C,KAAKqyD,YAClDg+B,EAAUrwF,KAAKi+C,SAASiU,eAAe5N,EAAQ/xD,EAAOC,EAAQ6/D,GAC9Di+B,EAAWroE,EAAQ+1B,kBAAoBh+C,KAAKi+C,SAASC,sBACrDznD,EAAOuJ,KAAKzN,MAAQ,SAAW,SAErCyN,KAAKzN,MAAQ89F,EAAQ99F,MACrByN,KAAKxN,OAAS69F,EAAQ79F,OACtBwN,KAAKmvF,aAAenvF,KAAKqyD,YACpBW,GAAYhzD,KAAMswF,GAAU,KAIjCtwF,KAAKugF,cAAc,SAAU,CAAC7vF,KAAM2/F,IAEpCroE,EAAaC,EAAQsoE,SAAU,CAACvwF,KAAMqwF,GAAUrwF,MAE5CA,KAAK0vF,UACH1vF,KAAK2vF,UAAUl5F,IAEjBuJ,KAAKgjB,SAGX,CAEAwtE,mBAAAA,GAIEj/C,EAHgBvxC,KAAKioB,QACSs3B,QAAU,CAAC,GAErB,CAACkxC,EAAapK,KAChCoK,EAAYz4E,GAAKquE,CAAA,GAErB,CAKAqK,mBAAAA,GACE,MAAMzoE,EAAUjoB,KAAKioB,QACf0oE,EAAY1oE,EAAQs3B,OACpBA,EAASv/C,KAAKu/C,OACdvvB,EAAU/yB,OAAO8V,KAAKwsC,GAAQngC,QAAO,CAACvgB,EAAKmZ,KAC/CnZ,EAAImZ,IAAM,EACHnZ,IACN,CAAC,GACJ,IAAIqxB,EAAQ,GAERygE,IACFzgE,EAAQA,EAAMp+B,OACZmL,OAAO8V,KAAK49E,GAAWjyE,KAAK1G,IAC1B,MAAMozE,EAAeuF,EAAU34E,GACzBkgC,EAAOgzC,GAAclzE,EAAIozE,GACzBwF,EAAoB,MAAT14C,EACXqwB,EAAwB,MAATrwB,EACrB,MAAO,CACLjwB,QAASmjE,EACTyF,UAAWD,EAAW,YAAcroB,EAAe,SAAW,OAC9DuoB,MAAOF,EAAW,eAAiBroB,EAAe,WAAa,SAChE,MAKPh3B,EAAKrhB,GAAQzP,IACX,MAAM2qE,EAAe3qE,EAAKwH,QACpBjQ,EAAKozE,EAAapzE,GAClBkgC,EAAOgzC,GAAclzE,EAAIozE,GACzB2F,EAAY9/C,EAAem6C,EAAansF,KAAMwhB,EAAKqwE,YAE3Bn3F,IAA1ByxF,EAAal0F,UAA0B42F,GAAqB1C,EAAal0F,SAAUghD,KAAU41C,GAAqBrtE,EAAKowE,aACzHzF,EAAal0F,SAAWupB,EAAKowE,WAG/B7gE,EAAQhY,IAAM,EACd,IAAIsnC,EAAQ,KACZ,GAAItnC,KAAMunC,GAAUA,EAAOvnC,GAAI/Y,OAAS8xF,EACtCzxC,EAAQC,EAAOvnC,OACV,CAELsnC,EAAQ,IADWixB,GAASiY,SAASuI,GAC7B,CAAe,CACrB/4E,KACA/Y,KAAM8xF,EACNtyC,IAAKz+C,KAAKy+C,IACV9B,MAAO38C,OAETu/C,EAAOD,EAAMtnC,IAAMsnC,EAGrBA,EAAM7wC,KAAK28E,EAAcnjE,EAAA,IAG3BspB,EAAKvhB,GAAS,CAACghE,EAAYh5E,KACpBg5E,UACIzxC,EAAOvnC,MAIlBu5B,EAAKgO,GAASD,IACZ6zB,GAAQvY,UAAU56D,KAAMs/C,EAAOA,EAAMr3B,SACrCkrD,GAAQiC,OAAOp1E,KAAMs/C,EAAA,GAEzB,CAKA2xC,eAAAA,GACE,MAAMp1B,EAAW77D,KAAKovF,UAChB/pB,EAAUrlE,KAAKb,KAAK4+C,SAAS5iD,OAC7BiqE,EAAUvJ,EAAS1gE,OAGzB,GADA0gE,EAAS32C,MAAK,CAACvgB,EAAG/F,IAAM+F,EAAE8N,MAAQ7T,EAAE6T,QAChC2yD,EAAUC,EAAS,CACrB,IAAK,IAAI5qE,EAAI4qE,EAAS5qE,EAAI2qE,IAAW3qE,EACnCuF,KAAKkxF,oBAAoBz2F,GAE3BohE,EAASt1C,OAAO8+C,EAASD,EAAUC,GAErCrlE,KAAKuvF,gBAAkB1zB,EAAS/9D,MAAM,GAAGonB,KAAK6oE,GAAc,QAAS,SACvE,CAKAoD,2BAAAA,GACE,MAAO/B,UAAWvzB,EAAU18D,MAAM,SAAC4+C,IAAa/9C,KAC5C67D,EAAS1gE,OAAS4iD,EAAS5iD,eACtB6E,KAAKi9D,QAEdpB,EAASpxC,SAAQ,CAAC7H,EAAMnQ,KACmC,IAArDsrC,EAASv/B,QAAO5Z,GAAKA,IAAMge,EAAK2rD,WAAUpzE,QAC5C6E,KAAKkxF,oBAAoBz+E,KAG/B,CAEA2+E,wBAAAA,GACE,MAAMC,EAAiB,GACjBtzC,EAAW/9C,KAAKb,KAAK4+C,SAC3B,IAAItjD,EAAGo3C,EAIP,IAFA7xC,KAAKmxF,8BAEA12F,EAAI,EAAGo3C,EAAOkM,EAAS5iD,OAAQV,EAAIo3C,EAAMp3C,IAAK,CACjD,MAAM4kE,EAAUthB,EAAStjD,GACzB,IAAImoB,EAAO5iB,KAAKogE,eAAe3lE,GAC/B,MAAMwE,EAAOogE,EAAQpgE,MAAQe,KAAK06D,OAAOz7D,KAazC,GAXI2jB,EAAK3jB,MAAQ2jB,EAAK3jB,OAASA,IAC7Be,KAAKkxF,oBAAoBz2F,GACzBmoB,EAAO5iB,KAAKogE,eAAe3lE,IAE7BmoB,EAAK3jB,KAAOA,EACZ2jB,EAAKg8B,UAAYygB,EAAQzgB,WAAamsC,GAAa9rF,EAAMe,KAAKioB,SAC9DrF,EAAK0uE,MAAQjyB,EAAQiyB,OAAS,EAC9B1uE,EAAKnQ,MAAQhY,EACbmoB,EAAKrK,MAAQ,GAAK8mD,EAAQ9mD,MAC1BqK,EAAKq+B,QAAUjhD,KAAKurE,iBAAiB9wE,GAEjCmoB,EAAKm6C,WACPn6C,EAAKm6C,WAAWqC,YAAY3kE,GAC5BmoB,EAAKm6C,WAAWiC,iBACX,CACL,MAAMuyB,EAAkBhhB,GAAS8X,cAAcppF,IACzC,mBAAC4/D,EAAA,gBAAoBC,GAAmBze,GAAStC,SAAS9+C,GAChEhC,OAAO4hB,OAAO0yE,EAAiB,CAC7BzyB,gBAAiByR,GAASC,WAAW1R,GACrCD,mBAAoBA,GAAsB0R,GAASC,WAAW3R,KAEhEj8C,EAAKm6C,WAAa,IAAIw0B,EAAgBvxF,KAAMvF,GAC5C42F,EAAe71F,KAAKonB,EAAKm6C,YAE7B,CAGA,OADA/8D,KAAKixF,kBACEI,CACT,CAMAG,cAAAA,GACEjgD,EAAKvxC,KAAKb,KAAK4+C,UAAU,CAACshB,EAASrtB,KACjChyC,KAAKogE,eAAepuB,GAAc+qB,WAAWvoC,OAAO,GACnDx0B,KACL,CAKAw0B,KAAAA,GACEx0B,KAAKwxF,iBACLxxF,KAAKugF,cAAc,QACrB,CAEApmB,MAAAA,CAAO1jE,GACL,MAAMikE,EAAS16D,KAAK06D,OAEpBA,EAAOP,SACP,MAAMlyC,EAAUjoB,KAAKqoB,SAAWqyC,EAAO6G,eAAe7G,EAAO6yB,oBAAqBvtF,KAAKukD,cACjFktC,EAAgBzxF,KAAKukE,qBAAuBt8C,EAAQr0B,UAU1D,GARAoM,KAAK0xF,gBACL1xF,KAAK2xF,sBACL3xF,KAAK4xF,uBAIL5xF,KAAKwvF,SAASpF,cAEuD,IAAjEpqF,KAAKugF,cAAc,eAAgB,CAAC9pF,OAAM0zF,YAAY,IACxD,OAIF,MAAMkH,EAAiBrxF,KAAKoxF,2BAE5BpxF,KAAKugF,cAAc,wBAGnB,IAAI9K,EAAa,EACjB,IAAK,IAAIh7E,EAAI,EAAGo3C,EAAO7xC,KAAKb,KAAK4+C,SAAS5iD,OAAQV,EAAIo3C,EAAMp3C,IAAK,CAC/D,MAAM,WAACsiE,GAAc/8D,KAAKogE,eAAe3lE,GACnC+5B,GAASi9D,IAAyD,IAAxCJ,EAAer1F,QAAQ+gE,GAGvDA,EAAWgE,sBAAsBvsC,GACjCihD,EAAajkF,KAAK+T,KAAKw3D,EAAWgG,iBAAkB0S,EACtD,CACAA,EAAaz1E,KAAK6xF,YAAc5pE,EAAQyrD,OAAOvyB,YAAcs0B,EAAa,EAC1Ez1E,KAAK8xF,cAAcrc,GAGdgc,GAGHlgD,EAAK8/C,GAAiBt0B,IACpBA,EAAWvoC,OAAO,IAItBx0B,KAAK+xF,gBAAgBt7F,GAGrBuJ,KAAKugF,cAAc,cAAe,CAAC9pF,SAEnCuJ,KAAKq1E,QAAQnwD,KAAK6oE,GAAc,IAAK,SAGrC,MAAM,QAAC51B,EAAO,WAAEk3B,GAAcrvF,KAC1BqvF,EACFrvF,KAAKgyF,cAAc3C,GAAY,GACtBl3B,EAAQh9D,QACjB6E,KAAKiyF,mBAAmB95B,EAASA,GAAS,GAG5Cn4D,KAAKgjB,QACP,CAKA0uE,aAAAA,GACEngD,EAAKvxC,KAAKu/C,QAASD,IACjB6zB,GAAQoC,UAAUv1E,KAAMs/C,EAAA,IAG1Bt/C,KAAKwwF,sBACLxwF,KAAK0wF,qBACP,CAKAiB,mBAAAA,GACE,MAAM1pE,EAAUjoB,KAAKioB,QACfiqE,EAAiB,IAAIn7C,IAAI95C,OAAO8V,KAAK/S,KAAKoR,aAC1C+gF,EAAY,IAAIp7C,IAAI9uB,EAAQ9X,QAE7BijC,GAAU8+C,EAAgBC,MAAgBnyF,KAAKsvF,uBAAyBrnE,EAAQo3B,aAEnFr/C,KAAKoyF,eACLpyF,KAAKkwF,aAET,CAKA0B,oBAAAA,GACE,MAAM,eAACnC,GAAkBzvF,KACnBqyF,EAAUryF,KAAKsyF,0BAA4B,GACjD,IAAK,MAAM,OAACr5E,EAAM,MAAEhd,EAAA,MAAO0U,KAAU0hF,EAAS,CAE5C5D,GAAgBgB,EAAgBxzF,EADR,oBAAXgd,GAAgCtI,EAAQA,EAEvD,CACF,CAKA2hF,sBAAAA,GACE,MAAM1sB,EAAe5lE,KAAK4lE,aAC1B,IAAKA,IAAiBA,EAAazqE,OACjC,OAGF6E,KAAK4lE,aAAe,GACpB,MAAM2sB,EAAevyF,KAAKb,KAAK4+C,SAAS5iD,OAClCq3F,EAAW/mE,GAAQ,IAAIsrB,IAC3B6uB,EACGpnD,QAAO9b,GAAKA,EAAE,KAAO+oB,IACrB/M,KAAI,CAAChc,EAAGjI,IAAMA,EAAI,IAAMiI,EAAE6jB,OAAO,GAAG5qB,KAAK,QAGxC82F,EAAYD,EAAQ,GAC1B,IAAK,IAAI/3F,EAAI,EAAGA,EAAI83F,EAAc93F,IAChC,IAAK24C,GAAUq/C,EAAWD,EAAQ/3F,IAChC,OAGJ,OAAOoB,MAAM2B,KAAKi1F,GACf/zE,KAAIhc,GAAKA,EAAEyK,MAAM,OACjBuR,KAAI/Z,IAAA,CAAOsU,OAAQtU,EAAE,GAAI1I,OAAQ0I,EAAE,GAAIgM,OAAQhM,EAAE,MACtD,CAOAmtF,aAAAA,CAAcrc,GACZ,IAA+D,IAA3Dz1E,KAAKugF,cAAc,eAAgB,CAAC4J,YAAY,IAClD,OAGFhX,GAAQhZ,OAAOn6D,KAAMA,KAAKzN,MAAOyN,KAAKxN,OAAQijF,GAE9C,MAAM1zD,EAAO/hB,KAAKqjE,UACZqvB,EAAS3wE,EAAKxvB,OAAS,GAAKwvB,EAAKvvB,QAAU,EAEjDwN,KAAKq1E,QAAU,GACf9jC,EAAKvxC,KAAK80E,OAAQrjB,IACZihC,GAA2B,cAAjBjhC,EAAIv6D,WAOdu6D,EAAImJ,WACNnJ,EAAImJ,YAEN56D,KAAKq1E,QAAQ75E,QAAQi2D,EAAI4jB,WAAU,GAClCr1E,MAEHA,KAAKq1E,QAAQ5qD,SAAQ,CAAChK,EAAMhO,KAC1BgO,EAAKkyE,KAAOlgF,CAAA,IAGdzS,KAAKugF,cAAc,cACrB,CAOAwR,eAAAA,CAAgBt7F,GACd,IAA6E,IAAzEuJ,KAAKugF,cAAc,uBAAwB,CAAC9pF,OAAM0zF,YAAY,IAAlE,CAIA,IAAK,IAAI1vF,EAAI,EAAGo3C,EAAO7xC,KAAKb,KAAK4+C,SAAS5iD,OAAQV,EAAIo3C,IAAQp3C,EAC5DuF,KAAKogE,eAAe3lE,GAAGsiE,WAAWnC,YAGpC,IAAK,IAAIngE,EAAI,EAAGo3C,EAAO7xC,KAAKb,KAAK4+C,SAAS5iD,OAAQV,EAAIo3C,IAAQp3C,EAC5DuF,KAAK4yF,eAAen4F,EAAG04C,GAAW18C,GAAQA,EAAK,CAACu7C,aAAcv3C,IAAMhE,GAGtEuJ,KAAKugF,cAAc,sBAAuB,CAAC9pF,SAC7C,CAOAm8F,cAAAA,CAAengF,EAAOhc,GACpB,MAAMmsB,EAAO5iB,KAAKogE,eAAe3tD,GAC3BxE,EAAO,CAAC2U,OAAMnQ,QAAOhc,OAAM0zF,YAAY,IAEW,IAApDnqF,KAAKugF,cAAc,sBAAuBtyE,KAI9C2U,EAAKm6C,WAAWhF,QAAQthE,GAExBwX,EAAKk8E,YAAa,EAClBnqF,KAAKugF,cAAc,qBAAsBtyE,GAC3C,CAEA+U,MAAAA,IACiE,IAA3DhjB,KAAKugF,cAAc,eAAgB,CAAC4J,YAAY,MAIhDlxB,GAAS5lB,IAAIrzC,MACXA,KAAK0vF,WAAaz2B,GAAShB,QAAQj4D,OACrCi5D,GAASh9D,MAAM+D,OAGjBA,KAAKk4D,OACLg2B,GAAqB,CAACvxC,MAAO38C,QAEjC,CAEAk4D,IAAAA,GACE,IAAIz9D,EACJ,GAAIuF,KAAKmwF,kBAAmB,CAC1B,MAAM,MAAC59F,EAAA,OAAOC,GAAUwN,KAAKmwF,kBAC7BnwF,KAAKowF,QAAQ79F,EAAOC,GACpBwN,KAAKmwF,kBAAoB,KAI3B,GAFAnwF,KAAKgtF,QAEDhtF,KAAKzN,OAAS,GAAKyN,KAAKxN,QAAU,EACpC,OAGF,IAA6D,IAAzDwN,KAAKugF,cAAc,aAAc,CAAC4J,YAAY,IAChD,OAMF,MAAM0I,EAAS7yF,KAAKq1E,QACpB,IAAK56E,EAAI,EAAGA,EAAIo4F,EAAO13F,QAAU03F,EAAOp4F,GAAG66E,GAAK,IAAK76E,EACnDo4F,EAAOp4F,GAAGy9D,KAAKl4D,KAAKqjE,WAMtB,IAHArjE,KAAK8yF,gBAGEr4F,EAAIo4F,EAAO13F,SAAUV,EAC1Bo4F,EAAOp4F,GAAGy9D,KAAKl4D,KAAKqjE,WAGtBrjE,KAAKugF,cAAc,YACrB,CAKAzkB,sBAAAA,CAAuBF,GACrB,MAAMC,EAAW77D,KAAKuvF,gBAChBthE,EAAS,GACf,IAAIxzB,EAAGo3C,EAEP,IAAKp3C,EAAI,EAAGo3C,EAAOgqB,EAAS1gE,OAAQV,EAAIo3C,IAAQp3C,EAAG,CACjD,MAAMmoB,EAAOi5C,EAASphE,GACjBmhE,IAAiBh5C,EAAKq+B,SACzBhzB,EAAOzyB,KAAKonB,EAEhB,CAEA,OAAOqL,CACT,CAMAsjD,4BAAAA,GACE,OAAOvxE,KAAK87D,wBAAuB,EACrC,CAOAg3B,aAAAA,GACE,IAAqE,IAAjE9yF,KAAKugF,cAAc,qBAAsB,CAAC4J,YAAY,IACxD,OAGF,MAAMtuB,EAAW77D,KAAKuxE,+BACtB,IAAK,IAAI92E,EAAIohE,EAAS1gE,OAAS,EAAGV,GAAK,IAAKA,EAC1CuF,KAAK+yF,aAAal3B,EAASphE,IAG7BuF,KAAKugF,cAAc,oBACrB,CAOAwS,YAAAA,CAAanwE,GACX,MAAM67B,EAAMz+C,KAAKy+C,IACX8C,EAAO3+B,EAAKsgD,MACZ8vB,GAAWzxC,EAAKzqC,SAChBiL,EAxrBV,SAAwBa,EAAMygD,GAC5B,MAAM,OAAC7qB,EAAA,OAAQC,GAAU71B,EACzB,OAAI41B,GAAUC,EACL,CACLjhD,KAAMm3F,GAAen2C,EAAQ6qB,EAAW,QACxC3rE,MAAOi3F,GAAen2C,EAAQ6qB,EAAW,SACzC5rE,IAAKk3F,GAAel2C,EAAQ4qB,EAAW,OACvC1rE,OAAQg3F,GAAel2C,EAAQ4qB,EAAW,WAGvCA,CACT,CA6qBiB4vB,CAAerwE,EAAM5iB,KAAKqjE,WACjCp1D,EAAO,CACX2U,OACAnQ,MAAOmQ,EAAKnQ,MACZ03E,YAAY,IAGwC,IAAlDnqF,KAAKugF,cAAc,oBAAqBtyE,KAIxC+kF,GACF7sC,GAAS1H,EAAK,CACZjnD,MAAoB,IAAd+pD,EAAK/pD,KAAiB,EAAIuqB,EAAKvqB,KAAO+pD,EAAK/pD,KACjDE,OAAsB,IAAf6pD,EAAK7pD,MAAkBsI,KAAKzN,MAAQwvB,EAAKrqB,MAAQ6pD,EAAK7pD,MAC7DD,KAAkB,IAAb8pD,EAAK9pD,IAAgB,EAAIsqB,EAAKtqB,IAAM8pD,EAAK9pD,IAC9CE,QAAwB,IAAhB4pD,EAAK5pD,OAAmBqI,KAAKxN,OAASuvB,EAAKpqB,OAAS4pD,EAAK5pD,SAIrEirB,EAAKm6C,WAAW7E,OAEZ86B,GACF5sC,GAAW3H,GAGbxwC,EAAKk8E,YAAa,EAClBnqF,KAAKugF,cAAc,mBAAoBtyE,GACzC,CAOAyjE,aAAAA,CAAczrB,GACZ,OAAOD,GAAeC,EAAOjmD,KAAKqjE,UAAWrjE,KAAK6xF,YACpD,CAEAqB,yBAAAA,CAA0BlvF,EAAGvN,EAAMwxB,EAASwpD,GAC1C,MAAMx4D,EAAS05D,GAAYC,MAAMn8E,GACjC,MAAsB,oBAAXwiB,EACFA,EAAOjZ,KAAMgE,EAAGikB,EAASwpD,GAG3B,EACT,CAEArR,cAAAA,CAAepuB,GACb,MAAMqtB,EAAUr/D,KAAKb,KAAK4+C,SAAS/L,GAC7B6pB,EAAW77D,KAAKovF,UACtB,IAAIxsE,EAAOi5C,EAASr9C,QAAO5Z,GAAKA,GAAKA,EAAE2pE,WAAalP,IAAS3sD,MAoB7D,OAlBKkQ,IACHA,EAAO,CACL3jB,KAAM,KACNE,KAAM,GACNkgE,QAAS,KACTtC,WAAY,KACZrlD,OAAQ,KACR+nD,QAAS,KACTE,QAAS,KACT2xB,MAAOjyB,GAAWA,EAAQiyB,OAAS,EACnC7+E,MAAOu/B,EACPu8B,SAAUlP,EACVpnB,QAAS,GACTF,SAAS,GAEX8jB,EAASrgE,KAAKonB,IAGTA,CACT,CAEA2hC,UAAAA,GACE,OAAOvkD,KAAK2+D,WAAa3+D,KAAK2+D,SAAW7U,GAAc,KAAM,CAACnN,MAAO38C,KAAMf,KAAM,UACnF,CAEAowE,sBAAAA,GACE,OAAOrvE,KAAKuxE,+BAA+Bp2E,MAC7C,CAEAowE,gBAAAA,CAAiBv5B,GACf,MAAMqtB,EAAUr/D,KAAKb,KAAK4+C,SAAS/L,GACnC,IAAKqtB,EACH,OAAO,EAGT,MAAMz8C,EAAO5iB,KAAKogE,eAAepuB,GAIjC,MAA8B,mBAAhBpvB,EAAKlL,QAAwBkL,EAAKlL,QAAU2nD,EAAQ3nD,MACpE,CAEAy7E,oBAAAA,CAAqBnhD,EAAciP,GACpBjhD,KAAKogE,eAAepuB,GAC5Bt6B,QAAUupC,CACjB,CAEAotB,oBAAAA,CAAqB57D,GACnBzS,KAAKyvF,eAAeh9E,IAAUzS,KAAKyvF,eAAeh9E,EACpD,CAEAs3D,iBAAAA,CAAkBt3D,GAChB,OAAQzS,KAAKyvF,eAAeh9E,EAC9B,CAKA2gF,iBAAAA,CAAkBphD,EAAcwxB,EAAWviB,GACzC,MAAMxqD,EAAOwqD,EAAU,OAAS,OAC1Br+B,EAAO5iB,KAAKogE,eAAepuB,GAC3BwlB,EAAQ50C,EAAKm6C,WAAWmH,wBAAmBvqE,EAAWlD,GAExDy8C,GAAQswB,IACV5gD,EAAKzjB,KAAKqkE,GAAW9rD,QAAUupC,EAC/BjhD,KAAKm6D,WAELn6D,KAAKmzF,qBAAqBnhD,EAAciP,GAExCuW,EAAM2C,OAAOv3C,EAAM,CAACq+B,YACpBjhD,KAAKm6D,QAAQ1b,GAAQA,EAAIzM,eAAiBA,EAAev7C,OAAOkD,IAEpE,CAEAunD,IAAAA,CAAKlP,EAAcwxB,GACjBxjE,KAAKozF,kBAAkBphD,EAAcwxB,GAAW,EAClD,CAEAziB,IAAAA,CAAK/O,EAAcwxB,GACjBxjE,KAAKozF,kBAAkBphD,EAAcwxB,GAAW,EAClD,CAKA0tB,mBAAAA,CAAoBl/C,GAClB,MAAMpvB,EAAO5iB,KAAKovF,UAAUp9C,GACxBpvB,GAAQA,EAAKm6C,YACfn6C,EAAKm6C,WAAWwD,kBAEXvgE,KAAKovF,UAAUp9C,EACxB,CAEAqhD,KAAAA,GACE,IAAI54F,EAAGo3C,EAIP,IAHA7xC,KAAK84D,OACLG,GAASD,OAAOh5D,MAEXvF,EAAI,EAAGo3C,EAAO7xC,KAAKb,KAAK4+C,SAAS5iD,OAAQV,EAAIo3C,IAAQp3C,EACxDuF,KAAKkxF,oBAAoBz2F,EAE7B,CAEA64F,OAAAA,GACEtzF,KAAKugF,cAAc,iBACnB,MAAM,OAACj8B,EAAM,IAAE7F,GAAOz+C,KAEtBA,KAAKqzF,QACLrzF,KAAK06D,OAAOqyB,aAERzoC,IACFtkD,KAAKoyF,eACL/tC,GAAYC,EAAQ7F,GACpBz+C,KAAKi+C,SAAS04B,eAAel4B,GAC7Bz+C,KAAKskD,OAAS,KACdtkD,KAAKy+C,IAAM,aAGN8vC,GAAUvuF,KAAKgY,IAEtBhY,KAAKugF,cAAc,eACrB,CAEAgT,aAAAA,GACE,OAAOvzF,KAAKskD,OAAOkvC,aAAa9zF,UAClC,CAKAwwF,UAAAA,GACElwF,KAAKyzF,iBACDzzF,KAAKioB,QAAQo3B,WACfr/C,KAAK0zF,uBAEL1zF,KAAK0vF,UAAW,CAEpB,CAKA+D,cAAAA,GACE,MAAMthF,EAAYnS,KAAKoR,WACjB6sC,EAAWj+C,KAAKi+C,SAEhB01C,EAAOA,CAAC10F,EAAM6Q,KAClBmuC,EAASvsC,iBAAiB1R,KAAMf,EAAM6Q,GACtCqC,EAAUlT,GAAQ6Q,CAAA,EAGdA,EAAWA,CAAC9L,EAAGY,EAAGC,KACtBb,EAAE2tD,QAAU/sD,EACZZ,EAAE4tD,QAAU/sD,EACZ7E,KAAKgyF,cAAchuF,EAAA,EAGrButC,EAAKvxC,KAAKioB,QAAQ9X,QAASlR,GAAS00F,EAAK10F,EAAM6Q,IACjD,CAKA4jF,oBAAAA,GACO1zF,KAAKsvF,uBACRtvF,KAAKsvF,qBAAuB,CAAC,GAE/B,MAAMn9E,EAAYnS,KAAKsvF,qBACjBrxC,EAAWj+C,KAAKi+C,SAEhB01C,EAAOA,CAAC10F,EAAM6Q,KAClBmuC,EAASvsC,iBAAiB1R,KAAMf,EAAM6Q,GACtCqC,EAAUlT,GAAQ6Q,CAAA,EAEd8jF,EAAUA,CAAC30F,EAAM6Q,KACjBqC,EAAUlT,KACZg/C,EAASrsC,oBAAoB5R,KAAMf,EAAM6Q,UAClCqC,EAAUlT,KAIf6Q,EAAWA,CAACvd,EAAOC,KACnBwN,KAAKskD,QACPtkD,KAAK8gD,OAAOvuD,EAAOC,IAIvB,IAAIqhG,EACJ,MAAMnE,EAAWA,KACfkE,EAAQ,SAAUlE,GAElB1vF,KAAK0vF,UAAW,EAChB1vF,KAAK8gD,SAEL6yC,EAAK,SAAU7jF,GACf6jF,EAAK,SAAUE,EAAA,EAGjBA,EAAWA,KACT7zF,KAAK0vF,UAAW,EAEhBkE,EAAQ,SAAU9jF,GAGlB9P,KAAKqzF,QACLrzF,KAAKowF,QAAQ,EAAG,GAEhBuD,EAAK,SAAUjE,EAAA,EAGbzxC,EAAS24B,WAAW52E,KAAKskD,QAC3BorC,IAEAmE,GAEJ,CAKAzB,YAAAA,GACE7gD,EAAKvxC,KAAKoR,YAAY,CAACtB,EAAU7Q,KAC/Be,KAAKi+C,SAASrsC,oBAAoB5R,KAAMf,EAAM6Q,EAAA,IAEhD9P,KAAKoR,WAAa,CAAC,EAEnBmgC,EAAKvxC,KAAKsvF,sBAAsB,CAACx/E,EAAU7Q,KACzCe,KAAKi+C,SAASrsC,oBAAoB5R,KAAMf,EAAM6Q,EAAA,IAEhD9P,KAAKsvF,0BAAuB31F,CAC9B,CAEAm6F,gBAAAA,CAAiB5jE,EAAOz5B,EAAM2kF,GAC5B,MAAMt/D,EAASs/D,EAAU,MAAQ,SACjC,IAAIx4D,EAAMnC,EAAMhmB,EAAGo3C,EAOnB,IALa,YAATp7C,IACFmsB,EAAO5iB,KAAKogE,eAAelwC,EAAM,GAAG8hB,cACpCpvB,EAAKm6C,WAAW,IAAMjhD,EAAS,wBAG5BrhB,EAAI,EAAGo3C,EAAO3hB,EAAM/0B,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAC9CgmB,EAAOyP,EAAMz1B,GACb,MAAMsiE,EAAat8C,GAAQzgB,KAAKogE,eAAe3/C,EAAKuxB,cAAc+qB,WAC9DA,GACFA,EAAWjhD,EAAS,cAAc2E,EAAK+I,QAAS/I,EAAKuxB,aAAcvxB,EAAKhO,MAE5E,CACF,CAMAshF,iBAAAA,GACE,OAAO/zF,KAAKm4D,SAAW,EACzB,CAMA67B,iBAAAA,CAAkBC,GAChB,MAAMC,EAAal0F,KAAKm4D,SAAW,GAC7BtX,EAASozC,EAAev1E,KAAI/lB,IAA2B,IAA1B,aAACq5C,EAAY,MAAEv/B,GAAM9Z,EACtD,MAAMiqB,EAAO5iB,KAAKogE,eAAepuB,GACjC,IAAKpvB,EACH,MAAM,IAAI7mB,MAAM,6BAA+Bi2C,GAGjD,MAAO,CACLA,eACAxoB,QAAS5G,EAAKzjB,KAAKsT,GACnBA,QACD,KAEci/B,EAAemP,EAAQqzC,KAGtCl0F,KAAKm4D,QAAUtX,EAEf7gD,KAAKqvF,WAAa,KAClBrvF,KAAKiyF,mBAAmBpxC,EAAQqzC,GAEpC,CAWA3T,aAAAA,CAAcwJ,EAAM97E,EAAMuQ,GACxB,OAAOxe,KAAKwvF,SAAS1F,OAAO9pF,KAAM+pF,EAAM97E,EAAMuQ,EAChD,CAOA2gD,eAAAA,CAAgBg1B,GACd,OAA6E,IAAtEn0F,KAAKwvF,SAASppB,OAAO5nD,QAAO8S,GAAKA,EAAE44D,OAAOlyE,KAAOm8E,IAAUh5F,MACpE,CAKA82F,kBAAAA,CAAmBpxC,EAAQqzC,EAAYE,GACrC,MAAMC,EAAer0F,KAAKioB,QAAQs2B,MAC5BsyB,EAAOA,CAAClsE,EAAG/F,IAAM+F,EAAE6Z,QAAO5Z,IAAMhG,EAAEisF,MAAKhmF,GAAKD,EAAEotC,eAAiBntC,EAAEmtC,cAAgBptC,EAAE6N,QAAU5N,EAAE4N,UAC/F6hF,EAAczjB,EAAKqjB,EAAYrzC,GAC/B0zC,EAAYH,EAASvzC,EAASgwB,EAAKhwB,EAAQqzC,GAE7CI,EAAYn5F,QACd6E,KAAK8zF,iBAAiBQ,EAAaD,EAAa59F,MAAM,GAGpD89F,EAAUp5F,QAAUk5F,EAAa59F,MACnCuJ,KAAK8zF,iBAAiBS,EAAWF,EAAa59F,MAAM,EAExD,CAKAu7F,aAAAA,CAAchuF,EAAGowF,GACf,MAAMnmF,EAAO,CACXmjD,MAAOptD,EACPowF,SACAjK,YAAY,EACZqK,YAAax0F,KAAK0xE,cAAc1tE,IAE5BywF,EAAevK,IAAYA,EAAOjiE,QAAQ9X,QAAUnQ,KAAKioB,QAAQ9X,QAAQpK,SAAS/B,EAAEs1E,OAAOr6E,MAEjG,IAA6D,IAAzDe,KAAKugF,cAAc,cAAetyE,EAAMwmF,GAC1C,OAGF,MAAMz7C,EAAUh5C,KAAK00F,aAAa1wF,EAAGowF,EAAQnmF,EAAKumF,aASlD,OAPAvmF,EAAKk8E,YAAa,EAClBnqF,KAAKugF,cAAc,aAActyE,EAAMwmF,IAEnCz7C,GAAW/qC,EAAK+qC,UAClBh5C,KAAKgjB,SAGAhjB,IACT,CAUA00F,YAAAA,CAAa1wF,EAAGowF,EAAQI,GACtB,MAAOr8B,QAAS+7B,EAAa,GAAE,QAAEjsE,GAAWjoB,KAetCyxE,EAAmB2iB,EACnBvzC,EAAS7gD,KAAK20F,mBAAmB3wF,EAAGkwF,EAAYM,EAAa/iB,GAC7DmjB,E7CvzBH,SAAuB5wF,GAC5B,MAAkB,YAAXA,EAAE/E,MAAiC,UAAX+E,EAAE/E,MAA+B,gBAAX+E,EAAE/E,IACzD,C6CqzBoB41F,CAAc7wF,GACxB8wF,EAxnCV,SAA4B9wF,EAAG8wF,EAAWN,EAAaI,GACrD,OAAKJ,GAA0B,aAAXxwF,EAAE/E,KAGlB21F,EACKE,EAEF9wF,EALE,IAMX,CAgnCsB+wF,CAAmB/wF,EAAGhE,KAAKqvF,WAAYmF,EAAaI,GAElEJ,IAGFx0F,KAAKqvF,WAAa,KAGlBrnE,EAAaC,EAAQg3B,QAAS,CAACj7C,EAAG68C,EAAQ7gD,MAAOA,MAE7C40F,GACF5sE,EAAaC,EAAQi3B,QAAS,CAACl7C,EAAG68C,EAAQ7gD,MAAOA,OAIrD,MAAMg5C,GAAWtH,EAAemP,EAAQqzC,GAQxC,OAPIl7C,GAAWo7C,KACbp0F,KAAKm4D,QAAUtX,EACf7gD,KAAKiyF,mBAAmBpxC,EAAQqzC,EAAYE,IAG9Cp0F,KAAKqvF,WAAayF,EAEX97C,CACT,CAUA27C,kBAAAA,CAAmB3wF,EAAGkwF,EAAYM,EAAa/iB,GAC7C,GAAe,aAAXztE,EAAE/E,KACJ,MAAO,GAGT,IAAKu1F,EAEH,OAAON,EAGT,MAAMG,EAAer0F,KAAKioB,QAAQs2B,MAClC,OAAOv+C,KAAKkzF,0BAA0BlvF,EAAGqwF,EAAa59F,KAAM49F,EAAc5iB,EAC5E,EAIF,SAASod,KACP,OAAOt9C,EAAKpQ,GAAMotD,WAAY5xC,GAAUA,EAAM6yC,SAASpF,cACzD,CEzuCA,SAAS4K,GAAkBvvC,EAAiBwlB,EAAqBC,EAAqB+pB,GACpF,MAAMriD,EAPCuW,GAOmB1D,EAAIx9B,QAAQitE,aAPN,CAAC,aAAc,WAAY,aAAc,aAQzE,MAAMC,GAAiBjqB,EAAcD,GAAe,EAC9CmqB,EAAa5jG,KAAKsR,IAAIqyF,EAAeF,EAAahqB,EAAc,GAShEoqB,EAAqB10F,IACzB,MAAM20F,GAAiBpqB,EAAc15E,KAAKsR,IAAIqyF,EAAex0F,IAAQs0F,EAAa,EAClF,OAAO/+C,GAAYv1C,EAAK,EAAGnP,KAAKsR,IAAIqyF,EAAeG,GAAA,EAGrD,MAAO,CACLC,WAAYF,EAAkBziD,EAAE2iD,YAChCC,SAAUH,EAAkBziD,EAAE4iD,UAC9BC,WAAYv/C,GAAYtD,EAAE6iD,WAAY,EAAGL,GACzCM,SAAUx/C,GAAYtD,EAAE8iD,SAAU,EAAGN,GAEzC,CAKA,SAASO,GAAWxiG,EAAWyiG,EAAehxF,EAAWC,GACvD,MAAO,CACLD,EAAGA,EAAIzR,EAAI3B,KAAK4oD,IAAIw7C,GACpB/wF,EAAGA,EAAI1R,EAAI3B,KAAK2nD,IAAIy8C,GAExB,CAiBA,SAASC,GACPp3C,EACAj1B,EACA9nB,EACA+pE,EACAvvE,EACA6zE,GAEA,MAAM,EAACnrE,EAAA,EAAGC,EAAGsnE,WAAYlwE,EAAK,YAAE65F,EAAa7qB,YAAa8qB,GAAUvsE,EAE9D0hD,EAAc15E,KAAK+T,IAAIikB,EAAQ0hD,YAAcO,EAAU/pE,EAASo0F,EAAa,GAC7E7qB,EAAc8qB,EAAS,EAAIA,EAAStqB,EAAU/pE,EAASo0F,EAAc,EAE3E,IAAIE,EAAgB,EACpB,MAAMvzD,EAAQvmC,EAAMD,EAEpB,GAAIwvE,EAAS,CAIX,MAEMwqB,IAFuBF,EAAS,EAAIA,EAAStqB,EAAU,IAChCP,EAAc,EAAIA,EAAcO,EAAU,IACI,EAE3EuqB,GAAiBvzD,GAD4B,IAAvBwzD,EAA2BxzD,EAASwzD,GAAuBA,EAAqBxqB,GAAWhpC,IACvE,EAG5C,MACMyzD,GAAezzD,EADRjxC,KAAK+T,IAAI,KAAOk9B,EAAQyoC,EAAcxpE,EAASjQ,IAAMy5E,GAC7B,EAC/BiB,EAAalwE,EAAQi6F,EAAcF,EACnC5pB,EAAWlwE,EAAMg6F,EAAcF,GAC/B,WAACT,EAAA,SAAYC,EAAA,WAAUC,EAAU,SAAEC,GAAYV,GAAkBxrE,EAASyhD,EAAaC,EAAakB,EAAWD,GAE/GgqB,EAA2BjrB,EAAcqqB,EACzCa,EAAyBlrB,EAAcsqB,EACvCa,EAA0BlqB,EAAaopB,EAAaY,EACpDG,EAAwBlqB,EAAWopB,EAAWY,EAE9CG,EAA2BtrB,EAAcwqB,EACzCe,EAAyBvrB,EAAcyqB,EACvCe,EAA0BtqB,EAAaspB,EAAac,EACpDG,EAAwBtqB,EAAWspB,EAAWc,EAIpD,GAFA/3C,EAAI8G,YAEAwqB,EAAU,CAEZ,MAAM4mB,GAAyBN,EAA0BC,GAAyB,EAKlF,GAJA73C,EAAIgH,IAAI7gD,EAAGC,EAAGqmE,EAAamrB,EAAyBM,GACpDl4C,EAAIgH,IAAI7gD,EAAGC,EAAGqmE,EAAayrB,EAAuBL,GAG9Cd,EAAW,EAAG,CAChB,MAAMoB,EAAUjB,GAAWS,EAAwBE,EAAuB1xF,EAAGC,GAC7E45C,EAAIgH,IAAImxC,EAAQhyF,EAAGgyF,EAAQ/xF,EAAG2wF,EAAUc,EAAuBlqB,EAAWz4B,IAI5E,MAAMkjD,EAAKlB,GAAWa,EAAwBpqB,EAAUxnE,EAAGC,GAI3D,GAHA45C,EAAImH,OAAOixC,EAAGjyF,EAAGiyF,EAAGhyF,GAGhB6wF,EAAW,EAAG,CAChB,MAAMkB,EAAUjB,GAAWa,EAAwBE,EAAuB9xF,EAAGC,GAC7E45C,EAAIgH,IAAImxC,EAAQhyF,EAAGgyF,EAAQ/xF,EAAG6wF,EAAUtpB,EAAWz4B,GAAS+iD,EAAwBllG,KAAKC,IAI3F,MAAMqlG,GAA0B1qB,EAAYspB,EAAWzqB,GAAiBkB,EAAcspB,EAAaxqB,IAAiB,EAKpH,GAJAxsB,EAAIgH,IAAI7gD,EAAGC,EAAGomE,EAAamB,EAAYspB,EAAWzqB,EAAc6rB,GAAuB,GACvFr4C,EAAIgH,IAAI7gD,EAAGC,EAAGomE,EAAa6rB,EAAuB3qB,EAAcspB,EAAaxqB,GAAc,GAGvFwqB,EAAa,EAAG,CAClB,MAAMmB,EAAUjB,GAAWY,EAA0BE,EAAyB7xF,EAAGC,GACjF45C,EAAIgH,IAAImxC,EAAQhyF,EAAGgyF,EAAQ/xF,EAAG4wF,EAAYgB,EAA0BjlG,KAAKC,GAAI06E,EAAax4B,IAI5F,MAAMojD,EAAKpB,GAAWQ,EAA0BhqB,EAAYvnE,EAAGC,GAI/D,GAHA45C,EAAImH,OAAOmxC,EAAGnyF,EAAGmyF,EAAGlyF,GAGhB0wF,EAAa,EAAG,CAClB,MAAMqB,EAAUjB,GAAWQ,EAA0BE,EAAyBzxF,EAAGC,GACjF45C,EAAIgH,IAAImxC,EAAQhyF,EAAGgyF,EAAQ/xF,EAAG0wF,EAAYppB,EAAax4B,GAAS0iD,QAE7D,CACL53C,EAAIkH,OAAO/gD,EAAGC,GAEd,MAAMmyF,EAAcxlG,KAAK4oD,IAAIi8C,GAA2BnrB,EAActmE,EAChEqyF,EAAczlG,KAAK2nD,IAAIk9C,GAA2BnrB,EAAcrmE,EACtE45C,EAAImH,OAAOoxC,EAAaC,GAExB,MAAMC,EAAY1lG,KAAK4oD,IAAIk8C,GAAyBprB,EAActmE,EAC5DuyF,EAAY3lG,KAAK2nD,IAAIm9C,GAAyBprB,EAAcrmE,EAClE45C,EAAImH,OAAOsxC,EAAWC,GAGxB14C,EAAIiH,WACN,CAyBA,SAASggC,GACPjnC,EACAj1B,EACA9nB,EACA+pE,EACAsE,GAEA,MAAM,YAACqnB,EAAA,WAAajrB,EAAA,cAAY56E,EAAa,QAAE02B,GAAWuB,GACpD,YAACu8B,EAAA,gBAAamR,EAAA,WAAiBF,EAAU,iBAAEC,GAAoBhvC,EAC/DovE,EAAgC,UAAxBpvE,EAAQ4lD,YAEtB,IAAK9nB,EACH,OAGFtH,EAAI+mC,YAAYxuB,GAAc,IAC9BvY,EAAIgnC,eAAiBxuB,EAEjBogC,GACF54C,EAAIiD,UAA0B,EAAdqE,EAChBtH,EAAI64C,SAAWpgC,GAAmB,UAElCzY,EAAIiD,UAAYqE,EAChBtH,EAAI64C,SAAWpgC,GAAmB,SAGpC,IAAIkV,EAAW5iD,EAAQ4iD,SACvB,GAAIgrB,EAAa,CACfvB,GAAQp3C,EAAKj1B,EAAS9nB,EAAQ+pE,EAASW,EAAU2D,GACjD,IAAK,IAAIt1E,EAAI,EAAGA,EAAI28F,IAAe38F,EACjCgkD,EAAItqD,SAEDoa,MAAMhd,KACT66E,EAAWD,GAAc56E,EAAgB+hD,IAAOA,KAIhD+jD,GA7ON,SAAiB54C,EAA+Bj1B,EAAqB4iD,GACnE,MAAM,WAACD,EAAA,YAAY2pB,EAAA,EAAalxF,EAAA,EAAGC,EAAA,YAAGqmE,EAAA,YAAaD,GAAezhD,EAClE,IAAI+tE,EAAczB,EAAc5qB,EAIhCzsB,EAAI8G,YACJ9G,EAAIgH,IAAI7gD,EAAGC,EAAGqmE,EAAaiB,EAAaorB,EAAanrB,EAAWmrB,GAC5DtsB,EAAc6qB,GAChByB,EAAczB,EAAc7qB,EAC5BxsB,EAAIgH,IAAI7gD,EAAGC,EAAGomE,EAAamB,EAAWmrB,EAAaprB,EAAaorB,GAAa,IAE7E94C,EAAIgH,IAAI7gD,EAAGC,EAAGixF,EAAa1pB,EAAWz4B,GAASw4B,EAAax4B,IAE9D8K,EAAIiH,YACJjH,EAAI8C,MACN,CA8NIi2C,CAAQ/4C,EAAKj1B,EAAS4iD,GAGnBgrB,IACHvB,GAAQp3C,EAAKj1B,EAAS9nB,EAAQ+pE,EAASW,EAAU2D,GACjDtxB,EAAItqD,SAER,EFwgCAwpB,EAAAA,EAAAA,GA5oCMwjB,GAAA,WAEckf,KAAS1iC,EAAAA,EAAAA,GAFvBwjB,GAAA,YAGeotD,KAAU5wE,EAAAA,EAAAA,GAHzBwjB,GAAA,YAIeqc,KAAU7/B,EAAAA,EAAAA,GAJzBwjB,GAAA,WAKcovC,KAAS5yD,EAAAA,EAAAA,GALvBwjB,GAAA,oBAMqBxjB,EAAAA,EAAAA,GANrBwjB,GAAA,WAOcqtD,IEuIL,MAAMiJ,WAAmBnd,GAmCtCxuE,WAAAA,CAAY0tD,GACVztD,SAAK4R,EAAAA,EAAAA,GAAC,KAAD,yBAAAA,EAAAA,EAAAA,GAAC,KAAD,oBAAAA,EAAAA,EAAAA,GAAC,KAAD,uBAAAA,EAAAA,EAAAA,GAAC,KAAD,uBAAAA,EAAAA,EAAAA,GAAC,KAAD,uBAAAA,EAAAA,EAAAA,GAAC,KAAD,uBAAAA,EAAAA,EAAAA,GAAC,KAAD,qBAEL3d,KAAKioB,aAAUtuB,EACfqG,KAAKzO,mBAAgBoI,EACrBqG,KAAKmsE,gBAAaxyE,EAClBqG,KAAKosE,cAAWzyE,EAChBqG,KAAKirE,iBAActxE,EACnBqG,KAAKkrE,iBAAcvxE,EACnBqG,KAAK81F,YAAc,EACnB91F,KAAKo3F,YAAc,EAEf59B,GACFv8D,OAAO4hB,OAAO7e,KAAMw5D,EAExB,CAEAmY,OAAAA,CAAQ+lB,EAAgBC,EAAgBlmB,GACtC,MAAMxrB,EAAQjmD,KAAKsyE,SAAS,CAAC,IAAK,KAAMb,IAClC,MAACr8B,EAAK,SAAEE,GAAYT,GAAkBoR,EAAO,CAACrhD,EAAG8yF,EAAQ7yF,EAAG8yF,KAC5D,WAACxrB,EAAA,SAAYC,EAAA,YAAUnB,EAAW,YAAEC,EAAW,cAAE35E,GAAiByO,KAAKsyE,SAAS,CACpF,aACA,WACA,cACA,cACA,iBACCb,GACGmmB,GAAW53F,KAAKioB,QAAQwjD,QAAUzrE,KAAKioB,QAAQ89B,aAAe,EAE9D8xC,EADiB5mD,EAAe1/C,EAAe66E,EAAWD,IACxB74B,IAAOsC,GAAcR,EAAO+2B,EAAYC,GAC1E0rB,EAAe3hD,GAAWb,EAAU21B,EAAc2sB,EAAS1sB,EAAc0sB,GAE/E,OAAQC,GAAiBC,CAC3B,CAEA1lB,cAAAA,CAAeX,GACb,MAAM,EAAC7sE,EAAC,EAAEC,EAAC,WAAEsnE,EAAA,SAAYC,EAAA,YAAUnB,EAAA,YAAaC,GAAelrE,KAAKsyE,SAAS,CAC3E,IACA,IACA,aACA,WACA,cACA,eACCb,IACG,OAAC/vE,EAAA,QAAQ+pE,GAAWzrE,KAAKioB,QACzB8vE,GAAa5rB,EAAaC,GAAY,EACtC4rB,GAAc/sB,EAAcC,EAAcO,EAAU/pE,GAAU,EACpE,MAAO,CACLkD,EAAGA,EAAIpT,KAAK4oD,IAAI29C,GAAaC,EAC7BnzF,EAAGA,EAAIrT,KAAK2nD,IAAI4+C,GAAaC,EAEjC,CAEAzd,eAAAA,CAAgB9I,GACd,OAAOzxE,KAAKoyE,eAAeX,EAC7B,CAEAvZ,IAAAA,CAAKzZ,GACH,MAAM,QAACx2B,EAAO,cAAE12B,GAAiByO,KAC3B0B,GAAUumB,EAAQvmB,QAAU,GAAK,EACjC+pE,GAAWxjD,EAAQwjD,SAAW,GAAK,EACnCsE,EAAW9nD,EAAQ8nD,SAIzB,GAHA/vE,KAAK81F,YAAuC,UAAxB7tE,EAAQ4lD,YAA2B,IAAO,EAC9D7tE,KAAKo3F,YAAc7lG,EAAgB+hD,GAAM9hD,KAAKib,MAAMlb,EAAgB+hD,IAAO,EAErD,IAAlB/hD,GAAuByO,KAAKirE,YAAc,GAAKjrE,KAAKkrE,YAAc,EACpE,OAGFzsB,EAAIkF,OAEJ,MAAMo0C,GAAa/3F,KAAKmsE,WAAansE,KAAKosE,UAAY,EACtD3tB,EAAI4G,UAAU7zD,KAAK4oD,IAAI29C,GAAar2F,EAAQlQ,KAAK2nD,IAAI4+C,GAAar2F,GAClE,MACMu2F,EAAev2F,GADT,EAAIlQ,KAAK2nD,IAAI3nD,KAAKsR,IAAIrR,GAAIF,GAAiB,KAGvDktD,EAAIgJ,UAAYx/B,EAAQ3wB,gBACxBmnD,EAAI+I,YAAcv/B,EAAQ61B,YA9L9B,SACEW,EACAj1B,EACA9nB,EACA+pE,EACAsE,GAEA,MAAM,YAACqnB,EAAW,WAAEjrB,EAAA,cAAY56E,GAAiBi4B,EACjD,IAAI4iD,EAAW5iD,EAAQ4iD,SACvB,GAAIgrB,EAAa,CACfvB,GAAQp3C,EAAKj1B,EAAS9nB,EAAQ+pE,EAASW,EAAU2D,GACjD,IAAK,IAAIt1E,EAAI,EAAGA,EAAI28F,IAAe38F,EACjCgkD,EAAIrrD,OAEDmb,MAAMhd,KACT66E,EAAWD,GAAc56E,EAAgB+hD,IAAOA,KAGpDuiD,GAAQp3C,EAAKj1B,EAAS9nB,EAAQ+pE,EAASW,EAAU2D,GACjDtxB,EAAIrrD,MAEN,CA2KI8kG,CAAQz5C,EAAKz+C,KAAMi4F,EAAcxsB,EAASsE,GAC1C2V,GAAWjnC,EAAKz+C,KAAMi4F,EAAcxsB,EAASsE,GAE7CtxB,EAAIsF,SACN,ECjXF,SAASo0C,GAAS15C,EAAKx2B,GAA0B,IAAjBt3B,EAAA+O,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAQuoB,EACtCw2B,EAAI25C,QAAUnnD,EAAetgD,EAAMomE,eAAgB9uC,EAAQ8uC,gBAC3DtY,EAAI+mC,YAAYv0C,EAAetgD,EAAMqmE,WAAY/uC,EAAQ+uC,aACzDvY,EAAIgnC,eAAiBx0C,EAAetgD,EAAMsmE,iBAAkBhvC,EAAQgvC,kBACpExY,EAAI64C,SAAWrmD,EAAetgD,EAAMumE,gBAAiBjvC,EAAQivC,iBAC7DzY,EAAIiD,UAAYzQ,EAAetgD,EAAMo1D,YAAa99B,EAAQ89B,aAC1DtH,EAAI+I,YAAcvW,EAAetgD,EAAMmtD,YAAa71B,EAAQ61B,YAC9D,CAEA,SAAS8H,GAAOnH,EAAK6H,EAAU5gD,GAC7B+4C,EAAImH,OAAOlgD,EAAOd,EAAGc,EAAOb,EAC9B,CAiBA,SAASwzF,GAASzgD,EAAQyd,GAAsB,IAAb+d,EAAS1zE,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,MAC1C,MAAMiR,EAAQinC,EAAOz8C,QACdc,MAAOq8F,EAAc,EAAGp8F,IAAKq8F,EAAY5nF,EAAQ,GAAKyiE,GACtDn3E,MAAOu8F,EAAct8F,IAAKu8F,GAAcpjC,EACzCp5D,EAAQzK,KAAK+T,IAAI+yF,EAAaE,GAC9Bt8F,EAAM1K,KAAKsR,IAAIy1F,EAAWE,GAC1BC,EAAUJ,EAAcE,GAAgBD,EAAYC,GAAgBF,EAAcG,GAAcF,EAAYE,EAElH,MAAO,CACL9nF,QACA1U,QACAwc,KAAM48C,EAAQ58C,KACdo5B,KAAM31C,EAAMD,IAAUy8F,EAAU/nF,EAAQzU,EAAMD,EAAQC,EAAMD,EAEhE,CAiBA,SAAS08F,GAAYl6C,EAAKsI,EAAMsO,EAAS+d,GACvC,MAAM,OAACx7B,EAAA,QAAQ3vB,GAAW8+B,GACpB,MAACp2C,EAAA,MAAO1U,EAAA,KAAOwc,EAAA,KAAMo5B,GAAQwmD,GAASzgD,EAAQyd,EAAS+d,GACvDwlB,EA9CR,SAAuB3wE,GACrB,OAAIA,EAAQ4wE,QACHxyC,GAGLp+B,EAAQ4nC,SAA8C,aAAnC5nC,EAAQ2nC,uBACtBpJ,GAGFZ,EACT,CAoCqBkzC,CAAc7wE,GAEjC,IACIxtB,EAAGwrD,EAAOp8B,GADV,KAAC27C,GAAO,EAAI,QAAE/zB,GAAW2hC,GAAU,CAAC,EAGxC,IAAK34E,EAAI,EAAGA,GAAKo3C,IAAQp3C,EACvBwrD,EAAQrO,GAAQ37C,GAASw1C,EAAUI,EAAOp3C,EAAIA,IAAMkW,GAEhDs1C,EAAMyH,OAGC8X,GACT/mB,EAAIkH,OAAOM,EAAMrhD,EAAGqhD,EAAMphD,GAC1B2gE,GAAO,GAEPozB,EAAWn6C,EAAK50B,EAAMo8B,EAAOxU,EAASxpB,EAAQ4wE,SAGhDhvE,EAAOo8B,GAQT,OALIxtC,IACFwtC,EAAQrO,GAAQ37C,GAASw1C,EAAUI,EAAO,IAAMlhC,GAChDioF,EAAWn6C,EAAK50B,EAAMo8B,EAAOxU,EAASxpB,EAAQ4wE,YAGvCpgF,CACX,CAiBA,SAASsgF,GAAgBt6C,EAAKsI,EAAMsO,EAAS+d,GAC3C,MAAMx7B,EAASmP,EAAKnP,QACd,MAACjnC,EAAK,MAAE1U,EAAK,KAAE41C,GAAQwmD,GAASzgD,EAAQyd,EAAS+d,IACjD,KAAC5N,GAAO,EAAI,QAAE/zB,GAAW2hC,GAAU,CAAC,EAC1C,IAEI34E,EAAGwrD,EAAO+yC,EAAOlsB,EAAMF,EAAMqsB,EAF7BC,EAAO,EACPC,EAAS,EAGb,MAAMC,EAAc3mF,IAAWxW,GAASw1C,EAAUI,EAAOp/B,EAAQA,IAAU9B,EACrE0oF,EAAQA,KACRvsB,IAASF,IAEXnuB,EAAImH,OAAOszC,EAAMtsB,GACjBnuB,EAAImH,OAAOszC,EAAMpsB,GAGjBruB,EAAImH,OAAOszC,EAAMD,KASrB,IALIzzB,IACFvf,EAAQrO,EAAOwhD,EAAW,IAC1B36C,EAAIkH,OAAOM,EAAMrhD,EAAGqhD,EAAMphD,IAGvBpK,EAAI,EAAGA,GAAKo3C,IAAQp3C,EAAG,CAG1B,GAFAwrD,EAAQrO,EAAOwhD,EAAW3+F,IAEtBwrD,EAAMyH,KAER,SAGF,MAAM9oD,EAAIqhD,EAAMrhD,EACVC,EAAIohD,EAAMphD,EACVy0F,EAAa,EAAJ10F,EAEX00F,IAAWN,GAETn0F,EAAIioE,EACNA,EAAOjoE,EACEA,EAAI+nE,IACbA,EAAO/nE,GAGTq0F,GAAQC,EAASD,EAAOt0F,KAAOu0F,IAE/BE,IAGA56C,EAAImH,OAAOhhD,EAAGC,GAEdm0F,EAAQM,EACRH,EAAS,EACTrsB,EAAOF,EAAO/nE,GAGhBo0F,EAAQp0F,CACV,CACAw0F,GACF,CAOA,SAASE,GAAkBxyC,GACzB,MAAM7jC,EAAO6jC,EAAK9+B,QACZ+uC,EAAa9zC,EAAK8zC,YAAc9zC,EAAK8zC,WAAW77D,OAEtD,OADqB4rD,EAAKynB,aAAeznB,EAAK8S,QAAU32C,EAAK2sC,SAA2C,aAAhC3sC,EAAK0sC,yBAA0C1sC,EAAK21E,UAAY7hC,EACnH+hC,GAAkBJ,EACzC,EDgMAh7E,EAAAA,EAAAA,GAvHqB85E,GAAmB,KAE1B,QAAM95E,EAAAA,EAAAA,GAFC85E,GAAmB,WAIpB,CAChB5pB,YAAa,SACb/vB,YAAa,OACbkZ,WAAY,GACZC,iBAAkB,EAClBC,qBAAiBv9D,EACjBu7F,aAAc,EACdnvC,YAAa,EACbrkD,OAAQ,EACR+pE,QAAS,EACTr2B,WAAOz7C,EACPo2E,UAAU,KACVpyD,EAAAA,EAAAA,GAhBiB85E,GAAmB,gBAkBf,CACrBngG,gBAAiB,qBACjBqmB,EAAAA,EAAAA,GApBiB85E,GAAmB,cAsBjB,CACnBn3C,aAAa,EACbE,WAAansD,GAAkB,eAATA,ICtD1B,MAAMmlG,GAA8B,oBAAXC,OAEzB,SAASvhC,GAAKzZ,EAAKsI,EAAM9qD,EAAO0U,GAC1B6oF,KAAczyC,EAAK9+B,QAAQotC,QA7BjC,SAA6B5W,EAAKsI,EAAM9qD,EAAO0U,GAC7C,IAAI+oF,EAAO3yC,EAAK4yC,MACXD,IACHA,EAAO3yC,EAAK4yC,MAAQ,IAAIF,OACpB1yC,EAAK2yC,KAAKA,EAAMz9F,EAAO0U,IACzB+oF,EAAKh0C,aAGTyyC,GAAS15C,EAAKsI,EAAK9+B,SACnBw2B,EAAItqD,OAAOulG,EACb,CAoBIE,CAAoBn7C,EAAKsI,EAAM9qD,EAAO0U,GAlB1C,SAA0B8tC,EAAKsI,EAAM9qD,EAAO0U,GAC1C,MAAM,SAAColD,EAAA,QAAU9tC,GAAW8+B,EACtB8yC,EAAgBN,GAAkBxyC,GAExC,IAAK,MAAMsO,KAAWU,EACpBoiC,GAAS15C,EAAKx2B,EAASotC,EAAQ1kE,OAC/B8tD,EAAI8G,YACAs0C,EAAcp7C,EAAKsI,EAAMsO,EAAS,CAACp5D,QAAOC,IAAKD,EAAQ0U,EAAQ,KACjE8tC,EAAIiH,YAENjH,EAAItqD,QAER,CAQI2lG,CAAiBr7C,EAAKsI,EAAM9qD,EAAO0U,EAEvC,CAEe,MAAMopF,WAAoBzf,GAoCvCxuE,WAAAA,CAAY0tD,GACVztD,QAEA/L,KAAKyuE,UAAW,EAChBzuE,KAAKioB,aAAUtuB,EACfqG,KAAKm2D,YAASx8D,EACdqG,KAAK65D,WAAQlgE,EACbqG,KAAKmwE,eAAYx2E,EACjBqG,KAAK25F,WAAQhgG,EACbqG,KAAKg6F,aAAUrgG,EACfqG,KAAKi6F,eAAYtgG,EACjBqG,KAAKwuE,YAAa,EAClBxuE,KAAKk6F,gBAAiB,EACtBl6F,KAAKs2D,mBAAgB38D,EAEjB6/D,GACFv8D,OAAO4hB,OAAO7e,KAAMw5D,EAExB,CAEAwV,mBAAAA,CAAoB3L,EAAWzkB,GAC7B,MAAM32B,EAAUjoB,KAAKioB,QACrB,IAAKA,EAAQ4nC,SAA8C,aAAnC5nC,EAAQ2nC,0BAA2C3nC,EAAQ4wE,UAAY74F,KAAKk6F,eAAgB,CAClH,MAAMzhF,EAAOwP,EAAQ0nC,SAAW3vD,KAAK65D,MAAQ75D,KAAKmwE,UAClD1gB,GAA2BzvD,KAAKg6F,QAAS/xE,EAASo7C,EAAW5qD,EAAMmmC,GACnE5+C,KAAKk6F,gBAAiB,EAE1B,CAEA,UAAItiD,CAAOA,GACT53C,KAAKg6F,QAAUpiD,SACR53C,KAAKi6F,iBACLj6F,KAAK25F,MACZ35F,KAAKk6F,gBAAiB,CACxB,CAEA,UAAItiD,GACF,OAAO53C,KAAKg6F,OACd,CAEA,YAAIjkC,GACF,OAAO/1D,KAAKi6F,YAAcj6F,KAAKi6F,U7BlF5B,SAA0BlzC,EAAMkP,GACrC,MAAMre,EAASmP,EAAKnP,OACd+X,EAAW5I,EAAK9+B,QAAQ0nC,SACxBh/C,EAAQinC,EAAOz8C,OAErB,IAAKwV,EACH,MAAO,GAGT,MAAM8H,IAASsuC,EAAK8S,OACd,MAAC59D,EAAA,IAAOC,GA3FhB,SAAyB07C,EAAQjnC,EAAO8H,EAAMk3C,GAC5C,IAAI1zD,EAAQ,EACRC,EAAMyU,EAAQ,EAElB,GAAI8H,IAASk3C,EAEX,KAAO1zD,EAAQ0U,IAAUinC,EAAO37C,GAAOyxD,MACrCzxD,IAKJ,KAAOA,EAAQ0U,GAASinC,EAAO37C,GAAOyxD,MACpCzxD,IAWF,IAPAA,GAAS0U,EAEL8H,IAEFvc,GAAOD,GAGFC,EAAMD,GAAS27C,EAAO17C,EAAMyU,GAAO+8C,MACxCxxD,IAMF,OAFAA,GAAOyU,EAEA,CAAC1U,QAAOC,MACjB,CA2DuBi+F,CAAgBviD,EAAQjnC,EAAO8H,EAAMk3C,GAE1D,OACSqG,GAAcjP,GADN,IAAb4I,EACyB,CAAC,CAAC1zD,QAAOC,MAAKuc,SArD7C,SAAuBm/B,EAAQ37C,EAAOsJ,EAAKkT,GACzC,MAAM9H,EAAQinC,EAAOz8C,OACf8yB,EAAS,GACf,IAEI/xB,EAFAqM,EAAOtM,EACP4tB,EAAO+tB,EAAO37C,GAGlB,IAAKC,EAAMD,EAAQ,EAAGC,GAAOqJ,IAAOrJ,EAAK,CACvC,MAAM08D,EAAMhhB,EAAO17C,EAAMyU,GACrBioD,EAAIlL,MAAQkL,EAAIE,KACbjvC,EAAK6jC,OACRj1C,GAAO,EACPwV,EAAOzyB,KAAK,CAACS,MAAOA,EAAQ0U,EAAOzU,KAAMA,EAAM,GAAKyU,EAAO8H,SAE3Dxc,EAAQsM,EAAOqwD,EAAIE,KAAO58D,EAAM,OAGlCqM,EAAOrM,EACH2tB,EAAK6jC,OACPzxD,EAAQC,IAGZ2tB,EAAO+uC,CACT,CAMA,OAJa,OAATrwD,GACF0lB,EAAOzyB,KAAK,CAACS,MAAOA,EAAQ0U,EAAOzU,IAAKqM,EAAOoI,EAAO8H,SAGjDwV,CACT,CA4B6BmsE,CAAcxiD,EAAQ37C,EAFrCC,EAAMD,EAAQC,EAAMyU,EAAQzU,IACjB6qD,EAAKopB,WAAuB,IAAVl0E,GAAeC,IAAQyU,EAAQ,GAJrBinC,EAAQqe,EAM7D,C6B+D+CokC,CAAiBr6F,KAAMA,KAAKioB,QAAQotC,SACjF,CAMA/sD,KAAAA,GACE,MAAMytD,EAAW/1D,KAAK+1D,SAChBne,EAAS53C,KAAK43C,OACpB,OAAOme,EAAS56D,QAAUy8C,EAAOme,EAAS,GAAG95D,MAC/C,CAMAsM,IAAAA,GACE,MAAMwtD,EAAW/1D,KAAK+1D,SAChBne,EAAS53C,KAAK43C,OACdjnC,EAAQolD,EAAS56D,OACvB,OAAOwV,GAASinC,EAAOme,EAASplD,EAAQ,GAAGzU,IAC7C,CASA4zC,WAAAA,CAAYmW,EAAOlqC,GACjB,MAAMkM,EAAUjoB,KAAKioB,QACfl3B,EAAQk1D,EAAMlqC,GACd67B,EAAS53C,KAAK43C,OACdme,EAAWD,GAAe91D,KAAM,CAAC+b,WAAU9f,MAAOlL,EAAOmL,IAAKnL,IAEpE,IAAKglE,EAAS56D,OACZ,OAGF,MAAM8yB,EAAS,GACTqsE,EAvKV,SAAiCryE,GAC/B,OAAIA,EAAQ4wE,QACH/kC,GAGL7rC,EAAQ4nC,SAA8C,aAAnC5nC,EAAQ2nC,uBACtBmE,GAGFF,EACT,CA6JyB0mC,CAAwBtyE,GAC7C,IAAIxtB,EAAGo3C,EACP,IAAKp3C,EAAI,EAAGo3C,EAAOkkB,EAAS56D,OAAQV,EAAIo3C,IAAQp3C,EAAG,CACjD,MAAM,MAACwB,EAAA,IAAOC,GAAO65D,EAASt7D,GACxB6oC,EAAKsU,EAAO37C,GACZsnC,EAAKqU,EAAO17C,GAClB,GAAIonC,IAAOC,EAAI,CACbtV,EAAOzyB,KAAK8nC,GACZ,SAEF,MACMk3D,EAAeF,EAAah3D,EAAIC,EAD5B/xC,KAAKub,KAAKhc,EAAQuyC,EAAGvnB,KAAcwnB,EAAGxnB,GAAYunB,EAAGvnB,KAClBkM,EAAQ4wE,SACrD2B,EAAaz+E,GAAYkqC,EAAMlqC,GAC/BkS,EAAOzyB,KAAKg/F,EACd,CACA,OAAyB,IAAlBvsE,EAAO9yB,OAAe8yB,EAAO,GAAKA,CAC3C,CAgBA0qE,WAAAA,CAAYl6C,EAAK4W,EAAS+d,GAExB,OADsBmmB,GAAkBv5F,KACjC65F,CAAcp7C,EAAKz+C,KAAMq1D,EAAS+d,EAC3C,CASAsmB,IAAAA,CAAKj7C,EAAKxiD,EAAO0U,GACf,MAAMolD,EAAW/1D,KAAK+1D,SAChB8jC,EAAgBN,GAAkBv5F,MACxC,IAAIyY,EAAOzY,KAAK65D,MAEhB59D,EAAQA,GAAS,EACjB0U,EAAQA,GAAU3Q,KAAK43C,OAAOz8C,OAASc,EAEvC,IAAK,MAAMo5D,KAAWU,EACpBt9C,GAAQohF,EAAcp7C,EAAKz+C,KAAMq1D,EAAS,CAACp5D,QAAOC,IAAKD,EAAQ0U,EAAQ,IAEzE,QAAS8H,CACX,CASAy/C,IAAAA,CAAKzZ,EAAK4kB,EAAWpnE,EAAO0U,GAC1B,MAAMsX,EAAUjoB,KAAKioB,SAAW,CAAC,GAClBjoB,KAAK43C,QAAU,IAEnBz8C,QAAU8sB,EAAQ89B,cAC3BtH,EAAIkF,OAEJuU,GAAKzZ,EAAKz+C,KAAM/D,EAAO0U,GAEvB8tC,EAAIsF,WAGF/jD,KAAKyuE,WAEPzuE,KAAKk6F,gBAAiB,EACtBl6F,KAAK25F,WAAQhgG,EAEjB,ECjbF,SAAS8gG,GAAQ/mE,EAAkB3uB,EAAamzC,EAAiBu5B,GAC/D,MAAMxpD,EAAUyL,EAAGzL,SACZ,CAACiwB,GAAOnnD,GAAS2iC,EAAG4+C,SAAS,CAACp6B,GAAOu5B,GAE5C,OAAQjgF,KAAKub,IAAIhI,EAAMhU,GAASk3B,EAAQk9B,OAASl9B,EAAQyyE,SAC3D,ED6aA/8E,EAAAA,EAAAA,GA1MqBo8E,GAAoB,KAE3B,SAAOp8E,EAAAA,EAAAA,GAFAo8E,GAAoB,WAOrB,CAChBhjC,eAAgB,OAChBC,WAAY,GACZC,iBAAkB,EAClBC,gBAAiB,QACjBnR,YAAa,EACb+J,iBAAiB,EACjBF,uBAAwB,UACxBx8D,MAAM,EACNu8D,UAAU,EACVkpC,SAAS,EACThpC,QAAS,KACTlyC,EAAAA,EAAAA,GAnBiBo8E,GAAoB,gBAwBhB,CACrBziG,gBAAiB,kBACjBwmD,YAAa,iBACbngC,EAAAA,EAAAA,GA3BiBo8E,GAAoB,cA8BlB,CACnBz5C,aAAa,EACbE,WAAansD,GAAkB,eAATA,GAAkC,SAATA,IC/PpC,MAAMsmG,WAAqBrgB,GA6BxCxuE,WAAAA,CAAY0tD,GACVztD,SAAK4R,EAAAA,EAAAA,GAAC,KAAD,kBAAAA,EAAAA,EAAAA,GAAC,KAAD,gBAAAA,EAAAA,EAAAA,GAAC,KAAD,eAEL3d,KAAKioB,aAAUtuB,EACfqG,KAAK8B,YAASnI,EACdqG,KAAK0tD,UAAO/zD,EACZqG,KAAK84D,UAAOn/D,EAER6/D,GACFv8D,OAAO4hB,OAAO7e,KAAMw5D,EAExB,CAEAmY,OAAAA,CAAQipB,EAAgBC,EAAgBppB,GACtC,MAAMxpD,EAAUjoB,KAAKioB,SACf,EAACrjB,EAAA,EAAGC,GAAK7E,KAAKsyE,SAAS,CAAC,IAAK,KAAMb,GACzC,OAASjgF,KAAKmX,IAAIiyF,EAASh2F,EAAG,GAAKpT,KAAKmX,IAAIkyF,EAASh2F,EAAG,GAAMrT,KAAKmX,IAAIsf,EAAQyyE,UAAYzyE,EAAQk9B,OAAQ,EAC7G,CAEA21C,QAAAA,CAASF,EAAgBnpB,GACvB,OAAOgpB,GAAQz6F,KAAM46F,EAAQ,IAAKnpB,EACpC,CAEAspB,QAAAA,CAASF,EAAgBppB,GACvB,OAAOgpB,GAAQz6F,KAAM66F,EAAQ,IAAKppB,EACpC,CAEAW,cAAAA,CAAeX,GACb,MAAM,EAAC7sE,EAAA,EAAGC,GAAK7E,KAAKsyE,SAAS,CAAC,IAAK,KAAMb,GACzC,MAAO,CAAC7sE,IAAGC,IACb,CAEAnU,IAAAA,CAAKu3B,GAEH,IAAIk9B,GADJl9B,EAAUA,GAAWjoB,KAAKioB,SAAW,CAAC,GACjBk9B,QAAU,EAC/BA,EAAS3zD,KAAK+T,IAAI4/C,EAAQA,GAAUl9B,EAAQ+yE,aAAe,GAE3D,OAAgC,GAAxB71C,GADYA,GAAUl9B,EAAQ89B,aAAe,GAEvD,CAEAmS,IAAAA,CAAKzZ,EAA+B18B,GAClC,MAAMkG,EAAUjoB,KAAKioB,QAEjBjoB,KAAK0tD,MAAQzlC,EAAQk9B,OAAS,KAAQa,GAAehmD,KAAM+hB,EAAM/hB,KAAKtP,KAAKu3B,GAAW,KAI1Fw2B,EAAI+I,YAAcv/B,EAAQ61B,YAC1BW,EAAIiD,UAAYz5B,EAAQ89B,YACxBtH,EAAIgJ,UAAYx/B,EAAQ3wB,gBACxBotD,GAAUjG,EAAKx2B,EAASjoB,KAAK4E,EAAG5E,KAAK6E,GACvC,CAEAwsE,QAAAA,GACE,MAAMppD,EAAUjoB,KAAKioB,SAAW,CAAC,EAEjC,OAAOA,EAAQk9B,OAASl9B,EAAQyyE,SAClC,EC3FF,SAASO,GAAa3iG,EAAKm5E,GACzB,MAAM,EAAC7sE,EAAC,EAAEC,EAAC,KAAEmd,EAAA,MAAMzvB,EAAA,OAAOC,GAAmC8F,EAAIg6E,SAAS,CAAC,IAAK,IAAK,OAAQ,QAAS,UAAWb,GAEjH,IAAIj6E,EAAME,EAAOD,EAAKE,EAAQujG,EAgB9B,OAdI5iG,EAAImvE,YACNyzB,EAAO1oG,EAAS,EAChBgF,EAAOhG,KAAKsR,IAAI8B,EAAGod,GACnBtqB,EAAQlG,KAAK+T,IAAIX,EAAGod,GACpBvqB,EAAMoN,EAAIq2F,EACVvjG,EAASkN,EAAIq2F,IAEbA,EAAO3oG,EAAQ,EACfiF,EAAOoN,EAAIs2F,EACXxjG,EAAQkN,EAAIs2F,EACZzjG,EAAMjG,KAAKsR,IAAI+B,EAAGmd,GAClBrqB,EAASnG,KAAK+T,IAAIV,EAAGmd,IAGhB,CAACxqB,OAAMC,MAAKC,QAAOC,SAC5B,CAEA,SAASwjG,GAAYztC,EAAM38D,EAAO+R,EAAKyC,GACrC,OAAOmoD,EAAO,EAAIxX,GAAYnlD,EAAO+R,EAAKyC,EAC5C,CAkCA,SAAS61F,GAAc9iG,GACrB,MAAMgpD,EAAS25C,GAAa3iG,GACtB/F,EAAQ+uD,EAAO5pD,MAAQ4pD,EAAO9pD,KAC9BhF,EAAS8uD,EAAO3pD,OAAS2pD,EAAO7pD,IAChCwqD,EApCR,SAA0B3pD,EAAK+iG,EAAMC,GACnC,MAAMvqG,EAAQuH,EAAI2vB,QAAQ89B,YACpB2H,EAAOp1D,EAAIkvE,cACX50B,EAAIyW,GAAOt4D,GAEjB,MAAO,CACLg/C,EAAGorD,GAAYztC,EAAKj2D,IAAKm7C,EAAEn7C,IAAK,EAAG6jG,GACnCnoG,EAAGgoG,GAAYztC,EAAKh2D,MAAOk7C,EAAEl7C,MAAO,EAAG2jG,GACvCz8F,EAAGu8F,GAAYztC,EAAK/1D,OAAQi7C,EAAEj7C,OAAQ,EAAG2jG,GACzCntE,EAAGgtE,GAAYztC,EAAKl2D,KAAMo7C,EAAEp7C,KAAM,EAAG6jG,GAEzC,CAyBiBE,CAAiBjjG,EAAK/F,EAAQ,EAAGC,EAAS,GACnD2yD,EAxBR,SAA2B7sD,EAAK+iG,EAAMC,GACpC,MAAM,mBAAC3zB,GAAsBrvE,EAAIg6E,SAAS,CAAC,uBACrCvhF,EAAQuH,EAAI2vB,QAAQitE,aACpBtiD,EAAI0W,GAAcv4D,GAClByqG,EAAOhqG,KAAKsR,IAAIu4F,EAAMC,GACtB5tC,EAAOp1D,EAAIkvE,cAIXi0B,EAAe9zB,GAAsB92B,EAAS9/C,GAEpD,MAAO,CACL03D,QAAS0yC,IAAaM,GAAgB/tC,EAAKj2D,KAAOi2D,EAAKl2D,KAAMo7C,EAAE6V,QAAS,EAAG+yC,GAC3E5yC,SAAUuyC,IAAaM,GAAgB/tC,EAAKj2D,KAAOi2D,EAAKh2D,MAAOk7C,EAAEgW,SAAU,EAAG4yC,GAC9E9yC,WAAYyyC,IAAaM,GAAgB/tC,EAAK/1D,QAAU+1D,EAAKl2D,KAAMo7C,EAAE8V,WAAY,EAAG8yC,GACpF7yC,YAAawyC,IAAaM,GAAgB/tC,EAAK/1D,QAAU+1D,EAAKh2D,MAAOk7C,EAAE+V,YAAa,EAAG6yC,GAE3F,CAOiBE,CAAkBpjG,EAAK/F,EAAQ,EAAGC,EAAS,GAE1D,MAAO,CACLmpG,MAAO,CACL/2F,EAAG08C,EAAO9pD,KACVqN,EAAGy8C,EAAO7pD,IACViZ,EAAGne,EACHivC,EAAGhvC,EACH2yD,UAEFkyC,MAAO,CACLzyF,EAAG08C,EAAO9pD,KAAOyqD,EAAO9zB,EACxBtpB,EAAGy8C,EAAO7pD,IAAMwqD,EAAOlS,EACvBr/B,EAAGne,EAAQ0vD,EAAO9zB,EAAI8zB,EAAO9uD,EAC7BquC,EAAGhvC,EAASyvD,EAAOlS,EAAIkS,EAAOrjD,EAC9BumD,OAAQ,CACNsD,QAASj3D,KAAK+T,IAAI,EAAG4/C,EAAOsD,QAAUj3D,KAAK+T,IAAI08C,EAAOlS,EAAGkS,EAAO9zB,IAChEy6B,SAAUp3D,KAAK+T,IAAI,EAAG4/C,EAAOyD,SAAWp3D,KAAK+T,IAAI08C,EAAOlS,EAAGkS,EAAO9uD,IAClEu1D,WAAYl3D,KAAK+T,IAAI,EAAG4/C,EAAOuD,WAAal3D,KAAK+T,IAAI08C,EAAOrjD,EAAGqjD,EAAO9zB,IACtEw6B,YAAan3D,KAAK+T,IAAI,EAAG4/C,EAAOwD,YAAcn3D,KAAK+T,IAAI08C,EAAOrjD,EAAGqjD,EAAO9uD,MAIhF,CAEA,SAASw+E,GAAQr5E,EAAKsM,EAAGC,EAAG4sE,GAC1B,MAAMmqB,EAAc,OAANh3F,EACRi3F,EAAc,OAANh3F,EAERy8C,EAAShpD,KADEsjG,GAASC,IACSZ,GAAa3iG,EAAKm5E,GAErD,OAAOnwB,IACHs6C,GAASzlD,GAAWvxC,EAAG08C,EAAO9pD,KAAM8pD,EAAO5pD,UAC3CmkG,GAAS1lD,GAAWtxC,EAAGy8C,EAAO7pD,IAAK6pD,EAAO3pD,QAChD,CAWA,SAASmkG,GAAkBr9C,EAAKqH,GAC9BrH,EAAIqH,KAAKA,EAAKlhD,EAAGkhD,EAAKjhD,EAAGihD,EAAKp1C,EAAGo1C,EAAKtkB,EACxC,CAEA,SAASu6D,GAAYj2C,EAAMk2C,GAAsB,IAAdC,EAAUv8F,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,MAC3C,MAAMkF,EAAIkhD,EAAKlhD,IAAMq3F,EAAQr3F,GAAKo3F,EAAS,EACrCn3F,EAAIihD,EAAKjhD,IAAMo3F,EAAQp3F,GAAKm3F,EAAS,EACrCtrF,GAAKo1C,EAAKlhD,EAAIkhD,EAAKp1C,IAAMurF,EAAQr3F,EAAIq3F,EAAQvrF,EAAIsrF,EAAS,GAAKp3F,EAC/D48B,GAAKskB,EAAKjhD,EAAIihD,EAAKtkB,IAAMy6D,EAAQp3F,EAAIo3F,EAAQz6D,EAAIw6D,EAAS,GAAKn3F,EACrE,MAAO,CACLD,EAAGkhD,EAAKlhD,EAAIA,EACZC,EAAGihD,EAAKjhD,EAAIA,EACZ6L,EAAGo1C,EAAKp1C,EAAIA,EACZ8wB,EAAGskB,EAAKtkB,EAAIA,EACZ2jB,OAAQW,EAAKX,OAEjB,EDhCAxnC,EAAAA,EAAAA,GAvFqBg9E,GAAqB,KAE5B,UAMZh9E,EAAAA,EAAAA,GARmBg9E,GAAqB,WAWtB,CAChB50C,YAAa,EACb20C,UAAW,EACX5sB,iBAAkB,EAClBktB,YAAa,EACb/1C,WAAY,SACZE,OAAQ,EACRD,SAAU,KAGZvnC,EAAAA,EAAAA,GArBmBg9E,GAAqB,gBAwBjB,CACrBrjG,gBAAiB,kBACjBwmD,YAAa,gBC+FF,MAAMo+C,WAAmB5hB,GAuBtCxuE,WAAAA,CAAY0tD,GACVztD,QAEA/L,KAAKioB,aAAUtuB,EACfqG,KAAKynE,gBAAa9tE,EAClBqG,KAAKgiB,UAAOroB,EACZqG,KAAKzN,WAAQoH,EACbqG,KAAKxN,YAASmH,EACdqG,KAAKioE,mBAAgBtuE,EAEjB6/D,GACFv8D,OAAO4hB,OAAO7e,KAAMw5D,EAExB,CAEAtB,IAAAA,CAAKzZ,GACH,MAAM,cAACwpB,EAAehgD,SAAS,YAAC61B,EAAA,gBAAaxmD,IAAoB0I,MAC3D,MAACq3F,EAAK,MAAEsE,GAASP,GAAcp7F,MAC/Bm8F,GApESh3C,EAoEew2C,EAAMx2C,QAnExBsD,SAAWtD,EAAOyD,UAAYzD,EAAOuD,YAAcvD,EAAOwD,YAmExBH,GAAqBszC,GApEvE,IAAmB32C,EAsEf1G,EAAIkF,OAEAg4C,EAAMjrF,IAAM2mF,EAAM3mF,GAAKirF,EAAMn6D,IAAM61D,EAAM71D,IAC3Cid,EAAI8G,YACJ42C,EAAY19C,EAAKs9C,GAAYJ,EAAO1zB,EAAeovB,IACnD54C,EAAI8C,OACJ46C,EAAY19C,EAAKs9C,GAAY1E,GAAQpvB,EAAe0zB,IACpDl9C,EAAIgJ,UAAY3J,EAChBW,EAAIrrD,KAAK,YAGXqrD,EAAI8G,YACJ42C,EAAY19C,EAAKs9C,GAAY1E,EAAOpvB,IACpCxpB,EAAIgJ,UAAYnwD,EAChBmnD,EAAIrrD,OAEJqrD,EAAIsF,SACN,CAEA4tB,OAAAA,CAAQipB,EAAQC,EAAQppB,GACtB,OAAOE,GAAQ3xE,KAAM46F,EAAQC,EAAQppB,EACvC,CAEAqpB,QAAAA,CAASF,EAAQnpB,GACf,OAAOE,GAAQ3xE,KAAM46F,EAAQ,KAAMnpB,EACrC,CAEAspB,QAAAA,CAASF,EAAQppB,GACf,OAAOE,GAAQ3xE,KAAM,KAAM66F,EAAQppB,EACrC,CAEAW,cAAAA,CAAeX,GACb,MAAM,EAAC7sE,EAAA,EAAGC,EAAA,KAAGmd,EAAI,WAAEylD,GAAuCznE,KAAKsyE,SAAS,CAAC,IAAK,IAAK,OAAQ,cAAeb,GAC1G,MAAO,CACL7sE,EAAG6iE,GAAc7iE,EAAIod,GAAQ,EAAIpd,EACjCC,EAAG4iE,EAAa5iE,GAAKA,EAAImd,GAAQ,EAErC,CAEAqvD,QAAAA,CAASn5B,GACP,MAAgB,MAATA,EAAel4C,KAAKzN,MAAQ,EAAIyN,KAAKxN,OAAS,CACvD,GACFmrB,EAAAA,EAAAA,GArFqBu+E,GAAmB,KAE1B,QAAMv+E,EAAAA,EAAAA,GAFCu+E,GAAmB,WAOpB,CAChB10B,cAAe,QACfzhB,YAAa,EACbmvC,aAAc,EACdjtB,cAAe,OACfhjB,gBAAYtrD,KACZgkB,EAAAA,EAAAA,GAbiBu+E,GAAmB,gBAkBf,CACrB5kG,gBAAiB,kBACjBwmD,YAAa,kHCnJjB,MAAMs+C,GAAgB,CACpB,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,sBAIIC,GAAoCD,GAAc19E,KAAIpuB,GAASA,EAAMkV,QAAQ,OAAQ,SAASA,QAAQ,IAAK,YAEjH,SAAS82F,GAAe7hG,GACtB,OAAO2hG,GAAc3hG,EAAI2hG,GAAcjhG,OACzC,CAEA,SAASohG,GAAmB9hG,GAC1B,OAAO4hG,GAAkB5hG,EAAI4hG,GAAkBlhG,OACjD,CAqBA,SAASqhG,GAAa7/C,GACpB,IAAIliD,EAAI,EAER,MAAO,CAAC4kE,EAAuBrtB,KAC7B,MAAM+qB,EAAapgB,EAAMyjB,eAAepuB,GAAc+qB,WAElDA,aAAsBiO,GACxBvwE,EAnBN,SAAiC4kE,EAAuB5kE,GAGtD,OAFA4kE,EAAQ/nE,gBAAkB+nE,EAAQlgE,KAAKuf,KAAI,IAAM49E,GAAe7hG,OAEzDA,CACT,CAeUgiG,CAAwBp9B,EAAS5kE,GAC5BsiE,aAAsBkS,GAC/Bx0E,EAfN,SAAkC4kE,EAAuB5kE,GAGvD,OAFA4kE,EAAQ/nE,gBAAkB+nE,EAAQlgE,KAAKuf,KAAI,IAAM69E,GAAmB9hG,OAE7DA,CACT,CAWUiiG,CAAyBr9B,EAAS5kE,GAC7BsiE,IACTtiE,EA9BN,SAAgC4kE,EAAuB5kE,GAIrD,OAHA4kE,EAAQvhB,YAAcw+C,GAAe7hG,GACrC4kE,EAAQ/nE,gBAAkBilG,GAAmB9hG,KAEpCA,CACX,CAyBUkiG,CAAuBt9B,EAAS5kE,IAG1C,CAEA,SAASmiG,GACPn/C,GAEA,IAAIn3B,EAEJ,IAAKA,KAAKm3B,EACR,GAAIA,EAAYn3B,GAAGw3B,aAAeL,EAAYn3B,GAAGhvB,gBAC/C,OAAO,EAIX,OAAO,CACT,CAQA,IAAAulG,GAAe,CACb7kF,GAAI,SAEJqoC,SAAU,CACR+6B,SAAS,EACT0hB,eAAe,GAGjB1mB,YAAAA,CAAaz5B,EAAcogD,EAAO90E,GAChC,IAAKA,EAAQmzD,QACX,OAGF,MACEj8E,MAAM,SAAC4+C,GACP91B,QAAS+0E,GACPrgD,EAAM+d,QACJ,SAACvc,GAAY6+C,EAEnB,IAAK/0E,EAAQ60E,gBAAkBF,GAA0B7+C,KAxB3DksC,EAwBiG+S,KAtB3E/S,EAAWnsC,aAAemsC,EAAW3yF,kBAsBwD6mD,GAAYy+C,GAA0Bz+C,IACrJ,OA1BN,IACE8rC,EA4BE,MAAMgT,EAAYT,GAAa7/C,GAE/BoB,EAAStzB,QAAQwyE,EACnB,GCwCF,SAASC,GAAsB79B,GAC7B,GAAIA,EAAQmP,WAAY,CACtB,MAAMrvE,EAAOkgE,EAAQjB,aACdiB,EAAQmP,kBACRnP,EAAQjB,MACfnhE,OAAOmH,eAAei7D,EAAS,OAAQ,CACrCpzD,cAAc,EACd5H,YAAY,EACZ2H,UAAU,EACVjb,MAAOoO,IAGb,CAEA,SAASg+F,GAAmBxgD,GAC1BA,EAAMx9C,KAAK4+C,SAAStzB,SAAS40C,IAC3B69B,GAAsB79B,EAAA,GAE1B,CAuBA,IAAA+9B,GAAe,CACbplF,GAAI,aAEJqoC,SAAU,CACRg9C,UAAW,UACXjiB,SAAS,GAGXkiB,qBAAsBA,CAAC3gD,EAAO1uC,EAAMga,KAClC,IAAKA,EAAQmzD,QAGX,YADA+hB,GAAmBxgD,GAKrB,MAAMi3B,EAAiBj3B,EAAMpqD,MAE7BoqD,EAAMx9C,KAAK4+C,SAAStzB,SAAQ,CAAC40C,EAASrtB,KACpC,MAAM,MAACosB,EAAA,UAAOxf,GAAaygB,EACrBz8C,EAAO+5B,EAAMyjB,eAAepuB,GAC5B7yC,EAAOi/D,GAASiB,EAAQlgE,KAE9B,GAAsD,MAAlD2P,GAAQ,CAAC8vC,EAAWjC,EAAM10B,QAAQ22B,YAEpC,OAGF,IAAKh8B,EAAKm6C,WAAW2B,mBAEnB,OAGF,MAAM6+B,EAAQ5gD,EAAM4C,OAAO38B,EAAK68C,SAChC,GAAmB,WAAf89B,EAAMt+F,MAAoC,SAAfs+F,EAAMt+F,KAEnC,OAGF,GAAI09C,EAAM10B,QAAQk3B,QAEhB,OAGF,IAAI,MAACljD,EAAK,MAAE0U,GAjElB,SAAmDiS,EAAMg1B,GACvD,MAAME,EAAaF,EAAOz8C,OAE1B,IACIwV,EADA1U,EAAQ,EAGZ,MAAM,OAAC+7C,GAAUp1B,GACX,IAAC9f,EAAG,IAAEyC,EAAG,WAAE4yC,EAAU,WAAEC,GAAcJ,EAAOK,gBAWlD,OATIF,IACFl8C,EAAQi6C,GAAYK,GAAaqB,EAAQI,EAAOE,KAAMp1C,GAAKF,GAAI,EAAGk1C,EAAa,IAG/EnnC,EADEynC,EACMlC,GAAYK,GAAaqB,EAAQI,EAAOE,KAAM3yC,GAAK5C,GAAK,EAAG1G,EAAO67C,GAAc77C,EAEhF67C,EAAa77C,EAGhB,CAACA,QAAO0U,QACjB,CA8C2B6sF,CAA0C56E,EAAMzjB,GAErE,GAAIwR,IADcsX,EAAQw1E,WAAa,EAAI7pB,GAIzC,YADAspB,GAAsB79B,GAuBxB,IAAIq+B,EACJ,OApBI9sD,EAAcwtB,KAIhBiB,EAAQjB,MAAQj/D,SACTkgE,EAAQlgE,KACflC,OAAOmH,eAAei7D,EAAS,OAAQ,CACrCpzD,cAAc,EACd5H,YAAY,EACZC,IAAK,WACH,OAAOtE,KAAKwuE,UACd,EACAxpE,IAAK,SAASyO,GACZzT,KAAKo+D,MAAQ3qD,CACf,KAMIwU,EAAQo1E,WAChB,IAAK,OACHK,EA5QR,SAAwBv+F,EAAMlD,EAAO0U,EAAOijE,EAAgB3rD,GAS1D,MAAM01E,EAAU11E,EAAQ01E,SAAW/pB,EAEnC,GAAI+pB,GAAWhtF,EACb,OAAOxR,EAAKrB,MAAM7B,EAAOA,EAAQ0U,GAGnC,MAAM+sF,EAAY,GAEZE,GAAejtF,EAAQ,IAAMgtF,EAAU,GAC7C,IAAIE,EAAe,EACnB,MAAMz0E,EAAWntB,EAAQ0U,EAAQ,EAEjC,IACIlW,EAAGqjG,EAAcC,EAASh8E,EAAMi8E,EADhCr5F,EAAI1I,EAKR,IAFAyhG,EAAUG,KAAkB1+F,EAAKwF,GAE5BlK,EAAI,EAAGA,EAAIkjG,EAAU,EAAGljG,IAAK,CAChC,IAEI+G,EAFA03F,EAAO,EACP+E,EAAO,EAIX,MAAMC,EAAgB1sG,KAAKib,OAAOhS,EAAI,GAAKmjG,GAAe,EAAI3hG,EACxDkiG,EAAc3sG,KAAKsR,IAAItR,KAAKib,OAAOhS,EAAI,GAAKmjG,GAAe,EAAGjtF,GAAS1U,EACvEmiG,EAAiBD,EAAcD,EAErC,IAAK18F,EAAI08F,EAAe18F,EAAI28F,EAAa38F,IACvC03F,GAAQ/5F,EAAKqC,GAAGoD,EAChBq5F,GAAQ9+F,EAAKqC,GAAGqD,EAGlBq0F,GAAQkF,EACRH,GAAQG,EAGR,MAAMC,EAAY7sG,KAAKib,MAAMhS,EAAImjG,GAAe,EAAI3hG,EAC9CqiG,EAAU9sG,KAAKsR,IAAItR,KAAKib,OAAOhS,EAAI,GAAKmjG,GAAe,EAAGjtF,GAAS1U,GAClE2I,EAAG25F,EAAS15F,EAAG25F,GAAWr/F,EAAKwF,GAStC,IAFAo5F,EAAUh8E,GAAQ,EAEbvgB,EAAI68F,EAAW78F,EAAI88F,EAAS98F,IAC/BugB,EAAO,GAAMvwB,KAAKub,KACfwxF,EAAUrF,IAAS/5F,EAAKqC,GAAGqD,EAAI25F,IAC/BD,EAAUp/F,EAAKqC,GAAGoD,IAAMq5F,EAAOO,IAG9Bz8E,EAAOg8E,IACTA,EAAUh8E,EACV+7E,EAAe3+F,EAAKqC,GACpBw8F,EAAQx8F,GAIZk8F,EAAUG,KAAkBC,EAC5Bn5F,EAAIq5F,CACN,CAKA,OAFAN,EAAUG,KAAkB1+F,EAAKiqB,GAE1Bs0E,CACT,CA+LoBe,CAAet/F,EAAMlD,EAAO0U,EAAOijE,EAAgB3rD,GAC/D,MACF,IAAK,UACHy1E,EAhMR,SAA0Bv+F,EAAMlD,EAAO0U,EAAOijE,GAC5C,IAEIn5E,EAAGwrD,EAAOrhD,EAAGC,EAAGm0F,EAAO0F,EAAUC,EAAU/0E,EAAYkjD,EAAMF,EAF7DssB,EAAO,EACPC,EAAS,EAEb,MAAMuE,EAAY,GACZt0E,EAAWntB,EAAQ0U,EAAQ,EAE3BiuF,EAAOz/F,EAAKlD,GAAO2I,EAEnBi6F,EADO1/F,EAAKiqB,GAAUxkB,EACVg6F,EAElB,IAAKnkG,EAAIwB,EAAOxB,EAAIwB,EAAQ0U,IAASlW,EAAG,CACtCwrD,EAAQ9mD,EAAK1E,GACbmK,GAAKqhD,EAAMrhD,EAAIg6F,GAAQC,EAAKjrB,EAC5B/uE,EAAIohD,EAAMphD,EACV,MAAMy0F,EAAa,EAAJ10F,EAEf,GAAI00F,IAAWN,EAETn0F,EAAIioE,GACNA,EAAOjoE,EACP65F,EAAWjkG,GACFoK,EAAI+nE,IACbA,EAAO/nE,EACP85F,EAAWlkG,GAIby+F,GAAQC,EAASD,EAAOjzC,EAAMrhD,KAAOu0F,MAChC,CAEL,MAAM2F,EAAYrkG,EAAI,EAEtB,IAAKm2C,EAAc8tD,KAAc9tD,EAAc+tD,GAAW,CAKxD,MAAMI,EAAqBvtG,KAAKsR,IAAI47F,EAAUC,GACxCK,EAAqBxtG,KAAK+T,IAAIm5F,EAAUC,GAE1CI,IAAuBn1E,GAAcm1E,IAAuBD,GAC9DpB,EAAUliG,KAAK,IACV2D,EAAK4/F,GACRn6F,EAAGs0F,IAGH8F,IAAuBp1E,GAAco1E,IAAuBF,GAC9DpB,EAAUliG,KAAK,IACV2D,EAAK6/F,GACRp6F,EAAGs0F,IAOLz+F,EAAI,GAAKqkG,IAAcl1E,GAEzB8zE,EAAUliG,KAAK2D,EAAK2/F,IAItBpB,EAAUliG,KAAKyqD,GACf+yC,EAAQM,EACRH,EAAS,EACTrsB,EAAOF,EAAO/nE,EACd65F,EAAWC,EAAW/0E,EAAanvB,EAEvC,CAEA,OAAOijG,CACT,CAwHoBuB,CAAiB9/F,EAAMlD,EAAO0U,EAAOijE,GACjD,MACF,QACE,MAAM,IAAI73E,MAAM,qCAAAjK,OAAqCm2B,EAAQo1E,UAAS,MAGxEh+B,EAAQmP,WAAakvB,CAAA,GACrB,EAGJpK,OAAAA,CAAQ32C,GACNwgD,GAAmBxgD,EACrB,GC3OK,SAASuiD,GAAWnjF,EAAUzT,EAAOC,EAAMkQ,GAChD,GAAIA,EACF,OAEF,IAAIxc,EAAQqM,EAAMyT,GACd7f,EAAMqM,EAAKwT,GAMf,MAJiB,UAAbA,IACF9f,EAAQ05C,GAAgB15C,GACxBC,EAAMy5C,GAAgBz5C,IAEjB,CAAC6f,WAAU9f,QAAOC,MAC3B,CAqBO,SAASijG,GAAgBljG,EAAOC,EAAK07C,GAC1C,KAAM17C,EAAMD,EAAOC,IAAO,CACxB,MAAM+pD,EAAQrO,EAAO17C,GACrB,IAAKqS,MAAM03C,EAAMrhD,KAAO2J,MAAM03C,EAAMphD,GAClC,KAEJ,CACA,OAAO3I,CACT,CAEA,SAASkjG,GAASz6F,EAAG/F,EAAGgxB,EAAMliB,GAC5B,OAAI/I,GAAK/F,EACA8O,EAAG/I,EAAEirB,GAAOhxB,EAAEgxB,IAEhBjrB,EAAIA,EAAEirB,GAAQhxB,EAAIA,EAAEgxB,GAAQ,CACrC,CCnFO,SAASyvE,GAAoBC,EAAUv4C,GAC5C,IAAInP,EAAS,GACTiiB,GAAQ,EAUZ,OARI36D,EAAQogG,IACVzlC,GAAQ,EAERjiB,EAAS0nD,GAET1nD,EDwCG,SAA6B0nD,EAAUv4C,GAC5C,MAAM,EAACniD,EAAI,KAAI,EAAEC,EAAI,MAAQy6F,GAAY,CAAC,EACpCC,EAAax4C,EAAKnP,OAClBA,EAAS,GAaf,OAZAmP,EAAKgP,SAAStrC,SAAQ1xB,IAAkB,IAAjB,MAACkD,EAAK,IAAEC,GAAInD,EACjCmD,EAAMijG,GAAgBljG,EAAOC,EAAKqjG,GAClC,MAAMj3F,EAAQi3F,EAAWtjG,GACnBsM,EAAOg3F,EAAWrjG,GACd,OAAN2I,GACF+yC,EAAOp8C,KAAK,CAACoJ,EAAG0D,EAAM1D,EAAGC,MACzB+yC,EAAOp8C,KAAK,CAACoJ,EAAG2D,EAAK3D,EAAGC,OACT,OAAND,IACTgzC,EAAOp8C,KAAK,CAACoJ,IAAGC,EAAGyD,EAAMzD,IACzB+yC,EAAOp8C,KAAK,CAACoJ,IAAGC,EAAG0D,EAAK1D,QAGrB+yC,CACT,CCzDa4nD,CAAoBF,EAAUv4C,GAGlCnP,EAAOz8C,OAAS,IAAI4+F,GAAY,CACrCniD,SACA3vB,QAAS,CAAC4nC,QAAS,GACnBgK,QACAsW,UAAWtW,IACR,IACP,CAEO,SAAS4lC,GAAiB3gF,GAC/B,OAAOA,IAA0B,IAAhBA,EAAO1rB,IAC1B,CC5BO,SAASssG,GAAentD,EAAS9/B,EAAOktF,GAE7C,IAAIvsG,EADWm/C,EAAQ9/B,GACLrf,KAClB,MAAMwsG,EAAU,CAACntF,GACjB,IAAI/M,EAEJ,IAAKi6F,EACH,OAAOvsG,EAGT,MAAgB,IAATA,IAA6C,IAA3BwsG,EAAQ5jG,QAAQ5I,IAAc,CACrD,IAAK09C,EAAS19C,GACZ,OAAOA,EAIT,GADAsS,EAAS6sC,EAAQn/C,IACZsS,EACH,OAAO,EAGT,GAAIA,EAAOu7C,QACT,OAAO7tD,EAGTwsG,EAAQpkG,KAAKpI,GACbA,EAAOsS,EAAOtS,IAChB,CAEA,OAAO,CACT,CAOO,SAASysG,GAAY94C,EAAMt0C,EAAO9B,GAEvC,MAAMvd,EAwER,SAAyB2zD,GACvB,MAAM9+B,EAAU8+B,EAAK9+B,QACf63E,EAAa73E,EAAQ70B,KAC3B,IAAIA,EAAO69C,EAAe6uD,GAAcA,EAAWp6F,OAAQo6F,QAE9CnmG,IAATvG,IACFA,IAAS60B,EAAQ3wB,iBAGnB,IAAa,IAATlE,GAA2B,OAATA,EACpB,OAAO,EAGT,IAAa,IAATA,EACF,MAAO,SAET,OAAOA,CACT,CAzFe2sG,CAAgBh5C,GAE7B,GAAIlW,EAASz9C,GACX,OAAOmb,MAAMnb,EAAKrC,QAAiBqC,EAGrC,IAAIsS,EAAS2rC,WAAWj+C,GAExB,OAAI09C,EAASprC,IAAWlU,KAAKib,MAAM/G,KAAYA,EAOjD,SAA2Bs6F,EAASvtF,EAAO/M,EAAQiL,GACjC,MAAZqvF,GAA+B,MAAZA,IACrBt6F,EAAS+M,EAAQ/M,GAGnB,GAAIA,IAAW+M,GAAS/M,EAAS,GAAKA,GAAUiL,EAC9C,OAAO,EAGT,OAAOjL,CACT,CAhBWu6F,CAAkB7sG,EAAK,GAAIqf,EAAO/M,EAAQiL,GAG5C,CAAC,SAAU,QAAS,MAAO,QAAS,SAAS3U,QAAQ5I,IAAS,GAAKA,CAC5E,CCHA,SAAS8sG,GAAetoD,EAAQuoD,EAAaC,GAC3C,MAAMC,EAAY,GAClB,IAAK,IAAI7+F,EAAI,EAAGA,EAAI4+F,EAAWjlG,OAAQqG,IAAK,CAC1C,MAAMulD,EAAOq5C,EAAW5+F,IAClB,MAAC8G,EAAK,KAAEC,EAAI,MAAE09C,GAASq6C,GAAUv5C,EAAMo5C,EAAa,KAE1D,MAAKl6C,GAAU39C,GAASC,GAGxB,GAAID,EAGF+3F,EAAU7vF,QAAQy1C,QAGlB,GADArO,EAAOp8C,KAAKyqD,IACP19C,EAEH,KAGN,CACAqvC,EAAOp8C,QAAQ6kG,EACjB,CAQA,SAASC,GAAUv5C,EAAMo5C,EAAapkF,GACpC,MAAMkqC,EAAQc,EAAKjX,YAAYqwD,EAAapkF,GAC5C,IAAKkqC,EACH,MAAO,CAAC,EAGV,MAAMs6C,EAAat6C,EAAMlqC,GACnBg6C,EAAWhP,EAAKgP,SAChBwpC,EAAax4C,EAAKnP,OACxB,IAAItvC,GAAQ,EACRC,GAAO,EACX,IAAK,IAAI9N,EAAI,EAAGA,EAAIs7D,EAAS56D,OAAQV,IAAK,CACxC,MAAM46D,EAAUU,EAASt7D,GACnB+lG,EAAajB,EAAWlqC,EAAQp5D,OAAO8f,GACvC0kF,EAAYlB,EAAWlqC,EAAQn5D,KAAK6f,GAC1C,GAAIo6B,GAAWoqD,EAAYC,EAAYC,GAAY,CACjDn4F,EAAQi4F,IAAeC,EACvBj4F,EAAOg4F,IAAeE,EACtB,MAEJ,CACA,MAAO,CAACn4F,QAAOC,OAAM09C,QACvB,CC1GO,MAAMy6C,GACX50F,WAAAA,CAAYoX,GACVljB,KAAK4E,EAAIse,EAAKte,EACd5E,KAAK6E,EAAIqe,EAAKre,EACd7E,KAAKmlD,OAASjiC,EAAKiiC,MACrB,CAEAwzC,WAAAA,CAAYl6C,EAAK6C,EAAQp+B,GACvB,MAAM,EAACte,EAAA,EAAGC,EAAA,OAAGsgD,GAAUnlD,KAGvB,OAFAshD,EAASA,GAAU,CAACrlD,MAAO,EAAGC,IAAKo3C,IACnCmL,EAAIgH,IAAI7gD,EAAGC,EAAGsgD,EAAQ7D,EAAOplD,IAAKolD,EAAOrlD,OAAO,IACxCinB,EAAKo+B,MACf,CAEAxR,WAAAA,CAAYmW,GACV,MAAM,EAACrhD,EAAA,EAAGC,EAAA,OAAGsgD,GAAUnlD,KACjBo1C,EAAQ6Q,EAAM7Q,MACpB,MAAO,CACLxwC,EAAGA,EAAIpT,KAAK4oD,IAAIhF,GAAS+P,EACzBtgD,EAAGA,EAAIrT,KAAK2nD,IAAI/D,GAAS+P,EACzB/P,QAEJ,ECbK,SAASsV,GAAW5rC,GACzB,MAAM,MAAC69B,EAAK,KAAEvpD,EAAA,KAAM2zD,GAAQjoC,EAE5B,GAAIgyB,EAAS19C,GACX,OAwBJ,SAAwBupD,EAAOlqC,GAC7B,MAAMmQ,EAAO+5B,EAAMyjB,eAAe3tD,GAC5BwuC,EAAUr+B,GAAQ+5B,EAAM4uB,iBAAiB94D,GAC/C,OAAOwuC,EAAUr+B,EAAKy8C,QAAU,IAClC,CA5BWshC,CAAehkD,EAAOvpD,GAG/B,GAAa,UAATA,EACF,OFNG,SAAyB0rB,GAC9B,MAAM,MAACwgC,EAAK,MAAE7sC,EAAA,KAAOs0C,GAAQjoC,EACvB84B,EAAS,GACTme,EAAWhP,EAAKgP,SAChB6qC,EAAe75C,EAAKnP,OACpBwoD,EAiBR,SAAuB9gD,EAAO7sC,GAC5B,MAAMouF,EAAQ,GACRxiB,EAAQ/+B,EAAMud,wBAAwB,QAE5C,IAAK,IAAIpiE,EAAI,EAAGA,EAAI4jF,EAAMljF,OAAQV,IAAK,CACrC,MAAMmoB,EAAOy7D,EAAM5jF,GACnB,GAAImoB,EAAKnQ,QAAUA,EACjB,MAEGmQ,EAAKlL,QACRmpF,EAAMrwF,QAAQoS,EAAKy8C,QAEvB,CACA,OAAOwhC,CACT,CA/BqBC,CAAcxhD,EAAO7sC,GACxC2tF,EAAW5kG,KAAK6jG,GAAoB,CAACz6F,EAAG,KAAMC,EAAGy6C,EAAM3nD,QAASovD,IAEhE,IAAK,IAAItsD,EAAI,EAAGA,EAAIs7D,EAAS56D,OAAQV,IAAK,CACxC,MAAM46D,EAAUU,EAASt7D,GACzB,IAAK,IAAI+G,EAAI6zD,EAAQp5D,MAAOuF,GAAK6zD,EAAQn5D,IAAKsF,IAC5C0+F,GAAetoD,EAAQgpD,EAAap/F,GAAI4+F,EAE5C,CACA,OAAO,IAAIrG,GAAY,CAACniD,SAAQ3vB,QAAS,CAAC,GAC5C,CETW84E,CAAgBjiF,GAGzB,GAAa,UAAT1rB,EACF,OAAO,EAGT,MAAMksG,EAmBR,SAAyBxgF,GACvB,MAAMwgC,EAAQxgC,EAAOwgC,OAAS,CAAC,EAE/B,GAAIA,EAAM+wB,yBACR,OAsBJ,SAAiCvxD,GAC/B,MAAM,MAACwgC,EAAA,KAAOlsD,GAAQ0rB,EAChBmJ,EAAUq3B,EAAMr3B,QAChB9sB,EAASmkD,EAAMwiB,YAAY3mE,OAC3Bc,EAAQgsB,EAAQwpB,QAAU6N,EAAM/5C,IAAM+5C,EAAMx8C,IAC5C/R,EHuBD,SAAyBqC,EAAMksD,EAAOunB,GAC3C,IAAI91E,EAYJ,OATEA,EADW,UAATqC,EACMyzE,EACU,QAATzzE,EACDksD,EAAMr3B,QAAQwpB,QAAU6N,EAAMx8C,IAAMw8C,EAAM/5C,IACzCsrC,EAASz9C,GAEVA,EAAKrC,MAELuuD,EAAM0jC,eAETjyF,CACT,CGrCgBiwG,CAAgB5tG,EAAMksD,EAAOrjD,GACrCyJ,EAAS,GAEf,GAAIuiB,EAAQw5B,KAAKsuB,SAAU,CACzB,MAAMjH,EAASxpB,EAAM+wB,yBAAyB,EAAGp0E,GACjD,OAAO,IAAIykG,GAAU,CACnB97F,EAAGkkE,EAAOlkE,EACVC,EAAGikE,EAAOjkE,EACVsgD,OAAQ7F,EAAMuwB,8BAA8B9+E,KAIhD,IAAK,IAAI0J,EAAI,EAAGA,EAAIU,IAAUV,EAC5BiL,EAAOlK,KAAK8jD,EAAM+wB,yBAAyB51E,EAAG1J,IAEhD,OAAO2U,CACT,CA3CWu7F,CAAwBniF,GAEjC,OAIF,SAA+BA,GAC7B,MAAM,MAACwgC,EAAQ,QAAIlsD,GAAQ0rB,EACrBolC,EHqBD,SAAyB9wD,EAAMksD,GACpC,IAAI4E,EAAQ,KAWZ,MAVa,UAAT9wD,EACF8wD,EAAQ5E,EAAM3nD,OACI,QAATvE,EACT8wD,EAAQ5E,EAAM7nD,IACLo5C,EAASz9C,GAElB8wD,EAAQ5E,EAAMhH,iBAAiBllD,EAAKrC,OAC3BuuD,EAAMgpB,eACfpkB,EAAQ5E,EAAMgpB,gBAETpkB,CACT,CGlCgBg9C,CAAgB9tG,EAAMksD,GAEpC,GAAIxO,EAASoT,GAAQ,CACnB,MAAMujB,EAAanoB,EAAMipB,eAEzB,MAAO,CACL3jE,EAAG6iE,EAAavjB,EAAQ,KACxBr/C,EAAG4iE,EAAa,KAAOvjB,GAI3B,OAAO,IACT,CAlBSi9C,CAAsBriF,EAC/B,CA1BmBsiF,CAAgBtiF,GAEjC,OAAIwgF,aAAoBoB,GACfpB,EAGFD,GAAoBC,EAAUv4C,EACvC,CC9BO,SAASs6C,GAAU5iD,EAAK3/B,EAAQiD,GACrC,MAAMrc,EAASglD,GAAW5rC,IACpB,KAACioC,EAAI,MAAEzH,EAAA,KAAOpH,GAAQp5B,EACtBwiF,EAAWv6C,EAAK9+B,QAChB63E,EAAawB,EAASluG,KACtB9C,EAAQgxG,EAAShqG,iBACjB,MAACiqG,EAAQjxG,EAAK,MAAEuwG,EAAQvwG,GAASwvG,GAAc,CAAC,EAClDp6F,GAAUqhD,EAAKnP,OAAOz8C,SACxBgrD,GAAS1H,EAAK18B,GAMlB,SAAgB08B,EAAK+a,GACnB,MAAM,KAACzS,EAAA,OAAMrhD,EAAA,MAAQ67F,EAAA,MAAOV,EAAA,KAAO9+E,EAAA,MAAMu9B,GAASka,EAC5Cz9C,EAAWgrC,EAAK8S,MAAQ,QAAUL,EAAIthB,KAE5CuG,EAAIkF,OAEa,MAAb5nC,GAAoB8kF,IAAUU,IAChCC,GAAa/iD,EAAK/4C,EAAQqc,EAAKtqB,KAC/BrE,GAAKqrD,EAAK,CAACsI,OAAMrhD,SAAQpV,MAAOixG,EAAOjiD,QAAOvjC,aAC9C0iC,EAAIsF,UACJtF,EAAIkF,OACJ69C,GAAa/iD,EAAK/4C,EAAQqc,EAAKpqB,SAEjCvE,GAAKqrD,EAAK,CAACsI,OAAMrhD,SAAQpV,MAAOuwG,EAAOvhD,QAAOvjC,aAE9C0iC,EAAIsF,SACN,CArBI09C,CAAOhjD,EAAK,CAACsI,OAAMrhD,SAAQ67F,QAAOV,QAAO9+E,OAAMu9B,QAAOpH,SACtDkO,GAAW3H,GAEf,CAoBA,SAAS+iD,GAAa/iD,EAAK/4C,EAAQg8F,GACjC,MAAM,SAAC3rC,EAAA,OAAUne,GAAUlyC,EAC3B,IAAI4C,GAAQ,EACRq5F,GAAW,EAEfljD,EAAI8G,YACJ,IAAK,MAAM8P,KAAWU,EAAU,CAC9B,MAAM,MAAC95D,EAAA,IAAOC,GAAOm5D,EACfxH,EAAajW,EAAO37C,GACpB8yE,EAAYn3B,EAAOunD,GAAgBljG,EAAOC,EAAK07C,IACjDtvC,GACFm2C,EAAIkH,OAAOkI,EAAWjpD,EAAGipD,EAAWhpD,GACpCyD,GAAQ,IAERm2C,EAAImH,OAAOiI,EAAWjpD,EAAG88F,GACzBjjD,EAAImH,OAAOiI,EAAWjpD,EAAGipD,EAAWhpD,IAEtC88F,IAAaj8F,EAAOizF,YAAYl6C,EAAK4W,EAAS,CAACmQ,KAAMm8B,IACjDA,EACFljD,EAAIiH,YAEJjH,EAAImH,OAAOmpB,EAAUnqE,EAAG88F,EAE5B,CAEAjjD,EAAImH,OAAOlgD,EAAO4C,QAAQ1D,EAAG88F,GAC7BjjD,EAAIiH,YACJjH,EAAI8C,MACN,CAEA,SAASnuD,GAAKqrD,EAAK+a,GACjB,MAAM,KAACzS,EAAI,OAAErhD,EAAM,SAAEqW,EAAQ,MAAEzrB,EAAK,MAAEgvD,GAASka,EACzCzD,ENlED,SAAmBhP,EAAMrhD,EAAQqW,GACtC,MAAMg6C,EAAWhP,EAAKgP,SAChBne,EAASmP,EAAKnP,OACdgqD,EAAUl8F,EAAOkyC,OACjBv8C,EAAQ,GAEd,IAAK,MAAMg6D,KAAWU,EAAU,CAC9B,IAAI,MAAC95D,EAAA,IAAOC,GAAOm5D,EACnBn5D,EAAMijG,GAAgBljG,EAAOC,EAAK07C,GAElC,MAAM0J,EAAS49C,GAAWnjF,EAAU67B,EAAO37C,GAAQ27C,EAAO17C,GAAMm5D,EAAQ58C,MAExE,IAAK/S,EAAOqwD,SAAU,CAGpB16D,EAAMG,KAAK,CACTsjB,OAAQu2C,EACR3vD,OAAQ47C,EACRrlD,MAAO27C,EAAO37C,GACdC,IAAK07C,EAAO17C,KAEd,SAIF,MAAM2lG,EAAiB/rC,GAAepwD,EAAQ47C,GAE9C,IAAK,MAAMwgD,KAAOD,EAAgB,CAChC,MAAME,EAAY7C,GAAWnjF,EAAU6lF,EAAQE,EAAI7lG,OAAQ2lG,EAAQE,EAAI5lG,KAAM4lG,EAAIrpF,MAC3EupF,EAAc5sC,GAAcC,EAASzd,EAAQmqD,GAEnD,IAAK,MAAME,KAAcD,EACvB3mG,EAAMG,KAAK,CACTsjB,OAAQmjF,EACRv8F,OAAQo8F,EACR7lG,MAAO,CACL,CAAC8f,GAAWqjF,GAAS99C,EAAQygD,EAAW,QAASvwG,KAAK+T,MAExDrJ,IAAK,CACH,CAAC6f,GAAWqjF,GAAS99C,EAAQygD,EAAW,MAAOvwG,KAAKsR,OAI5D,CACF,CACA,OAAOzH,CACT,CMoBmB4+F,CAAUlzC,EAAMrhD,EAAQqW,GAEzC,IAAK,MAAO+C,OAAQzR,EAAK3H,OAAQo8F,EAAG,MAAE7lG,EAAK,IAAEC,KAAQ65D,EAAU,CAC7D,MAAOplE,OAAO,gBAAC2G,EAAkBhH,GAAS,CAAC,GAAK+c,EAC1C60F,GAAsB,IAAXx8F,EAEjB+4C,EAAIkF,OACJlF,EAAIgJ,UAAYnwD,EAEhB6qG,GAAW1jD,EAAKa,EAAO4iD,GAAYhD,GAAWnjF,EAAU9f,EAAOC,IAE/DuiD,EAAI8G,YAEJ,MAAMo8C,IAAa56C,EAAK4xC,YAAYl6C,EAAKpxC,GAEzC,IAAIoL,EACJ,GAAIypF,EAAU,CACRP,EACFljD,EAAIiH,YAEJ08C,GAAmB3jD,EAAK/4C,EAAQxJ,EAAK6f,GAGvC,MAAMsmF,IAAe38F,EAAOizF,YAAYl6C,EAAKqjD,EAAK,CAACt8B,KAAMm8B,EAAUlwD,SAAS,IAC5Eh5B,EAAOkpF,GAAYU,EACd5pF,GACH2pF,GAAmB3jD,EAAK/4C,EAAQzJ,EAAO8f,GAI3C0iC,EAAIiH,YACJjH,EAAIrrD,KAAKqlB,EAAO,UAAY,WAE5BgmC,EAAIsF,SACN,CACF,CAEA,SAASo+C,GAAW1jD,EAAKa,EAAOgC,GAC9B,MAAM,IAAC7pD,EAAA,OAAKE,GAAU2nD,EAAM3C,MAAM0mB,WAC5B,SAACtnD,EAAA,MAAU9f,EAAA,IAAOC,GAAOolD,GAAU,CAAC,EACzB,MAAbvlC,IACF0iC,EAAI8G,YACJ9G,EAAIqH,KAAK7pD,EAAOxE,EAAKyE,EAAMD,EAAOtE,EAASF,GAC3CgnD,EAAI8C,OAER,CAEA,SAAS6gD,GAAmB3jD,EAAK/4C,EAAQugD,EAAOlqC,GAC9C,MAAMumF,EAAoB58F,EAAOoqC,YAAYmW,EAAOlqC,GAChDumF,GACF7jD,EAAImH,OAAO08C,EAAkB19F,EAAG09F,EAAkBz9F,EAEtD,CC7GA,IAAA4N,GAAe,CACbuF,GAAI,SAEJuqF,mBAAAA,CAAoB5lD,EAAOogD,EAAO90E,GAChC,MAAMtX,GAASgsC,EAAMx9C,KAAK4+C,UAAY,IAAI5iD,OACpCo3C,EAAU,GAChB,IAAI3vB,EAAMnoB,EAAGssD,EAAMjoC,EAEnB,IAAKrkB,EAAI,EAAGA,EAAIkW,IAASlW,EACvBmoB,EAAO+5B,EAAMyjB,eAAe3lE,GAC5BssD,EAAOnkC,EAAKy8C,QACZvgD,EAAS,KAELioC,GAAQA,EAAK9+B,SAAW8+B,aAAgBgzC,KAC1Cj7E,EAAS,CACPmiC,QAAStE,EAAM4uB,iBAAiB9wE,GAChCgY,MAAOhY,EACPrH,KAAMysG,GAAY94C,EAAMtsD,EAAGkW,GAC3BgsC,QACAzE,KAAMt1B,EAAKm6C,WAAW90C,QAAQ22B,UAC9BU,MAAO18B,EAAK+5C,OACZ5V,SAIJnkC,EAAK4/E,QAAU1jF,EACfyzB,EAAQ/2C,KAAKsjB,GAGf,IAAKrkB,EAAI,EAAGA,EAAIkW,IAASlW,EACvBqkB,EAASyzB,EAAQ93C,GACZqkB,IAA0B,IAAhBA,EAAO1rB,OAItB0rB,EAAO1rB,KAAOssG,GAAentD,EAAS93C,EAAGwtB,EAAQ03E,WAErD,EAEA8C,UAAAA,CAAW9lD,EAAOogD,EAAO90E,GACvB,MAAMiwC,EAA4B,eAArBjwC,EAAQy6E,SACf7mC,EAAWlf,EAAM40B,+BACjBxvD,EAAO46B,EAAM0mB,UACnB,IAAK,IAAI5oE,EAAIohE,EAAS1gE,OAAS,EAAGV,GAAK,IAAKA,EAAG,CAC7C,MAAMqkB,EAAS+8C,EAASphE,GAAG+nG,QACtB1jF,IAILA,EAAOioC,KAAKioB,oBAAoBjtD,EAAMjD,EAAOo5B,MACzCggB,GAAQp5C,EAAO1rB,MACjBiuG,GAAU1kD,EAAM8B,IAAK3/B,EAAQiD,GAEjC,CACF,EAEA4gF,kBAAAA,CAAmBhmD,EAAOogD,EAAO90E,GAC/B,GAAyB,uBAArBA,EAAQy6E,SACV,OAGF,MAAM7mC,EAAWlf,EAAM40B,+BACvB,IAAK,IAAI92E,EAAIohE,EAAS1gE,OAAS,EAAGV,GAAK,IAAKA,EAAG,CAC7C,MAAMqkB,EAAS+8C,EAASphE,GAAG+nG,QAEvB/C,GAAiB3gF,IACnBuiF,GAAU1kD,EAAM8B,IAAK3/B,EAAQ69B,EAAM0mB,UAEvC,CACF,EAEAu/B,iBAAAA,CAAkBjmD,EAAO1uC,EAAMga,GAC7B,MAAMnJ,EAAS7Q,EAAK2U,KAAK4/E,QAEpB/C,GAAiB3gF,IAAgC,sBAArBmJ,EAAQy6E,UAIzCrB,GAAU1kD,EAAM8B,IAAK3/B,EAAQ69B,EAAM0mB,UACrC,EAEAhjB,SAAU,CACRs/C,WAAW,EACX+C,SAAU,sBCvEd,MAAMG,GAAaA,CAACC,EAAWvc,KAC7B,IAAI,UAACwc,EAAYxc,EAAA,SAAUyc,EAAWzc,GAAYuc,EAOlD,OALIA,EAAUG,gBACZF,EAAYvxG,KAAKsR,IAAIigG,EAAWxc,GAChCyc,EAAWF,EAAUI,iBAAmB1xG,KAAKsR,IAAIkgG,EAAUzc,IAGtD,CACLyc,WACAD,YACAI,WAAY3xG,KAAK+T,IAAIghF,EAAUwc,GAChC,EAKI,MAAMK,WAAe9oB,GAK1BxuE,WAAAA,CAAY4uD,GACV3uD,QAEA/L,KAAKqjG,QAAS,EAGdrjG,KAAKsjG,eAAiB,GAKtBtjG,KAAKujG,aAAe,KAGpBvjG,KAAKwjG,cAAe,EAEpBxjG,KAAK28C,MAAQ+d,EAAO/d,MACpB38C,KAAKioB,QAAUyyC,EAAOzyC,QACtBjoB,KAAKy+C,IAAMic,EAAOjc,IAClBz+C,KAAKyjG,iBAAc9pG,EACnBqG,KAAK0jG,iBAAc/pG,EACnBqG,KAAK2jG,gBAAahqG,EAClBqG,KAAKuyD,eAAY54D,EACjBqG,KAAKsoD,cAAW3uD,EAChBqG,KAAKvI,SAAMkC,EACXqG,KAAKrI,YAASgC,EACdqG,KAAKxI,UAAOmC,EACZqG,KAAKtI,WAAQiC,EACbqG,KAAKxN,YAASmH,EACdqG,KAAKzN,WAAQoH,EACbqG,KAAKi9E,cAAWtjF,EAChBqG,KAAK9I,cAAWyC,EAChBqG,KAAKyvC,YAAS91C,EACdqG,KAAK2zE,cAAWh6E,CAClB,CAEAwgE,MAAAA,CAAO7R,EAAUiK,EAAWD,GAC1BtyD,KAAKsoD,SAAWA,EAChBtoD,KAAKuyD,UAAYA,EACjBvyD,KAAKi9E,SAAW3qB,EAEhBtyD,KAAK8+E,gBACL9+E,KAAK4jG,cACL5jG,KAAKggF,KACP,CAEAlB,aAAAA,GACM9+E,KAAKuoE,gBACPvoE,KAAKzN,MAAQyN,KAAKsoD,SAClBtoD,KAAKxI,KAAOwI,KAAKi9E,SAASzlF,KAC1BwI,KAAKtI,MAAQsI,KAAKzN,QAElByN,KAAKxN,OAASwN,KAAKuyD,UACnBvyD,KAAKvI,IAAMuI,KAAKi9E,SAASxlF,IACzBuI,KAAKrI,OAASqI,KAAKxN,OAEvB,CAEAoxG,WAAAA,GACE,MAAMd,EAAY9iG,KAAKioB,QAAQ45C,QAAU,CAAC,EAC1C,IAAI4hC,EAAcz7E,EAAK86E,EAAU50B,eAAgB,CAACluE,KAAK28C,OAAQ38C,OAAS,GAEpE8iG,EAAUtkF,SACZilF,EAAcA,EAAYjlF,QAAQiC,GAASqiF,EAAUtkF,OAAOiC,EAAMzgB,KAAK28C,MAAMx9C,SAG3E2jG,EAAU59E,OACZu+E,EAAcA,EAAYv+E,MAAK,CAACvgB,EAAG/F,IAAMkkG,EAAU59E,KAAKvgB,EAAG/F,EAAGoB,KAAK28C,MAAMx9C,SAGvEa,KAAKioB,QAAQwpB,SACfgyD,EAAYhyD,UAGdzxC,KAAKyjG,YAAcA,CACrB,CAEAzjB,GAAAA,GACE,MAAM,QAAC/3D,EAAO,IAAEw2B,GAAOz+C,KAMvB,IAAKioB,EAAQz0B,QAEX,YADAwM,KAAKzN,MAAQyN,KAAKxN,OAAS,GAI7B,MAAMswG,EAAY76E,EAAQ45C,OACpBgiC,EAAYr6C,GAAOs5C,EAAU1kD,MAC7BmoC,EAAWsd,EAAUnzG,KACrB6wF,EAAcvhF,KAAK8jG,uBACnB,SAACd,EAAQ,WAAEG,GAAcN,GAAWC,EAAWvc,GAErD,IAAIh0F,EAAOC,EAEXisD,EAAIL,KAAOylD,EAAUpmG,OAEjBuC,KAAKuoE,gBACPh2E,EAAQyN,KAAKsoD,SACb91D,EAASwN,KAAK+jG,SAASxiB,EAAagF,EAAUyc,EAAUG,GAAc,KAEtE3wG,EAASwN,KAAKuyD,UACdhgE,EAAQyN,KAAKgkG,SAASziB,EAAasiB,EAAWb,EAAUG,GAAc,IAGxEnjG,KAAKzN,MAAQf,KAAKsR,IAAIvQ,EAAO01B,EAAQqgC,UAAYtoD,KAAKsoD,UACtDtoD,KAAKxN,OAAShB,KAAKsR,IAAItQ,EAAQy1B,EAAQsqC,WAAavyD,KAAKuyD,UAC3D,CAKAwxC,QAAAA,CAASxiB,EAAagF,EAAUyc,EAAUG,GACxC,MAAM,IAAC1kD,EAAG,SAAE6J,EAAUrgC,SAAU45C,QAAQ,QAACzgB,KAAaphD,KAChDikG,EAAWjkG,KAAKsjG,eAAiB,GAEjCK,EAAa3jG,KAAK2jG,WAAa,CAAC,GAChCrlD,EAAa6kD,EAAa/hD,EAChC,IAAI8iD,EAAc3iB,EAElB9iC,EAAIwJ,UAAY,OAChBxJ,EAAIyJ,aAAe,SAEnB,IAAIi8C,GAAO,EACP1sG,GAAO6mD,EAgBX,OAfAt+C,KAAKyjG,YAAYh5E,SAAQ,CAAC2jD,EAAY3zE,KACpC,MAAM+5D,EAAYwuC,EAAYzc,EAAW,EAAK9nC,EAAI6E,YAAY8qB,EAAWjjD,MAAM54B,OAErE,IAANkI,GAAWkpG,EAAWA,EAAWxoG,OAAS,GAAKq5D,EAAY,EAAIpT,EAAUkH,KAC3E47C,GAAe5lD,EACfqlD,EAAWA,EAAWxoG,QAAUV,EAAI,EAAI,EAAI,IAAM,EAClDhD,GAAO6mD,EACP6lD,KAGFF,EAASxpG,GAAK,CAACjD,KAAM,EAAGC,MAAK0sG,MAAK5xG,MAAOiiE,EAAWhiE,OAAQ2wG,GAE5DQ,EAAWA,EAAWxoG,OAAS,IAAMq5D,EAAYpT,CAAA,IAG5C8iD,CACT,CAEAF,QAAAA,CAASziB,EAAasiB,EAAWb,EAAUoB,GACzC,MAAM,IAAC3lD,EAAG,UAAE8T,EAAWtqC,SAAU45C,QAAQ,QAACzgB,KAAaphD,KACjDikG,EAAWjkG,KAAKsjG,eAAiB,GACjCI,EAAc1jG,KAAK0jG,YAAc,GACjCW,EAAc9xC,EAAYgvB,EAEhC,IAAI+iB,EAAaljD,EACbmjD,EAAkB,EAClBC,EAAmB,EAEnBhtG,EAAO,EACP2qB,EAAM,EAyBV,OAvBAniB,KAAKyjG,YAAYh5E,SAAQ,CAAC2jD,EAAY3zE,KACpC,MAAM,UAAC+5D,EAAS,WAAE2uC,GA8VxB,SAA2BH,EAAUa,EAAWplD,EAAK2vB,EAAYg2B,GAC/D,MAAM5vC,EAKR,SAA4B4Z,EAAY40B,EAAUa,EAAWplD,GAC3D,IAAIgmD,EAAiBr2B,EAAWjjD,KAC5Bs5E,GAA4C,kBAAnBA,IAC3BA,EAAiBA,EAAerlF,QAAO,CAACza,EAAG/F,IAAM+F,EAAExJ,OAASyD,EAAEzD,OAASwJ,EAAI/F,KAE7E,OAAOokG,EAAYa,EAAUnzG,KAAO,EAAK+tD,EAAI6E,YAAYmhD,GAAgBlyG,KAC3E,CAXoBmyG,CAAmBt2B,EAAY40B,EAAUa,EAAWplD,GAChE0kD,EAYR,SAA6BiB,EAAah2B,EAAYu2B,GACpD,IAAIxB,EAAaiB,EACc,kBAApBh2B,EAAWjjD,OACpBg4E,EAAayB,GAA0Bx2B,EAAYu2B,IAErD,OAAOxB,CACT,CAlBqB0B,CAAoBT,EAAah2B,EAAYy1B,EAAUvlD,YAC1E,MAAO,CAACkW,YAAW2uC,aACrB,CAlWsC2B,CAAkB9B,EAAUa,EAAWplD,EAAK2vB,EAAYg2B,GAGpF3pG,EAAI,GAAK+pG,EAAmBrB,EAAa,EAAI/hD,EAAUijD,IACzDC,GAAcC,EAAkBnjD,EAChCsiD,EAAYloG,KAAK,CAACjJ,MAAOgyG,EAAiB/xG,OAAQgyG,IAClDhtG,GAAQ+sG,EAAkBnjD,EAC1Bj/B,IACAoiF,EAAkBC,EAAmB,GAIvCP,EAASxpG,GAAK,CAACjD,OAAMC,IAAK+sG,EAAkBriF,MAAK5vB,MAAOiiE,EAAWhiE,OAAQ2wG,GAG3EoB,EAAkB/yG,KAAK+T,IAAIg/F,EAAiB/vC,GAC5CgwC,GAAoBrB,EAAa/hD,CAAA,IAGnCkjD,GAAcC,EACdb,EAAYloG,KAAK,CAACjJ,MAAOgyG,EAAiB/xG,OAAQgyG,IAE3CF,CACT,CAEAS,cAAAA,GACE,IAAK/kG,KAAKioB,QAAQz0B,QAChB,OAEF,MAAM+tF,EAAcvhF,KAAK8jG,uBAClBR,eAAgBW,EAAUh8E,SAAS,MAACwvB,EAAOoqB,QAAQ,QAACzgB,GAAQ,IAAE+S,IAAQn0D,KACvEglG,EAAY9wC,GAAcC,EAAKn0D,KAAKxI,KAAMwI,KAAKzN,OACrD,GAAIyN,KAAKuoE,eAAgB,CACvB,IAAI47B,EAAM,EACN3sG,EAAOkgD,GAAeD,EAAOz3C,KAAKxI,KAAO4pD,EAASphD,KAAKtI,MAAQsI,KAAK2jG,WAAWQ,IACnF,IAAK,MAAMc,KAAUhB,EACfE,IAAQc,EAAOd,MACjBA,EAAMc,EAAOd,IACb3sG,EAAOkgD,GAAeD,EAAOz3C,KAAKxI,KAAO4pD,EAASphD,KAAKtI,MAAQsI,KAAK2jG,WAAWQ,KAEjFc,EAAOxtG,KAAOuI,KAAKvI,IAAM8pF,EAAcngC,EACvC6jD,EAAOztG,KAAOwtG,EAAUzwC,WAAWywC,EAAUpgG,EAAEpN,GAAOytG,EAAO1yG,OAC7DiF,GAAQytG,EAAO1yG,MAAQ6uD,MAEpB,CACL,IAAIj/B,EAAM,EACN1qB,EAAMigD,GAAeD,EAAOz3C,KAAKvI,IAAM8pF,EAAcngC,EAASphD,KAAKrI,OAASqI,KAAK0jG,YAAYvhF,GAAK3vB,QACtG,IAAK,MAAMyyG,KAAUhB,EACfgB,EAAO9iF,MAAQA,IACjBA,EAAM8iF,EAAO9iF,IACb1qB,EAAMigD,GAAeD,EAAOz3C,KAAKvI,IAAM8pF,EAAcngC,EAASphD,KAAKrI,OAASqI,KAAK0jG,YAAYvhF,GAAK3vB,SAEpGyyG,EAAOxtG,IAAMA,EACbwtG,EAAOztG,MAAQwI,KAAKxI,KAAO4pD,EAC3B6jD,EAAOztG,KAAOwtG,EAAUzwC,WAAWywC,EAAUpgG,EAAEqgG,EAAOztG,MAAOytG,EAAO1yG,OACpEkF,GAAOwtG,EAAOzyG,OAAS4uD,EAG7B,CAEAmnB,YAAAA,GACE,MAAiC,QAA1BvoE,KAAKioB,QAAQ/wB,UAAgD,WAA1B8I,KAAKioB,QAAQ/wB,QACzD,CAEAghE,IAAAA,GACE,GAAIl4D,KAAKioB,QAAQz0B,QAAS,CACxB,MAAMirD,EAAMz+C,KAAKy+C,IACjB0H,GAAS1H,EAAKz+C,MAEdA,KAAKklG,QAEL9+C,GAAW3H,GAEf,CAKAymD,KAAAA,GACE,MAAOj9E,QAAS/E,EAAA,YAAMwgF,EAAA,WAAaC,EAAA,IAAYllD,GAAOz+C,MAChD,MAACy3C,EAAOoqB,OAAQihC,GAAa5/E,EAC7BiiF,EAAe9kD,GAAS/vD,MACxB00G,EAAY9wC,GAAchxC,EAAKixC,IAAKn0D,KAAKxI,KAAMwI,KAAKzN,OACpDsxG,EAAYr6C,GAAOs5C,EAAU1kD,OAC7B,QAACgD,GAAW0hD,EACZvc,EAAWsd,EAAUnzG,KACrB00G,EAAe7e,EAAW,EAChC,IAAI8e,EAEJrlG,KAAK8lF,YAGLrnC,EAAIwJ,UAAY+8C,EAAU/8C,UAAU,QACpCxJ,EAAIyJ,aAAe,SACnBzJ,EAAIiD,UAAY,GAChBjD,EAAIL,KAAOylD,EAAUpmG,OAErB,MAAM,SAACulG,EAAA,UAAUD,EAAA,WAAWI,GAAcN,GAAWC,EAAWvc,GAyE1Dhe,EAAevoE,KAAKuoE,eACpBgZ,EAAcvhF,KAAK8jG,sBAEvBuB,EADE98B,EACO,CACP3jE,EAAG8yC,GAAeD,EAAOz3C,KAAKxI,KAAO4pD,EAASphD,KAAKtI,MAAQisG,EAAW,IACtE9+F,EAAG7E,KAAKvI,IAAM2pD,EAAUmgC,EACxBx6B,KAAM,GAGC,CACPniD,EAAG5E,KAAKxI,KAAO4pD,EACfv8C,EAAG6yC,GAAeD,EAAOz3C,KAAKvI,IAAM8pF,EAAcngC,EAASphD,KAAKrI,OAAS+rG,EAAY,GAAGlxG,QACxFu0D,KAAM,GAIV4N,GAAsB30D,KAAKy+C,IAAKv7B,EAAKoiF,eAErC,MAAMhnD,EAAa6kD,EAAa/hD,EAChCphD,KAAKyjG,YAAYh5E,SAAQ,CAAC2jD,EAAY3zE,KACpCgkD,EAAI+I,YAAc4mB,EAAWD,UAC7B1vB,EAAIgJ,UAAY2mB,EAAWD,UAE3B,MAAM9qB,EAAY5E,EAAI6E,YAAY8qB,EAAWjjD,MAAM54B,MAC7C01D,EAAY+8C,EAAU/8C,UAAUmmB,EAAWnmB,YAAcmmB,EAAWnmB,UAAY66C,EAAU76C,YAC1F11D,EAAQywG,EAAWoC,EAAe/hD,EACxC,IAAIz+C,EAAIygG,EAAOzgG,EACXC,EAAIwgG,EAAOxgG,EAEfmgG,EAAU3wC,SAASr0D,KAAKzN,OAEpBg2E,EACE9tE,EAAI,GAAKmK,EAAIrS,EAAQ6uD,EAAUphD,KAAKtI,QACtCmN,EAAIwgG,EAAOxgG,GAAKy5C,EAChB+mD,EAAOt+C,OACPniD,EAAIygG,EAAOzgG,EAAI8yC,GAAeD,EAAOz3C,KAAKxI,KAAO4pD,EAASphD,KAAKtI,MAAQisG,EAAW0B,EAAOt+C,QAElFtsD,EAAI,GAAKoK,EAAIy5C,EAAat+C,KAAKrI,SACxCiN,EAAIygG,EAAOzgG,EAAIA,EAAI8+F,EAAY2B,EAAOt+C,MAAMx0D,MAAQ6uD,EACpDikD,EAAOt+C,OACPliD,EAAIwgG,EAAOxgG,EAAI6yC,GAAeD,EAAOz3C,KAAKvI,IAAM8pF,EAAcngC,EAASphD,KAAKrI,OAAS+rG,EAAY2B,EAAOt+C,MAAMv0D,SAYhH,GA1HoB,SAASoS,EAAGC,EAAGupE,GACnC,GAAI7/D,MAAMy0F,IAAaA,GAAY,GAAKz0F,MAAMw0F,IAAcA,EAAY,EACtE,OAIFtkD,EAAIkF,OAEJ,MAAMjC,EAAYzQ,EAAem9B,EAAW1sB,UAAW,GAUvD,GATAjD,EAAIgJ,UAAYxW,EAAem9B,EAAW3mB,UAAW09C,GACrD1mD,EAAI25C,QAAUnnD,EAAem9B,EAAWgqB,QAAS,QACjD35C,EAAIgnC,eAAiBx0C,EAAem9B,EAAWqX,eAAgB,GAC/DhnC,EAAI64C,SAAWrmD,EAAem9B,EAAWkpB,SAAU,SACnD74C,EAAIiD,UAAYA,EAChBjD,EAAI+I,YAAcvW,EAAem9B,EAAW5mB,YAAa29C,GAEzD1mD,EAAI+mC,YAAYv0C,EAAem9B,EAAWm3B,SAAU,KAEhDzC,EAAUG,cAAe,CAG3B,MAAMuC,EAAc,CAClBrgD,OAAQ49C,EAAYvxG,KAAKi0G,MAAQ,EACjCxgD,WAAYmpB,EAAWnpB,WACvBC,SAAUkpB,EAAWlpB,SACrBa,YAAarE,GAET+rB,EAAUu3B,EAAU1wC,MAAM1vD,EAAGo+F,EAAW,GAI9Cr+C,GAAgBlG,EAAK+mD,EAAa/3B,EAHlB5oE,EAAIugG,EAGgCtC,EAAUI,iBAAmBF,OAC5E,CAGL,MAAM0C,EAAU7gG,EAAIrT,KAAK+T,KAAKghF,EAAWwc,GAAa,EAAG,GACnD4C,EAAWX,EAAUzwC,WAAW3vD,EAAGo+F,GACnC9N,EAAe5rC,GAAc8kB,EAAW8mB,cAE9Cz2C,EAAI8G,YAEAtoD,OAAOs/C,OAAO24C,GAAcrK,MAAKvpD,GAAW,IAANA,IACxCknB,GAAmB/J,EAAK,CACtB75C,EAAG+gG,EACH9gG,EAAG6gG,EACHh1F,EAAGsyF,EACHxhE,EAAGuhE,EACH59C,OAAQ+vC,IAGVz2C,EAAIqH,KAAK6/C,EAAUD,EAAS1C,EAAUD,GAGxCtkD,EAAIrrD,OACc,IAAdsuD,GACFjD,EAAItqD,SAIRsqD,EAAIsF,SACN,CAuDE6hD,CAFcZ,EAAUpgG,EAAEA,GAELC,EAAGupE,GAExBxpE,E1DxVgBihG,EAACpuD,EAAoCjgD,EAAcE,EAAey8D,IAE/E1c,KADO0c,EAAM,OAAS,SACJz8D,EAAkB,WAAV+/C,GAAsBjgD,EAAOE,GAAS,EAAIF,E0DsVnEquG,CAAO59C,EAAWrjD,EAAIo+F,EAAWoC,EAAc78B,EAAe3jE,EAAIrS,EAAQyN,KAAKtI,MAAOwrB,EAAKixC,KAvDhF,SAASvvD,EAAGC,EAAGupE,GAC9B1qD,GAAW+6B,EAAK2vB,EAAWjjD,KAAMvmB,EAAGC,EAAKs+F,EAAa,EAAIU,EAAW,CACnE78C,cAAeonB,EAAW12D,OAC1BuwC,UAAW+8C,EAAU/8C,UAAUmmB,EAAWnmB,YAE9C,CAqDEM,CAASy8C,EAAUpgG,EAAEA,GAAIC,EAAGupE,GAExB7F,EACF88B,EAAOzgG,GAAKrS,EAAQ6uD,OACf,GAA+B,kBAApBgtB,EAAWjjD,KAAmB,CAC9C,MAAMw5E,EAAiBd,EAAUvlD,WACjC+mD,EAAOxgG,GAAK+/F,GAA0Bx2B,EAAYu2B,GAAkBvjD,OAEpEikD,EAAOxgG,GAAKy5C,KAIhB0W,GAAqBh1D,KAAKy+C,IAAKv7B,EAAKoiF,cACtC,CAKAxf,SAAAA,GACE,MAAM5iE,EAAOljB,KAAKioB,QACZo5D,EAAYn+D,EAAK3H,MACjBuqF,EAAYt8C,GAAO63B,EAAUjjC,MAC7B2nD,EAAex8C,GAAU83B,EAAUjgC,SAEzC,IAAKigC,EAAU7tF,QACb,OAGF,MAAMwxG,EAAY9wC,GAAchxC,EAAKixC,IAAKn0D,KAAKxI,KAAMwI,KAAKzN,OACpDksD,EAAMz+C,KAAKy+C,IACXvnD,EAAWmqF,EAAUnqF,SACrBkuG,EAAeU,EAAUp1G,KAAO,EAChCs1G,EAA6BD,EAAatuG,IAAM2tG,EACtD,IAAIvgG,EAIArN,EAAOwI,KAAKxI,KACZ8wD,EAAWtoD,KAAKzN,MAEpB,GAAIyN,KAAKuoE,eAEPjgB,EAAW92D,KAAK+T,OAAOvF,KAAK2jG,YAC5B9+F,EAAI7E,KAAKvI,IAAMuuG,EACfxuG,EAAOkgD,GAAex0B,EAAKu0B,MAAOjgD,EAAMwI,KAAKtI,MAAQ4wD,OAChD,CAEL,MAAMiK,EAAYvyD,KAAK0jG,YAAYtkF,QAAO,CAACu5C,EAAKjoE,IAASc,KAAK+T,IAAIozD,EAAKjoE,EAAK8B,SAAS,GACrFqS,EAAImhG,EAA6BtuD,GAAex0B,EAAKu0B,MAAOz3C,KAAKvI,IAAKuI,KAAKrI,OAAS46D,EAAYrvC,EAAK2+C,OAAOzgB,QAAUphD,KAAK8jG,uBAK7H,MAAMl/F,EAAI8yC,GAAexgD,EAAUM,EAAMA,EAAO8wD,GAGhD7J,EAAIwJ,UAAY+8C,EAAU/8C,UAAUzQ,GAAmBtgD,IACvDunD,EAAIyJ,aAAe,SACnBzJ,EAAI+I,YAAc65B,EAAU/wF,MAC5BmuD,EAAIgJ,UAAY45B,EAAU/wF,MAC1BmuD,EAAIL,KAAO0nD,EAAUroG,OAErBimB,GAAW+6B,EAAK4iC,EAAUl2D,KAAMvmB,EAAGC,EAAGihG,EACxC,CAKAhC,mBAAAA,GACE,MAAMziB,EAAYrhF,KAAKioB,QAAQ1M,MACzBuqF,EAAYt8C,GAAO63B,EAAUjjC,MAC7B2nD,EAAex8C,GAAU83B,EAAUjgC,SACzC,OAAOigC,EAAU7tF,QAAUsyG,EAAUxnD,WAAaynD,EAAavzG,OAAS,CAC1E,CAKAyzG,gBAAAA,CAAiBrhG,EAAGC,GAClB,IAAIpK,EAAGyrG,EAAQC,EAEf,GAAIhwD,GAAWvxC,EAAG5E,KAAKxI,KAAMwI,KAAKtI,QAC7By+C,GAAWtxC,EAAG7E,KAAKvI,IAAKuI,KAAKrI,QAGhC,IADAwuG,EAAKnmG,KAAKsjG,eACL7oG,EAAI,EAAGA,EAAI0rG,EAAGhrG,SAAUV,EAG3B,GAFAyrG,EAASC,EAAG1rG,GAER07C,GAAWvxC,EAAGshG,EAAO1uG,KAAM0uG,EAAO1uG,KAAO0uG,EAAO3zG,QAC/C4jD,GAAWtxC,EAAGqhG,EAAOzuG,IAAKyuG,EAAOzuG,IAAMyuG,EAAO1zG,QAEjD,OAAOwN,KAAKyjG,YAAYhpG,GAK9B,OAAO,IACT,CAMA2rG,WAAAA,CAAYpiG,GACV,MAAMkf,EAAOljB,KAAKioB,QAClB,IAoDJ,SAAoBhpB,EAAMikB,GACxB,IAAc,cAATjkB,GAAiC,aAATA,KAAyBikB,EAAK+7B,SAAW/7B,EAAKmjF,SACzE,OAAO,EAET,GAAInjF,EAAKg8B,UAAqB,UAATjgD,GAA6B,YAATA,GACvC,OAAO,EAET,OAAO,CACT,CA5DSqnG,CAAWtiG,EAAE/E,KAAMikB,GACtB,OAIF,MAAMqjF,EAAcvmG,KAAKimG,iBAAiBjiG,EAAEY,EAAGZ,EAAEa,GAEjD,GAAe,cAAXb,EAAE/E,MAAmC,aAAX+E,EAAE/E,KAAqB,CACnD,MAAMqnD,EAAWtmD,KAAKujG,aAChBiD,GApfW5nG,EAofqB2nG,EApfT,QAAf5hG,EAofc2hD,IApfe,OAAN1nD,GAAc+F,EAAEqtC,eAAiBpzC,EAAEozC,cAAgBrtC,EAAE8N,QAAU7T,EAAE6T,OAqflG6zC,IAAakgD,GACfx+E,EAAK9E,EAAKmjF,QAAS,CAACriG,EAAGsiD,EAAUtmD,MAAOA,MAG1CA,KAAKujG,aAAegD,EAEhBA,IAAgBC,GAClBx+E,EAAK9E,EAAK+7B,QAAS,CAACj7C,EAAGuiG,EAAavmG,MAAOA,KAE/C,MAAWumG,GACTv+E,EAAK9E,EAAKg8B,QAAS,CAACl7C,EAAGuiG,EAAavmG,MAAOA,MA/f9BymG,IAAC9hG,EAAG/F,CAigBrB,EAyBF,SAASgmG,GAA0Bx2B,EAAYu2B,GAE7C,OAAOA,GADav2B,EAAWjjD,KAAOijD,EAAWjjD,KAAKhwB,OAAS,EAEjE,CAYA,IAAAurG,GAAe,CACb1uF,GAAI,SAMJ2uF,SAAUvD,GAEVnnG,KAAAA,CAAM0gD,EAAOogD,EAAO90E,GAClB,MAAMgmD,EAAStxB,EAAMsxB,OAAS,IAAIm1B,GAAO,CAAC3kD,IAAK9B,EAAM8B,IAAKx2B,UAAS00B,UACnEw2B,GAAQvY,UAAUje,EAAOsxB,EAAQhmD,GACjCkrD,GAAQiC,OAAOz4B,EAAOsxB,EACxB,EAEAnV,IAAAA,CAAKnc,GACHw2B,GAAQoC,UAAU54B,EAAOA,EAAMsxB,eACxBtxB,EAAMsxB,MACf,EAKA0Q,YAAAA,CAAahiC,EAAOogD,EAAO90E,GACzB,MAAMgmD,EAAStxB,EAAMsxB,OACrBkF,GAAQvY,UAAUje,EAAOsxB,EAAQhmD,GACjCgmD,EAAOhmD,QAAUA,CACnB,EAIAi4D,WAAAA,CAAYvjC,GACV,MAAMsxB,EAAStxB,EAAMsxB,OACrBA,EAAO21B,cACP31B,EAAO82B,gBACT,EAGA6B,UAAAA,CAAWjqD,EAAO1uC,GACXA,EAAKmmF,QACRz3C,EAAMsxB,OAAOm4B,YAAYn4F,EAAKmjD,MAElC,EAEA/Q,SAAU,CACR7sD,SAAS,EACT0D,SAAU,MACVugD,MAAO,SACPk8B,UAAU,EACVliC,SAAS,EACThC,OAAQ,IAGRyP,OAAAA,CAAQl7C,EAAGoqE,EAAYH,GACrB,MAAMx7D,EAAQ27D,EAAWp8B,aACnB60D,EAAK54B,EAAOtxB,MACdkqD,EAAGt7B,iBAAiB94D,IACtBo0F,EAAG3lD,KAAKzuC,GACR27D,EAAW12D,QAAS,IAEpBmvF,EAAG9lD,KAAKtuC,GACR27D,EAAW12D,QAAS,EAExB,EAEAunC,QAAS,KACTonD,QAAS,KAETxkC,OAAQ,CACNvxE,MAAQmuD,GAAQA,EAAI9B,MAAM10B,QAAQ33B,MAClC0yG,SAAU,GACV5hD,QAAS,GAYT8sB,cAAAA,CAAevxB,GACb,MAAMoB,EAAWpB,EAAMx9C,KAAK4+C,UACrB8jB,QAAQ,cAACohC,EAAA,WAAeh+C,EAAU,UAAEgD,EAAA,MAAW33D,EAAA,gBAAOw2G,EAAe,aAAE5R,IAAiBv4C,EAAMsxB,OAAOhmD,QAE5G,OAAO00B,EAAMmf,yBAAyBp9C,KAAKkE,IACzC,MAAMjyB,EAAQiyB,EAAKm6C,WAAWnJ,SAASqvC,EAAgB,OAAItpG,GACrDosD,EAAcwD,GAAU54D,EAAMo1D,aAEpC,MAAO,CACL56B,KAAM4yB,EAASn7B,EAAKnQ,OAAO8F,MAC3BkvC,UAAW92D,EAAM2G,gBACjB62E,UAAW79E,EACXonB,QAASkL,EAAKq+B,QACdm3C,QAASznG,EAAMomE,eACfwuC,SAAU50G,EAAMqmE,WAChByuB,eAAgB90F,EAAMsmE,iBACtBqgC,SAAU3mG,EAAMumE,gBAChBxV,WAAYqE,EAAYxzD,MAAQwzD,EAAYvzD,QAAU,EACtDg1D,YAAa72D,EAAMmtD,YACnBmH,WAAYA,GAAct0D,EAAMs0D,WAChCC,SAAUv0D,EAAMu0D,SAChB+C,UAAWA,GAAat3D,EAAMs3D,UAC9BitC,aAAc4R,IAAoB5R,GAAgBvkG,EAAMukG,cAGxDljD,aAAcpvB,EAAKnQ,MACpB,GACAzS,KACL,GAGFub,MAAO,CACLjrB,MAAQmuD,GAAQA,EAAI9B,MAAM10B,QAAQ33B,MAClCkD,SAAS,EACT0D,SAAU,SACVi0B,KAAM,KAIVsyB,YAAa,CACX6C,YAAcjsD,IAAUA,EAAKksD,WAAW,MACxCshB,OAAQ,CACNvhB,YAAcjsD,IAAU,CAAC,iBAAkB,SAAU,QAAQ0R,SAAS1R,MCtsBrE,MAAM0yG,WAAczsB,GAIzBxuE,WAAAA,CAAY4uD,GACV3uD,QAEA/L,KAAK28C,MAAQ+d,EAAO/d,MACpB38C,KAAKioB,QAAUyyC,EAAOzyC,QACtBjoB,KAAKy+C,IAAMic,EAAOjc,IAClBz+C,KAAKgnG,cAAWrtG,EAChBqG,KAAKvI,SAAMkC,EACXqG,KAAKrI,YAASgC,EACdqG,KAAKxI,UAAOmC,EACZqG,KAAKtI,WAAQiC,EACbqG,KAAKzN,WAAQoH,EACbqG,KAAKxN,YAASmH,EACdqG,KAAK9I,cAAWyC,EAChBqG,KAAKyvC,YAAS91C,EACdqG,KAAK2zE,cAAWh6E,CAClB,CAEAwgE,MAAAA,CAAO7R,EAAUiK,GACf,MAAMrvC,EAAOljB,KAAKioB,QAKlB,GAHAjoB,KAAKxI,KAAO,EACZwI,KAAKvI,IAAM,GAENyrB,EAAK1vB,QAER,YADAwM,KAAKzN,MAAQyN,KAAKxN,OAASwN,KAAKtI,MAAQsI,KAAKrI,OAAS,GAIxDqI,KAAKzN,MAAQyN,KAAKtI,MAAQ4wD,EAC1BtoD,KAAKxN,OAASwN,KAAKrI,OAAS46D,EAE5B,MAAMqyB,EAAY1lF,EAAQgkB,EAAKiI,MAAQjI,EAAKiI,KAAKhwB,OAAS,EAC1D6E,KAAKgnG,SAAWz9C,GAAUrmC,EAAKk+B,SAC/B,MAAM6lD,EAAWriB,EAAYp7B,GAAOtmC,EAAKk7B,MAAME,WAAat+C,KAAKgnG,SAASx0G,OAEtEwN,KAAKuoE,eACPvoE,KAAKxN,OAASy0G,EAEdjnG,KAAKzN,MAAQ00G,CAEjB,CAEA1+B,YAAAA,GACE,MAAMxjE,EAAM/E,KAAKioB,QAAQ/wB,SACzB,MAAe,QAAR6N,GAAyB,WAARA,CAC1B,CAEAmiG,SAAAA,CAAUxlG,GACR,MAAM,IAACjK,EAAA,KAAKD,EAAA,OAAMG,EAAA,MAAQD,EAAA,QAAOuwB,GAAWjoB,KACtCy3C,EAAQxvB,EAAQwvB,MACtB,IACI6Q,EAAUy9B,EAAQC,EADlB9gC,EAAW,EAmBf,OAhBIllD,KAAKuoE,gBACPwd,EAASruC,GAAeD,EAAOjgD,EAAME,GACrCsuF,EAASvuF,EAAMiK,EACf4mD,EAAW5wD,EAAQF,IAEM,SAArBywB,EAAQ/wB,UACV6uF,EAASvuF,EAAOkK,EAChBskF,EAAStuC,GAAeD,EAAO9/C,EAAQF,GACvCytD,GAAiB,GAANzzD,KAEXs0F,EAASruF,EAAQgK,EACjBskF,EAAStuC,GAAeD,EAAOhgD,EAAKE,GACpCutD,EAAgB,GAALzzD,IAEb62D,EAAW3wD,EAASF,GAEf,CAACsuF,SAAQC,SAAQ19B,WAAUpD,WACpC,CAEAgT,IAAAA,GACE,MAAMzZ,EAAMz+C,KAAKy+C,IACXv7B,EAAOljB,KAAKioB,QAElB,IAAK/E,EAAK1vB,QACR,OAGF,MAAM2zG,EAAW39C,GAAOtmC,EAAKk7B,MAEvB18C,EADaylG,EAAS7oD,WACA,EAAIt+C,KAAKgnG,SAASvvG,KACxC,OAACsuF,EAAA,OAAQC,EAAA,SAAQ19B,EAAA,SAAUpD,GAAYllD,KAAKknG,UAAUxlG,GAE5DgiB,GAAW+6B,EAAKv7B,EAAKiI,KAAM,EAAG,EAAGg8E,EAAU,CACzC72G,MAAO4yB,EAAK5yB,MACZg4D,WACApD,WACA+C,UAAWzQ,GAAmBt0B,EAAKu0B,OACnCyQ,aAAc,SACdF,YAAa,CAAC+9B,EAAQC,IAE1B,EAeF,IAAAohB,GAAe,CACbpvF,GAAI,QAMJ2uF,SAAUI,GAEV9qG,KAAAA,CAAM0gD,EAAOogD,EAAO90E,IArBtB,SAAqB00B,EAAO0kC,GAC1B,MAAM9lE,EAAQ,IAAIwrF,GAAM,CACtBtoD,IAAK9B,EAAM8B,IACXx2B,QAASo5D,EACT1kC,UAGFw2B,GAAQvY,UAAUje,EAAOphC,EAAO8lE,GAChClO,GAAQiC,OAAOz4B,EAAOphC,GACtBohC,EAAM0qD,WAAa9rF,CACrB,CAYI+rF,CAAY3qD,EAAO10B,EACrB,EAEA6wC,IAAAA,CAAKnc,GACH,MAAM0qD,EAAa1qD,EAAM0qD,WACzBl0B,GAAQoC,UAAU54B,EAAO0qD,UAClB1qD,EAAM0qD,UACf,EAEA1oB,YAAAA,CAAahiC,EAAOogD,EAAO90E,GACzB,MAAM1M,EAAQohC,EAAM0qD,WACpBl0B,GAAQvY,UAAUje,EAAOphC,EAAO0M,GAChC1M,EAAM0M,QAAUA,CAClB,EAEAo4B,SAAU,CACR5I,MAAO,SACPjkD,SAAS,EACT4qD,KAAM,CACJ3O,OAAQ,QAEVkkC,UAAU,EACVvyB,QAAS,GACTlqD,SAAU,MACVi0B,KAAM,GACNskB,OAAQ,KAGVq3C,cAAe,CACbx2F,MAAO,SAGTmtD,YAAa,CACX6C,aAAa,EACbE,YAAY,IChKhB,MAAM9hC,GAAM,IAAI6oF,QAEhB,IAAAC,GAAe,CACbxvF,GAAI,WAEJ/b,KAAAA,CAAM0gD,EAAOogD,EAAO90E,GAClB,MAAM1M,EAAQ,IAAIwrF,GAAM,CACtBtoD,IAAK9B,EAAM8B,IACXx2B,UACA00B,UAGFw2B,GAAQvY,UAAUje,EAAOphC,EAAO0M,GAChCkrD,GAAQiC,OAAOz4B,EAAOphC,GACtBmD,GAAI1Z,IAAI23C,EAAOphC,EACjB,EAEAu9C,IAAAA,CAAKnc,GACHw2B,GAAQoC,UAAU54B,EAAOj+B,GAAIpa,IAAIq4C,IACjCj+B,GAAIwtC,OAAOvP,EACb,EAEAgiC,YAAAA,CAAahiC,EAAOogD,EAAO90E,GACzB,MAAM1M,EAAQmD,GAAIpa,IAAIq4C,GACtBw2B,GAAQvY,UAAUje,EAAOphC,EAAO0M,GAChC1M,EAAM0M,QAAUA,CAClB,EAEAo4B,SAAU,CACR5I,MAAO,SACPjkD,SAAS,EACT4qD,KAAM,CACJ3O,OAAQ,UAEVkkC,UAAU,EACVvyB,QAAS,EACTlqD,SAAU,MACVi0B,KAAM,GACNskB,OAAQ,MAGVq3C,cAAe,CACbx2F,MAAO,SAGTmtD,YAAa,CACX6C,aAAa,EACbE,YAAY,IClChB,MAAMinD,GAAc,CAIlBC,OAAAA,CAAQx3E,GACN,IAAKA,EAAM/0B,OACT,OAAO,EAGT,IAAIV,EAAGK,EACH8J,EAAI,EACJC,EAAI,EACJ8L,EAAQ,EAEZ,IAAKlW,EAAI,EAAGK,EAAMo1B,EAAM/0B,OAAQV,EAAIK,IAAOL,EAAG,CAC5C,MAAMi5B,EAAKxD,EAAMz1B,GAAG+uB,QACpB,GAAIkK,GAAMA,EAAG8mD,WAAY,CACvB,MAAMz1E,EAAM2uB,EAAG6mD,kBACf31E,GAAKG,EAAIH,EACTC,GAAKE,EAAIF,IACP8L,EAEN,CAEA,MAAO,CACL/L,EAAGA,EAAI+L,EACP9L,EAAGA,EAAI8L,EAEX,EAKAkiE,OAAAA,CAAQ3iD,EAAOy3E,GACb,IAAKz3E,EAAM/0B,OACT,OAAO,EAGT,IAGIV,EAAGK,EAAK8sG,EAHRhjG,EAAI+iG,EAAc/iG,EAClBC,EAAI8iG,EAAc9iG,EAClBstE,EAAcxwE,OAAO8xC,kBAGzB,IAAKh5C,EAAI,EAAGK,EAAMo1B,EAAM/0B,OAAQV,EAAIK,IAAOL,EAAG,CAC5C,MAAMi5B,EAAKxD,EAAMz1B,GAAG+uB,QACpB,GAAIkK,GAAMA,EAAG8mD,WAAY,CACvB,MACM/mE,EAAI8hC,GAAsBoyD,EADjBj0E,EAAG0+C,kBAGd3+D,EAAI0+D,IACNA,EAAc1+D,EACdm0F,EAAiBl0E,GAGvB,CAEA,GAAIk0E,EAAgB,CAClB,MAAMC,EAAKD,EAAertB,kBAC1B31E,EAAIijG,EAAGjjG,EACPC,EAAIgjG,EAAGhjG,EAGT,MAAO,CACLD,IACAC,IAEJ,GAIF,SAASijG,GAAa9lF,EAAM+lF,GAU1B,OATIA,IACE7oG,EAAQ6oG,GAEVlsG,MAAMsB,UAAU3B,KAAKkI,MAAMse,EAAM+lF,GAEjC/lF,EAAKxmB,KAAKusG,IAIP/lF,CACT,CAQA,SAASgmF,GAAc5lG,GACrB,OAAoB,kBAARA,GAAoBA,aAAejB,SAAWiB,EAAIpG,QAAQ,OAAS,EACtEoG,EAAI+K,MAAM,MAEZ/K,CACT,CASA,SAAS6lG,GAAkBtrD,EAAOl8B,GAChC,MAAM,QAAC+I,EAAO,aAAEwoB,EAAA,MAAcv/B,GAASgO,EACjCs8C,EAAapgB,EAAMyjB,eAAepuB,GAAc+qB,YAChD,MAACxkD,EAAA,MAAOxnB,GAASgsE,EAAWiG,iBAAiBvwD,GAEnD,MAAO,CACLkqC,QACApkC,QACAzW,OAAQi7D,EAAWmF,UAAUzvD,GAC7BgxD,IAAK9mB,EAAMx9C,KAAK4+C,SAAS/L,GAAc7yC,KAAKsT,GAC5Cy1F,eAAgBn3G,EAChBsuE,QAAStC,EAAWuC,aACpBkE,UAAW/wD,EACXu/B,eACAxoB,UAEJ,CAKA,SAAS2+E,GAAeC,EAASngF,GAC/B,MAAMw2B,EAAM2pD,EAAQzrD,MAAM8B,KACpB,KAACttB,EAAI,OAAEk3E,EAAA,MAAQ9sF,GAAS6sF,GACxB,SAACpF,EAAA,UAAUD,GAAa96E,EACxBqgF,EAAW9+C,GAAOvhC,EAAQqgF,UAC1BxC,EAAYt8C,GAAOvhC,EAAQ69E,WAC3ByC,EAAa/+C,GAAOvhC,EAAQsgF,YAC5BC,EAAiBjtF,EAAMpgB,OACvBstG,EAAkBJ,EAAOltG,OACzButG,EAAoBv3E,EAAKh2B,OAEzBimD,EAAUmI,GAAUthC,EAAQm5B,SAClC,IAAI5uD,EAAS4uD,EAAQ5uD,OACjBD,EAAQ,EAGRo2G,EAAqBx3E,EAAK/R,QAAO,CAACzO,EAAOi4F,IAAaj4F,EAAQi4F,EAASC,OAAO1tG,OAASytG,EAAS9gD,MAAM3sD,OAASytG,EAASE,MAAM3tG,QAAQ,GAQ1I,GAPAwtG,GAAsBP,EAAQW,WAAW5tG,OAASitG,EAAQY,UAAU7tG,OAEhEqtG,IACFh2G,GAAUg2G,EAAiB1C,EAAUxnD,YACnCkqD,EAAiB,GAAKvgF,EAAQghF,aAC/BhhF,EAAQihF,mBAEPP,EAAoB,CAGtBn2G,GAAUk2G,GADazgF,EAAQkhF,cAAgB33G,KAAK+T,IAAIw9F,EAAWuF,EAAShqD,YAAcgqD,EAAShqD,aAEjGqqD,EAAqBD,GAAqBJ,EAAShqD,YACnDqqD,EAAqB,GAAK1gF,EAAQmhF,YAElCX,IACFj2G,GAAUy1B,EAAQohF,gBACjBZ,EAAkBF,EAAWjqD,YAC5BmqD,EAAkB,GAAKxgF,EAAQqhF,eAInC,IAAIC,EAAe,EACnB,MAAMC,EAAe,SAASziD,GAC5Bx0D,EAAQf,KAAK+T,IAAIhT,EAAOksD,EAAI6E,YAAYyD,GAAMx0D,MAAQg3G,EACxD,EA+BA,OA7BA9qD,EAAIkF,OAEJlF,EAAIL,KAAO0nD,EAAUroG,OACrB8zC,EAAK62D,EAAQ7sF,MAAOiuF,GAGpB/qD,EAAIL,KAAOkqD,EAAS7qG,OACpB8zC,EAAK62D,EAAQW,WAAWj3G,OAAOs2G,EAAQY,WAAYQ,GAGnDD,EAAethF,EAAQkhF,cAAiBnG,EAAW,EAAI/6E,EAAQgsD,WAAc,EAC7E1iC,EAAKpgB,GAAOy3E,IACVr3D,EAAKq3D,EAASC,OAAQW,GACtBj4D,EAAKq3D,EAAS9gD,MAAO0hD,GACrBj4D,EAAKq3D,EAASE,MAAOU,EAAA,IAIvBD,EAAe,EAGf9qD,EAAIL,KAAOmqD,EAAW9qG,OACtB8zC,EAAK62D,EAAQC,OAAQmB,GAErB/qD,EAAIsF,UAGJxxD,GAAS6uD,EAAQ7uD,MAEV,CAACA,QAAOC,SACjB,CAyBA,SAASi3G,GAAgB9sD,EAAO10B,EAASv3B,EAAMg5G,GAC7C,MAAM,EAAC9kG,EAAA,MAAGrS,GAAS7B,GACZ6B,MAAOo3G,EAAYtmC,WAAW,KAAC7rE,EAAI,MAAEE,IAAUilD,EACtD,IAAIitD,EAAS,SAcb,MAZe,WAAXF,EACFE,EAAShlG,IAAMpN,EAAOE,GAAS,EAAI,OAAS,QACnCkN,GAAKrS,EAAQ,EACtBq3G,EAAS,OACAhlG,GAAK+kG,EAAap3G,EAAQ,IACnCq3G,EAAS,SAtBb,SAA6BA,EAAQjtD,EAAO10B,EAASv3B,GACnD,MAAM,EAACkU,EAAA,MAAGrS,GAAS7B,EACbm5G,EAAQ5hF,EAAQ6hF,UAAY7hF,EAAQ8hF,aAC1C,MAAe,SAAXH,GAAqBhlG,EAAIrS,EAAQs3G,EAAQltD,EAAMpqD,OAIpC,UAAXq3G,GAAsBhlG,EAAIrS,EAAQs3G,EAAQ,QAA9C,CAGF,CAeMG,CAAoBJ,EAAQjtD,EAAO10B,EAASv3B,KAC9Ck5G,EAAS,UAGJA,CACT,CAKA,SAASK,GAAmBttD,EAAO10B,EAASv3B,GAC1C,MAAMg5G,EAASh5G,EAAKg5G,QAAUzhF,EAAQyhF,QA/CxC,SAAyB/sD,EAAOjsD,GAC9B,MAAM,EAACmU,EAAA,OAAGrS,GAAU9B,EAEpB,OAAImU,EAAIrS,EAAS,EACR,MACEqS,EAAK83C,EAAMnqD,OAASA,EAAS,EAC/B,SAEF,QACT,CAsCkD03G,CAAgBvtD,EAAOjsD,GAEvE,MAAO,CACLk5G,OAAQl5G,EAAKk5G,QAAU3hF,EAAQ2hF,QAAUH,GAAgB9sD,EAAO10B,EAASv3B,EAAMg5G,GAC/EA,SAEJ,CA4BA,SAASS,GAAmBliF,EAASv3B,EAAM05G,EAAWztD,GACpD,MAAM,UAACmtD,EAAS,aAAEC,EAAA,aAAcjlD,GAAgB78B,GAC1C,OAAC2hF,EAAA,OAAQF,GAAUU,EACnBC,EAAiBP,EAAYC,GAC7B,QAACthD,EAAO,SAAEG,EAAQ,WAAEF,EAAA,YAAYC,GAAeW,GAAcxE,GAEnE,IAAIlgD,EAhCN,SAAgBlU,EAAMk5G,GACpB,IAAI,EAAChlG,EAAA,MAAGrS,GAAS7B,EAMjB,MALe,UAAXk5G,EACFhlG,GAAKrS,EACe,WAAXq3G,IACThlG,GAAMrS,EAAQ,GAETqS,CACT,CAwBU0lG,CAAO55G,EAAMk5G,GACrB,MAAM/kG,EAvBR,SAAgBnU,EAAMg5G,EAAQW,GAE5B,IAAI,EAACxlG,EAAA,OAAGrS,GAAU9B,EAQlB,MAPe,QAAXg5G,EACF7kG,GAAKwlG,EAELxlG,GADoB,WAAX6kG,EACJl3G,EAAS63G,EAER73G,EAAS,EAEVqS,CACT,CAYY0lG,CAAO75G,EAAMg5G,EAAQW,GAc/B,MAZe,WAAXX,EACa,SAAXE,EACFhlG,GAAKylG,EACe,UAAXT,IACThlG,GAAKylG,GAEa,SAAXT,EACThlG,GAAKpT,KAAK+T,IAAIkjD,EAASC,GAAcohD,EACjB,UAAXF,IACThlG,GAAKpT,KAAK+T,IAAIqjD,EAAUD,GAAemhD,GAGlC,CACLllG,EAAGsxC,GAAYtxC,EAAG,EAAG+3C,EAAMpqD,MAAQ7B,EAAK6B,OACxCsS,EAAGqxC,GAAYrxC,EAAG,EAAG83C,EAAMnqD,OAAS9B,EAAK8B,QAE7C,CAEA,SAASg4G,GAAYpC,EAAS3wD,EAAOxvB,GACnC,MAAMm5B,EAAUmI,GAAUthC,EAAQm5B,SAElC,MAAiB,WAAV3J,EACH2wD,EAAQxjG,EAAIwjG,EAAQ71G,MAAQ,EAClB,UAAVklD,EACE2wD,EAAQxjG,EAAIwjG,EAAQ71G,MAAQ6uD,EAAQ1pD,MACpC0wG,EAAQxjG,EAAIw8C,EAAQ5pD,IAC5B,CAKA,SAASizG,GAAwBziF,GAC/B,OAAO8/E,GAAa,GAAIE,GAAchgF,GACxC,CAUA,SAAS0iF,GAAkBhzC,EAAWxlD,GACpC,MAAMytC,EAAWztC,GAAWA,EAAQmtD,SAAWntD,EAAQmtD,QAAQ+oC,SAAWl2F,EAAQmtD,QAAQ+oC,QAAQ1wC,UAClG,OAAO/X,EAAW+X,EAAU/X,SAASA,GAAY+X,CACnD,CAEA,MAAMizC,GAAmB,CAEvBC,YAAal6D,EACbn1B,KAAAA,CAAMsvF,GACJ,GAAIA,EAAa1vG,OAAS,EAAG,CAC3B,MAAMslB,EAAOoqF,EAAa,GACpBhpC,EAASphD,EAAKk8B,MAAMx9C,KAAK0iE,OACzBipC,EAAajpC,EAASA,EAAO1mE,OAAS,EAE5C,GAAI6E,MAAQA,KAAKioB,SAAiC,YAAtBjoB,KAAKioB,QAAQxxB,KACvC,OAAOgqB,EAAK4+C,QAAQ9mD,OAAS,GACxB,GAAIkI,EAAKlI,MACd,OAAOkI,EAAKlI,MACP,GAAIuyF,EAAa,GAAKrqF,EAAK+iD,UAAYsnC,EAC5C,OAAOjpC,EAAOphD,EAAK+iD,WAIvB,MAAO,EACT,EACAunC,WAAYr6D,EAGZq4D,WAAYr4D,EAGZs6D,YAAat6D,EACbn4B,KAAAA,CAAM0yF,GACJ,GAAIjrG,MAAQA,KAAKioB,SAAiC,YAAtBjoB,KAAKioB,QAAQxxB,KACvC,OAAOw0G,EAAY1yF,MAAQ,KAAO0yF,EAAY/C,gBAAkB+C,EAAY/C,eAG9E,IAAI3vF,EAAQ0yF,EAAY5rC,QAAQ9mD,OAAS,GAErCA,IACFA,GAAS,MAEX,MAAMxnB,EAAQk6G,EAAY/C,eAI1B,OAHKt3D,EAAc7/C,KACjBwnB,GAASxnB,GAEJwnB,CACT,EACA2yF,UAAAA,CAAWD,GACT,MACMhjF,EADOgjF,EAAYtuD,MAAMyjB,eAAe6qC,EAAYj5D,cACrC+qB,WAAWnJ,SAASq3C,EAAYznC,WACrD,MAAO,CACL1lB,YAAa71B,EAAQ61B,YACrBxmD,gBAAiB2wB,EAAQ3wB,gBACzByuD,YAAa99B,EAAQ89B,YACrBiR,WAAY/uC,EAAQ+uC,WACpBC,iBAAkBhvC,EAAQgvC,iBAC1Bi+B,aAAc,EAElB,EACAiW,cAAAA,GACE,OAAOnrG,KAAKioB,QAAQmjF,SACtB,EACAC,eAAAA,CAAgBJ,GACd,MACMhjF,EADOgjF,EAAYtuD,MAAMyjB,eAAe6qC,EAAYj5D,cACrC+qB,WAAWnJ,SAASq3C,EAAYznC,WACrD,MAAO,CACLve,WAAYh9B,EAAQg9B,WACpBC,SAAUj9B,EAAQi9B,SAEtB,EACAomD,WAAY56D,EAGZs4D,UAAWt4D,EAGX66D,aAAc76D,EACd23D,OAAQ33D,EACR86D,YAAa96D,GAYf,SAAS+6D,GAA2B/zC,EAAWrjE,EAAMoqD,EAAKrhD,GACxD,MAAM6wB,EAASypC,EAAUrjE,GAAMyM,KAAK29C,EAAKrhD,GAEzC,MAAsB,qBAAX6wB,EACF08E,GAAiBt2G,GAAMyM,KAAK29C,EAAKrhD,GAGnC6wB,CACT,CAEO,MAAMy9E,WAAgBpxB,GAO3BxuE,WAAAA,CAAY4uD,GACV3uD,QAEA/L,KAAKpI,QAAU,EACfoI,KAAKm4D,QAAU,GACfn4D,KAAK2rG,oBAAiBhyG,EACtBqG,KAAK4rG,WAAQjyG,EACbqG,KAAK6rG,uBAAoBlyG,EACzBqG,KAAK8rG,cAAgB,GACrB9rG,KAAKk7D,iBAAcvhE,EACnBqG,KAAK2+D,cAAWhlE,EAChBqG,KAAK28C,MAAQ+d,EAAO/d,MACpB38C,KAAKioB,QAAUyyC,EAAOzyC,QACtBjoB,KAAK+rG,gBAAapyG,EAClBqG,KAAKub,WAAQ5hB,EACbqG,KAAK+oG,gBAAapvG,EAClBqG,KAAKmxB,UAAOx3B,EACZqG,KAAKgpG,eAAYrvG,EACjBqG,KAAKqoG,YAAS1uG,EACdqG,KAAK4pG,YAASjwG,EACdqG,KAAK0pG,YAAS/vG,EACdqG,KAAK4E,OAAIjL,EACTqG,KAAK6E,OAAIlL,EACTqG,KAAKxN,YAASmH,EACdqG,KAAKzN,WAAQoH,EACbqG,KAAKgsG,YAASryG,EACdqG,KAAKisG,YAAStyG,EAGdqG,KAAKksG,iBAAcvyG,EACnBqG,KAAKmsG,sBAAmBxyG,EACxBqG,KAAKosG,qBAAkBzyG,CACzB,CAEAolE,UAAAA,CAAW92C,GACTjoB,KAAKioB,QAAUA,EACfjoB,KAAK6rG,uBAAoBlyG,EACzBqG,KAAK2+D,cAAWhlE,CAClB,CAKAuqE,kBAAAA,GACE,MAAMpG,EAAS99D,KAAK6rG,kBAEpB,GAAI/tC,EACF,OAAOA,EAGT,MAAMnhB,EAAQ38C,KAAK28C,MACb10B,EAAUjoB,KAAKioB,QAAQ6jC,WAAW9rD,KAAKukD,cACvCrhC,EAAO+E,EAAQmzD,SAAWz+B,EAAM10B,QAAQr0B,WAAaq0B,EAAQ+4B,WAC7DA,EAAa,IAAIyZ,GAAWz6D,KAAK28C,MAAOz5B,GAK9C,OAJIA,EAAKqnC,aACPvqD,KAAK6rG,kBAAoB5uG,OAAOgnE,OAAOjjB,IAGlCA,CACT,CAKAuD,UAAAA,GACE,OAAOvkD,KAAK2+D,WACZ3+D,KAAK2+D,UAtLqB96C,EAsLW7jB,KAAK28C,MAAM4H,aAtLd6jD,EAsL4BpoG,KAtLnB6qG,EAsLyB7qG,KAAK8rG,cArLpEhiD,GAAcjmC,EAAQ,CAC3BukF,UACAyC,eACA5rG,KAAM,cAJV,IAA8B4kB,EAAQukF,EAASyC,CAuL7C,CAEAwB,QAAAA,CAASn6F,EAAS+V,GAChB,MAAM,UAACyvC,GAAazvC,EAEd2iF,EAAca,GAA2B/zC,EAAW,cAAe13D,KAAMkS,GACzEqJ,EAAQkwF,GAA2B/zC,EAAW,QAAS13D,KAAMkS,GAC7D64F,EAAaU,GAA2B/zC,EAAW,aAAc13D,KAAMkS,GAE7E,IAAI41C,EAAQ,GAKZ,OAJAA,EAAQggD,GAAahgD,EAAOkgD,GAAc4C,IAC1C9iD,EAAQggD,GAAahgD,EAAOkgD,GAAczsF,IAC1CusC,EAAQggD,GAAahgD,EAAOkgD,GAAc+C,IAEnCjjD,CACT,CAEAwkD,aAAAA,CAAczB,EAAc5iF,GAC1B,OAAOwiF,GACLgB,GAA2BxjF,EAAQyvC,UAAW,aAAc13D,KAAM6qG,GAEtE,CAEA0B,OAAAA,CAAQ1B,EAAc5iF,GACpB,MAAM,UAACyvC,GAAazvC,EACdukF,EAAY,GAgBlB,OAdAj7D,EAAKs5D,GAAe34F,IAClB,MAAM02F,EAAW,CACfC,OAAQ,GACR/gD,MAAO,GACPghD,MAAO,IAEHruF,EAASiwF,GAAkBhzC,EAAWxlD,GAC5C41F,GAAac,EAASC,OAAQb,GAAcyD,GAA2BhxF,EAAQ,cAAeza,KAAMkS,KACpG41F,GAAac,EAAS9gD,MAAO2jD,GAA2BhxF,EAAQ,QAASza,KAAMkS,IAC/E41F,GAAac,EAASE,MAAOd,GAAcyD,GAA2BhxF,EAAQ,aAAcza,KAAMkS,KAElGs6F,EAAUhxG,KAAKotG,EAAA,IAGV4D,CACT,CAEAC,YAAAA,CAAa5B,EAAc5iF,GACzB,OAAOwiF,GACLgB,GAA2BxjF,EAAQyvC,UAAW,YAAa13D,KAAM6qG,GAErE,CAGA6B,SAAAA,CAAU7B,EAAc5iF,GACtB,MAAM,UAACyvC,GAAazvC,EAEdsjF,EAAeE,GAA2B/zC,EAAW,eAAgB13D,KAAM6qG,GAC3ExC,EAASoD,GAA2B/zC,EAAW,SAAU13D,KAAM6qG,GAC/DW,EAAcC,GAA2B/zC,EAAW,cAAe13D,KAAM6qG,GAE/E,IAAI/iD,EAAQ,GAKZ,OAJAA,EAAQggD,GAAahgD,EAAOkgD,GAAcuD,IAC1CzjD,EAAQggD,GAAahgD,EAAOkgD,GAAcK,IAC1CvgD,EAAQggD,GAAahgD,EAAOkgD,GAAcwD,IAEnC1jD,CACT,CAKA6kD,YAAAA,CAAa1kF,GACX,MAAM44B,EAAS7gD,KAAKm4D,QACdh5D,EAAOa,KAAK28C,MAAMx9C,KAClB+sG,EAAc,GACdC,EAAmB,GACnBC,EAAkB,GACxB,IACI3xG,EAAGK,EADH+vG,EAAe,GAGnB,IAAKpwG,EAAI,EAAGK,EAAM+lD,EAAO1lD,OAAQV,EAAIK,IAAOL,EAC1CowG,EAAarvG,KAAKysG,GAAkBjoG,KAAK28C,MAAOkE,EAAOpmD,KAyBzD,OArBIwtB,EAAQzJ,SACVqsF,EAAeA,EAAarsF,QAAO,CAACgL,EAAS/W,EAAOlT,IAAU0oB,EAAQzJ,OAAOgL,EAAS/W,EAAOlT,EAAOJ,MAIlG8oB,EAAQ2kF,WACV/B,EAAeA,EAAa3lF,MAAK,CAACvgB,EAAG/F,IAAMqpB,EAAQ2kF,SAASjoG,EAAG/F,EAAGO,MAIpEoyC,EAAKs5D,GAAe34F,IAClB,MAAMuI,EAASiwF,GAAkBziF,EAAQyvC,UAAWxlD,GACpDg6F,EAAY1wG,KAAKiwG,GAA2BhxF,EAAQ,aAAcza,KAAMkS,IACxEi6F,EAAiB3wG,KAAKiwG,GAA2BhxF,EAAQ,kBAAmBza,KAAMkS,IAClFk6F,EAAgB5wG,KAAKiwG,GAA2BhxF,EAAQ,iBAAkBza,KAAMkS,GAAA,IAGlFlS,KAAKksG,YAAcA,EACnBlsG,KAAKmsG,iBAAmBA,EACxBnsG,KAAKosG,gBAAkBA,EACvBpsG,KAAK+rG,WAAalB,EACXA,CACT,CAEA1wC,MAAAA,CAAOnhB,EAASo7C,GACd,MAAMnsE,EAAUjoB,KAAKioB,QAAQ6jC,WAAW9rD,KAAKukD,cACvC1D,EAAS7gD,KAAKm4D,QACpB,IAAI7uC,EACAuhF,EAAe,GAEnB,GAAKhqD,EAAO1lD,OAML,CACL,MAAMjE,EAAWuwG,GAAYx/E,EAAQ/wB,UAAU4J,KAAKd,KAAM6gD,EAAQ7gD,KAAK2rG,gBACvEd,EAAe7qG,KAAK2sG,aAAa1kF,GAEjCjoB,KAAKub,MAAQvb,KAAKqsG,SAASxB,EAAc5iF,GACzCjoB,KAAK+oG,WAAa/oG,KAAKssG,cAAczB,EAAc5iF,GACnDjoB,KAAKmxB,KAAOnxB,KAAKusG,QAAQ1B,EAAc5iF,GACvCjoB,KAAKgpG,UAAYhpG,KAAKysG,aAAa5B,EAAc5iF,GACjDjoB,KAAKqoG,OAASroG,KAAK0sG,UAAU7B,EAAc5iF,GAE3C,MAAMv3B,EAAOsP,KAAK4rG,MAAQzD,GAAenoG,KAAMioB,GACzC4kF,EAAkB5vG,OAAO4hB,OAAO,CAAC,EAAG3nB,EAAUxG,GAC9C05G,EAAYH,GAAmBjqG,KAAK28C,MAAO10B,EAAS4kF,GACpDC,EAAkB3C,GAAmBliF,EAAS4kF,EAAiBzC,EAAWpqG,KAAK28C,OAErF38C,KAAK4pG,OAASQ,EAAUR,OACxB5pG,KAAK0pG,OAASU,EAAUV,OAExBpgF,EAAa,CACX1xB,QAAS,EACTgN,EAAGkoG,EAAgBloG,EACnBC,EAAGioG,EAAgBjoG,EACnBtS,MAAO7B,EAAK6B,MACZC,OAAQ9B,EAAK8B,OACbw5G,OAAQ90G,EAAS0N,EACjBqnG,OAAQ/0G,EAAS2N,QA9BE,IAAjB7E,KAAKpI,UACP0xB,EAAa,CACX1xB,QAAS,IAgCfoI,KAAK8rG,cAAgBjB,EACrB7qG,KAAK2+D,cAAWhlE,EAEZ2vB,GACFtpB,KAAKkkE,qBAAqB/J,OAAOn6D,KAAMspB,GAGrC0vB,GAAW/wB,EAAQ8kF,UACrB9kF,EAAQ8kF,SAASjsG,KAAKd,KAAM,CAAC28C,MAAO38C,KAAK28C,MAAOyrD,QAASpoG,KAAMo0F,UAEnE,CAEA4Y,SAAAA,CAAUC,EAAcxuD,EAAK/tD,EAAMu3B,GACjC,MAAMilF,EAAgBltG,KAAKmtG,iBAAiBF,EAAcv8G,EAAMu3B,GAEhEw2B,EAAImH,OAAOsnD,EAAclpB,GAAIkpB,EAAcjpB,IAC3CxlC,EAAImH,OAAOsnD,EAAchpB,GAAIgpB,EAAc/oB,IAC3C1lC,EAAImH,OAAOsnD,EAAcE,GAAIF,EAAcG,GAC7C,CAEAF,gBAAAA,CAAiBF,EAAcv8G,EAAMu3B,GACnC,MAAM,OAAC2hF,EAAM,OAAEF,GAAU1pG,MACnB,UAAC8pG,EAAA,aAAWhlD,GAAgB78B,GAC5B,QAACwgC,EAAO,SAAEG,EAAQ,WAAEF,EAAA,YAAYC,GAAeW,GAAcxE,IAC5DlgD,EAAG0oG,EAAKzoG,EAAG0oG,GAAON,GACnB,MAAC16G,EAAA,OAAOC,GAAU9B,EACxB,IAAIszF,EAAIE,EAAIkpB,EAAInpB,EAAIE,EAAIkpB,EAgDxB,MA9Ce,WAAX3D,GACFvlB,EAAKopB,EAAO/6G,EAAS,EAEN,SAAXo3G,GACF5lB,EAAKspB,EACLppB,EAAKF,EAAK8lB,EAGV7lB,EAAKE,EAAK2lB,EACVuD,EAAKlpB,EAAK2lB,IAEV9lB,EAAKspB,EAAM/6G,EACX2xF,EAAKF,EAAK8lB,EAGV7lB,EAAKE,EAAK2lB,EACVuD,EAAKlpB,EAAK2lB,GAGZsD,EAAKppB,IAGHE,EADa,SAAX0lB,EACG0D,EAAM97G,KAAK+T,IAAIkjD,EAASC,GAAeohD,EACxB,UAAXF,EACJ0D,EAAM/6G,EAAQf,KAAK+T,IAAIqjD,EAAUD,GAAemhD,EAEhD9pG,KAAKgsG,OAGG,QAAXtC,GACFzlB,EAAKspB,EACLppB,EAAKF,EAAK6lB,EAGV9lB,EAAKE,EAAK4lB,EACVsD,EAAKlpB,EAAK4lB,IAEV7lB,EAAKspB,EAAM/6G,EACX2xF,EAAKF,EAAK6lB,EAGV9lB,EAAKE,EAAK4lB,EACVsD,EAAKlpB,EAAK4lB,GAEZuD,EAAKppB,GAEA,CAACD,KAAIE,KAAIkpB,KAAInpB,KAAIE,KAAIkpB,KAC9B,CAEAvnB,SAAAA,CAAUt2B,EAAI/Q,EAAKx2B,GACjB,MAAM1M,EAAQvb,KAAKub,MACbpgB,EAASogB,EAAMpgB,OACrB,IAAI2qG,EAAWmD,EAAcxuG,EAE7B,GAAIU,EAAQ,CACV,MAAM6pG,EAAY9wC,GAAcjsC,EAAQksC,IAAKn0D,KAAK4E,EAAG5E,KAAKzN,OAa1D,IAXAi9D,EAAG5qD,EAAI4lG,GAAYxqG,KAAMioB,EAAQ60D,WAAY70D,GAE7Cw2B,EAAIwJ,UAAY+8C,EAAU/8C,UAAUhgC,EAAQ60D,YAC5Cr+B,EAAIyJ,aAAe,SAEnB49C,EAAYt8C,GAAOvhC,EAAQ69E,WAC3BmD,EAAehhF,EAAQghF,aAEvBxqD,EAAIgJ,UAAYx/B,EAAQulF,WACxB/uD,EAAIL,KAAO0nD,EAAUroG,OAEhBhD,EAAI,EAAGA,EAAIU,IAAUV,EACxBgkD,EAAI8J,SAAShtC,EAAM9gB,GAAIuqG,EAAUpgG,EAAE4qD,EAAG5qD,GAAI4qD,EAAG3qD,EAAIihG,EAAUxnD,WAAa,GACxEkR,EAAG3qD,GAAKihG,EAAUxnD,WAAa2qD,EAE3BxuG,EAAI,IAAMU,IACZq0D,EAAG3qD,GAAKojB,EAAQihF,kBAAoBD,GAI5C,CAKAwE,aAAAA,CAAchvD,EAAK+Q,EAAI/0D,EAAGuqG,EAAW/8E,GACnC,MAAMijF,EAAalrG,KAAKksG,YAAYzxG,GAC9B4wG,EAAkBrrG,KAAKmsG,iBAAiB1xG,IACxC,UAACsoG,EAAA,SAAWC,GAAY/6E,EACxBqgF,EAAW9+C,GAAOvhC,EAAQqgF,UAC1BoF,EAASlD,GAAYxqG,KAAM,OAAQioB,GACnC0lF,EAAY3I,EAAUpgG,EAAE8oG,GACxBE,EAAU7K,EAAYuF,EAAShqD,YAAcgqD,EAAShqD,WAAaykD,GAAa,EAAI,EACpF8K,EAASr+C,EAAG3qD,EAAI+oG,EAEtB,GAAI3lF,EAAQg7E,cAAe,CACzB,MAAMuC,EAAc,CAClBrgD,OAAQ3zD,KAAKsR,IAAIkgG,EAAUD,GAAa,EACxC99C,WAAYomD,EAAgBpmD,WAC5BC,SAAUmmD,EAAgBnmD,SAC1Ba,YAAa,GAIT0nB,EAAUu3B,EAAUzwC,WAAWo5C,EAAW3K,GAAYA,EAAW,EACjEt1B,EAAUmgC,EAAS9K,EAAY,EAGrCtkD,EAAI+I,YAAcv/B,EAAQ6lF,mBAC1BrvD,EAAIgJ,UAAYx/B,EAAQ6lF,mBACxBppD,GAAUjG,EAAK+mD,EAAa/3B,EAASC,GAGrCjvB,EAAI+I,YAAc0jD,EAAWptD,YAC7BW,EAAIgJ,UAAYyjD,EAAW5zG,gBAC3BotD,GAAUjG,EAAK+mD,EAAa/3B,EAASC,OAChC,CAELjvB,EAAIiD,UAAY7Q,EAASq6D,EAAWnlD,aAAev0D,KAAK+T,OAAOtI,OAAOs/C,OAAO2uD,EAAWnlD,cAAiBmlD,EAAWnlD,aAAe,EACnItH,EAAI+I,YAAc0jD,EAAWptD,YAC7BW,EAAI+mC,YAAY0lB,EAAWl0C,YAAc,IACzCvY,EAAIgnC,eAAiBylB,EAAWj0C,kBAAoB,EAGpD,MAAM82C,EAAS/I,EAAUzwC,WAAWo5C,EAAW3K,GACzCgL,EAAShJ,EAAUzwC,WAAWywC,EAAU1wC,MAAMq5C,EAAW,GAAI3K,EAAW,GACxE9N,EAAe5rC,GAAc4hD,EAAWhW,cAE1Cj4F,OAAOs/C,OAAO24C,GAAcrK,MAAKvpD,GAAW,IAANA,KACxCmd,EAAI8G,YACJ9G,EAAIgJ,UAAYx/B,EAAQ6lF,mBACxBtlD,GAAmB/J,EAAK,CACtB75C,EAAGmpG,EACHlpG,EAAGgpG,EACHn9F,EAAGsyF,EACHxhE,EAAGuhE,EACH59C,OAAQ+vC,IAEVz2C,EAAIrrD,OACJqrD,EAAItqD,SAGJsqD,EAAIgJ,UAAYyjD,EAAW5zG,gBAC3BmnD,EAAI8G,YACJiD,GAAmB/J,EAAK,CACtB75C,EAAGopG,EACHnpG,EAAGgpG,EAAS,EACZn9F,EAAGsyF,EAAW,EACdxhE,EAAGuhE,EAAY,EACf59C,OAAQ+vC,IAEVz2C,EAAIrrD,SAGJqrD,EAAIgJ,UAAYx/B,EAAQ6lF,mBACxBrvD,EAAIoJ,SAASkmD,EAAQF,EAAQ7K,EAAUD,GACvCtkD,EAAIwvD,WAAWF,EAAQF,EAAQ7K,EAAUD,GAEzCtkD,EAAIgJ,UAAYyjD,EAAW5zG,gBAC3BmnD,EAAIoJ,SAASmmD,EAAQH,EAAS,EAAG7K,EAAW,EAAGD,EAAY,IAK/DtkD,EAAIgJ,UAAYznD,KAAKosG,gBAAgB3xG,EACvC,CAEAyzG,QAAAA,CAAS1+C,EAAI/Q,EAAKx2B,GAChB,MAAM,KAACkJ,GAAQnxB,MACT,YAACopG,EAAA,UAAa+E,EAAA,cAAWhF,EAAA,UAAepG,EAAA,SAAWC,EAAA,WAAU/uB,GAAchsD,EAC3EqgF,EAAW9+C,GAAOvhC,EAAQqgF,UAChC,IAAI8F,EAAiB9F,EAAShqD,WAC1B+vD,EAAe,EAEnB,MAAMrJ,EAAY9wC,GAAcjsC,EAAQksC,IAAKn0D,KAAK4E,EAAG5E,KAAKzN,OAEpD+7G,EAAiB,SAASvnD,GAC9BtI,EAAI8J,SAASxB,EAAMi+C,EAAUpgG,EAAE4qD,EAAG5qD,EAAIypG,GAAe7+C,EAAG3qD,EAAIupG,EAAiB,GAC7E5+C,EAAG3qD,GAAKupG,EAAiBhF,CAC3B,EAEMmF,EAA0BvJ,EAAU/8C,UAAUkmD,GACpD,IAAIvF,EAAU4F,EAAW1mD,EAAOrtD,EAAG+G,EAAGqwC,EAAM+R,EAiB5C,IAfAnF,EAAIwJ,UAAYkmD,EAChB1vD,EAAIyJ,aAAe,SACnBzJ,EAAIL,KAAOkqD,EAAS7qG,OAEpB+xD,EAAG5qD,EAAI4lG,GAAYxqG,KAAMuuG,EAAyBtmF,GAGlDw2B,EAAIgJ,UAAYx/B,EAAQmjF,UACxB75D,EAAKvxC,KAAK+oG,WAAYuF,GAEtBD,EAAelF,GAA6C,UAA5BoF,EACd,WAAdJ,EAA0BnL,EAAW,EAAI/uB,EAAe+uB,EAAW,EAAI/uB,EACvE,EAGCx5E,EAAI,EAAGo3C,EAAO1gB,EAAKh2B,OAAQV,EAAIo3C,IAAQp3C,EAAG,CAc7C,IAbAmuG,EAAWz3E,EAAK12B,GAChB+zG,EAAYxuG,KAAKosG,gBAAgB3xG,GAEjCgkD,EAAIgJ,UAAY+mD,EAChBj9D,EAAKq3D,EAASC,OAAQyF,GAEtBxmD,EAAQ8gD,EAAS9gD,MAEbqhD,GAAiBrhD,EAAM3sD,SACzB6E,KAAKytG,cAAchvD,EAAK+Q,EAAI/0D,EAAGuqG,EAAW/8E,GAC1CmmF,EAAiB58G,KAAK+T,IAAI+iG,EAAShqD,WAAYykD,IAG5CvhG,EAAI,EAAGoiD,EAAOkE,EAAM3sD,OAAQqG,EAAIoiD,IAAQpiD,EAC3C8sG,EAAexmD,EAAMtmD,IAErB4sG,EAAiB9F,EAAShqD,WAG5B/M,EAAKq3D,EAASE,MAAOwF,EACvB,CAGAD,EAAe,EACfD,EAAiB9F,EAAShqD,WAG1B/M,EAAKvxC,KAAKgpG,UAAWsF,GACrB9+C,EAAG3qD,GAAKukG,CACV,CAEAqF,UAAAA,CAAWj/C,EAAI/Q,EAAKx2B,GAClB,MAAMogF,EAASroG,KAAKqoG,OACdltG,EAASktG,EAAOltG,OACtB,IAAIotG,EAAY9tG,EAEhB,GAAIU,EAAQ,CACV,MAAM6pG,EAAY9wC,GAAcjsC,EAAQksC,IAAKn0D,KAAK4E,EAAG5E,KAAKzN,OAa1D,IAXAi9D,EAAG5qD,EAAI4lG,GAAYxqG,KAAMioB,EAAQymF,YAAazmF,GAC9CunC,EAAG3qD,GAAKojB,EAAQohF,gBAEhB5qD,EAAIwJ,UAAY+8C,EAAU/8C,UAAUhgC,EAAQymF,aAC5CjwD,EAAIyJ,aAAe,SAEnBqgD,EAAa/+C,GAAOvhC,EAAQsgF,YAE5B9pD,EAAIgJ,UAAYx/B,EAAQ0mF,YACxBlwD,EAAIL,KAAOmqD,EAAW9qG,OAEjBhD,EAAI,EAAGA,EAAIU,IAAUV,EACxBgkD,EAAI8J,SAAS8/C,EAAO5tG,GAAIuqG,EAAUpgG,EAAE4qD,EAAG5qD,GAAI4qD,EAAG3qD,EAAI0jG,EAAWjqD,WAAa,GAC1EkR,EAAG3qD,GAAK0jG,EAAWjqD,WAAar2B,EAAQqhF,cAG9C,CAEAlkB,cAAAA,CAAe51B,EAAI/Q,EAAKmwD,EAAa3mF,GACnC,MAAM,OAAC2hF,EAAM,OAAEF,GAAU1pG,MACnB,EAAC4E,EAAA,EAAGC,GAAK2qD,GACT,MAACj9D,EAAA,OAAOC,GAAUo8G,GAClB,QAACnmD,EAAA,SAASG,EAAA,WAAUF,EAAA,YAAYC,GAAeW,GAAcrhC,EAAQ68B,cAE3ErG,EAAIgJ,UAAYx/B,EAAQ3wB,gBACxBmnD,EAAI+I,YAAcv/B,EAAQ61B,YAC1BW,EAAIiD,UAAYz5B,EAAQ89B,YAExBtH,EAAI8G,YACJ9G,EAAIkH,OAAO/gD,EAAI6jD,EAAS5jD,GACT,QAAX6kG,GACF1pG,KAAKgtG,UAAUx9C,EAAI/Q,EAAKmwD,EAAa3mF,GAEvCw2B,EAAImH,OAAOhhD,EAAIrS,EAAQq2D,EAAU/jD,GACjC45C,EAAIowD,iBAAiBjqG,EAAIrS,EAAOsS,EAAGD,EAAIrS,EAAOsS,EAAI+jD,GACnC,WAAX8gD,GAAkC,UAAXE,GACzB5pG,KAAKgtG,UAAUx9C,EAAI/Q,EAAKmwD,EAAa3mF,GAEvCw2B,EAAImH,OAAOhhD,EAAIrS,EAAOsS,EAAIrS,EAASm2D,GACnClK,EAAIowD,iBAAiBjqG,EAAIrS,EAAOsS,EAAIrS,EAAQoS,EAAIrS,EAAQo2D,EAAa9jD,EAAIrS,GAC1D,WAAXk3G,GACF1pG,KAAKgtG,UAAUx9C,EAAI/Q,EAAKmwD,EAAa3mF,GAEvCw2B,EAAImH,OAAOhhD,EAAI8jD,EAAY7jD,EAAIrS,GAC/BisD,EAAIowD,iBAAiBjqG,EAAGC,EAAIrS,EAAQoS,EAAGC,EAAIrS,EAASk2D,GACrC,WAAXghD,GAAkC,SAAXE,GACzB5pG,KAAKgtG,UAAUx9C,EAAI/Q,EAAKmwD,EAAa3mF,GAEvCw2B,EAAImH,OAAOhhD,EAAGC,EAAI4jD,GAClBhK,EAAIowD,iBAAiBjqG,EAAGC,EAAGD,EAAI6jD,EAAS5jD,GACxC45C,EAAIiH,YAEJjH,EAAIrrD,OAEA60B,EAAQ89B,YAAc,GACxBtH,EAAItqD,QAER,CAMA26G,sBAAAA,CAAuB7mF,GACrB,MAAM00B,EAAQ38C,KAAK28C,MACb6a,EAAQx3D,KAAKk7D,YACb6zC,EAAQv3C,GAASA,EAAM5yD,EACvBoqG,EAAQx3C,GAASA,EAAM3yD,EAC7B,GAAIkqG,GAASC,EAAO,CAClB,MAAM93G,EAAWuwG,GAAYx/E,EAAQ/wB,UAAU4J,KAAKd,KAAMA,KAAKm4D,QAASn4D,KAAK2rG,gBAC7E,IAAKz0G,EACH,OAEF,MAAMxG,EAAOsP,KAAK4rG,MAAQzD,GAAenoG,KAAMioB,GACzC4kF,EAAkB5vG,OAAO4hB,OAAO,CAAC,EAAG3nB,EAAU8I,KAAK4rG,OACnDxB,EAAYH,GAAmBttD,EAAO10B,EAAS4kF,GAC/C5mD,EAAQkkD,GAAmBliF,EAAS4kF,EAAiBzC,EAAWztD,GAClEoyD,EAAM90C,MAAQhU,EAAMrhD,GAAKoqG,EAAM/0C,MAAQhU,EAAMphD,IAC/C7E,KAAK4pG,OAASQ,EAAUR,OACxB5pG,KAAK0pG,OAASU,EAAUV,OACxB1pG,KAAKzN,MAAQ7B,EAAK6B,MAClByN,KAAKxN,OAAS9B,EAAK8B,OACnBwN,KAAKgsG,OAAS90G,EAAS0N,EACvB5E,KAAKisG,OAAS/0G,EAAS2N,EACvB7E,KAAKkkE,qBAAqB/J,OAAOn6D,KAAMimD,IAG7C,CAMAgpD,WAAAA,GACE,QAASjvG,KAAKpI,OAChB,CAEAsgE,IAAAA,CAAKzZ,GACH,MAAMx2B,EAAUjoB,KAAKioB,QAAQ6jC,WAAW9rD,KAAKukD,cAC7C,IAAI3sD,EAAUoI,KAAKpI,QAEnB,IAAKA,EACH,OAGFoI,KAAK8uG,uBAAuB7mF,GAE5B,MAAM2mF,EAAc,CAClBr8G,MAAOyN,KAAKzN,MACZC,OAAQwN,KAAKxN,QAETg9D,EAAK,CACT5qD,EAAG5E,KAAK4E,EACRC,EAAG7E,KAAK6E,GAIVjN,EAAUpG,KAAKub,IAAInV,GAAW,KAAO,EAAIA,EAEzC,MAAMwpD,EAAUmI,GAAUthC,EAAQm5B,SAG5B8tD,EAAoBlvG,KAAKub,MAAMpgB,QAAU6E,KAAK+oG,WAAW5tG,QAAU6E,KAAKmxB,KAAKh2B,QAAU6E,KAAKgpG,UAAU7tG,QAAU6E,KAAKqoG,OAAOltG,OAE9H8sB,EAAQmzD,SAAW8zB,IACrBzwD,EAAIkF,OACJlF,EAAI0wD,YAAcv3G,EAGlBoI,KAAKolF,eAAe51B,EAAI/Q,EAAKmwD,EAAa3mF,GAE1C0sC,GAAsBlW,EAAKx2B,EAAQq9E,eAEnC91C,EAAG3qD,GAAKu8C,EAAQ3pD,IAGhBuI,KAAK8lF,UAAUt2B,EAAI/Q,EAAKx2B,GAGxBjoB,KAAKkuG,SAAS1+C,EAAI/Q,EAAKx2B,GAGvBjoB,KAAKyuG,WAAWj/C,EAAI/Q,EAAKx2B,GAEzB+sC,GAAqBvW,EAAKx2B,EAAQq9E,eAElC7mD,EAAIsF,UAER,CAMAgwC,iBAAAA,GACE,OAAO/zF,KAAKm4D,SAAW,EACzB,CAOA67B,iBAAAA,CAAkBC,EAAgB0T,GAChC,MAAMzT,EAAal0F,KAAKm4D,QAClBtX,EAASozC,EAAev1E,KAAI1lB,IAA2B,IAA1B,aAACg5C,EAAY,MAAEv/B,GAAMzZ,EACtD,MAAM4pB,EAAO5iB,KAAK28C,MAAMyjB,eAAepuB,GAEvC,IAAKpvB,EACH,MAAM,IAAI7mB,MAAM,kCAAoCi2C,GAGtD,MAAO,CACLA,eACAxoB,QAAS5G,EAAKzjB,KAAKsT,GACnBA,QACD,IAEGumC,GAAWtH,EAAewiD,EAAYrzC,GACtCuuD,EAAkBpvG,KAAKqvG,iBAAiBxuD,EAAQ8mD,IAElD3uD,GAAWo2D,KACbpvG,KAAKm4D,QAAUtX,EACf7gD,KAAK2rG,eAAiBhE,EACtB3nG,KAAKsvG,qBAAsB,EAC3BtvG,KAAKm6D,QAAO,GAEhB,CASAisC,WAAAA,CAAYpiG,EAAGowF,GAA4B,IAApBI,IAAA90F,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,KAAAA,UAAA,GACrB,GAAI00F,GAAUp0F,KAAKsvG,oBACjB,OAAO,EAETtvG,KAAKsvG,qBAAsB,EAE3B,MAAMrnF,EAAUjoB,KAAKioB,QACfisE,EAAal0F,KAAKm4D,SAAW,GAC7BtX,EAAS7gD,KAAK20F,mBAAmB3wF,EAAGkwF,EAAYE,EAAQI,GAKxD4a,EAAkBpvG,KAAKqvG,iBAAiBxuD,EAAQ78C,GAGhDg1C,EAAUo7C,IAAW1iD,EAAemP,EAAQqzC,IAAekb,EAgBjE,OAbIp2D,IACFh5C,KAAKm4D,QAAUtX,GAEX54B,EAAQmzD,SAAWnzD,EAAQ8kF,YAC7B/sG,KAAK2rG,eAAiB,CACpB/mG,EAAGZ,EAAEY,EACLC,EAAGb,EAAEa,GAGP7E,KAAKm6D,QAAO,EAAMi6B,KAIfp7C,CACT,CAWA27C,kBAAAA,CAAmB3wF,EAAGkwF,EAAYE,EAAQI,GACxC,MAAMvsE,EAAUjoB,KAAKioB,QAErB,GAAe,aAAXjkB,EAAE/E,KACJ,MAAO,GAGT,IAAKu1F,EAEH,OAAON,EAIT,MAAMrzC,EAAS7gD,KAAK28C,MAAMu2C,0BAA0BlvF,EAAGikB,EAAQxxB,KAAMwxB,EAASmsE,GAM9E,OAJInsE,EAAQwpB,SACVoP,EAAOpP,UAGFoP,CACT,CASAwuD,gBAAAA,CAAiBxuD,EAAQ78C,GACvB,MAAM,OAACgoG,EAAA,OAAQC,EAAA,QAAQhkF,GAAWjoB,KAC5B9I,EAAWuwG,GAAYx/E,EAAQ/wB,UAAU4J,KAAKd,KAAM6gD,EAAQ78C,GAClE,OAAoB,IAAb9M,IAAuB80G,IAAW90G,EAAS0N,GAAKqnG,IAAW/0G,EAAS2N,EAC7E,GACD8Y,EAAAA,EAAAA,GAxvBY+tF,GAAgB,cAKNjE,IAqvBvB,IAAA8H,GAAe,CACbv3F,GAAI,UACJ2uF,SAAU+E,GACVjE,eAEA+H,SAAAA,CAAU7yD,EAAOogD,EAAO90E,GAClBA,IACF00B,EAAMyrD,QAAU,IAAIsD,GAAQ,CAAC/uD,QAAO10B,YAExC,EAEA02D,YAAAA,CAAahiC,EAAOogD,EAAO90E,GACrB00B,EAAMyrD,SACRzrD,EAAMyrD,QAAQrpC,WAAW92C,EAE7B,EAEAuM,KAAAA,CAAMmoB,EAAOogD,EAAO90E,GACd00B,EAAMyrD,SACRzrD,EAAMyrD,QAAQrpC,WAAW92C,EAE7B,EAEAwnF,SAAAA,CAAU9yD,GACR,MAAMyrD,EAAUzrD,EAAMyrD,QAEtB,GAAIA,GAAWA,EAAQ6G,cAAe,CACpC,MAAMhhG,EAAO,CACXm6F,WAGF,IAA8E,IAA1EzrD,EAAM4jC,cAAc,oBAAqB,IAAItyE,EAAMk8E,YAAY,IACjE,OAGFie,EAAQlwC,KAAKvb,EAAM8B,KAEnB9B,EAAM4jC,cAAc,mBAAoBtyE,GAE5C,EAEA24F,UAAAA,CAAWjqD,EAAO1uC,GAChB,GAAI0uC,EAAMyrD,QAAS,CAEjB,MAAM32B,EAAmBxjE,EAAKmmF,OAC1Bz3C,EAAMyrD,QAAQhC,YAAYn4F,EAAKmjD,MAAOqgB,EAAkBxjE,EAAKumF,eAE/DvmF,EAAK+qC,SAAU,GAGrB,EAEAqH,SAAU,CACR+6B,SAAS,EACT2xB,SAAU,KACV71G,SAAU,UACVI,gBAAiB,kBACjBk2G,WAAY,OACZ1H,UAAW,CACTr2D,OAAQ,QAEVw5D,aAAc,EACdC,kBAAmB,EACnBpsB,WAAY,OACZsuB,UAAW,OACXhC,YAAa,EACbd,SAAU,CAAC,EAEX6F,UAAW,OACXQ,YAAa,OACbrF,cAAe,EACfD,gBAAiB,EACjBd,WAAY,CACV94D,OAAQ,QAEVi/D,YAAa,OACbttD,QAAS,EACT2oD,aAAc,EACdD,UAAW,EACXhlD,aAAc,EACdi+C,UAAWA,CAACtkD,EAAKv7B,IAASA,EAAKolF,SAAS53G,KACxCsyG,SAAUA,CAACvkD,EAAKv7B,IAASA,EAAKolF,SAAS53G,KACvCo9G,mBAAoB,OACpB3E,eAAe,EACfl1B,WAAY,EACZn2B,YAAa,gBACbiI,YAAa,EACbnyD,UAAW,CACT+sD,SAAU,IACVC,OAAQ,gBAEVI,WAAY,CACVxF,QAAS,CACPv8C,KAAM,SACNqqB,WAAY,CAAC,IAAK,IAAK,QAAS,SAAU,SAAU,WAEtD1xB,QAAS,CACPgpD,OAAQ,SACRD,SAAU,MAGd+W,UAAWizC,IAGb7jB,cAAe,CACbwhB,SAAU,OACVC,WAAY,OACZzC,UAAW,QAGbroD,YAAa,CACX6C,YAAcjsD,GAAkB,WAATA,GAA8B,aAATA,GAAgC,aAATA,EACnEmsD,YAAY,EACZkX,UAAW,CACTpX,aAAa,EACbE,YAAY,GAEd5sD,UAAW,CACT6sD,WAAW,GAEbO,WAAY,CACVP,UAAW,cAKfysC,uBAAwB,CAAC,+HC5yC3B,SAASwiB,GAAe7tC,EAAQ4B,EAAKhxD,EAAOk9F,GAC1C,MAAMrnG,EAAQu5D,EAAO7lE,QAAQynE,GAC7B,IAAe,IAAXn7D,EACF,MAbgBsnG,EAAC/tC,EAAQ4B,EAAKhxD,EAAOk9F,KACpB,kBAARlsC,GACThxD,EAAQovD,EAAOrmE,KAAKioE,GAAO,EAC3BksC,EAAYn/F,QAAQ,CAACiC,QAAO8F,MAAOkrD,KAC1Bl1D,MAAMk1D,KACfhxD,EAAQ,MAEHA,GAMEm9F,CAAY/tC,EAAQ4B,EAAKhxD,EAAOk9F,GAGzC,OAAOrnG,IADMu5D,EAAO9gE,YAAY0iE,GACRhxD,EAAQnK,CAClC,CAIA,SAASunG,GAAkB9+G,GACzB,MAAM8wE,EAAS7hE,KAAK8hE,YAEpB,OAAI/wE,GAAS,GAAKA,EAAQ8wE,EAAO1mE,OACxB0mE,EAAO9wE,GAETA,CACT,CAEe,MAAM++G,WAAsB9yB,GAazClxE,WAAAA,CAAY0tD,GACVztD,MAAMytD,GAGNx5D,KAAK+vG,iBAAcp2G,EACnBqG,KAAKgwG,YAAc,EACnBhwG,KAAKiwG,aAAe,EACtB,CAEAxhG,IAAAA,CAAK28E,GACH,MAAM8kB,EAAQlwG,KAAKiwG,aACnB,GAAIC,EAAM/0G,OAAQ,CAChB,MAAM0mE,EAAS7hE,KAAK8hE,YACpB,IAAK,MAAM,MAACrvD,EAAA,MAAO8F,KAAU23F,EACvBruC,EAAOpvD,KAAW8F,GACpBspD,EAAOt7C,OAAO9T,EAAO,GAGzBzS,KAAKiwG,aAAe,GAEtBlkG,MAAM0C,KAAK28E,EACb,CAEA79B,KAAAA,CAAMkW,EAAKhxD,GACT,GAAIm+B,EAAc6yB,GAChB,OAAO,KAET,MAAM5B,EAAS7hE,KAAK8hE,YAGpB,MAtDe4a,EAACjqE,EAAOlN,IAAkB,OAAVkN,EAAiB,KAAOyjC,GAAY1kD,KAAKI,MAAM6gB,GAAQ,EAAGlN,GAsDlFm3E,CAFPjqE,EAAQzM,SAASyM,IAAUovD,EAAOpvD,KAAWgxD,EAAMhxD,EAC/Ci9F,GAAe7tC,EAAQ4B,EAAKxyB,EAAex+B,EAAOgxD,GAAMzjE,KAAKiwG,cACxCpuC,EAAO1mE,OAAS,EAC3C,CAEA8jF,mBAAAA,GACE,MAAM,WAAC9mC,EAAA,WAAYC,GAAcp4C,KAAKq4C,gBACtC,IAAI,IAACv1C,EAAG,IAAEyC,GAAOvF,KAAKsiE,WAAU,GAEJ,UAAxBtiE,KAAKioB,QAAQq5B,SACVnJ,IACHr1C,EAAM,GAEHs1C,IACH7yC,EAAMvF,KAAK8hE,YAAY3mE,OAAS,IAIpC6E,KAAK8C,IAAMA,EACX9C,KAAKuF,IAAMA,CACb,CAEAg6E,UAAAA,GACE,MAAMz8E,EAAM9C,KAAK8C,IACXyC,EAAMvF,KAAKuF,IACX7D,EAAS1B,KAAKioB,QAAQvmB,OACtBg7C,EAAQ,GACd,IAAImlB,EAAS7hE,KAAK8hE,YAGlBD,EAAkB,IAAT/+D,GAAcyC,IAAQs8D,EAAO1mE,OAAS,EAAK0mE,EAASA,EAAO/jE,MAAMgF,EAAKyC,EAAM,GAErFvF,KAAKgwG,YAAcx+G,KAAK+T,IAAIs8D,EAAO1mE,QAAUuG,EAAS,EAAI,GAAI,GAC9D1B,KAAK+vG,YAAc/vG,KAAK8C,KAAOpB,EAAS,GAAM,GAE9C,IAAK,IAAI3Q,EAAQ+R,EAAK/R,GAASwU,EAAKxU,IAClC2rD,EAAMlhD,KAAK,CAACzK,UAEd,OAAO2rD,CACT,CAEAumB,gBAAAA,CAAiBlyE,GACf,OAAO8+G,GAAkB/uG,KAAKd,KAAMjP,EACtC,CAKA6pE,SAAAA,GACE7uD,MAAM6uD,YAED56D,KAAKuoE,iBAERvoE,KAAKoxE,gBAAkBpxE,KAAKoxE,eAEhC,CAGA94B,gBAAAA,CAAiBvnD,GAKf,MAJqB,kBAAVA,IACTA,EAAQiP,KAAKutD,MAAMx8D,IAGJ,OAAVA,EAAiB4iB,IAAM3T,KAAKkqE,oBAAoBn5E,EAAQiP,KAAK+vG,aAAe/vG,KAAKgwG,YAC1F,CAIArpC,eAAAA,CAAgBl0D,GACd,MAAMiqC,EAAQ18C,KAAK08C,MACnB,OAAIjqC,EAAQ,GAAKA,EAAQiqC,EAAMvhD,OAAS,EAC/B,KAEF6E,KAAKs4C,iBAAiBoE,EAAMjqC,GAAO1hB,MAC5C,CAEAq5E,gBAAAA,CAAiBlmB,GACf,OAAO1yD,KAAKI,MAAMoO,KAAK+vG,YAAc/vG,KAAK+iF,mBAAmB7+B,GAASlkD,KAAKgwG,YAC7E,CAEA1nC,YAAAA,GACE,OAAOtoE,KAAKrI,MACd,ECpIF,SAASw4G,GAAcC,EAAmBC,GACxC,MAAM3zD,EAAQ,IAMR,OAAC4E,EAAM,KAAElmC,EAAA,IAAMtY,EAAA,IAAKyC,EAAG,UAAE+qG,EAAA,MAAW3/F,EAAA,SAAO4/F,EAAQ,UAAEC,EAAA,cAAWC,GAAiBL,EACjFM,EAAOt1F,GAAQ,EACfu1F,EAAYJ,EAAW,GACtBztG,IAAK8tG,EAAMrrG,IAAKsrG,GAAQR,EACzBl4D,GAAcvH,EAAc9tC,GAC5Bs1C,GAAcxH,EAAcrrC,GAC5BurG,GAAgBlgE,EAAcjgC,GAC9BogG,GAAcF,EAAOD,IAASJ,EAAY,GAChD,IACIp3C,EAAQ43C,EAASC,EAASC,EAD1BzlC,EAAUv3B,IAAS28D,EAAOD,GAAQD,EAAYD,GAAQA,EAK1D,GAAIjlC,EAdgB,QAcUtzB,IAAeC,EAC3C,MAAO,CAAC,CAACrnD,MAAO6/G,GAAO,CAAC7/G,MAAO8/G,IAGjCK,EAAY1/G,KAAKgqF,KAAKq1B,EAAOplC,GAAWj6E,KAAKib,MAAMmkG,EAAOnlC,GACtDylC,EAAYP,IAEdllC,EAAUv3B,GAAQg9D,EAAYzlC,EAAUklC,EAAYD,GAAQA,GAGzD9/D,EAAc0/D,KAEjBl3C,EAAS5nE,KAAKmX,IAAI,GAAI2nG,GACtB7kC,EAAUj6E,KAAKgqF,KAAK/P,EAAUrS,GAAUA,GAG3B,UAAX9X,GACF0vD,EAAUx/G,KAAKib,MAAMmkG,EAAOnlC,GAAWA,EACvCwlC,EAAUz/G,KAAKgqF,KAAKq1B,EAAOplC,GAAWA,IAEtCulC,EAAUJ,EACVK,EAAUJ,GAGR14D,GAAcC,GAAch9B,GjEL3B,SAAqBxW,EAAWqvC,GACrC,MAAMk9D,EAAU3/G,KAAKI,MAAMgT,GAC3B,OAAOusG,EAAYl9D,GAAYrvC,GAAQusG,EAAUl9D,GAAYrvC,CAC/D,CiEE0CwsG,EAAa7rG,EAAMzC,GAAOsY,EAAMqwD,EAAU,MAKhFylC,EAAY1/G,KAAKI,MAAMJ,KAAKsR,KAAKyC,EAAMzC,GAAO2oE,EAAS8kC,IACvD9kC,GAAWlmE,EAAMzC,GAAOouG,EACxBF,EAAUluG,EACVmuG,EAAU1rG,GACDurG,GAITE,EAAU74D,EAAar1C,EAAMkuG,EAC7BC,EAAU74D,EAAa7yC,EAAM0rG,EAC7BC,EAAYvgG,EAAQ,EACpB86D,GAAWwlC,EAAUD,GAAWE,IAGhCA,GAAaD,EAAUD,GAAWvlC,EAIhCylC,EADEl9D,GAAak9D,EAAW1/G,KAAKI,MAAMs/G,GAAYzlC,EAAU,KAC/Cj6E,KAAKI,MAAMs/G,GAEX1/G,KAAKgqF,KAAK01B,IAM1B,MAAMG,EAAgB7/G,KAAK+T,IACzBqvC,GAAe62B,GACf72B,GAAeo8D,IAEjB53C,EAAS5nE,KAAKmX,IAAI,GAAIioC,EAAc0/D,GAAae,EAAgBf,GACjEU,EAAUx/G,KAAKI,MAAMo/G,EAAU53C,GAAUA,EACzC63C,EAAUz/G,KAAKI,MAAMq/G,EAAU73C,GAAUA,EAEzC,IAAI53D,EAAI,EAiBR,IAhBI22C,IACEs4D,GAAiBO,IAAYluG,GAC/B45C,EAAMlhD,KAAK,CAACzK,MAAO+R,IAEfkuG,EAAUluG,GACZtB,IAGEwyC,GAAaxiD,KAAKI,OAAOo/G,EAAUxvG,EAAIiqE,GAAWrS,GAAUA,EAAQt2D,EAAKwuG,GAAkBxuG,EAAKiuG,EAAYX,KAC9G5uG,KAEOwvG,EAAUluG,GACnBtB,KAIGA,EAAI0vG,IAAa1vG,EAAG,CACzB,MAAMi7C,EAAYjrD,KAAKI,OAAOo/G,EAAUxvG,EAAIiqE,GAAWrS,GAAUA,EACjE,GAAIhhB,GAAcqE,EAAYl3C,EAC5B,MAEFm3C,EAAMlhD,KAAK,CAACzK,MAAO0rD,GACrB,CAaA,OAXIrE,GAAcq4D,GAAiBQ,IAAY1rG,EAEzCm3C,EAAMvhD,QAAU64C,GAAa0I,EAAMA,EAAMvhD,OAAS,GAAGpK,MAAOwU,EAAK+rG,GAAkB/rG,EAAKwrG,EAAYX,IACtG1zD,EAAMA,EAAMvhD,OAAS,GAAGpK,MAAQwU,EAEhCm3C,EAAMlhD,KAAK,CAACzK,MAAOwU,IAEX6yC,GAAc64D,IAAY1rG,GACpCm3C,EAAMlhD,KAAK,CAACzK,MAAOkgH,IAGdv0D,CACT,CAEA,SAAS40D,GAAkBvgH,EAAOggH,EAAUQ,GAA6B,IAA3B,WAAC9pC,EAAU,YAAErlB,GAAYmvD,EACrE,MAAMnsD,EAAM5Q,GAAU4N,GAChBvT,GAAS44B,EAAaj2E,KAAK2nD,IAAIiM,GAAO5zD,KAAK4oD,IAAIgL,KAAS,KACxDjqD,EAAS,IAAO41G,GAAc,GAAKhgH,GAAOoK,OAChD,OAAO3J,KAAKsR,IAAIiuG,EAAaliE,EAAO1zC,EACtC,EDMAwiB,EAAAA,EAAAA,GA5HqBmyF,GAAsB,KAE7B,aAAWnyF,EAAAA,EAAAA,GAFJmyF,GAAsB,WAOvB,CAChBpzD,MAAO,CACL10B,SAAU6nF,MC+GD,MAAM2B,WAAwBx0B,GAE3ClxE,WAAAA,CAAY0tD,GACVztD,MAAMytD,GAGNx5D,KAAK/D,WAAQtC,EAEbqG,KAAK9D,SAAMvC,EAEXqG,KAAK+vG,iBAAcp2G,EAEnBqG,KAAKyxG,eAAY93G,EACjBqG,KAAKgwG,YAAc,CACrB,CAEAziD,KAAAA,CAAMkW,EAAKhxD,GACT,OAAIm+B,EAAc6yB,KAGE,kBAARA,GAAoBA,aAAe9hE,UAAYqE,UAAUy9D,GAF5D,MAMDA,CACV,CAEAiuC,sBAAAA,GACE,MAAM,YAACrwD,GAAerhD,KAAKioB,SACrB,WAACkwB,EAAA,WAAYC,GAAcp4C,KAAKq4C,gBACtC,IAAI,IAACv1C,EAAG,IAAEyC,GAAOvF,KAEjB,MAAM2xG,EAASrwE,GAAMx+B,EAAMq1C,EAAar1C,EAAMw+B,EACxCswE,EAAStwE,GAAM/7B,EAAM6yC,EAAa7yC,EAAM+7B,EAE9C,GAAI+f,EAAa,CACf,MAAMwwD,EAAU99D,GAAKjxC,GACfgvG,EAAU/9D,GAAKxuC,GAEjBssG,EAAU,GAAKC,EAAU,EAC3BF,EAAO,GACEC,EAAU,GAAKC,EAAU,GAClCH,EAAO,GAIX,GAAI7uG,IAAQyC,EAAK,CACf,IAAI7D,EAAiB,IAAR6D,EAAY,EAAI/T,KAAKub,IAAU,IAANxH,GAEtCqsG,EAAOrsG,EAAM7D,GAER2/C,GACHswD,EAAO7uG,EAAMpB,GAGjB1B,KAAK8C,IAAMA,EACX9C,KAAKuF,IAAMA,CACb,CAEAwsG,YAAAA,GACE,MAAMr3B,EAAW16E,KAAKioB,QAAQy0B,MAE9B,IACI6zD,GADA,cAACr1B,EAAA,SAAe82B,GAAYt3B,EAkBhC,OAfIs3B,GACFzB,EAAW/+G,KAAKgqF,KAAKx7E,KAAKuF,IAAMysG,GAAYxgH,KAAKib,MAAMzM,KAAK8C,IAAMkvG,GAAY,EAC1EzB,EAAW,MACbrsG,QAAQ0M,KAAK,UAAD9e,OAAWkO,KAAKgY,GAAE,qBAAAlmB,OAAoBkgH,EAAS,mCAAAlgH,OAAiCy+G,EAAA,8BAC5FA,EAAW,OAGbA,EAAWvwG,KAAKiyG,mBAChB/2B,EAAgBA,GAAiB,IAG/BA,IACFq1B,EAAW/+G,KAAKsR,IAAIo4E,EAAeq1B,IAG9BA,CACT,CAKA0B,gBAAAA,GACE,OAAOtwG,OAAO8xC,iBAChB,CAEA8rC,UAAAA,GACE,MAAMr8D,EAAOljB,KAAKioB,QACZyyD,EAAWx3D,EAAKw5B,MAMtB,IAAI6zD,EAAWvwG,KAAK+xG,eACpBxB,EAAW/+G,KAAK+T,IAAI,EAAGgrG,GAEvB,MAcM7zD,EAAQyzD,GAdkB,CAC9BI,WACAjvD,OAAQp+B,EAAKo+B,OACbx+C,IAAKogB,EAAKpgB,IACVyC,IAAK2d,EAAK3d,IACV+qG,UAAW51B,EAAS41B,UACpBl1F,KAAMs/D,EAASs3B,SACfrhG,MAAO+pE,EAAS/pE,MAChB6/F,UAAWxwG,KAAKsmF,aAChB7e,WAAYznE,KAAKuoE,eACjBnmB,YAAas4B,EAASt4B,aAAe,EACrCquD,eAA0C,IAA3B/1B,EAAS+1B,eAERzwG,KAAKu9E,QAAUv9E,MAmBjC,MAdoB,UAAhBkjB,EAAKo+B,QACP/M,GAAmBmI,EAAO18C,KAAM,SAG9BkjB,EAAKuuB,SACPiL,EAAMjL,UAENzxC,KAAK/D,MAAQ+D,KAAKuF,IAClBvF,KAAK9D,IAAM8D,KAAK8C,MAEhB9C,KAAK/D,MAAQ+D,KAAK8C,IAClB9C,KAAK9D,IAAM8D,KAAKuF,KAGXm3C,CACT,CAKAke,SAAAA,GACE,MAAMle,EAAQ18C,KAAK08C,MACnB,IAAIzgD,EAAQ+D,KAAK8C,IACb5G,EAAM8D,KAAKuF,IAIf,GAFAwG,MAAM6uD,YAEF56D,KAAKioB,QAAQvmB,QAAUg7C,EAAMvhD,OAAQ,CACvC,MAAMuG,GAAUxF,EAAMD,GAASzK,KAAK+T,IAAIm3C,EAAMvhD,OAAS,EAAG,GAAK,EAC/Dc,GAASyF,EACTxF,GAAOwF,EAET1B,KAAK+vG,YAAc9zG,EACnB+D,KAAKyxG,UAAYv1G,EACjB8D,KAAKgwG,YAAc9zG,EAAMD,CAC3B,CAEAgnE,gBAAAA,CAAiBlyE,GACf,OAAO6qD,GAAa7qD,EAAOiP,KAAK28C,MAAM10B,QAAQ4zB,OAAQ77C,KAAKioB,QAAQy0B,MAAML,OAC3E,EClTa,MAAM61D,WAAoBV,GAcvCvyB,mBAAAA,GACE,MAAM,IAACn8E,EAAG,IAAEyC,GAAOvF,KAAKsiE,WAAU,GAElCtiE,KAAK8C,IAAMguC,EAAShuC,GAAOA,EAAM,EACjC9C,KAAKuF,IAAMurC,EAASvrC,GAAOA,EAAM,EAGjCvF,KAAK0xG,wBACP,CAMAO,gBAAAA,GACE,MAAMxqC,EAAaznE,KAAKuoE,eAClBptE,EAASssE,EAAaznE,KAAKzN,MAAQyN,KAAKxN,OACxC4vD,EAAc5N,GAAUx0C,KAAKioB,QAAQy0B,MAAM0F,aAC3CvT,GAAS44B,EAAaj2E,KAAK2nD,IAAIiJ,GAAe5wD,KAAK4oD,IAAIgI,KAAiB,KACxEmgC,EAAWviF,KAAK4iF,wBAAwB,GAC9C,OAAOpxF,KAAKgqF,KAAKrgF,EAAS3J,KAAKsR,IAAI,GAAIy/E,EAASjkC,WAAazP,GAC/D,CAGAyJ,gBAAAA,CAAiBvnD,GACf,OAAiB,OAAVA,EAAiB4iB,IAAM3T,KAAKkqE,oBAAoBn5E,EAAQiP,KAAK+vG,aAAe/vG,KAAKgwG,YAC1F,CAEA5lC,gBAAAA,CAAiBlmB,GACf,OAAOlkD,KAAK+vG,YAAc/vG,KAAK+iF,mBAAmB7+B,GAASlkD,KAAKgwG,WAClE,GACFryF,EAAAA,EAAAA,GA7CqBu0F,GAAoB,KAE3B,WAASv0F,EAAAA,EAAAA,GAFFu0F,GAAoB,WAOrB,CAChBx1D,MAAO,CACL10B,SAAUu1B,GAAMjB,WAAWE,WCPjC,MAAM21D,GAAa7wE,GAAK9vC,KAAKib,MAAMqnC,GAAMxS,IACnC8wE,GAAiBA,CAAC9wE,EAAG7gC,IAAMjP,KAAKmX,IAAI,GAAIwpG,GAAW7wE,GAAK7gC,GAE9D,SAAS4xG,GAAQC,GAEf,OAAkB,IADHA,EAAW9gH,KAAKmX,IAAI,GAAIwpG,GAAWG,GAEpD,CAEA,SAASC,GAAMzvG,EAAKyC,EAAKitG,GACvB,MAAMC,EAAYjhH,KAAKmX,IAAI,GAAI6pG,GACzBv2G,EAAQzK,KAAKib,MAAM3J,EAAM2vG,GAE/B,OADYjhH,KAAKgqF,KAAKj2E,EAAMktG,GACfx2G,CACf,CAqBA,SAASy2G,GAActC,EAAiBuC,GAAc,IAAZ,IAAC7vG,EAAG,IAAEyC,GAAIotG,EAClD7vG,EAAMiuC,EAAgBq/D,EAAkBttG,IAAKA,GAC7C,MAAM45C,EAAQ,GACRk2D,EAAST,GAAWrvG,GAC1B,IAAI+vG,EAvBN,SAAkB/vG,EAAKyC,GAErB,IAAIitG,EAAWL,GADD5sG,EAAMzC,GAEpB,KAAOyvG,GAAMzvG,EAAKyC,EAAKitG,GAAY,IACjCA,IAEF,KAAOD,GAAMzvG,EAAKyC,EAAKitG,GAAY,IACjCA,IAEF,OAAOhhH,KAAKsR,IAAI0vG,EAAUL,GAAWrvG,GACvC,CAaYgwG,CAAShwG,EAAKyC,GACpB+qG,EAAYuC,EAAM,EAAIrhH,KAAKmX,IAAI,GAAInX,KAAKub,IAAI8lG,IAAQ,EACxD,MAAMb,EAAWxgH,KAAKmX,IAAI,GAAIkqG,GACxB7wF,EAAO4wF,EAASC,EAAMrhH,KAAKmX,IAAI,GAAIiqG,GAAU,EAC7C32G,EAAQzK,KAAKI,OAAOkR,EAAMkf,GAAQsuF,GAAaA,EAC/C5uG,EAASlQ,KAAKib,OAAO3J,EAAMkf,GAAQgwF,EAAW,IAAMA,EAAW,GACrE,IAAI10D,EAAc9rD,KAAKib,OAAOxQ,EAAQyF,GAAUlQ,KAAKmX,IAAI,GAAIkqG,IACzD9hH,EAAQggD,EAAgBq/D,EAAkBttG,IAAKtR,KAAKI,OAAOowB,EAAOtgB,EAAS47C,EAAc9rD,KAAKmX,IAAI,GAAIkqG,IAAQvC,GAAaA,GAC/H,KAAOv/G,EAAQwU,GACbm3C,EAAMlhD,KAAK,CAACzK,QAAO8xD,MAAOwvD,GAAQthH,GAAQusD,gBACtCA,GAAe,GACjBA,EAAcA,EAAc,GAAK,GAAK,GAEtCA,IAEEA,GAAe,KACjBu1D,IACAv1D,EAAc,EACdgzD,EAAYuC,GAAO,EAAI,EAAIvC,GAE7Bv/G,EAAQS,KAAKI,OAAOowB,EAAOtgB,EAAS47C,EAAc9rD,KAAKmX,IAAI,GAAIkqG,IAAQvC,GAAaA,EAEtF,MAAMyC,EAAWhiE,EAAgBq/D,EAAkB7qG,IAAKxU,GAGxD,OAFA2rD,EAAMlhD,KAAK,CAACzK,MAAOgiH,EAAUlwD,MAAOwvD,GAAQU,GAAWz1D,gBAEhDZ,CACT,CAEe,MAAMs2D,WAAyBh2B,GAiB5ClxE,WAAAA,CAAY0tD,GACVztD,MAAMytD,GAGNx5D,KAAK/D,WAAQtC,EAEbqG,KAAK9D,SAAMvC,EAEXqG,KAAK+vG,iBAAcp2G,EACnBqG,KAAKgwG,YAAc,CACrB,CAEAziD,KAAAA,CAAMkW,EAAKhxD,GACT,MAAM1hB,EAAQygH,GAAgBr0G,UAAUowD,MAAM7pD,MAAM1D,KAAM,CAACyjE,EAAKhxD,IAChE,GAAc,IAAV1hB,EAIJ,OAAO+/C,EAAS//C,IAAUA,EAAQ,EAAIA,EAAQ,KAH5CiP,KAAKizG,OAAQ,CAIjB,CAEAh0B,mBAAAA,GACE,MAAM,IAACn8E,EAAG,IAAEyC,GAAOvF,KAAKsiE,WAAU,GAElCtiE,KAAK8C,IAAMguC,EAAShuC,GAAOtR,KAAK+T,IAAI,EAAGzC,GAAO,KAC9C9C,KAAKuF,IAAMurC,EAASvrC,GAAO/T,KAAK+T,IAAI,EAAGA,GAAO,KAE1CvF,KAAKioB,QAAQo5B,cACfrhD,KAAKizG,OAAQ,GAKXjzG,KAAKizG,OAASjzG,KAAK8C,MAAQ9C,KAAK+9E,gBAAkBjtC,EAAS9wC,KAAK69E,YAClE79E,KAAK8C,IAAMA,IAAQsvG,GAAepyG,KAAK8C,IAAK,GAAKsvG,GAAepyG,KAAK8C,KAAM,GAAKsvG,GAAepyG,KAAK8C,IAAK,IAG3G9C,KAAK0xG,wBACP,CAEAA,sBAAAA,GACE,MAAM,WAACv5D,EAAA,WAAYC,GAAcp4C,KAAKq4C,gBACtC,IAAIv1C,EAAM9C,KAAK8C,IACXyC,EAAMvF,KAAKuF,IAEf,MAAMosG,EAASrwE,GAAMx+B,EAAMq1C,EAAar1C,EAAMw+B,EACxCswE,EAAStwE,GAAM/7B,EAAM6yC,EAAa7yC,EAAM+7B,EAE1Cx+B,IAAQyC,IACNzC,GAAO,GACT6uG,EAAO,GACPC,EAAO,MAEPD,EAAOS,GAAetvG,GAAM,IAC5B8uG,EAAOQ,GAAe7sG,EAAK,MAG3BzC,GAAO,GACT6uG,EAAOS,GAAe7sG,GAAM,IAE1BA,GAAO,GAETqsG,EAAOQ,GAAetvG,EAAK,IAG7B9C,KAAK8C,IAAMA,EACX9C,KAAKuF,IAAMA,CACb,CAEAg6E,UAAAA,GACE,MAAMr8D,EAAOljB,KAAKioB,QAMZy0B,EAAQg2D,GAJY,CACxB5vG,IAAK9C,KAAK69E,SACVt4E,IAAKvF,KAAK49E,UAEmC59E,MAkB/C,MAdoB,UAAhBkjB,EAAKo+B,QACP/M,GAAmBmI,EAAO18C,KAAM,SAG9BkjB,EAAKuuB,SACPiL,EAAMjL,UAENzxC,KAAK/D,MAAQ+D,KAAKuF,IAClBvF,KAAK9D,IAAM8D,KAAK8C,MAEhB9C,KAAK/D,MAAQ+D,KAAK8C,IAClB9C,KAAK9D,IAAM8D,KAAKuF,KAGXm3C,CACT,CAMAumB,gBAAAA,CAAiBlyE,GACf,YAAiB4I,IAAV5I,EACH,IACA6qD,GAAa7qD,EAAOiP,KAAK28C,MAAM10B,QAAQ4zB,OAAQ77C,KAAKioB,QAAQy0B,MAAML,OACxE,CAKAue,SAAAA,GACE,MAAM3+D,EAAQ+D,KAAK8C,IAEnBiJ,MAAM6uD,YAEN56D,KAAK+vG,YAAcj8D,GAAM73C,GACzB+D,KAAKgwG,YAAcl8D,GAAM9zC,KAAKuF,KAAOuuC,GAAM73C,EAC7C,CAEAq8C,gBAAAA,CAAiBvnD,GAIf,YAHc4I,IAAV5I,GAAiC,IAAVA,IACzBA,EAAQiP,KAAK8C,KAED,OAAV/R,GAAkBwd,MAAMxd,GACnB4iB,IAEF3T,KAAKkqE,mBAAmBn5E,IAAUiP,KAAK8C,IAC1C,GACCgxC,GAAM/iD,GAASiP,KAAK+vG,aAAe/vG,KAAKgwG,YAC/C,CAEA5lC,gBAAAA,CAAiBlmB,GACf,MAAM4+B,EAAU9iF,KAAK+iF,mBAAmB7+B,GACxC,OAAO1yD,KAAKmX,IAAI,GAAI3I,KAAK+vG,YAAcjtB,EAAU9iF,KAAKgwG,YACxD,ECxNF,SAASkD,GAAsBhwF,GAC7B,MAAMw3D,EAAWx3D,EAAKw5B,MAEtB,GAAIg+B,EAASlnF,SAAW0vB,EAAK1vB,QAAS,CACpC,MAAM4tD,EAAUmI,GAAUmxB,EAASz3B,iBACnC,OAAOhS,EAAeypC,EAASt8B,MAAQs8B,EAASt8B,KAAK1tD,KAAM2vD,GAASjC,KAAK1tD,MAAQ0wD,EAAQ5uD,OAE3F,OAAO,CACT,CAUA,SAAS2gH,GAAgB/9D,EAAOrwC,EAAKrU,EAAMoS,EAAKyC,GAC9C,OAAI6vC,IAAUtyC,GAAOsyC,IAAU7vC,EACtB,CACLtJ,MAAO8I,EAAOrU,EAAO,EACrBwL,IAAK6I,EAAOrU,EAAO,GAEZ0kD,EAAQtyC,GAAOsyC,EAAQ7vC,EACzB,CACLtJ,MAAO8I,EAAMrU,EACbwL,IAAK6I,GAIF,CACL9I,MAAO8I,EACP7I,IAAK6I,EAAMrU,EAEf,CAKA,SAAS0iH,GAAmB9zD,GA8B1B,MAAMuoB,EAAO,CACX15C,EAAGmxB,EAAM9nD,KAAO8nD,EAAM0nD,SAASxvG,KAC/BrE,EAAGmsD,EAAM5nD,MAAQ4nD,EAAM0nD,SAAStvG,MAChCq4C,EAAGuP,EAAM7nD,IAAM6nD,EAAM0nD,SAASvvG,IAC9BmH,EAAG0gD,EAAM3nD,OAAS2nD,EAAM0nD,SAASrvG,QAE7B07G,EAASp2G,OAAO4hB,OAAO,CAAC,EAAGgpD,GAC3BiZ,EAAa,GACb1/B,EAAU,GACVkyD,EAAah0D,EAAMi0D,aAAap4G,OAChCq4G,EAAiBl0D,EAAMr3B,QAAQ+nD,YAC/ByjC,EAAkBD,EAAeE,kBAAoBjiH,GAAK6hH,EAAa,EAE7E,IAAK,IAAI74G,EAAI,EAAGA,EAAI64G,EAAY74G,IAAK,CACnC,MAAMyoB,EAAOswF,EAAe1nD,WAAWxM,EAAMq0D,qBAAqBl5G,IAClE2mD,EAAQ3mD,GAAKyoB,EAAKk+B,QAClB,MAAMgvB,EAAgB9wB,EAAMs0D,iBAAiBn5G,EAAG6kD,EAAMu0D,YAAczyD,EAAQ3mD,GAAIg5G,GAC1EK,EAAStqD,GAAOtmC,EAAKk7B,MACrB6oD,GA9EgBxoD,EA8EYa,EAAMb,IA9EbL,EA8EkB01D,EA7E/Cv7F,EAAQrZ,EAD2BqZ,EA8EoB+mC,EAAMi0D,aAAa94G,IA7EjD8d,EAAQ,CAACA,GAC3B,CACL7H,EAAG6yC,GAAa9E,EAAKL,EAAK3gD,OAAQ8a,GAClCipB,EAAGjpB,EAAMpd,OAASijD,EAAKE,aA2EvBwiC,EAAWrmF,GAAKwsG,EAEhB,MAAMxlB,EAAe9rC,GAAgB2J,EAAMmwB,cAAch1E,GAAKg5G,GACxDr+D,EAAQ5jD,KAAKI,MAAM8iD,GAAU+sC,IAGnCsyB,GAAaV,EAAQxrC,EAAM4Z,EAFX0xB,GAAgB/9D,EAAOg7B,EAAcxrE,EAAGqiG,EAASv2F,EAAG,EAAG,KACvDyiG,GAAgB/9D,EAAOg7B,EAAcvrE,EAAGoiG,EAASzlE,EAAG,GAAI,KAE1E,CAtFF,IAA0Bid,EAAKL,EAAM7lC,EAwFnC+mC,EAAM00D,eACJnsC,EAAK15C,EAAIklF,EAAOllF,EAChBklF,EAAOlgH,EAAI00E,EAAK10E,EAChB00E,EAAK93B,EAAIsjE,EAAOtjE,EAChBsjE,EAAOz0G,EAAIipE,EAAKjpE,GAIlB0gD,EAAM20D,iBA6DR,SAA8B30D,EAAOwhC,EAAY1/B,GAC/C,MAAMlxB,EAAQ,GACRojF,EAAah0D,EAAMi0D,aAAap4G,OAChC+nB,EAAOo8B,EAAMr3B,SACb,kBAACyrF,EAAiB,QAAElgH,GAAW0vB,EAAK8sD,YACpCkkC,EAAW,CACfC,MAAOjB,GAAsBhwF,GAAQ,EACrCuwF,gBAAiBC,EAAoBjiH,GAAK6hH,EAAa,GAEzD,IAAIvxF,EAEJ,IAAK,IAAItnB,EAAI,EAAGA,EAAI64G,EAAY74G,IAAK,CACnCy5G,EAAS9yD,QAAUA,EAAQ3mD,GAC3By5G,EAASxjH,KAAOowF,EAAWrmF,GAE3B,MAAMgmB,EAAO2zF,GAAqB90D,EAAO7kD,EAAGy5G,GAC5ChkF,EAAM10B,KAAKilB,GACK,SAAZjtB,IACFitB,EAAKwgC,QAAUozD,GAAgB5zF,EAAMsB,GACjCtB,EAAKwgC,UACPl/B,EAAOtB,GAGb,CACA,OAAOyP,CACT,CAtF2BokF,CAAqBh1D,EAAOwhC,EAAY1/B,EACnE,CAEA,SAAS2yD,GAAaV,EAAQxrC,EAAMzyB,EAAOm/D,EAASC,GAClD,MAAMr7D,EAAM3nD,KAAKub,IAAIvb,KAAK2nD,IAAI/D,IACxBgF,EAAM5oD,KAAKub,IAAIvb,KAAK4oD,IAAIhF,IAC9B,IAAIxwC,EAAI,EACJC,EAAI,EACJ0vG,EAAQt4G,MAAQ4rE,EAAK15C,GACvBvpB,GAAKijE,EAAK15C,EAAIomF,EAAQt4G,OAASk9C,EAC/Bk6D,EAAOllF,EAAI38B,KAAKsR,IAAIuwG,EAAOllF,EAAG05C,EAAK15C,EAAIvpB,IAC9B2vG,EAAQr4G,IAAM2rE,EAAK10E,IAC5ByR,GAAK2vG,EAAQr4G,IAAM2rE,EAAK10E,GAAKgmD,EAC7Bk6D,EAAOlgH,EAAI3B,KAAK+T,IAAI8tG,EAAOlgH,EAAG00E,EAAK10E,EAAIyR,IAErC4vG,EAAQv4G,MAAQ4rE,EAAK93B,GACvBlrC,GAAKgjE,EAAK93B,EAAIykE,EAAQv4G,OAASm+C,EAC/Bi5D,EAAOtjE,EAAIv+C,KAAKsR,IAAIuwG,EAAOtjE,EAAG83B,EAAK93B,EAAIlrC,IAC9B2vG,EAAQt4G,IAAM2rE,EAAKjpE,IAC5BiG,GAAK2vG,EAAQt4G,IAAM2rE,EAAKjpE,GAAKw7C,EAC7Bi5D,EAAOz0G,EAAIpN,KAAK+T,IAAI8tG,EAAOz0G,EAAGipE,EAAKjpE,EAAIiG,GAE3C,CAEA,SAASuvG,GAAqB90D,EAAO7sC,EAAOyhG,GAC1C,MAAMO,EAAgBn1D,EAAMu0D,aACtB,MAACM,EAAA,gBAAOV,EAAA,QAAiBryD,EAAO,KAAE1wD,GAAQwjH,EAC1CQ,EAAqBp1D,EAAMs0D,iBAAiBnhG,EAAOgiG,EAAgBN,EAAQ/yD,EAASqyD,GACpFr+D,EAAQ5jD,KAAKI,MAAM8iD,GAAUiB,GAAgB++D,EAAmBt/D,MAAQzB,MACxE9uC,EA8ER,SAAmBA,EAAG28B,EAAG4T,GACT,KAAVA,GAA0B,MAAVA,EAClBvwC,GAAM28B,EAAI,GACD4T,EAAQ,KAAOA,EAAQ,MAChCvwC,GAAK28B,GAEP,OAAO38B,CACT,CArFY8vG,CAAUD,EAAmB7vG,EAAGnU,EAAK8wC,EAAG4T,GAC5C6S,EA0DR,SAA8B7S,GAC5B,GAAc,IAAVA,GAAyB,MAAVA,EACjB,MAAO,SACF,GAAIA,EAAQ,IACjB,MAAO,OAGT,MAAO,OACT,CAlEoBw/D,CAAqBx/D,GACjC59C,EAmER,SAA0BoN,EAAG8L,EAAG+mC,GAChB,UAAVA,EACF7yC,GAAK8L,EACc,WAAV+mC,IACT7yC,GAAM8L,EAAI,GAEZ,OAAO9L,CACT,CA1EeiwG,CAAiBH,EAAmB9vG,EAAGlU,EAAKggB,EAAGu3C,GAC5D,MAAO,CAELhH,SAAS,EAGTr8C,EAAG8vG,EAAmB9vG,EACtBC,IAGAojD,YAGAzwD,OACAC,IAAKoN,EACLnN,MAAOF,EAAO9G,EAAKggB,EACnB/Y,OAAQkN,EAAInU,EAAK8wC,EAErB,CAEA,SAAS6yE,GAAgB5zF,EAAMsB,GAC7B,IAAKA,EACH,OAAO,EAET,MAAM,KAACvqB,EAAA,IAAMC,EAAA,MAAKC,EAAK,OAAEC,GAAU8oB,EAGnC,QAFqBulC,GAAe,CAACphD,EAAGpN,EAAMqN,EAAGpN,GAAMsqB,IAASikC,GAAe,CAACphD,EAAGpN,EAAMqN,EAAGlN,GAASoqB,IACnGikC,GAAe,CAACphD,EAAGlN,EAAOmN,EAAGpN,GAAMsqB,IAASikC,GAAe,CAACphD,EAAGlN,EAAOmN,EAAGlN,GAASoqB,GAEtF,CAyDA,SAAS+yF,GAAkBr2D,EAAKv7B,EAAMzC,GACpC,MAAM,KAACjpB,EAAA,IAAMC,EAAA,MAAKC,EAAK,OAAEC,GAAU8oB,GAC7B,cAACuiC,GAAiB9/B,EAExB,IAAK0tB,EAAcoS,GAAgB,CACjC,MAAMkyC,EAAe5rC,GAAcpmC,EAAKgyE,cAClC9zC,EAAUmI,GAAUrmC,EAAK+/B,iBAC/BxE,EAAIgJ,UAAYzE,EAEhB,MAAM+xD,EAAev9G,EAAO4pD,EAAQ5pD,KAC9Bw9G,EAAcv9G,EAAM2pD,EAAQ3pD,IAC5Bw9G,EAAgBv9G,EAAQF,EAAO4pD,EAAQ7uD,MACvC2iH,EAAiBv9G,EAASF,EAAM2pD,EAAQ5uD,OAE1CyK,OAAOs/C,OAAO24C,GAAcrK,MAAKvpD,GAAW,IAANA,KACxCmd,EAAI8G,YACJiD,GAAmB/J,EAAK,CACtB75C,EAAGmwG,EACHlwG,EAAGmwG,EACHtkG,EAAGukG,EACHzzE,EAAG0zE,EACH/vD,OAAQ+vC,IAEVz2C,EAAIrrD,QAEJqrD,EAAIoJ,SAASktD,EAAcC,EAAaC,EAAeC,GAG7D,CA+BA,SAASC,GAAe71D,EAAO6F,EAAQ4qB,EAAU+6B,GAC/C,MAAM,IAACrsD,GAAOa,EACd,GAAIywB,EAEFtxB,EAAIgH,IAAInG,EAAMgwB,QAAShwB,EAAMiwB,QAASpqB,EAAQ,EAAG7R,QAC5C,CAEL,IAAI88B,EAAgB9wB,EAAMs0D,iBAAiB,EAAGzuD,GAC9C1G,EAAIkH,OAAOyqB,EAAcxrE,EAAGwrE,EAAcvrE,GAE1C,IAAK,IAAIpK,EAAI,EAAGA,EAAIqwG,EAAYrwG,IAC9B21E,EAAgB9wB,EAAMs0D,iBAAiBn5G,EAAG0qD,GAC1C1G,EAAImH,OAAOwqB,EAAcxrE,EAAGwrE,EAAcvrE,GAGhD,ED/EA8Y,EAAAA,EAAAA,GAxJqBq1F,GAAyB,KAEhC,gBAAcr1F,EAAAA,EAAAA,GAFPq1F,GAAyB,WAO1B,CAChBt2D,MAAO,CACL10B,SAAUu1B,GAAMjB,WAAWc,YAC3ByF,MAAO,CACLu4B,SAAS,MC6PF,MAAMg6B,WAA0B5D,GA0E7C1lG,WAAAA,CAAY0tD,GACVztD,MAAMytD,GAGNx5D,KAAKsvE,aAAU31E,EAEfqG,KAAKuvE,aAAU51E,EAEfqG,KAAK6zG,iBAAcl6G,EAEnBqG,KAAKuzG,aAAe,GACpBvzG,KAAKi0G,iBAAmB,EAC1B,CAEAn1B,aAAAA,GAEE,MAAM19B,EAAUphD,KAAKgnG,SAAWz9C,GAAU2pD,GAAsBlzG,KAAKioB,SAAW,GAC1EvX,EAAI1Q,KAAKzN,MAAQyN,KAAKsoD,SAAWlH,EAAQ7uD,MACzCivC,EAAIxhC,KAAKxN,OAASwN,KAAKuyD,UAAYnR,EAAQ5uD,OACjDwN,KAAKsvE,QAAU99E,KAAKib,MAAMzM,KAAKxI,KAAOkZ,EAAI,EAAI0wC,EAAQ5pD,MACtDwI,KAAKuvE,QAAU/9E,KAAKib,MAAMzM,KAAKvI,IAAM+pC,EAAI,EAAI4f,EAAQ3pD,KACrDuI,KAAK6zG,YAAcriH,KAAKib,MAAMjb,KAAKsR,IAAI4N,EAAG8wB,GAAK,EACjD,CAEAy9C,mBAAAA,GACE,MAAM,IAACn8E,EAAG,IAAEyC,GAAOvF,KAAKsiE,WAAU,GAElCtiE,KAAK8C,IAAMguC,EAAShuC,KAASyL,MAAMzL,GAAOA,EAAM,EAChD9C,KAAKuF,IAAMurC,EAASvrC,KAASgJ,MAAMhJ,GAAOA,EAAM,EAGhDvF,KAAK0xG,wBACP,CAMAO,gBAAAA,GACE,OAAOzgH,KAAKgqF,KAAKx7E,KAAK6zG,YAAcX,GAAsBlzG,KAAKioB,SACjE,CAEAw4D,kBAAAA,CAAmB/jC,GACjB80D,GAAgBr0G,UAAUsjF,mBAAmB3/E,KAAKd,KAAM08C,GAGxD18C,KAAKuzG,aAAevzG,KAAK8hE,YACtBpjD,KAAI,CAAC3tB,EAAO0hB,KACX,MAAM8F,EAAQyP,EAAahoB,KAAKioB,QAAQ+nD,YAAYhoD,SAAU,CAACj3B,EAAO0hB,GAAQzS,MAC9E,OAAOuY,GAAmB,IAAVA,EAAcA,EAAQ,EAAE,IAEzCiG,QAAO,CAAC8iB,EAAG7mC,IAAMuF,KAAK28C,MAAMotB,kBAAkBtvE,IACnD,CAEAulF,GAAAA,GACE,MAAM98D,EAAOljB,KAAKioB,QAEd/E,EAAK1vB,SAAW0vB,EAAK8sD,YAAYx8E,QACnC4/G,GAAmBpzG,MAEnBA,KAAKg0G,eAAe,EAAG,EAAG,EAAG,EAEjC,CAEAA,cAAAA,CAAeqB,EAAcC,EAAeC,EAAaC,GACvDx1G,KAAKsvE,SAAW99E,KAAKib,OAAO4oG,EAAeC,GAAiB,GAC5Dt1G,KAAKuvE,SAAW/9E,KAAKib,OAAO8oG,EAAcC,GAAkB,GAC5Dx1G,KAAK6zG,aAAeriH,KAAKsR,IAAI9C,KAAK6zG,YAAc,EAAGriH,KAAK+T,IAAI8vG,EAAcC,EAAeC,EAAaC,GACxG,CAEA/lC,aAAAA,CAAch9D,GAIZ,OAAOkjC,GAAgBljC,GAHC6gC,IAAOtzC,KAAKuzG,aAAap4G,QAAU,IAGVq5C,GAF9Bx0C,KAAKioB,QAAQkkD,YAAc,GAGhD,CAEA0D,6BAAAA,CAA8B9+E,GAC5B,GAAI6/C,EAAc7/C,GAChB,OAAO4iB,IAIT,MAAM8hG,EAAgBz1G,KAAK6zG,aAAe7zG,KAAKuF,IAAMvF,KAAK8C,KAC1D,OAAI9C,KAAKioB,QAAQwpB,SACPzxC,KAAKuF,IAAMxU,GAAS0kH,GAEtB1kH,EAAQiP,KAAK8C,KAAO2yG,CAC9B,CAEAC,6BAAAA,CAA8BpgE,GAC5B,GAAI1E,EAAc0E,GAChB,OAAO3hC,IAGT,MAAMgiG,EAAiBrgE,GAAYt1C,KAAK6zG,aAAe7zG,KAAKuF,IAAMvF,KAAK8C,MACvE,OAAO9C,KAAKioB,QAAQwpB,QAAUzxC,KAAKuF,IAAMowG,EAAiB31G,KAAK8C,IAAM6yG,CACvE,CAEAhC,oBAAAA,CAAqBlhG,GACnB,MAAMu9D,EAAchwE,KAAKuzG,cAAgB,GAEzC,GAAI9gG,GAAS,GAAKA,EAAQu9D,EAAY70E,OAAQ,CAC5C,MAAMy6G,EAAa5lC,EAAYv9D,GAC/B,OA1LN,SAAiCoR,EAAQpR,EAAO8F,GAC9C,OAAOuxC,GAAcjmC,EAAQ,CAC3BtL,QACA9F,QACAxT,KAAM,cAEV,CAoLa42G,CAAwB71G,KAAKukD,aAAc9xC,EAAOmjG,GAE7D,CAEAhC,gBAAAA,CAAiBnhG,EAAOqjG,GAAyC,IAArBrC,EAAA/zG,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,GAAkB,EAC5D,MAAM01C,EAAQp1C,KAAKyvE,cAAch9D,GAASkhC,GAAU8/D,EACpD,MAAO,CACL7uG,EAAGpT,KAAK4oD,IAAIhF,GAAS0gE,EAAqB91G,KAAKsvE,QAC/CzqE,EAAGrT,KAAK2nD,IAAI/D,GAAS0gE,EAAqB91G,KAAKuvE,QAC/Cn6B,QAEJ,CAEAi7B,wBAAAA,CAAyB59D,EAAO1hB,GAC9B,OAAOiP,KAAK4zG,iBAAiBnhG,EAAOzS,KAAK6vE,8BAA8B9+E,GACzE,CAEAglH,eAAAA,CAAgBtjG,GACd,OAAOzS,KAAKqwE,yBAAyB59D,GAAS,EAAGzS,KAAKgjF,eACxD,CAEAgzB,qBAAAA,CAAsBvjG,GACpB,MAAM,KAACjb,EAAA,IAAMC,EAAA,MAAKC,EAAK,OAAEC,GAAUqI,KAAKi0G,iBAAiBxhG,GACzD,MAAO,CACLjb,OACAC,MACAC,QACAC,SAEJ,CAKAytF,cAAAA,GACE,MAAM,gBAAC9tF,EAAiBmqD,MAAM,SAACsuB,IAAa/vE,KAAKioB,QACjD,GAAI3wB,EAAiB,CACnB,MAAMmnD,EAAMz+C,KAAKy+C,IACjBA,EAAIkF,OACJlF,EAAI8G,YACJ4vD,GAAen1G,KAAMA,KAAK6vE,8BAA8B7vE,KAAKyxG,WAAY1hC,EAAU/vE,KAAKuzG,aAAap4G,QACrGsjD,EAAIiH,YACJjH,EAAIgJ,UAAYnwD,EAChBmnD,EAAIrrD,OACJqrD,EAAIsF,UAER,CAKAuhC,QAAAA,GACE,MAAM7mC,EAAMz+C,KAAKy+C,IACXv7B,EAAOljB,KAAKioB,SACZ,WAAC6nD,EAAU,KAAEruB,EAAA,OAAMQ,GAAU/+B,EAC7B4nF,EAAa9qG,KAAKuzG,aAAap4G,OAErC,IAAIV,EAAGiH,EAAQxK,EAmBf,GAjBIgsB,EAAK8sD,YAAYx8E,SA1TzB,SAAyB8rD,EAAOwrD,GAC9B,MAAM,IAACrsD,EAAKx2B,SAAS,YAAC+nD,IAAgB1wB,EAEtC,IAAK,IAAI7kD,EAAIqwG,EAAa,EAAGrwG,GAAK,EAAGA,IAAK,CACxC,MAAMgmB,EAAO6+B,EAAM20D,iBAAiBx5G,GACpC,IAAKgmB,EAAKwgC,QAER,SAEF,MAAMojC,EAAcrU,EAAYlkB,WAAWxM,EAAMq0D,qBAAqBl5G,IACtEq6G,GAAkBr2D,EAAK4lC,EAAa5jE,GACpC,MAAMqzF,EAAStqD,GAAO66B,EAAYjmC,OAC5B,EAACx5C,EAAC,EAAEC,EAAA,UAAGojD,GAAaxnC,EAE1BiD,GACE+6B,EACAa,EAAMi0D,aAAa94G,GACnBmK,EACAC,EAAKivG,EAAOx1D,WAAa,EACzBw1D,EACA,CACExjH,MAAO+zF,EAAY/zF,MACnB23D,UAAWA,EACXC,aAAc,UAGpB,CACF,CAgSM+tD,CAAgBj2G,KAAM8qG,GAGpBrpD,EAAKjuD,SACPwM,KAAK08C,MAAMjyB,SAAQ,CAAC4tC,EAAM5lD,KACxB,GAAc,IAAVA,EAAa,CACf/Q,EAAS1B,KAAK6vE,8BAA8BxX,EAAKtnE,OACjD,MAAMmhB,EAAUlS,KAAKukD,WAAW9xC,GAC1B4xE,EAAc5iC,EAAKqK,WAAW55C,GAC9BoyE,EAAoBriC,EAAO6J,WAAW55C,IAtRtD,SAAwBotC,EAAO42D,EAAc/wD,EAAQ2lD,EAAYxnB,GAC/D,MAAM7kC,EAAMa,EAAMb,IACZsxB,EAAWmmC,EAAanmC,UAExB,MAACz/E,EAAA,UAAOoxD,GAAaw0D,GAErBnmC,IAAa+6B,IAAgBx6G,IAAUoxD,GAAayD,EAAS,IAInE1G,EAAIkF,OACJlF,EAAI+I,YAAcl3D,EAClBmuD,EAAIiD,UAAYA,EAChBjD,EAAI+mC,YAAYlC,EAAWphC,MAC3BzD,EAAIgnC,eAAiBnC,EAAWnhC,WAEhC1D,EAAI8G,YACJ4vD,GAAe71D,EAAO6F,EAAQ4qB,EAAU+6B,GACxCrsD,EAAIiH,YACJjH,EAAItqD,SACJsqD,EAAIsF,UACN,CAmQUoyD,CAAen2G,KAAMqkF,EAAa3iF,EAAQopG,EAAYxmB,OAKxDxU,EAAWt8E,QAAS,CAGtB,IAFAirD,EAAIkF,OAEClpD,EAAIqwG,EAAa,EAAGrwG,GAAK,EAAGA,IAAK,CACpC,MAAM4pF,EAAcvU,EAAWhkB,WAAW9rD,KAAK2zG,qBAAqBl5G,KAC9D,MAACnK,EAAA,UAAOoxD,GAAa2iC,EAEtB3iC,GAAcpxD,IAInBmuD,EAAIiD,UAAYA,EAChBjD,EAAI+I,YAAcl3D,EAElBmuD,EAAI+mC,YAAYnB,EAAYrtB,YAC5BvY,EAAIgnC,eAAiBpB,EAAYptB,iBAEjCv1D,EAAS1B,KAAK6vE,8BAA8B3sD,EAAKw5B,MAAMjL,QAAUzxC,KAAK8C,IAAM9C,KAAKuF,KACjFrO,EAAW8I,KAAK4zG,iBAAiBn5G,EAAGiH,GACpC+8C,EAAI8G,YACJ9G,EAAIkH,OAAO3lD,KAAKsvE,QAAStvE,KAAKuvE,SAC9B9wB,EAAImH,OAAO1uD,EAAS0N,EAAG1N,EAAS2N,GAChC45C,EAAItqD,SACN,CAEAsqD,EAAIsF,UAER,CAKA2hC,UAAAA,GAAc,CAKdE,UAAAA,GACE,MAAMnnC,EAAMz+C,KAAKy+C,IACXv7B,EAAOljB,KAAKioB,QACZyyD,EAAWx3D,EAAKw5B,MAEtB,IAAKg+B,EAASlnF,QACZ,OAGF,MAAM24E,EAAansE,KAAKyvE,cAAc,GACtC,IAAI/tE,EAAQnP,EAEZksD,EAAIkF,OACJlF,EAAI4G,UAAUrlD,KAAKsvE,QAAStvE,KAAKuvE,SACjC9wB,EAAIjO,OAAO27B,GACX1tB,EAAIwJ,UAAY,SAChBxJ,EAAIyJ,aAAe,SAEnBloD,KAAK08C,MAAMjyB,SAAQ,CAAC4tC,EAAM5lD,KACxB,GAAc,IAAVA,IAAgByQ,EAAKuuB,QACvB,OAGF,MAAM4yC,EAAc3J,EAAS5uB,WAAW9rD,KAAKukD,WAAW9xC,IAClD8vE,EAAW/4B,GAAO66B,EAAYjmC,MAGpC,GAFA18C,EAAS1B,KAAK6vE,8BAA8B7vE,KAAK08C,MAAMjqC,GAAO1hB,OAE1DszF,EAAYthC,kBAAmB,CACjCtE,EAAIL,KAAOmkC,EAAS9kF,OACpBlL,EAAQksD,EAAI6E,YAAY+U,EAAK9/C,OAAOhmB,MACpCksD,EAAIgJ,UAAY48B,EAAYrhC,cAE5B,MAAM5B,EAAUmI,GAAU86B,EAAYphC,iBACtCxE,EAAIoJ,UACDt1D,EAAQ,EAAI6uD,EAAQ5pD,MACpBkK,EAAS6gF,EAAS7xF,KAAO,EAAI0wD,EAAQ3pD,IACtClF,EAAQ6uD,EAAQ7uD,MAChBgwF,EAAS7xF,KAAO0wD,EAAQ5uD,QAI5BkxB,GAAW+6B,EAAK4Z,EAAK9/C,MAAO,GAAI7W,EAAQ6gF,EAAU,CAChDjyF,MAAO+zF,EAAY/zF,MACnBy3D,YAAas8B,EAAY7hC,gBACzBnvD,YAAagxF,EAAY9hC,iBACzB,IAGJ9D,EAAIsF,SACN,CAKA+hC,SAAAA,GAAa,GACfnoE,EAAAA,EAAAA,GA1VqBy3F,GAA0B,KAEjC,iBAAez3F,EAAAA,EAAAA,GAFRy3F,GAA0B,WAO3B,CAChB5hH,SAAS,EAGT4iH,SAAS,EACTl/G,SAAU,YAEV44E,WAAY,CACVt8E,SAAS,EACTkuD,UAAW,EACXsV,WAAY,GACZC,iBAAkB,GAGpBxV,KAAM,CACJsuB,UAAU,GAGZ5D,WAAY,EAGZzvB,MAAO,CAELqG,mBAAmB,EAEnB/6B,SAAUu1B,GAAMjB,WAAWE,SAG7BwzB,YAAa,CACXhtB,mBAAerpD,EAGfspD,gBAAiB,EAGjBzvD,SAAS,EAGT4qD,KAAM,CACJ1tD,KAAM,IAIRs3B,SAASzP,GACAA,EAIT6oC,QAAS,EAGTsyD,mBAAmB,MAErB/1F,EAAAA,EAAAA,GA5DiBy3F,GAA0B,gBA8DtB,CACrB,mBAAoB,cACpB,oBAAqB,QACrB,cAAe,WACfz3F,EAAAA,EAAAA,GAlEiBy3F,GAA0B,cAoExB,CACnBtlC,WAAY,CACVrvB,UAAW,UCxYjB,MAAM41D,GAAY,CAChBC,YAAa,CAACC,QAAQ,EAAM7lH,KAAM,EAAG6hH,MAAO,KAC5CiE,OAAQ,CAACD,QAAQ,EAAM7lH,KAAM,IAAM6hH,MAAO,IAC1CkE,OAAQ,CAACF,QAAQ,EAAM7lH,KAAM,IAAO6hH,MAAO,IAC3CmE,KAAM,CAACH,QAAQ,EAAM7lH,KAAM,KAAS6hH,MAAO,IAC3CoE,IAAK,CAACJ,QAAQ,EAAM7lH,KAAM,MAAU6hH,MAAO,IAC3CqE,KAAM,CAACL,QAAQ,EAAO7lH,KAAM,OAAW6hH,MAAO,GAC9CsE,MAAO,CAACN,QAAQ,EAAM7lH,KAAM,OAAS6hH,MAAO,IAC5CuE,QAAS,CAACP,QAAQ,EAAO7lH,KAAM,OAAS6hH,MAAO,GAC/CwE,KAAM,CAACR,QAAQ,EAAM7lH,KAAM,SAMvBsmH,GAA6C/5G,OAAO8V,KAAKsjG,IAM/D,SAASvxF,GAAOngB,EAAG/F,GACjB,OAAO+F,EAAI/F,CACb,CAOA,SAAS2uD,GAAMjO,EAAO3yC,GACpB,GAAIikC,EAAcjkC,GAChB,OAAO,KAGT,MAAMsqG,EAAU33D,EAAM43D,UAChB,OAACpuF,EAAA,MAAQl3B,EAAA,WAAOulH,GAAc73D,EAAM83D,WAC1C,IAAIrmH,EAAQ4b,EAaZ,MAXsB,oBAAXmc,IACT/3B,EAAQ+3B,EAAO/3B,IAIZ+/C,EAAS//C,KACZA,EAA0B,kBAAX+3B,EACXmuF,EAAQ1pD,MAAMx8D,EAA4B+3B,GAC1CmuF,EAAQ1pD,MAAMx8D,IAGN,OAAVA,EACK,MAGLa,IACFb,EAAkB,SAAVa,IAAqB0iD,GAAS6iE,KAA8B,IAAfA,EAEjDF,EAAQnmC,QAAQ//E,EAAOa,GADvBqlH,EAAQnmC,QAAQ//E,EAAO,UAAWomH,KAIhCpmH,EACV,CAUA,SAASsmH,GAA0BC,EAASx0G,EAAKyC,EAAKgyG,GACpD,MAAM1lE,EAAOmlE,GAAM77G,OAEnB,IAAK,IAAIV,EAAIu8G,GAAMh7G,QAAQs7G,GAAU78G,EAAIo3C,EAAO,IAAKp3C,EAAG,CACtD,MAAM+8G,EAAWnB,GAAUW,GAAMv8G,IAC3B2+D,EAASo+C,EAASjF,MAAQiF,EAASjF,MAAQ5wG,OAAO81G,iBAExD,GAAID,EAASjB,QAAU/kH,KAAKgqF,MAAMj2E,EAAMzC,IAAQs2D,EAASo+C,EAAS9mH,QAAU6mH,EAC1E,OAAOP,GAAMv8G,EAEjB,CAEA,OAAOu8G,GAAMnlE,EAAO,EACtB,CAuCA,SAAS6lE,GAAQh7D,EAAOi7D,EAAMC,GAC5B,GAAKA,GAEE,GAAIA,EAAWz8G,OAAQ,CAC5B,MAAM,GAACyH,EAAE,GAAED,GAAMyzC,GAAQwhE,EAAYD,GAErCj7D,EADkBk7D,EAAWh1G,IAAO+0G,EAAOC,EAAWh1G,GAAMg1G,EAAWj1G,KACpD,QAJnB+5C,EAAMi7D,IAAQ,CAMlB,CA8BA,SAASE,GAAoBv4D,EAAO/C,EAAQu7D,GAC1C,MAAMp7D,EAAQ,GAERh+B,EAAM,CAAC,EACPmzB,EAAO0K,EAAOphD,OACpB,IAAIV,EAAG1J,EAEP,IAAK0J,EAAI,EAAGA,EAAIo3C,IAAQp3C,EACtB1J,EAAQwrD,EAAO9hD,GACfikB,EAAI3tB,GAAS0J,EAEbiiD,EAAMlhD,KAAK,CACTzK,QACA8xD,OAAO,IAMX,OAAiB,IAAThR,GAAeimE,EAxCzB,SAAuBx4D,EAAO5C,EAAOh+B,EAAKo5F,GACxC,MAAMb,EAAU33D,EAAM43D,SAChB5uG,GAAS2uG,EAAQnmC,QAAQp0B,EAAM,GAAG3rD,MAAO+mH,GACzCvvG,EAAOm0C,EAAMA,EAAMvhD,OAAS,GAAGpK,MACrC,IAAI8xD,EAAOpwC,EAEX,IAAKowC,EAAQv6C,EAAOu6C,GAASt6C,EAAMs6C,GAASo0D,EAAQhrD,IAAIpJ,EAAO,EAAGi1D,GAChErlG,EAAQiM,EAAImkC,GACRpwC,GAAS,IACXiqC,EAAMjqC,GAAOowC,OAAQ,GAGzB,OAAOnG,CACT,CA2B8Cq7D,CAAcz4D,EAAO5C,EAAOh+B,EAAKo5F,GAAzCp7D,CACtC,CAEe,MAAMs7D,WAAkBh7B,GAgDrClxE,WAAAA,CAAY7b,GACV8b,MAAM9b,GAGN+P,KAAKomE,OAAS,CACZjnE,KAAM,GACN0iE,OAAQ,GACRvG,IAAK,IAIPt7D,KAAKi4G,MAAQ,MAEbj4G,KAAKk4G,gBAAav+G,EAClBqG,KAAKm4G,SAAW,CAAC,EACjBn4G,KAAKo4G,aAAc,EACnBp4G,KAAKo3G,gBAAaz9G,CACpB,CAEA8U,IAAAA,CAAKkiF,GAAsB,IAAXztE,EAAOxjB,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAA,GAAAA,UAAA,MACrB,MAAMi4G,EAAOhnB,EAAUgnB,OAAShnB,EAAUgnB,KAAO,CAAC,GAE5CV,EAAUj3G,KAAKk3G,SAAW,IAAIlmC,GAAe2f,EAAU3f,SAASvZ,MAEtEw/C,EAAQxoG,KAAKyU,GAMbuvB,EAAQklE,EAAKU,eAAgBpB,EAAQrmC,WAErC5wE,KAAKo3G,WAAa,CAChBtuF,OAAQ6uF,EAAK7uF,OACbl3B,MAAO+lH,EAAK/lH,MACZulH,WAAYQ,EAAKR,YAGnBprG,MAAM0C,KAAKkiF,GAEX3wF,KAAKo4G,YAAcl1F,EAAKo1F,UAC1B,CAOA/qD,KAAAA,CAAMkW,EAAKhxD,GACT,YAAY9Y,IAAR8pE,EACK,KAEFlW,GAAMvtD,KAAMyjE,EACrB,CAEA2S,YAAAA,GACErqE,MAAMqqE,eACNp2E,KAAKomE,OAAS,CACZjnE,KAAM,GACN0iE,OAAQ,GACRvG,IAAK,GAET,CAEA2jB,mBAAAA,GACE,MAAMh3D,EAAUjoB,KAAKioB,QACfgvF,EAAUj3G,KAAKk3G,SACfxG,EAAOzoF,EAAQ0vF,KAAKjH,MAAQ,MAElC,IAAI,IAAC5tG,EAAA,IAAKyC,EAAA,WAAK4yC,EAAA,WAAYC,GAAcp4C,KAAKq4C,gBAK9C,SAASkgE,EAAaj3D,GACfnJ,GAAe5pC,MAAM+yC,EAAOx+C,OAC/BA,EAAMtR,KAAKsR,IAAIA,EAAKw+C,EAAOx+C,MAExBs1C,GAAe7pC,MAAM+yC,EAAO/7C,OAC/BA,EAAM/T,KAAK+T,IAAIA,EAAK+7C,EAAO/7C,KAE/B,CAGK4yC,GAAeC,IAElBmgE,EAAav4G,KAAKw4G,mBAIK,UAAnBvwF,EAAQq5B,QAA+C,WAAzBr5B,EAAQy0B,MAAM59B,QAC9Cy5F,EAAav4G,KAAKsiE,WAAU,KAIhCx/D,EAAMguC,EAAShuC,KAASyL,MAAMzL,GAAOA,GAAOm0G,EAAQnmC,QAAQ7gD,KAAK+nC,MAAO04C,GACxEnrG,EAAMurC,EAASvrC,KAASgJ,MAAMhJ,GAAOA,GAAO0xG,EAAQlmC,MAAM9gD,KAAK+nC,MAAO04C,GAAQ,EAG9E1wG,KAAK8C,IAAMtR,KAAKsR,IAAIA,EAAKyC,EAAM,GAC/BvF,KAAKuF,IAAM/T,KAAK+T,IAAIzC,EAAM,EAAGyC,EAC/B,CAKAizG,eAAAA,GACE,MAAM99G,EAAMsF,KAAKy4G,qBACjB,IAAI31G,EAAMnB,OAAO8xC,kBACbluC,EAAM5D,OAAO+gE,kBAMjB,OAJIhoE,EAAIS,SACN2H,EAAMpI,EAAI,GACV6K,EAAM7K,EAAIA,EAAIS,OAAS,IAElB,CAAC2H,MAAKyC,MACf,CAKAg6E,UAAAA,GACE,MAAMt3D,EAAUjoB,KAAKioB,QACfywF,EAAWzwF,EAAQ0vF,KACnBj9B,EAAWzyD,EAAQy0B,MACnBk7D,EAAiC,WAApBl9B,EAAS57D,OAAsB9e,KAAKy4G,qBAAuBz4G,KAAK24G,YAE5D,UAAnB1wF,EAAQq5B,QAAsBs2D,EAAWz8G,SAC3C6E,KAAK8C,IAAM9C,KAAK69E,UAAY+5B,EAAW,GACvC53G,KAAKuF,IAAMvF,KAAK49E,UAAYg6B,EAAWA,EAAWz8G,OAAS,IAG7D,MAAM2H,EAAM9C,KAAK8C,IAGX45C,EpE1SH,SAAwBH,EAAkBz5C,EAAayC,GAC5D,IAAItJ,EAAQ,EACRC,EAAMqgD,EAAOphD,OAEjB,KAAOc,EAAQC,GAAOqgD,EAAOtgD,GAAS6G,GACpC7G,IAEF,KAAOC,EAAMD,GAASsgD,EAAOrgD,EAAM,GAAKqJ,GACtCrJ,IAGF,OAAOD,EAAQ,GAAKC,EAAMqgD,EAAOphD,OAC7BohD,EAAOz+C,MAAM7B,EAAOC,GACpBqgD,CACN,CoE4RkBq8D,CAAehB,EAAY90G,EAF7B9C,KAAKuF,KAkBjB,OAXAvF,KAAKi4G,MAAQS,EAAShI,OAASh2B,EAASj4B,SACpC40D,GAA0BqB,EAASpB,QAASt3G,KAAK8C,IAAK9C,KAAKuF,IAAKvF,KAAK64G,kBAAkB/1G,IArR/F,SAAoCw8C,EAAOqhC,EAAU22B,EAASx0G,EAAKyC,GACjE,IAAK,IAAI9K,EAAIu8G,GAAM77G,OAAS,EAAGV,GAAKu8G,GAAMh7G,QAAQs7G,GAAU78G,IAAK,CAC/D,MAAMi2G,EAAOsG,GAAMv8G,GACnB,GAAI47G,GAAU3F,GAAM6F,QAAUj3D,EAAM43D,SAASrmC,KAAKtrE,EAAKzC,EAAK4tG,IAAS/vB,EAAW,EAC9E,OAAO+vB,CAEX,CAEA,OAAOsG,GAAMM,EAAUN,GAAMh7G,QAAQs7G,GAAW,EAClD,CA6QQwB,CAA2B94G,KAAM08C,EAAMvhD,OAAQu9G,EAASpB,QAASt3G,KAAK8C,IAAK9C,KAAKuF,MACpFvF,KAAKk4G,WAAcx9B,EAAS73B,MAAMu4B,SAA0B,SAAfp7E,KAAKi4G,MAxQtD,SAA4BvH,GAC1B,IAAK,IAAIj2G,EAAIu8G,GAAMh7G,QAAQ00G,GAAQ,EAAG7+D,EAAOmlE,GAAM77G,OAAQV,EAAIo3C,IAAQp3C,EACrE,GAAI47G,GAAUW,GAAMv8G,IAAI87G,OACtB,OAAOS,GAAMv8G,EAGnB,CAmQQs+G,CAAmB/4G,KAAKi4G,YADyCt+G,EAErEqG,KAAKg5G,YAAYpB,GAEb3vF,EAAQwpB,SACViL,EAAMjL,UAGDomE,GAAoB73G,KAAM08C,EAAO18C,KAAKk4G,WAC/C,CAEAp4B,aAAAA,GAGM9/E,KAAKioB,QAAQgxF,qBACfj5G,KAAKg5G,YAAYh5G,KAAK08C,MAAMh+B,KAAI25C,IAASA,EAAKtnE,QAElD,CAUAioH,WAAAA,GAA6B,IAGvB1wG,EAAOC,EAHDqvG,EAAal4G,UAAAvE,OAAA,QAAAxB,IAAA+F,UAAC,GAADA,UAAC,GAAD,GACnBzD,EAAQ,EACRC,EAAM,EAGN8D,KAAKioB,QAAQvmB,QAAUk2G,EAAWz8G,SACpCmN,EAAQtI,KAAKk5G,mBAAmBtB,EAAW,IAEzC37G,EADwB,IAAtB27G,EAAWz8G,OACL,EAAImN,GAEHtI,KAAKk5G,mBAAmBtB,EAAW,IAAMtvG,GAAS,EAE7DC,EAAOvI,KAAKk5G,mBAAmBtB,EAAWA,EAAWz8G,OAAS,IAE5De,EADwB,IAAtB07G,EAAWz8G,OACPoN,GAECA,EAAOvI,KAAKk5G,mBAAmBtB,EAAWA,EAAWz8G,OAAS,KAAO,GAGhF,MAAMsP,EAAQmtG,EAAWz8G,OAAS,EAAI,GAAM,IAC5Cc,EAAQi6C,GAAYj6C,EAAO,EAAGwO,GAC9BvO,EAAMg6C,GAAYh6C,EAAK,EAAGuO,GAE1BzK,KAAKm4G,SAAW,CAACl8G,QAAOC,MAAKk9D,OAAQ,GAAKn9D,EAAQ,EAAIC,GACxD,CASAy8G,SAAAA,GACE,MAAM1B,EAAUj3G,KAAKk3G,SACfp0G,EAAM9C,KAAK8C,IACXyC,EAAMvF,KAAKuF,IACX0iB,EAAUjoB,KAAKioB,QACfywF,EAAWzwF,EAAQ0vF,KAEnB/0D,EAAQ81D,EAAShI,MAAQ2G,GAA0BqB,EAASpB,QAASx0G,EAAKyC,EAAKvF,KAAK64G,kBAAkB/1G,IACtGkvG,EAAW/gE,EAAehpB,EAAQy0B,MAAMs1D,SAAU,GAClDmH,EAAoB,SAAVv2D,GAAmB81D,EAASvB,WACtCiC,EAAa9kE,GAAS6kE,KAAwB,IAAZA,EAClCz8D,EAAQ,CAAC,EACf,IACIi7D,EAAMhnG,EADNrI,EAAQxF,EAYZ,GARIs2G,IACF9wG,GAAS2uG,EAAQnmC,QAAQxoE,EAAO,UAAW6wG,IAI7C7wG,GAAS2uG,EAAQnmC,QAAQxoE,EAAO8wG,EAAa,MAAQx2D,GAGjDq0D,EAAQpmC,KAAKtrE,EAAKzC,EAAK8/C,GAAS,IAASovD,EAC3C,MAAM,IAAIj2G,MAAM+G,EAAM,QAAUyC,EAAM,uCAAyCysG,EAAW,IAAMpvD,GAGlG,MAAMg1D,EAAsC,SAAzB3vF,EAAQy0B,MAAM59B,QAAqB9e,KAAKq5G,oBAC3D,IAAK1B,EAAOrvG,EAAOqI,EAAQ,EAAGgnG,EAAOpyG,EAAKoyG,GAAQV,EAAQhrD,IAAI0rD,EAAM3F,EAAUpvD,GAAQjyC,IACpF+mG,GAAQh7D,EAAOi7D,EAAMC,GAQvB,OALID,IAASpyG,GAA0B,UAAnB0iB,EAAQq5B,QAAgC,IAAV3wC,GAChD+mG,GAAQh7D,EAAOi7D,EAAMC,GAIhB36G,OAAO8V,KAAK2pC,GAAOx3B,KAAKJ,IAAQpG,KAAI9Z,IAAMA,GACnD,CAMAq+D,gBAAAA,CAAiBlyE,GACf,MAAMkmH,EAAUj3G,KAAKk3G,SACfwB,EAAW14G,KAAKioB,QAAQ0vF,KAE9B,OAAIe,EAASY,cACJrC,EAAQ56D,OAAOtrD,EAAO2nH,EAASY,eAEjCrC,EAAQ56D,OAAOtrD,EAAO2nH,EAASL,eAAezhG,SACvD,CAOAylC,MAAAA,CAAOtrD,EAAOsrD,GACZ,MACMu0B,EADU5wE,KAAKioB,QACG0vF,KAAKU,eACvB3H,EAAO1wG,KAAKi4G,MACZsB,EAAMl9D,GAAUu0B,EAAQ8/B,GAC9B,OAAO1wG,KAAKk3G,SAAS76D,OAAOtrD,EAAOwoH,EACrC,CAWAC,mBAAAA,CAAoB7B,EAAMllG,EAAOiqC,EAAOL,GACtC,MAAMp0B,EAAUjoB,KAAKioB,QACfg0B,EAAYh0B,EAAQy0B,MAAM10B,SAEhC,GAAIi0B,EACF,OAAOj0B,EAAKi0B,EAAW,CAAC07D,EAAMllG,EAAOiqC,GAAQ18C,MAG/C,MAAM4wE,EAAU3oD,EAAQ0vF,KAAKU,eACvB3H,EAAO1wG,KAAKi4G,MACZH,EAAY93G,KAAKk4G,WACjBuB,EAAc/I,GAAQ9/B,EAAQ8/B,GAC9BgJ,EAAc5B,GAAalnC,EAAQknC,GACnCz/C,EAAO3b,EAAMjqC,GACbowC,EAAQi1D,GAAa4B,GAAerhD,GAAQA,EAAKxV,MAEvD,OAAO7iD,KAAKk3G,SAAS76D,OAAOs7D,EAAMt7D,IAAWwG,EAAQ62D,EAAcD,GACrE,CAKAh5B,kBAAAA,CAAmB/jC,GACjB,IAAIjiD,EAAGo3C,EAAMwmB,EAEb,IAAK59D,EAAI,EAAGo3C,EAAO6K,EAAMvhD,OAAQV,EAAIo3C,IAAQp3C,EAC3C49D,EAAO3b,EAAMjiD,GACb49D,EAAK9/C,MAAQvY,KAAKw5G,oBAAoBnhD,EAAKtnE,MAAO0J,EAAGiiD,EAEzD,CAMAw8D,kBAAAA,CAAmBnoH,GACjB,OAAiB,OAAVA,EAAiB4iB,KAAO5iB,EAAQiP,KAAK8C,MAAQ9C,KAAKuF,IAAMvF,KAAK8C,IACtE,CAMAw1C,gBAAAA,CAAiBvnD,GACf,MAAM4oH,EAAU35G,KAAKm4G,SACfpzG,EAAM/E,KAAKk5G,mBAAmBnoH,GACpC,OAAOiP,KAAKkqE,oBAAoByvC,EAAQ19G,MAAQ8I,GAAO40G,EAAQvgD,OACjE,CAMAgR,gBAAAA,CAAiBlmB,GACf,MAAMy1D,EAAU35G,KAAKm4G,SACfpzG,EAAM/E,KAAK+iF,mBAAmB7+B,GAASy1D,EAAQvgD,OAASugD,EAAQz9G,IACtE,OAAO8D,KAAK8C,IAAMiC,GAAO/E,KAAKuF,IAAMvF,KAAK8C,IAC3C,CAOA82G,aAAAA,CAAcrhG,GACZ,MAAMshG,EAAY75G,KAAKioB,QAAQy0B,MACzBo9D,EAAiB95G,KAAKy+C,IAAI6E,YAAY/qC,GAAOhmB,MAC7C6iD,EAAQZ,GAAUx0C,KAAKuoE,eAAiBsxC,EAAUx3D,YAAcw3D,EAAUz3D,aAC1E23D,EAAcvoH,KAAK4oD,IAAIhF,GACvB4kE,EAAcxoH,KAAK2nD,IAAI/D,GACvB6kE,EAAej6G,KAAK4iF,wBAAwB,GAAGlyF,KAErD,MAAO,CACLggB,EAAIopG,EAAiBC,EAAgBE,EAAeD,EACpDx4E,EAAIs4E,EAAiBE,EAAgBC,EAAeF,EAExD,CAOAlB,iBAAAA,CAAkBqB,GAChB,MAAMxB,EAAW14G,KAAKioB,QAAQ0vF,KACxBU,EAAiBK,EAASL,eAG1Bh8D,EAASg8D,EAAeK,EAAShI,OAAS2H,EAAe/B,YACzD6D,EAAen6G,KAAKw5G,oBAAoBU,EAAa,EAAGrC,GAAoB73G,KAAM,CAACk6G,GAAcl6G,KAAKk4G,YAAa77D,GACnH3rD,EAAOsP,KAAK45G,cAAcO,GAG1B5C,EAAW/lH,KAAKib,MAAMzM,KAAKuoE,eAAiBvoE,KAAKzN,MAAQ7B,EAAKggB,EAAI1Q,KAAKxN,OAAS9B,EAAK8wC,GAAK,EAChG,OAAO+1E,EAAW,EAAIA,EAAW,CACnC,CAKA8B,iBAAAA,GACE,IACI5+G,EAAGo3C,EADH+lE,EAAa53G,KAAKomE,OAAOjnE,MAAQ,GAGrC,GAAIy4G,EAAWz8G,OACb,OAAOy8G,EAGT,MAAMv5B,EAAQr+E,KAAK68D,0BAEnB,GAAI78D,KAAKo4G,aAAe/5B,EAAMljF,OAC5B,OAAQ6E,KAAKomE,OAAOjnE,KAAOk/E,EAAM,GAAGthB,WAAW+F,mBAAmB9iE,MAGpE,IAAKvF,EAAI,EAAGo3C,EAAOwsC,EAAMljF,OAAQV,EAAIo3C,IAAQp3C,EAC3Cm9G,EAAaA,EAAW9lH,OAAOusF,EAAM5jF,GAAGsiE,WAAW+F,mBAAmB9iE,OAGxE,OAAQA,KAAKomE,OAAOjnE,KAAOa,KAAKiqB,UAAU2tF,EAC5C,CAKAa,kBAAAA,GACE,MAAMb,EAAa53G,KAAKomE,OAAOvE,QAAU,GACzC,IAAIpnE,EAAGo3C,EAEP,GAAI+lE,EAAWz8G,OACb,OAAOy8G,EAGT,MAAM/1C,EAAS7hE,KAAK8hE,YACpB,IAAKrnE,EAAI,EAAGo3C,EAAOgwB,EAAO1mE,OAAQV,EAAIo3C,IAAQp3C,EAC5Cm9G,EAAWp8G,KAAK+xD,GAAMvtD,KAAM6hE,EAAOpnE,KAGrC,OAAQuF,KAAKomE,OAAOvE,OAAS7hE,KAAKo4G,YAAcR,EAAa53G,KAAKiqB,UAAU2tF,EAC9E,CAMA3tF,SAAAA,CAAUsyB,GAER,OAAOzF,GAAayF,EAAOr3B,KAAKJ,IAClC,ECtpBF,SAASgrB,GAAYtiC,EAAO7M,EAAK8wC,GAC/B,IAEI2oE,EAAYC,EAAYC,EAAYC,EAFpC33G,EAAK,EACLD,EAAK6K,EAAMrS,OAAS,EAEpBs2C,GACE9wC,GAAO6M,EAAM5K,GAAImC,KAAOpE,GAAO6M,EAAM7K,GAAIoC,OACzCnC,KAAID,MAAM4zC,GAAa/oC,EAAO,MAAO7M,MAEvCoE,IAAKq1G,EAAYzC,KAAM2C,GAAc9sG,EAAM5K,MAC3CmC,IAAKs1G,EAAY1C,KAAM4C,GAAc/sG,EAAM7K,MAEzChC,GAAO6M,EAAM5K,GAAI+0G,MAAQh3G,GAAO6M,EAAM7K,GAAIg1G,QAC1C/0G,KAAID,MAAM4zC,GAAa/oC,EAAO,OAAQ7M,MAExCg3G,KAAMyC,EAAYr1G,IAAKu1G,GAAc9sG,EAAM5K,MAC3C+0G,KAAM0C,EAAYt1G,IAAKw1G,GAAc/sG,EAAM7K,KAG/C,MAAMoY,EAAOs/F,EAAaD,EAC1B,OAAOr/F,EAAOu/F,GAAcC,EAAaD,IAAe35G,EAAMy5G,GAAcr/F,EAAOu/F,CACrF,EDmoBA38F,EAAAA,EAAAA,GA5dqBq6F,GAAkB,KAEzB,SAAOr6F,EAAAA,EAAAA,GAFAq6F,GAAkB,WAOnB,CAQhB12D,OAAQ,OAER0vB,SAAU,CAAC,EACX2mC,KAAM,CACJ7uF,QAAQ,EACR4nF,MAAM,EACN9+G,OAAO,EACPulH,YAAY,EACZG,QAAS,cACTe,eAAgB,CAAC,GAEnB37D,MAAO,CASL59B,OAAQ,OAERkJ,UAAU,EAEV66B,MAAO,CACLu4B,SAAS,MC7MjB,MAAMo/B,WAAwBxC,GAY5BlsG,WAAAA,CAAY7b,GACV8b,MAAM9b,GAGN+P,KAAKy6G,OAAS,GAEdz6G,KAAK06G,aAAU/gH,EAEfqG,KAAK26G,iBAAchhH,CACrB,CAKAq/G,WAAAA,GACE,MAAMpB,EAAa53G,KAAK46G,yBAClBptG,EAAQxN,KAAKy6G,OAASz6G,KAAK66G,iBAAiBjD,GAClD53G,KAAK06G,QAAU5qE,GAAYtiC,EAAOxN,KAAK8C,KACvC9C,KAAK26G,YAAc7qE,GAAYtiC,EAAOxN,KAAKuF,KAAOvF,KAAK06G,QACvD3uG,MAAMitG,YAAYpB,EACpB,CAaAiD,gBAAAA,CAAiBjD,GACf,MAAM,IAAC90G,EAAG,IAAEyC,GAAOvF,KACbkwB,EAAQ,GACR1iB,EAAQ,GACd,IAAI/S,EAAGo3C,EAAMhoB,EAAM28C,EAAMtmD,EAEzB,IAAKzlB,EAAI,EAAGo3C,EAAO+lE,EAAWz8G,OAAQV,EAAIo3C,IAAQp3C,EAChD+rE,EAAOoxC,EAAWn9G,GACd+rE,GAAQ1jE,GAAO0jE,GAAQjhE,GACzB2qB,EAAM10B,KAAKgrE,GAIf,GAAIt2C,EAAM/0B,OAAS,EAEjB,MAAO,CACL,CAACw8G,KAAM70G,EAAKiC,IAAK,GACjB,CAAC4yG,KAAMpyG,EAAKR,IAAK,IAIrB,IAAKtK,EAAI,EAAGo3C,EAAO3hB,EAAM/0B,OAAQV,EAAIo3C,IAAQp3C,EAC3CylB,EAAOgQ,EAAMz1B,EAAI,GACjBovB,EAAOqG,EAAMz1B,EAAI,GACjB+rE,EAAOt2C,EAAMz1B,GAGTjJ,KAAKI,OAAOsuB,EAAO2J,GAAQ,KAAO28C,GACpCh5D,EAAMhS,KAAK,CAACm8G,KAAMnxC,EAAMzhE,IAAKtK,GAAKo3C,EAAO,KAG7C,OAAOrkC,CACT,CAQAmrG,SAAAA,GACE,MAAM71G,EAAM9C,KAAK8C,IACXyC,EAAMvF,KAAKuF,IACjB,IAAIqyG,EAAa7rG,MAAMstG,oBAOvB,OANKzB,EAAW7xG,SAASjD,IAAS80G,EAAWz8G,QAC3Cy8G,EAAWrxF,OAAO,EAAG,EAAGzjB,GAErB80G,EAAW7xG,SAASR,IAA8B,IAAtBqyG,EAAWz8G,QAC1Cy8G,EAAWp8G,KAAK+J,GAEXqyG,EAAW1yF,MAAK,CAACvgB,EAAG/F,IAAM+F,EAAI/F,GACvC,CAOAg8G,sBAAAA,GACE,IAAIhD,EAAa53G,KAAKomE,OAAO9K,KAAO,GAEpC,GAAIs8C,EAAWz8G,OACb,OAAOy8G,EAGT,MAAMz4G,EAAOa,KAAKq5G,oBACZ9gG,EAAQvY,KAAKy4G,qBAUnB,OANEb,EAHEz4G,EAAKhE,QAAUod,EAAMpd,OAGV6E,KAAKiqB,UAAU9qB,EAAKrN,OAAOymB,IAE3BpZ,EAAKhE,OAASgE,EAAOoZ,EAEpCq/F,EAAa53G,KAAKomE,OAAO9K,IAAMs8C,EAExBA,CACT,CAMAsB,kBAAAA,CAAmBnoH,GACjB,OAAQ++C,GAAY9vC,KAAKy6G,OAAQ1pH,GAASiP,KAAK06G,SAAW16G,KAAK26G,WACjE,CAMAvwC,gBAAAA,CAAiBlmB,GACf,MAAMy1D,EAAU35G,KAAKm4G,SACfr1B,EAAU9iF,KAAK+iF,mBAAmB7+B,GAASy1D,EAAQvgD,OAASugD,EAAQz9G,IAC1E,OAAO4zC,GAAY9vC,KAAKy6G,OAAQ33B,EAAU9iF,KAAK26G,YAAc36G,KAAK06G,SAAS,EAC7E,GACF/8F,EAAAA,EAAAA,GA7IM68F,GAAwB,KAEhB,eAAa78F,EAAAA,EAAAA,GAFrB68F,GAAwB,WAOVxC,GAAU33D,gBCrBjBhf,GAAgB,CAC3BkmD,GACAppC,GACAiB,oNCVF,MAAM07D,EAAsB,QAErB,SAASC,EAAgB7qH,EAAsBa,GACjC,oBAARb,EACTA,EAAIa,GACKb,IACTA,EAAI67B,QAAUh7B,EAElB,CAcO,SAASiqH,EAKdC,EACAC,GAEAD,EAAYp5C,OAASq5C,CACvB,CAEO,SAASC,EAKdF,EACAG,GACA,IAAAC,EAAA37G,UAAAvE,OAAA,YAAAuE,UAAA,GAAAA,UAAA,GAAeo7G,EAEf,MAAMQ,EAA8C,GAEpDL,EAAYl9D,SAAWq9D,EAAa18F,KACjC68F,IAEC,MAAMC,EAAiBP,EAAYl9D,SAAShwB,MACzCsxC,GACCA,EAAQg8C,KAAkBE,EAAYF,KAI1C,OACGG,GACAD,EAAYp8G,OACbm8G,EAAcv1G,SAASy1G,IAKzBF,EAAc9/G,KAAKggH,GAEnBv+G,OAAO4hB,OAAO28F,EAAgBD,GAEvBC,GAPE,IAAKD,EAOP,GAGb,CAEO,SAASE,EAIdt8G,GAAuC,IAAAk8G,EAAA37G,UAAAvE,OAAA,YAAAuE,UAAA,GAAAA,UAAA,GAAeo7G,EACtD,MAAMY,EAA4C,CAChD75C,OAAQ,GACR9jB,SAAU,IAMZ,OAHAi9D,EAAUU,EAAUv8G,EAAK0iE,QACzBs5C,EAAYO,EAAUv8G,EAAK4+C,SAAUs9D,GAE9BK,CACT,CCnFA,SAASC,EAKP1rH,EACAC,GAEA,MAAM,OACJsC,EAAS,IAAG,MACZD,EAAQ,WACRqpH,GAAS,EAAK,aACdP,EAAA,KACAp8G,EAAA,KACAE,EAAA,QACA8oB,EAAA,QACAm3B,EAAU,GAAE,gBACZy8D,EAAA,WACAC,KACGC,GACD9rH,EACE+rH,GAAYC,EAAAA,EAAAA,QAA0B,MACtCC,GAAWD,EAAAA,EAAAA,UAEXE,EAAcA,KACbH,EAAUjwF,UAEfmwF,EAASnwF,QAAU,IAAIqwF,EAAAA,GAAQJ,EAAUjwF,QAAS,CAChD9sB,OACAE,KAAMs8G,EAAUt8G,EAAMk8G,GACtBpzF,QAASA,GAAW,IAAKA,GACzBm3B,YAGF27D,EAAa7qH,EAAKgsH,EAASnwF,SAAQ,EAG/BswF,EAAeA,KACnBtB,EAAa7qH,EAAK,MAEdgsH,EAASnwF,UACXmwF,EAASnwF,QAAQunE,UACjB4oB,EAASnwF,QAAU,OA8CvB,OA1CAuwF,EAAAA,EAAAA,YAAU,MACHV,GAAUM,EAASnwF,SAAW9D,GDtChC,SAIL00B,EAAoC4/D,GACpC,MAAMt0F,EAAU00B,EAAM10B,QAElBA,GAAWs0F,GACbt/G,OAAO4hB,OAAOoJ,EAASs0F,EAE3B,CC6BMC,CAAWN,EAASnwF,QAAS9D,KAE9B,CAAC2zF,EAAQ3zF,KAEZq0F,EAAAA,EAAAA,YAAU,MACHV,GAAUM,EAASnwF,SACtBivF,EAAUkB,EAASnwF,QAAQ2uC,OAAOv7D,KAAMA,EAAK0iE,UAE9C,CAAC+5C,EAAQz8G,EAAK0iE,UAEjBy6C,EAAAA,EAAAA,YAAU,MACHV,GAAUM,EAASnwF,SAAW5sB,EAAK4+C,UACtCo9D,EAAYe,EAASnwF,QAAQ2uC,OAAOv7D,KAAMA,EAAK4+C,SAAUs9D,KAE1D,CAACO,EAAQz8G,EAAK4+C,YAEjBu+D,EAAAA,EAAAA,YAAU,KACHJ,EAASnwF,UAEV6vF,GACFS,IACAvsB,WAAWqsB,IAEXD,EAASnwF,QAAQouC,OAAO2hD,MAEzB,CAACF,EAAQ3zF,EAAS9oB,EAAK0iE,OAAQ1iE,EAAK4+C,SAAU+9D,KAEjDQ,EAAAA,EAAAA,YAAU,KACHJ,EAASnwF,UAEdswF,IACAvsB,WAAWqsB,GAAA,GACV,CAACl9G,KAEJq9G,EAAAA,EAAAA,YAAU,KACRH,IAEO,IAAME,MACZ,IAGDrsH,EAAAA,cAAC,SAAAiN,OAAA4hB,OAAA,CACC3uB,IAAK8rH,EACLvpH,KAAK,MACLD,OAAQA,EACRD,MAAOA,GACHwpH,GAEHF,EAGP,CAEO,MAAM16E,GAAQs7E,EAAAA,EAAAA,YAAWd,GC7FhC,SAASe,EACPz9G,EACAoiC,GAIA,OAFA+6E,EAAAA,GAAQh7E,SAASC,IAEVo7E,EAAAA,EAAAA,aACJ,CAAAxsH,EAAOC,IAAQF,EAAAA,cAACmxC,EAAUlkC,OAAA4hB,OAAA,GAAA5uB,EAAA,CAAOC,IAAKA,EAAK+O,KAAMA,MAEtD,OAEa09G,EAAuBD,EAAiB,OAAQpuC,EAAAA","sources":["../node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js","../node_modules/@material-ui/styles/esm/ThemeProvider/ThemeProvider.js","../node_modules/@mui/material/LinearProgress/linearProgressClasses.js","../node_modules/@mui/material/LinearProgress/LinearProgress.js","../node_modules/base64-js/index.js","../node_modules/buffer/index.js","../node_modules/events/events.js","../node_modules/ieee754/index.js","../node_modules/inherits/inherits_browser.js","../node_modules/react-html-parser/lib/HtmlParser.js","../node_modules/react-html-parser/lib/convertNodeToElement.js","../node_modules/react-html-parser/lib/dom/attributes/BooleanAttributes.js","../node_modules/react-html-parser/lib/dom/attributes/ReactAttributes.js","../node_modules/react-html-parser/lib/dom/elements/VoidElements.js","../node_modules/react-html-parser/lib/elementTypes/StyleElementType.js","../node_modules/react-html-parser/lib/elementTypes/TagElementType.js","../node_modules/react-html-parser/lib/elementTypes/TextElementType.js","../node_modules/react-html-parser/lib/elementTypes/UnsupportedElementType.js","../node_modules/react-html-parser/lib/elementTypes/index.js","../node_modules/react-html-parser/lib/index.js","../node_modules/react-html-parser/lib/processNodes.js","../node_modules/react-html-parser/lib/utils/generatePropsFromAttributes.js","../node_modules/react-html-parser/lib/utils/htmlAttributesToReact.js","../node_modules/react-html-parser/lib/utils/inlineStyleToObject.js","../node_modules/react-html-parser/lib/utils/isEmptyTextNode.js","../node_modules/react-html-parser/lib/utils/isValidTagOrAttributeName.js","../node_modules/react-html-parser/node_modules/dom-serializer/index.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/domelementtype/lib/index.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/decode.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/decode_codepoint.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/encode.js","../node_modules/react-html-parser/node_modules/dom-serializer/node_modules/entities/lib/index.js","../node_modules/react-html-parser/node_modules/domelementtype/index.js","../node_modules/react-html-parser/node_modules/domhandler/index.js","../node_modules/react-html-parser/node_modules/domhandler/lib/element.js","../node_modules/react-html-parser/node_modules/domhandler/lib/node.js","../node_modules/react-html-parser/node_modules/domutils/index.js","../node_modules/react-html-parser/node_modules/domutils/lib/helpers.js","../node_modules/react-html-parser/node_modules/domutils/lib/legacy.js","../node_modules/react-html-parser/node_modules/domutils/lib/manipulation.js","../node_modules/react-html-parser/node_modules/domutils/lib/querying.js","../node_modules/react-html-parser/node_modules/domutils/lib/stringify.js","../node_modules/react-html-parser/node_modules/domutils/lib/traversal.js","../node_modules/react-html-parser/node_modules/entities/lib/decode_codepoint.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/CollectingHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/FeedHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Parser.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/ProxyHandler.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Stream.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/Tokenizer.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/WritableStream.js","../node_modules/react-html-parser/node_modules/htmlparser2/lib/index.js","../node_modules/safe-buffer/index.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/chart.js/auto/auto.js","../node_modules/@kurkle/color/dist/color.esm.js","../node_modules/chart.js/src/helpers/helpers.core.ts","../node_modules/chart.js/src/helpers/helpers.math.ts","../node_modules/chart.js/src/helpers/helpers.collection.ts","../node_modules/chart.js/src/helpers/helpers.extras.ts","../node_modules/chart.js/src/helpers/helpers.easing.ts","../node_modules/chart.js/src/helpers/helpers.color.ts","../node_modules/chart.js/src/core/core.animations.defaults.js","../node_modules/chart.js/src/helpers/helpers.intl.ts","../node_modules/chart.js/src/core/core.ticks.js","../node_modules/chart.js/src/core/core.defaults.js","../node_modules/chart.js/src/core/core.layouts.defaults.js","../node_modules/chart.js/src/core/core.scale.defaults.js","../node_modules/chart.js/src/helpers/helpers.canvas.ts","../node_modules/chart.js/src/helpers/helpers.options.ts","../node_modules/chart.js/src/helpers/helpers.config.ts","../node_modules/chart.js/src/helpers/helpers.curve.ts","../node_modules/chart.js/src/helpers/helpers.dom.ts","../node_modules/chart.js/src/helpers/helpers.interpolation.ts","../node_modules/chart.js/src/helpers/helpers.rtl.ts","../node_modules/chart.js/src/helpers/helpers.segment.js","../node_modules/chart.js/src/core/core.animator.js","../node_modules/chart.js/src/core/core.animation.js","../node_modules/chart.js/src/core/core.animations.js","../node_modules/chart.js/src/core/core.datasetController.js","../node_modules/chart.js/src/controllers/controller.bar.js","../node_modules/chart.js/src/controllers/controller.bubble.js","../node_modules/chart.js/src/controllers/controller.doughnut.js","../node_modules/chart.js/src/controllers/controller.line.js","../node_modules/chart.js/src/controllers/controller.polarArea.js","../node_modules/chart.js/src/controllers/controller.pie.js","../node_modules/chart.js/src/controllers/controller.radar.js","../node_modules/chart.js/src/controllers/controller.scatter.js","../node_modules/chart.js/src/core/core.adapters.ts","../node_modules/chart.js/src/core/core.interaction.js","../node_modules/chart.js/src/core/core.layouts.js","../node_modules/chart.js/src/platform/platform.base.js","../node_modules/chart.js/src/platform/platform.basic.js","../node_modules/chart.js/src/platform/platform.dom.js","../node_modules/chart.js/src/core/core.element.ts","../node_modules/chart.js/src/core/core.scale.autoskip.js","../node_modules/chart.js/src/core/core.scale.js","../node_modules/chart.js/src/core/core.typedRegistry.js","../node_modules/chart.js/src/core/core.registry.js","../node_modules/chart.js/src/core/core.plugins.js","../node_modules/chart.js/src/core/core.config.js","../node_modules/chart.js/src/core/core.controller.js","../node_modules/chart.js/src/platform/index.js","../node_modules/chart.js/src/elements/element.arc.ts","../node_modules/chart.js/src/elements/element.line.js","../node_modules/chart.js/src/elements/element.point.ts","../node_modules/chart.js/src/elements/element.bar.js","../node_modules/chart.js/src/plugins/plugin.colors.ts","../node_modules/chart.js/src/plugins/plugin.decimation.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.segment.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.helper.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.options.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.target.stack.js","../node_modules/chart.js/src/plugins/plugin.filler/simpleArc.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.target.js","../node_modules/chart.js/src/plugins/plugin.filler/filler.drawing.js","../node_modules/chart.js/src/plugins/plugin.filler/index.js","../node_modules/chart.js/src/plugins/plugin.legend.js","../node_modules/chart.js/src/plugins/plugin.title.js","../node_modules/chart.js/src/plugins/plugin.subtitle.js","../node_modules/chart.js/src/plugins/plugin.tooltip.js","../node_modules/chart.js/src/scales/scale.category.js","../node_modules/chart.js/src/scales/scale.linearbase.js","../node_modules/chart.js/src/scales/scale.linear.js","../node_modules/chart.js/src/scales/scale.logarithmic.js","../node_modules/chart.js/src/scales/scale.radialLinear.js","../node_modules/chart.js/src/scales/scale.time.js","../node_modules/chart.js/src/scales/scale.timeseries.js","../node_modules/chart.js/src/index.ts","../node_modules/react-chartjs-2/src/utils.ts","../node_modules/react-chartjs-2/src/chart.tsx","../node_modules/react-chartjs-2/src/typedCharts.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport capitalize from '../utils/capitalize';\nvar SIZE = 44;\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-block'\n    },\n\n    /* Styles applied to the root element if `variant=\"static\"`. */\n    static: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `variant=\"indeterminate\"`. */\n    indeterminate: {\n      animation: '$circular-rotate 1.4s linear infinite'\n    },\n\n    /* Styles applied to the root element if `variant=\"determinate\"`. */\n    determinate: {\n      transition: theme.transitions.create('transform')\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      color: theme.palette.primary.main\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      color: theme.palette.secondary.main\n    },\n\n    /* Styles applied to the `svg` element. */\n    svg: {\n      display: 'block' // Keeps the progress centered\n\n    },\n\n    /* Styles applied to the `circle` svg path. */\n    circle: {\n      stroke: 'currentColor' // Use butt to follow the specification, by chance, it's already the default CSS value.\n      // strokeLinecap: 'butt',\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"static\"`. */\n    circleStatic: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"`. */\n    circleIndeterminate: {\n      animation: '$circular-dash 1.4s ease-in-out infinite',\n      // Some default value that looks fine waiting for the animation to kicks in.\n      strokeDasharray: '80px, 200px',\n      strokeDashoffset: '0px' // Add the unit to fix a Edge 16 and below bug.\n\n    },\n\n    /* Styles applied to the `circle` svg path if `variant=\"determinate\"`. */\n    circleDeterminate: {\n      transition: theme.transitions.create('stroke-dashoffset')\n    },\n    '@keyframes circular-rotate': {\n      '0%': {\n        // Fix IE 11 wobbly\n        transformOrigin: '50% 50%'\n      },\n      '100%': {\n        transform: 'rotate(360deg)'\n      }\n    },\n    '@keyframes circular-dash': {\n      '0%': {\n        strokeDasharray: '1px, 200px',\n        strokeDashoffset: '0px'\n      },\n      '50%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-15px'\n      },\n      '100%': {\n        strokeDasharray: '100px, 200px',\n        strokeDashoffset: '-125px'\n      }\n    },\n\n    /* Styles applied to the `circle` svg path if `disableShrink={true}`. */\n    circleDisableShrink: {\n      animation: 'none'\n    }\n  };\n};\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\n\nvar CircularProgress = /*#__PURE__*/React.forwardRef(function CircularProgress(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$disableShrink = props.disableShrink,\n      disableShrink = _props$disableShrink === void 0 ? false : _props$disableShrink,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 40 : _props$size,\n      style = props.style,\n      _props$thickness = props.thickness,\n      thickness = _props$thickness === void 0 ? 3.6 : _props$thickness,\n      _props$value = props.value,\n      value = _props$value === void 0 ? 0 : _props$value,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'indeterminate' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"disableShrink\", \"size\", \"style\", \"thickness\", \"value\", \"variant\"]);\n\n  var circleStyle = {};\n  var rootStyle = {};\n  var rootProps = {};\n\n  if (variant === 'determinate' || variant === 'static') {\n    var circumference = 2 * Math.PI * ((SIZE - thickness) / 2);\n    circleStyle.strokeDasharray = circumference.toFixed(3);\n    rootProps['aria-valuenow'] = Math.round(value);\n    circleStyle.strokeDashoffset = \"\".concat(((100 - value) / 100 * circumference).toFixed(3), \"px\");\n    rootStyle.transform = 'rotate(-90deg)';\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, color !== 'inherit' && classes[\"color\".concat(capitalize(color))], {\n      'determinate': classes.determinate,\n      'indeterminate': classes.indeterminate,\n      'static': classes.static\n    }[variant]),\n    style: _extends({\n      width: size,\n      height: size\n    }, rootStyle, style),\n    ref: ref,\n    role: \"progressbar\"\n  }, rootProps, other), /*#__PURE__*/React.createElement(\"svg\", {\n    className: classes.svg,\n    viewBox: \"\".concat(SIZE / 2, \" \").concat(SIZE / 2, \" \").concat(SIZE, \" \").concat(SIZE)\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    className: clsx(classes.circle, disableShrink && classes.circleDisableShrink, {\n      'determinate': classes.circleDeterminate,\n      'indeterminate': classes.circleIndeterminate,\n      'static': classes.circleStatic\n    }[variant]),\n    style: circleStyle,\n    cx: SIZE,\n    cy: SIZE,\n    r: (SIZE - thickness) / 2,\n    fill: \"none\",\n    strokeWidth: thickness\n  })));\n});\nprocess.env.NODE_ENV !== \"production\" ? CircularProgress.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['inherit', 'primary', 'secondary']),\n\n  /**\n   * If `true`, the shrink animation is disabled.\n   * This only works if variant is `indeterminate`.\n   */\n  disableShrink: chainPropTypes(PropTypes.bool, function (props) {\n    if (props.disableShrink && props.variant && props.variant !== 'indeterminate') {\n      return new Error('Material-UI: You have provided the `disableShrink` prop ' + 'with a variant other than `indeterminate`. This will have no effect.');\n    }\n\n    return null;\n  }),\n\n  /**\n   * The size of the circle.\n   * If using a number, the pixel unit is assumed.\n   * If using a string, you need to provide the CSS unit, e.g '3rem'.\n   */\n  size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n\n  /**\n   * The thickness of the circle.\n   */\n  thickness: PropTypes.number,\n\n  /**\n   * The value of the progress indicator for the determinate variant.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n\n  /**\n   * The variant to use.\n   * Use indeterminate when there is no progress value.\n   */\n  variant: chainPropTypes(PropTypes.oneOf(['determinate', 'indeterminate', 'static']), function (props) {\n    var variant = props.variant;\n\n    if (variant === 'static') {\n      throw new Error('Material-UI: `variant=\"static\"` was deprecated. Use `variant=\"determinate\"` instead.');\n    }\n\n    return null;\n  })\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCircularProgress',\n  flip: false\n})(CircularProgress);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { exactProp } from '@material-ui/utils';\nimport ThemeContext from '../useTheme/ThemeContext';\nimport useTheme from '../useTheme';\nimport nested from './nested'; // To support composition of theme.\n\nfunction mergeOuterLocalTheme(outerTheme, localTheme) {\n  if (typeof localTheme === 'function') {\n    var mergedTheme = localTheme(outerTheme);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!mergedTheme) {\n        console.error(['Material-UI: You should return an object from your theme function, i.e.', '<ThemeProvider theme={() => ({})} />'].join('\\n'));\n      }\n    }\n\n    return mergedTheme;\n  }\n\n  return _extends({}, outerTheme, localTheme);\n}\n/**\n * This component takes a `theme` prop.\n * It makes the `theme` available down the React tree thanks to React context.\n * This component should preferably be used at **the root of your component tree**.\n */\n\n\nfunction ThemeProvider(props) {\n  var children = props.children,\n      localTheme = props.theme;\n  var outerTheme = useTheme();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (outerTheme === null && typeof localTheme === 'function') {\n      console.error(['Material-UI: You are providing a theme function prop to the ThemeProvider component:', '<ThemeProvider theme={outerTheme => outerTheme} />', '', 'However, no outer theme is present.', 'Make sure a theme is already injected higher in the React tree ' + 'or provide a theme object.'].join('\\n'));\n    }\n  }\n\n  var theme = React.useMemo(function () {\n    var output = outerTheme === null ? localTheme : mergeOuterLocalTheme(outerTheme, localTheme);\n\n    if (output != null) {\n      output[nested] = outerTheme !== null;\n    }\n\n    return output;\n  }, [localTheme, outerTheme]);\n  return /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n    value: theme\n  }, children);\n}\n\nprocess.env.NODE_ENV !== \"production\" ? ThemeProvider.propTypes = {\n  /**\n   * Your component tree.\n   */\n  children: PropTypes.node.isRequired,\n\n  /**\n   * A theme object. You can provide a function to extend the outer theme.\n   */\n  theme: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired\n} : void 0;\n\nif (process.env.NODE_ENV !== 'production') {\n  process.env.NODE_ENV !== \"production\" ? ThemeProvider.propTypes = exactProp(ThemeProvider.propTypes) : void 0;\n}\n\nexport default ThemeProvider;","import { unstable_generateUtilityClasses as generateUtilityClasses } from '@mui/utils';\nimport generateUtilityClass from '../generateUtilityClass';\nexport function getLinearProgressUtilityClass(slot) {\n  return generateUtilityClass('MuiLinearProgress', slot);\n}\nconst linearProgressClasses = generateUtilityClasses('MuiLinearProgress', ['root', 'colorPrimary', 'colorSecondary', 'determinate', 'indeterminate', 'buffer', 'query', 'dashed', 'dashedColorPrimary', 'dashedColorSecondary', 'bar', 'barColorPrimary', 'barColorSecondary', 'bar1Indeterminate', 'bar1Determinate', 'bar1Buffer', 'bar2Indeterminate', 'bar2Buffer']);\nexport default linearProgressClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\", \"color\", \"value\", \"valueBuffer\", \"variant\"];\nlet _ = t => t,\n  _t,\n  _t2,\n  _t3,\n  _t4,\n  _t5,\n  _t6;\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base/composeClasses';\nimport { keyframes, css, darken, lighten } from '@mui/system';\nimport capitalize from '../utils/capitalize';\nimport useTheme from '../styles/useTheme';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getLinearProgressUtilityClass } from './linearProgressClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst TRANSITION_DURATION = 4; // seconds\nconst indeterminate1Keyframe = keyframes(_t || (_t = _`\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n`));\nconst indeterminate2Keyframe = keyframes(_t2 || (_t2 = _`\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n`));\nconst bufferKeyframe = keyframes(_t3 || (_t3 = _`\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n`));\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    variant,\n    color\n  } = ownerState;\n  const slots = {\n    root: ['root', `color${capitalize(color)}`, variant],\n    dashed: ['dashed', `dashedColor${capitalize(color)}`],\n    bar1: ['bar', `barColor${capitalize(color)}`, (variant === 'indeterminate' || variant === 'query') && 'bar1Indeterminate', variant === 'determinate' && 'bar1Determinate', variant === 'buffer' && 'bar1Buffer'],\n    bar2: ['bar', variant !== 'buffer' && `barColor${capitalize(color)}`, variant === 'buffer' && `color${capitalize(color)}`, (variant === 'indeterminate' || variant === 'query') && 'bar2Indeterminate', variant === 'buffer' && 'bar2Buffer']\n  };\n  return composeClasses(slots, getLinearProgressUtilityClass, classes);\n};\nconst getColorShade = (theme, color) => {\n  if (color === 'inherit') {\n    return 'currentColor';\n  }\n  if (theme.vars) {\n    return theme.vars.palette.LinearProgress[`${color}Bg`];\n  }\n  return theme.palette.mode === 'light' ? lighten(theme.palette[color].main, 0.62) : darken(theme.palette[color].main, 0.5);\n};\nconst LinearProgressRoot = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, styles[`color${capitalize(ownerState.color)}`], styles[ownerState.variant]];\n  }\n})(({\n  ownerState,\n  theme\n}) => _extends({\n  position: 'relative',\n  overflow: 'hidden',\n  display: 'block',\n  height: 4,\n  zIndex: 0,\n  // Fix Safari's bug during composition of different paint.\n  '@media print': {\n    colorAdjust: 'exact'\n  },\n  backgroundColor: getColorShade(theme, ownerState.color)\n}, ownerState.color === 'inherit' && ownerState.variant !== 'buffer' && {\n  backgroundColor: 'none',\n  '&::before': {\n    content: '\"\"',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'currentColor',\n    opacity: 0.3\n  }\n}, ownerState.variant === 'buffer' && {\n  backgroundColor: 'transparent'\n}, ownerState.variant === 'query' && {\n  transform: 'rotate(180deg)'\n}));\nconst LinearProgressDashed = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Dashed',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.dashed, styles[`dashedColor${capitalize(ownerState.color)}`]];\n  }\n})(({\n  ownerState,\n  theme\n}) => {\n  const backgroundColor = getColorShade(theme, ownerState.color);\n  return _extends({\n    position: 'absolute',\n    marginTop: 0,\n    height: '100%',\n    width: '100%'\n  }, ownerState.color === 'inherit' && {\n    opacity: 0.3\n  }, {\n    backgroundImage: `radial-gradient(${backgroundColor} 0%, ${backgroundColor} 16%, transparent 42%)`,\n    backgroundSize: '10px 10px',\n    backgroundPosition: '0 -23px'\n  });\n}, css(_t4 || (_t4 = _`\n    animation: ${0} 3s infinite linear;\n  `), bufferKeyframe));\nconst LinearProgressBar1 = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Bar1',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.bar, styles[`barColor${capitalize(ownerState.color)}`], (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && styles.bar1Indeterminate, ownerState.variant === 'determinate' && styles.bar1Determinate, ownerState.variant === 'buffer' && styles.bar1Buffer];\n  }\n})(({\n  ownerState,\n  theme\n}) => _extends({\n  width: '100%',\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  top: 0,\n  transition: 'transform 0.2s linear',\n  transformOrigin: 'left',\n  backgroundColor: ownerState.color === 'inherit' ? 'currentColor' : (theme.vars || theme).palette[ownerState.color].main\n}, ownerState.variant === 'determinate' && {\n  transition: `transform .${TRANSITION_DURATION}s linear`\n}, ownerState.variant === 'buffer' && {\n  zIndex: 1,\n  transition: `transform .${TRANSITION_DURATION}s linear`\n}), ({\n  ownerState\n}) => (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && css(_t5 || (_t5 = _`\n      width: auto;\n      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    `), indeterminate1Keyframe));\nconst LinearProgressBar2 = styled('span', {\n  name: 'MuiLinearProgress',\n  slot: 'Bar2',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.bar, styles[`barColor${capitalize(ownerState.color)}`], (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && styles.bar2Indeterminate, ownerState.variant === 'buffer' && styles.bar2Buffer];\n  }\n})(({\n  ownerState,\n  theme\n}) => _extends({\n  width: '100%',\n  position: 'absolute',\n  left: 0,\n  bottom: 0,\n  top: 0,\n  transition: 'transform 0.2s linear',\n  transformOrigin: 'left'\n}, ownerState.variant !== 'buffer' && {\n  backgroundColor: ownerState.color === 'inherit' ? 'currentColor' : (theme.vars || theme).palette[ownerState.color].main\n}, ownerState.color === 'inherit' && {\n  opacity: 0.3\n}, ownerState.variant === 'buffer' && {\n  backgroundColor: getColorShade(theme, ownerState.color),\n  transition: `transform .${TRANSITION_DURATION}s linear`\n}), ({\n  ownerState\n}) => (ownerState.variant === 'indeterminate' || ownerState.variant === 'query') && css(_t6 || (_t6 = _`\n      width: auto;\n      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    `), indeterminate2Keyframe));\n\n/**\n * ## ARIA\n *\n * If the progress bar is describing the loading progress of a particular region of a page,\n * you should use `aria-describedby` to point to the progress bar, and set the `aria-busy`\n * attribute to `true` on that region until it has finished loading.\n */\nconst LinearProgress = /*#__PURE__*/React.forwardRef(function LinearProgress(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiLinearProgress'\n  });\n  const {\n      className,\n      color = 'primary',\n      value,\n      valueBuffer,\n      variant = 'indeterminate'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    color,\n    variant\n  });\n  const classes = useUtilityClasses(ownerState);\n  const theme = useTheme();\n  const rootProps = {};\n  const inlineStyles = {\n    bar1: {},\n    bar2: {}\n  };\n  if (variant === 'determinate' || variant === 'buffer') {\n    if (value !== undefined) {\n      rootProps['aria-valuenow'] = Math.round(value);\n      rootProps['aria-valuemin'] = 0;\n      rootProps['aria-valuemax'] = 100;\n      let transform = value - 100;\n      if (theme.direction === 'rtl') {\n        transform = -transform;\n      }\n      inlineStyles.bar1.transform = `translateX(${transform}%)`;\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('MUI: You need to provide a value prop ' + 'when using the determinate or buffer variant of LinearProgress .');\n    }\n  }\n  if (variant === 'buffer') {\n    if (valueBuffer !== undefined) {\n      let transform = (valueBuffer || 0) - 100;\n      if (theme.direction === 'rtl') {\n        transform = -transform;\n      }\n      inlineStyles.bar2.transform = `translateX(${transform}%)`;\n    } else if (process.env.NODE_ENV !== 'production') {\n      console.error('MUI: You need to provide a valueBuffer prop ' + 'when using the buffer variant of LinearProgress.');\n    }\n  }\n  return /*#__PURE__*/_jsxs(LinearProgressRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    role: \"progressbar\"\n  }, rootProps, {\n    ref: ref\n  }, other, {\n    children: [variant === 'buffer' ? /*#__PURE__*/_jsx(LinearProgressDashed, {\n      className: classes.dashed,\n      ownerState: ownerState\n    }) : null, /*#__PURE__*/_jsx(LinearProgressBar1, {\n      className: classes.bar1,\n      ownerState: ownerState,\n      style: inlineStyles.bar1\n    }), variant === 'determinate' ? null : /*#__PURE__*/_jsx(LinearProgressBar2, {\n      className: classes.bar2,\n      ownerState: ownerState,\n      style: inlineStyles.bar2\n    })]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? LinearProgress.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['inherit', 'primary', 'secondary']), PropTypes.string]),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the progress indicator for the determinate and buffer variants.\n   * Value between 0 and 100.\n   */\n  value: PropTypes.number,\n  /**\n   * The value for the buffer variant.\n   * Value between 0 and 100.\n   */\n  valueBuffer: PropTypes.number,\n  /**\n   * The variant to use.\n   * Use indeterminate or query when there is no progress value.\n   * @default 'indeterminate'\n   */\n  variant: PropTypes.oneOf(['buffer', 'determinate', 'indeterminate', 'query'])\n} : void 0;\nexport default LinearProgress;","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = HtmlParser;\n\nvar _htmlparser = require('htmlparser2');\n\nvar _htmlparser2 = _interopRequireDefault(_htmlparser);\n\nvar _processNodes = require('./processNodes');\n\nvar _processNodes2 = _interopRequireDefault(_processNodes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Parses a HTML string and returns a list of React components generated from it\n *\n * @param {String} html The HTML to convert into React component\n * @param {Object} options Options to pass\n * @returns {Array} List of top level React elements\n */\nfunction HtmlParser(html) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$decodeEntities = _ref.decodeEntities,\n      decodeEntities = _ref$decodeEntities === undefined ? true : _ref$decodeEntities,\n      transform = _ref.transform,\n      _ref$preprocessNodes = _ref.preprocessNodes,\n      preprocessNodes = _ref$preprocessNodes === undefined ? function (nodes) {\n    return nodes;\n  } : _ref$preprocessNodes;\n\n  var nodes = preprocessNodes(_htmlparser2.default.parseDOM(html, { decodeEntities: decodeEntities }));\n  return (0, _processNodes2.default)(nodes, transform);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = convertNodeToElement;\n\nvar _elementTypes = require('./elementTypes');\n\nvar _elementTypes2 = _interopRequireDefault(_elementTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts a htmlparser2 node to a React element\n *\n * @param {Object} node The htmlparser2 node to convert\n * @param {Number} index The index of the current node\n * @param {Function} transform Transform function to apply to children of the node\n * @returns {React.Element}\n */\nfunction convertNodeToElement(node, index, transform) {\n  return _elementTypes2.default[node.type](node, index, transform);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * List of boolean attributes\n * These attributes should have their React attribute value set to be the same as their name\n * E.g. <input disabled> = <input disabled>\n *      <input disabled=\"\"> = <input disabled>\n *      <input disabled=\"disabled\"> = <input disabled>\n * @type {Array}\n */\nexports.default = ['allowfullScreen', 'async', 'autoplay', 'capture', 'checked', 'controls', 'default', 'defer', 'disabled', 'formnovalidate', 'hidden', 'loop', 'multiple', 'muted', 'novalidate', 'open', 'playsinline', 'readonly', 'required', 'reversed', 'scoped', 'seamless', 'selected', 'itemscope'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Mapping of standard HTML attributes to their React counterparts\n * List taken and reversed from react/src/renderers/dom/shared/HTMLDOMPropertyConfig.js\n * https://github.com/facebook/react/blob/c9c3c339b757682f1154f1c915eb55e6a8766933/src/renderers/dom/shared/HTMLDOMPropertyConfig.js\n * @type {Object}\n */\nexports.default = {\n  /**\n   * Standard Properties\n   */\n  accept: 'accept',\n  'accept-charset': 'acceptCharset',\n  accesskey: 'accessKey',\n  action: 'action',\n  allowfullscreen: 'allowFullScreen',\n  allowtransparency: 'allowTransparency',\n  alt: 'alt',\n  as: 'as',\n  async: 'async',\n  autocomplete: 'autoComplete',\n  autoplay: 'autoPlay',\n  capture: 'capture',\n  cellpadding: 'cellPadding',\n  cellspacing: 'cellSpacing',\n  charset: 'charSet',\n  challenge: 'challenge',\n  checked: 'checked',\n  cite: 'cite',\n  classid: 'classID',\n  class: 'className',\n  cols: 'cols',\n  colspan: 'colSpan',\n  content: 'content',\n  contenteditable: 'contentEditable',\n  contextmenu: 'contextMenu',\n  controls: 'controls',\n  controlsList: 'controlsList',\n  coords: 'coords',\n  crossorigin: 'crossOrigin',\n  data: 'data',\n  datetime: 'dateTime',\n  default: 'default',\n  defer: 'defer',\n  dir: 'dir',\n  disabled: 'disabled',\n  download: 'download',\n  draggable: 'draggable',\n  enctype: 'encType',\n  form: 'form',\n  formaction: 'formAction',\n  formenctype: 'formEncType',\n  formmethod: 'formMethod',\n  formnovalidate: 'formNoValidate',\n  formtarget: 'formTarget',\n  frameborder: 'frameBorder',\n  headers: 'headers',\n  height: 'height',\n  hidden: 'hidden',\n  high: 'high',\n  href: 'href',\n  hreflang: 'hrefLang',\n  for: 'htmlFor',\n  'http-equiv': 'httpEquiv',\n  icon: 'icon',\n  id: 'id',\n  inputmode: 'inputMode',\n  integrity: 'integrity',\n  is: 'is',\n  keyparams: 'keyParams',\n  keytype: 'keyType',\n  kind: 'kind',\n  label: 'label',\n  lang: 'lang',\n  list: 'list',\n  loop: 'loop',\n  low: 'low',\n  manifest: 'manifest',\n  marginheight: 'marginHeight',\n  marginwidth: 'marginWidth',\n  max: 'max',\n  maxlength: 'maxLength',\n  media: 'media',\n  mediagroup: 'mediaGroup',\n  method: 'method',\n  min: 'min',\n  minlength: 'minLength',\n  multiple: 'multiple',\n  muted: 'muted',\n  name: 'name',\n  nonce: 'nonce',\n  novalidate: 'noValidate',\n  open: 'open',\n  optimum: 'optimum',\n  pattern: 'pattern',\n  placeholder: 'placeholder',\n  playsinline: 'playsInline',\n  poster: 'poster',\n  preload: 'preload',\n  profile: 'profile',\n  radiogroup: 'radioGroup',\n  readonly: 'readOnly',\n  referrerpolicy: 'referrerPolicy',\n  rel: 'rel',\n  required: 'required',\n  reversed: 'reversed',\n  role: 'role',\n  rows: 'rows',\n  rowspan: 'rowSpan',\n  sandbox: 'sandbox',\n  scope: 'scope',\n  scoped: 'scoped',\n  scrolling: 'scrolling',\n  seamless: 'seamless',\n  selected: 'selected',\n  shape: 'shape',\n  size: 'size',\n  sizes: 'sizes',\n  slot: 'slot',\n  span: 'span',\n  spellcheck: 'spellCheck',\n  src: 'src',\n  srcdoc: 'srcDoc',\n  srclang: 'srcLang',\n  srcset: 'srcSet',\n  start: 'start',\n  step: 'step',\n  style: 'style',\n  summary: 'summary',\n  tabindex: 'tabIndex',\n  target: 'target',\n  title: 'title',\n  type: 'type',\n  usemap: 'useMap',\n  value: 'value',\n  width: 'width',\n  wmode: 'wmode',\n  wrap: 'wrap',\n  /**\n   * RDFa Properties\n   */\n  about: 'about',\n  datatype: 'datatype',\n  inlist: 'inlist',\n  prefix: 'prefix',\n  property: 'property',\n  resource: 'resource',\n  typeof: 'typeof',\n  vocab: 'vocab',\n  /**\n   * Non-standard Properties\n   */\n  autocapitalize: 'autoCapitalize',\n  autocorrect: 'autoCorrect',\n  autosave: 'autoSave',\n  color: 'color',\n  itemprop: 'itemProp',\n  itemscope: 'itemScope',\n  itemtype: 'itemType',\n  itemid: 'itemID',\n  itemref: 'itemRef',\n  results: 'results',\n  security: 'security',\n  unselectable: 'unselectable'\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * List of void elements\n * These elements are not allowed to have children\n * @type {Array}\n */\nexports.default = ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StyleElementType;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _generatePropsFromAttributes = require('../utils/generatePropsFromAttributes');\n\nvar _generatePropsFromAttributes2 = _interopRequireDefault(_generatePropsFromAttributes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts a <style> element to a React element\n *\n * @param {Object} node The style node\n * @param {String} index The index of the React element relative to it's parent\n * @returns {React.Element} The React style element\n */\nfunction StyleElementType(node, index) {\n\n  // The style element only ever has a single child which is the styles so try and find this to add as\n  // a child to the style element that will be created\n  var styles = void 0;\n  if (node.children.length > 0) {\n    styles = node.children[0].data;\n  }\n\n  // generate props\n  var props = (0, _generatePropsFromAttributes2.default)(node.attribs, index);\n\n  // create and return the element\n  return _react2.default.createElement('style', props, styles);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TagElementType;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _processNodes = require('../processNodes');\n\nvar _processNodes2 = _interopRequireDefault(_processNodes);\n\nvar _generatePropsFromAttributes = require('../utils/generatePropsFromAttributes');\n\nvar _generatePropsFromAttributes2 = _interopRequireDefault(_generatePropsFromAttributes);\n\nvar _VoidElements = require('../dom/elements/VoidElements');\n\nvar _VoidElements2 = _interopRequireDefault(_VoidElements);\n\nvar _isValidTagOrAttributeName = require('../utils/isValidTagOrAttributeName');\n\nvar _isValidTagOrAttributeName2 = _interopRequireDefault(_isValidTagOrAttributeName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Converts any element (excluding style - see StyleElementType - and script) to a react element.\n *\n * @param {Object} node The tag node\n * @param {String} index The index of the React element relative to it's parent\n * @param {Function} transform The transform function to apply to all children\n * @returns {React.Element} The React tag element\n */\nfunction TagElementType(node, index, transform) {\n\n  var tagName = node.name;\n\n  // validate tag name\n  if (!(0, _isValidTagOrAttributeName2.default)(tagName)) {\n    return null;\n  }\n\n  // generate props\n  var props = (0, _generatePropsFromAttributes2.default)(node.attribs, index);\n\n  // If the node is not a void element and has children then process them\n  var children = null;\n  if (_VoidElements2.default.indexOf(tagName) === -1) {\n    children = (0, _processNodes2.default)(node.children, transform);\n  }\n\n  // create and return the element\n  return _react2.default.createElement(tagName, props, children);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TextElementType;\n/**\n * Converts a text node to a React text element\n *\n * @param {Object} node The text node\n * @returns {String} The text\n */\nfunction TextElementType(node) {\n\n  // React will accept plain text for rendering so just return the node data\n  return node.data;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = UnsupportedElementType;\n/**\n * Handles an unsupported element type by returning null so nothing is rendered\n * @returns {null}\n */\nfunction UnsupportedElementType() {\n\n  // do nothing because the element type is unsupported\n  // comment, directive, script, cdata, doctype are all currently unsupported\n  return null;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ElementType$Text$Ele;\n\nvar _htmlparser = require('htmlparser2');\n\nvar _TextElementType = require('./TextElementType');\n\nvar _TextElementType2 = _interopRequireDefault(_TextElementType);\n\nvar _TagElementType = require('./TagElementType');\n\nvar _TagElementType2 = _interopRequireDefault(_TagElementType);\n\nvar _StyleElementType = require('./StyleElementType');\n\nvar _StyleElementType2 = _interopRequireDefault(_StyleElementType);\n\nvar _UnsupportedElementType = require('./UnsupportedElementType');\n\nvar _UnsupportedElementType2 = _interopRequireDefault(_UnsupportedElementType);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; } /*\n                                                                                                                                                                                                                   * Map each htmlparser2 element type to a function which will convert that element type to a React element\n                                                                                                                                                                                                                   * Not all of the element types are supported so the UnsupportedElementType is used for them which will not return any\n                                                                                                                                                                                                                   * value\n                                                                                                                                                                                                                   */\n\nexports.default = (_ElementType$Text$Ele = {}, _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Text, _TextElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Tag, _TagElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Style, _StyleElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Directive, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Comment, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Script, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.CDATA, _UnsupportedElementType2.default), _defineProperty(_ElementType$Text$Ele, _htmlparser.ElementType.Doctype, _UnsupportedElementType2.default), _ElementType$Text$Ele);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.htmlparser2 = exports.convertNodeToElement = exports.processNodes = undefined;\n\nvar _processNodes = require('./processNodes');\n\nObject.defineProperty(exports, 'processNodes', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_processNodes).default;\n  }\n});\n\nvar _convertNodeToElement = require('./convertNodeToElement');\n\nObject.defineProperty(exports, 'convertNodeToElement', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_convertNodeToElement).default;\n  }\n});\n\nvar _htmlparser = require('htmlparser2');\n\nObject.defineProperty(exports, 'htmlparser2', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_htmlparser).default;\n  }\n});\n\nvar _HtmlParser = require('./HtmlParser');\n\nvar _HtmlParser2 = _interopRequireDefault(_HtmlParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _HtmlParser2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = processNodes;\n\nvar _isEmptyTextNode = require('./utils/isEmptyTextNode');\n\nvar _isEmptyTextNode2 = _interopRequireDefault(_isEmptyTextNode);\n\nvar _convertNodeToElement = require('./convertNodeToElement');\n\nvar _convertNodeToElement2 = _interopRequireDefault(_convertNodeToElement);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Processes the nodes generated by htmlparser2 and convert them all into React elements\n *\n * @param {Object[]} nodes List of nodes to process\n * @param {Function} transform Transform function to optionally apply to nodes\n * @returns {React.Element[]} The list of processed React elements\n */\nfunction processNodes(nodes, transform) {\n\n  return nodes.filter(function (node) {\n    return !(0, _isEmptyTextNode2.default)(node);\n  }).map(function (node, index) {\n\n    // return the result of the transform function if applicable\n    var transformed = void 0;\n    if (typeof transform === 'function') {\n      transformed = transform(node, index);\n      if (transformed === null || !!transformed) {\n        return transformed;\n      }\n    }\n\n    // otherwise convert the node as standard\n    return (0, _convertNodeToElement2.default)(node, index, transform);\n  });\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = generatePropsFromAttributes;\n\nvar _htmlAttributesToReact = require('./htmlAttributesToReact');\n\nvar _htmlAttributesToReact2 = _interopRequireDefault(_htmlAttributesToReact);\n\nvar _inlineStyleToObject = require('./inlineStyleToObject');\n\nvar _inlineStyleToObject2 = _interopRequireDefault(_inlineStyleToObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Generates props for a React element from an object of HTML attributes\n *\n * @param {Object} attributes The HTML attributes\n * @param {String} key The key to give the react element\n */\nfunction generatePropsFromAttributes(attributes, key) {\n\n  // generate props\n  var props = _extends({}, (0, _htmlAttributesToReact2.default)(attributes), { key: key });\n\n  // if there is an inline/string style prop then convert it to a React style object\n  // otherwise, it is invalid and omitted\n  if (typeof props.style === 'string' || props.style instanceof String) {\n    props.style = (0, _inlineStyleToObject2.default)(props.style);\n  } else {\n    delete props.style;\n  }\n\n  return props;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = htmlAttributesToReact;\n\nvar _BooleanAttributes = require('../dom/attributes/BooleanAttributes');\n\nvar _BooleanAttributes2 = _interopRequireDefault(_BooleanAttributes);\n\nvar _ReactAttributes = require('../dom/attributes/ReactAttributes');\n\nvar _ReactAttributes2 = _interopRequireDefault(_ReactAttributes);\n\nvar _isValidTagOrAttributeName = require('./isValidTagOrAttributeName');\n\nvar _isValidTagOrAttributeName2 = _interopRequireDefault(_isValidTagOrAttributeName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Returns the parsed attribute value taking into account things like boolean attributes\n *\n * @param {String} attribute The name of the attribute\n * @param {*} value The value of the attribute from the HTML\n * @returns {*} The parsed attribute value\n */\nvar getParsedAttributeValue = function getParsedAttributeValue(attribute, value) {\n\n  // if the attribute if a boolean then it's value should be the same as it's name\n  // e.g. disabled=\"disabled\"\n  var lowerBooleanAttributes = _BooleanAttributes2.default.map(function (attr) {\n    return attr.toLowerCase();\n  });\n  if (lowerBooleanAttributes.indexOf(attribute.toLowerCase()) >= 0) {\n    value = attribute;\n  }\n\n  return value;\n};\n\n/**\n * Takes an object of standard HTML property names and converts them to their React counterpart. If the react\n * version does not exist for an attribute then just use it as it is\n *\n * @param {Object} attributes The HTML attributes to convert\n * @returns {Object} The React attributes\n */\nfunction htmlAttributesToReact(attributes) {\n\n  return Object.keys(attributes).filter(function (attr) {\n    return (0, _isValidTagOrAttributeName2.default)(attr);\n  }).reduce(function (mappedAttributes, attribute) {\n\n    // lowercase the attribute name and find it in the react attribute map\n    var lowerCaseAttribute = attribute.toLowerCase();\n\n    // format the attribute name\n    var name = _ReactAttributes2.default[lowerCaseAttribute] || lowerCaseAttribute;\n\n    // add the parsed attribute value to the mapped attributes\n    mappedAttributes[name] = getParsedAttributeValue(name, attributes[attribute]);\n\n    return mappedAttributes;\n  }, {});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.default = InlineStyleToObject;\n/**\n * Converts an inline style string into an object of React style properties\n *\n * @param {String} inlineStyle='' The inline style to convert\n * @returns {Object} The converted style\n */\nfunction InlineStyleToObject() {\n  var inlineStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n\n  // just return empty object if the inlineStyle is empty\n  if (inlineStyle === '') {\n    return {};\n  }\n\n  return inlineStyle.split(';').reduce(function (styleObject, stylePropertyValue) {\n\n    // extract the style property name and value\n    var _stylePropertyValue$s = stylePropertyValue.split(/^([^:]+):/).filter(function (val, i) {\n      return i > 0;\n    }).map(function (item) {\n      return item.trim().toLowerCase();\n    }),\n        _stylePropertyValue$s2 = _slicedToArray(_stylePropertyValue$s, 2),\n        property = _stylePropertyValue$s2[0],\n        value = _stylePropertyValue$s2[1];\n\n    // if there is no value (i.e. no : in the style) then ignore it\n\n\n    if (value === undefined) {\n      return styleObject;\n    }\n\n    // convert the property name into the correct React format\n    // remove all hyphens and convert the letter immediately after each hyphen to upper case\n    // additionally don't uppercase any -ms- prefix\n    // e.g. -ms-style-property = msStyleProperty\n    //      -webkit-style-property = WebkitStyleProperty\n    property = property.replace(/^-ms-/, 'ms-').replace(/-(.)/g, function (_, character) {\n      return character.toUpperCase();\n    });\n\n    // add the new style property and value to the style object\n    styleObject[property] = value;\n\n    return styleObject;\n  }, {});\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmptyTextNode;\n/**\n * Tests a htmlparser2 node and returns whether is it a text node at the start and end of the line containing only\n * white space. This allows these node types to be excluded from the rendering because they are unnecessary.\n *\n * @param {Object} node The element object as created by htmlparser2\n * @returns {boolean} Whether the node is an empty text node\n */\nfunction isEmptyTextNode(node) {\n  return node.type === 'text' && /\\r?\\n/.test(node.data) && node.data.trim() === '';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isValidTagOrAttributeName;\nvar VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/;\n\nvar nameCache = {};\n\nfunction isValidTagOrAttributeName(tagName) {\n  if (!nameCache.hasOwnProperty(tagName)) {\n    nameCache[tagName] = VALID_TAG_REGEX.test(tagName);\n  }\n  return nameCache[tagName];\n}","/*\n  Module dependencies\n*/\nvar ElementType = require('domelementtype');\nvar entities = require('entities');\n\n/* mixed-case SVG and MathML tags & attributes\n   recognized by the HTML parser, see\n   https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n*/\nvar foreignNames = require('./foreignNames.json');\nforeignNames.elementNames.__proto__ = null; /* use as a simple dictionary */\nforeignNames.attributeNames.__proto__ = null;\n\nvar unencodedElements = {\n  __proto__: null,\n  style: true,\n  script: true,\n  xmp: true,\n  iframe: true,\n  noembed: true,\n  noframes: true,\n  plaintext: true,\n  noscript: true\n};\n\n/*\n  Format attributes\n*/\nfunction formatAttrs(attributes, opts) {\n  if (!attributes) return;\n\n  var output = '';\n  var value;\n\n  // Loop through the attributes\n  for (var key in attributes) {\n    value = attributes[key];\n    if (output) {\n      output += ' ';\n    }\n\n    if (opts.xmlMode === 'foreign') {\n      /* fix up mixed-case attribute names */\n      key = foreignNames.attributeNames[key] || key;\n    }\n    output += key;\n    if ((value !== null && value !== '') || opts.xmlMode) {\n      output +=\n        '=\"' +\n        (opts.decodeEntities\n          ? entities.encodeXML(value)\n          : value.replace(/\\\"/g, '&quot;')) +\n        '\"';\n    }\n  }\n\n  return output;\n}\n\n/*\n  Self-enclosing tags (stolen from node-htmlparser)\n*/\nvar singleTag = {\n  __proto__: null,\n  area: true,\n  base: true,\n  basefont: true,\n  br: true,\n  col: true,\n  command: true,\n  embed: true,\n  frame: true,\n  hr: true,\n  img: true,\n  input: true,\n  isindex: true,\n  keygen: true,\n  link: true,\n  meta: true,\n  param: true,\n  source: true,\n  track: true,\n  wbr: true\n};\n\nvar render = (module.exports = function(dom, opts) {\n  if (!Array.isArray(dom) && !dom.cheerio) dom = [dom];\n  opts = opts || {};\n\n  var output = '';\n\n  for (var i = 0; i < dom.length; i++) {\n    var elem = dom[i];\n\n    if (elem.type === 'root') output += render(elem.children, opts);\n    else if (ElementType.isTag(elem)) output += renderTag(elem, opts);\n    else if (elem.type === ElementType.Directive)\n      output += renderDirective(elem);\n    else if (elem.type === ElementType.Comment) output += renderComment(elem);\n    else if (elem.type === ElementType.CDATA) output += renderCdata(elem);\n    else output += renderText(elem, opts);\n  }\n\n  return output;\n});\n\nvar foreignModeIntegrationPoints = [\n  'mi',\n  'mo',\n  'mn',\n  'ms',\n  'mtext',\n  'annotation-xml',\n  'foreignObject',\n  'desc',\n  'title'\n];\n\nfunction renderTag(elem, opts) {\n  // Handle SVG / MathML in HTML\n  if (opts.xmlMode === 'foreign') {\n    /* fix up mixed-case element names */\n    elem.name = foreignNames.elementNames[elem.name] || elem.name;\n    /* exit foreign mode at integration points */\n    if (\n      elem.parent &&\n      foreignModeIntegrationPoints.indexOf(elem.parent.name) >= 0\n    )\n      opts = Object.assign({}, opts, { xmlMode: false });\n  }\n  if (!opts.xmlMode && ['svg', 'math'].indexOf(elem.name) >= 0) {\n    opts = Object.assign({}, opts, { xmlMode: 'foreign' });\n  }\n\n  var tag = '<' + elem.name;\n  var attribs = formatAttrs(elem.attribs, opts);\n\n  if (attribs) {\n    tag += ' ' + attribs;\n  }\n\n  if (opts.xmlMode && (!elem.children || elem.children.length === 0)) {\n    tag += '/>';\n  } else {\n    tag += '>';\n    if (elem.children) {\n      tag += render(elem.children, opts);\n    }\n\n    if (!singleTag[elem.name] || opts.xmlMode) {\n      tag += '</' + elem.name + '>';\n    }\n  }\n\n  return tag;\n}\n\nfunction renderDirective(elem) {\n  return '<' + elem.data + '>';\n}\n\nfunction renderText(elem, opts) {\n  var data = elem.data || '';\n\n  // if entities weren't decoded, no need to encode them back\n  if (\n    opts.decodeEntities &&\n    !(elem.parent && elem.parent.name in unencodedElements)\n  ) {\n    data = entities.encodeXML(data);\n  }\n\n  return data;\n}\n\nfunction renderCdata(elem) {\n  return '<![CDATA[' + elem.children[0].data + ']]>';\n}\n\nfunction renderComment(elem) {\n  return '<!--' + elem.data + '-->';\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Doctype = exports.CDATA = exports.Tag = exports.Style = exports.Script = exports.Comment = exports.Directive = exports.Text = exports.Root = exports.isTag = exports.ElementType = void 0;\n/** Types of elements found in htmlparser2's DOM */\nvar ElementType;\n(function (ElementType) {\n    /** Type for the root element of a document */\n    ElementType[\"Root\"] = \"root\";\n    /** Type for Text */\n    ElementType[\"Text\"] = \"text\";\n    /** Type for <? ... ?> */\n    ElementType[\"Directive\"] = \"directive\";\n    /** Type for <!-- ... --> */\n    ElementType[\"Comment\"] = \"comment\";\n    /** Type for <script> tags */\n    ElementType[\"Script\"] = \"script\";\n    /** Type for <style> tags */\n    ElementType[\"Style\"] = \"style\";\n    /** Type for Any tag */\n    ElementType[\"Tag\"] = \"tag\";\n    /** Type for <![CDATA[ ... ]]> */\n    ElementType[\"CDATA\"] = \"cdata\";\n    /** Type for <!doctype ...> */\n    ElementType[\"Doctype\"] = \"doctype\";\n})(ElementType = exports.ElementType || (exports.ElementType = {}));\n/**\n * Tests whether an element is a tag or not.\n *\n * @param elem Element to test\n */\nfunction isTag(elem) {\n    return (elem.type === ElementType.Tag ||\n        elem.type === ElementType.Script ||\n        elem.type === ElementType.Style);\n}\nexports.isTag = isTag;\n// Exports for backwards compatibility\n/** Type for the root element of a document */\nexports.Root = ElementType.Root;\n/** Type for Text */\nexports.Text = ElementType.Text;\n/** Type for <? ... ?> */\nexports.Directive = ElementType.Directive;\n/** Type for <!-- ... --> */\nexports.Comment = ElementType.Comment;\n/** Type for <script> tags */\nexports.Script = ElementType.Script;\n/** Type for <style> tags */\nexports.Style = ElementType.Style;\n/** Type for Any tag */\nexports.Tag = ElementType.Tag;\n/** Type for <![CDATA[ ... ]]> */\nexports.CDATA = ElementType.CDATA;\n/** Type for <!doctype ...> */\nexports.Doctype = ElementType.Doctype;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeHTML = exports.decodeHTMLStrict = exports.decodeXML = void 0;\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"./maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar decode_codepoint_1 = __importDefault(require(\"./decode_codepoint\"));\nvar strictEntityRe = /&(?:[a-zA-Z0-9]+|#[xX][\\da-fA-F]+|#\\d+);/g;\nexports.decodeXML = getStrictDecoder(xml_json_1.default);\nexports.decodeHTMLStrict = getStrictDecoder(entities_json_1.default);\nfunction getStrictDecoder(map) {\n    var replace = getReplacer(map);\n    return function (str) { return String(str).replace(strictEntityRe, replace); };\n}\nvar sorter = function (a, b) { return (a < b ? 1 : -1); };\nexports.decodeHTML = (function () {\n    var legacy = Object.keys(legacy_json_1.default).sort(sorter);\n    var keys = Object.keys(entities_json_1.default).sort(sorter);\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        }\n        else {\n            keys[i] += \";\";\n        }\n    }\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\");\n    var replace = getReplacer(entities_json_1.default);\n    function replacer(str) {\n        if (str.substr(-1) !== \";\")\n            str += \";\";\n        return replace(str);\n    }\n    // TODO consider creating a merged map\n    return function (str) { return String(str).replace(re, replacer); };\n})();\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            var secondChar = str.charAt(2);\n            if (secondChar === \"X\" || secondChar === \"x\") {\n                return decode_codepoint_1.default(parseInt(str.substr(3), 16));\n            }\n            return decode_codepoint_1.default(parseInt(str.substr(2), 10));\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        return map[str.slice(1, -1)] || str;\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_json_1 = __importDefault(require(\"./maps/decode.json\"));\n// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nvar fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.fromCodePoint ||\n    function (codePoint) {\n        var output = \"\";\n        if (codePoint > 0xffff) {\n            codePoint -= 0x10000;\n            output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n            codePoint = 0xdc00 | (codePoint & 0x3ff);\n        }\n        output += String.fromCharCode(codePoint);\n        return output;\n    };\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n    if (codePoint in decode_json_1.default) {\n        codePoint = decode_json_1.default[codePoint];\n    }\n    return fromCodePoint(codePoint);\n}\nexports.default = decodeCodePoint;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = void 0;\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar inverseXML = getInverseObj(xml_json_1.default);\nvar xmlReplacer = getInverseReplacer(inverseXML);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeXML = getASCIIEncoder(inverseXML);\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar inverseHTML = getInverseObj(entities_json_1.default);\nvar htmlReplacer = getInverseReplacer(inverseHTML);\n/**\n * Encodes all entities and non-ASCII characters in the input.\n *\n * This includes characters that are valid ASCII characters in HTML documents.\n * For example `#` will be encoded as `&num;`. To get a more compact output,\n * consider using the `encodeNonAsciiHTML` function.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeHTML = getInverse(inverseHTML, htmlReplacer);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in HTML\n * documents using HTML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeNonAsciiHTML = getASCIIEncoder(inverseHTML);\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (inverse, name) {\n        inverse[obj[name]] = \"&\" + name + \";\";\n        return inverse;\n    }, {});\n}\nfunction getInverseReplacer(inverse) {\n    var single = [];\n    var multiple = [];\n    for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {\n        var k = _a[_i];\n        if (k.length === 1) {\n            // Add value to single array\n            single.push(\"\\\\\" + k);\n        }\n        else {\n            // Add value to multiple array\n            multiple.push(k);\n        }\n    }\n    // Add ranges to single characters.\n    single.sort();\n    for (var start = 0; start < single.length - 1; start++) {\n        // Find the end of a run of characters\n        var end = start;\n        while (end < single.length - 1 &&\n            single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {\n            end += 1;\n        }\n        var count = 1 + end - start;\n        // We want to replace at least three characters\n        if (count < 3)\n            continue;\n        single.splice(start, count, single[start] + \"-\" + single[end]);\n    }\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n// /[^\\0-\\x7F]/gu\nvar reNonASCII = /(?:[\\x80-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/g;\nvar getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        function (str) { return str.codePointAt(0); }\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        function (c) {\n            return (c.charCodeAt(0) - 0xd800) * 0x400 +\n                c.charCodeAt(1) -\n                0xdc00 +\n                0x10000;\n        };\nfunction singleCharReplacer(c) {\n    return \"&#x\" + (c.length > 1 ? getCodePoint(c) : c.charCodeAt(0))\n        .toString(16)\n        .toUpperCase() + \";\";\n}\nfunction getInverse(inverse, re) {\n    return function (data) {\n        return data\n            .replace(re, function (name) { return inverse[name]; })\n            .replace(reNonASCII, singleCharReplacer);\n    };\n}\nvar reEscapeChars = new RegExp(xmlReplacer.source + \"|\" + reNonASCII.source, \"g\");\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nfunction escape(data) {\n    return data.replace(reEscapeChars, singleCharReplacer);\n}\nexports.escape = escape;\n/**\n * Encodes all characters not valid in XML documents using numeric hexadecimal\n * reference (eg. `&#xfc;`).\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nfunction escapeUTF8(data) {\n    return data.replace(xmlReplacer, singleCharReplacer);\n}\nexports.escapeUTF8 = escapeUTF8;\nfunction getASCIIEncoder(obj) {\n    return function (data) {\n        return data.replace(reEscapeChars, function (c) { return obj[c] || singleCharReplacer(c); });\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeXMLStrict = exports.decodeHTML5Strict = exports.decodeHTML4Strict = exports.decodeHTML5 = exports.decodeHTML4 = exports.decodeHTMLStrict = exports.decodeHTML = exports.decodeXML = exports.encodeHTML5 = exports.encodeHTML4 = exports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = exports.encode = exports.decodeStrict = exports.decode = void 0;\nvar decode_1 = require(\"./decode\");\nvar encode_1 = require(\"./encode\");\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeXML` or `decodeHTML` directly.\n */\nfunction decode(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTML)(data);\n}\nexports.decode = decode;\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.\n */\nfunction decodeStrict(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTMLStrict)(data);\n}\nexports.decodeStrict = decodeStrict;\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.\n */\nfunction encode(data, level) {\n    return (!level || level <= 0 ? encode_1.encodeXML : encode_1.encodeHTML)(data);\n}\nexports.encode = encode;\nvar encode_2 = require(\"./encode\");\nObject.defineProperty(exports, \"encodeXML\", { enumerable: true, get: function () { return encode_2.encodeXML; } });\nObject.defineProperty(exports, \"encodeHTML\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeNonAsciiHTML\", { enumerable: true, get: function () { return encode_2.encodeNonAsciiHTML; } });\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return encode_2.escape; } });\nObject.defineProperty(exports, \"escapeUTF8\", { enumerable: true, get: function () { return encode_2.escapeUTF8; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"encodeHTML4\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeHTML5\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nvar decode_2 = require(\"./decode\");\nObject.defineProperty(exports, \"decodeXML\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\nObject.defineProperty(exports, \"decodeHTML\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTMLStrict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"decodeHTML4\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML5\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML4Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeHTML5Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeXMLStrict\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\n","//Types of elements found in the DOM\nmodule.exports = {\n\tText: \"text\", //Text\n\tDirective: \"directive\", //<? ... ?>\n\tComment: \"comment\", //<!-- ... -->\n\tScript: \"script\", //<script> tags\n\tStyle: \"style\", //<style> tags\n\tTag: \"tag\", //Any tag\n\tCDATA: \"cdata\", //<![CDATA[ ... ]]>\n\tDoctype: \"doctype\",\n\n\tisTag: function(elem){\n\t\treturn elem.type === \"tag\" || elem.type === \"script\" || elem.type === \"style\";\n\t}\n};\n","var ElementType = require(\"domelementtype\");\n\nvar re_whitespace = /\\s+/g;\nvar NodePrototype = require(\"./lib/node\");\nvar ElementPrototype = require(\"./lib/element\");\n\nfunction DomHandler(callback, options, elementCB){\n\tif(typeof callback === \"object\"){\n\t\telementCB = options;\n\t\toptions = callback;\n\t\tcallback = null;\n\t} else if(typeof options === \"function\"){\n\t\telementCB = options;\n\t\toptions = defaultOpts;\n\t}\n\tthis._callback = callback;\n\tthis._options = options || defaultOpts;\n\tthis._elementCB = elementCB;\n\tthis.dom = [];\n\tthis._done = false;\n\tthis._tagStack = [];\n\tthis._parser = this._parser || null;\n}\n\n//default options\nvar defaultOpts = {\n\tnormalizeWhitespace: false, //Replace all whitespace with single spaces\n\twithStartIndices: false, //Add startIndex properties to nodes\n\twithEndIndices: false, //Add endIndex properties to nodes\n};\n\nDomHandler.prototype.onparserinit = function(parser){\n\tthis._parser = parser;\n};\n\n//Resets the handler back to starting state\nDomHandler.prototype.onreset = function(){\n\tDomHandler.call(this, this._callback, this._options, this._elementCB);\n};\n\n//Signals the handler that parsing is done\nDomHandler.prototype.onend = function(){\n\tif(this._done) return;\n\tthis._done = true;\n\tthis._parser = null;\n\tthis._handleCallback(null);\n};\n\nDomHandler.prototype._handleCallback =\nDomHandler.prototype.onerror = function(error){\n\tif(typeof this._callback === \"function\"){\n\t\tthis._callback(error, this.dom);\n\t} else {\n\t\tif(error) throw error;\n\t}\n};\n\nDomHandler.prototype.onclosetag = function(){\n\t//if(this._tagStack.pop().name !== name) this._handleCallback(Error(\"Tagname didn't match!\"));\n\t\n\tvar elem = this._tagStack.pop();\n\n\tif(this._options.withEndIndices && elem){\n\t\telem.endIndex = this._parser.endIndex;\n\t}\n\n\tif(this._elementCB) this._elementCB(elem);\n};\n\nDomHandler.prototype._createDomElement = function(properties){\n\tif (!this._options.withDomLvl1) return properties;\n\n\tvar element;\n\tif (properties.type === \"tag\") {\n\t\telement = Object.create(ElementPrototype);\n\t} else {\n\t\telement = Object.create(NodePrototype);\n\t}\n\n\tfor (var key in properties) {\n\t\tif (properties.hasOwnProperty(key)) {\n\t\t\telement[key] = properties[key];\n\t\t}\n\t}\n\n\treturn element;\n};\n\nDomHandler.prototype._addDomElement = function(element){\n\tvar parent = this._tagStack[this._tagStack.length - 1];\n\tvar siblings = parent ? parent.children : this.dom;\n\tvar previousSibling = siblings[siblings.length - 1];\n\n\telement.next = null;\n\n\tif(this._options.withStartIndices){\n\t\telement.startIndex = this._parser.startIndex;\n\t}\n\tif(this._options.withEndIndices){\n\t\telement.endIndex = this._parser.endIndex;\n\t}\n\n\tif(previousSibling){\n\t\telement.prev = previousSibling;\n\t\tpreviousSibling.next = element;\n\t} else {\n\t\telement.prev = null;\n\t}\n\n\tsiblings.push(element);\n\telement.parent = parent || null;\n};\n\nDomHandler.prototype.onopentag = function(name, attribs){\n\tvar properties = {\n\t\ttype: name === \"script\" ? ElementType.Script : name === \"style\" ? ElementType.Style : ElementType.Tag,\n\t\tname: name,\n\t\tattribs: attribs,\n\t\tchildren: []\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.ontext = function(data){\n\t//the ignoreWhitespace is officially dropped, but for now,\n\t//it's an alias for normalizeWhitespace\n\tvar normalize = this._options.normalizeWhitespace || this._options.ignoreWhitespace;\n\n\tvar lastTag;\n\n\tif(!this._tagStack.length && this.dom.length && (lastTag = this.dom[this.dom.length-1]).type === ElementType.Text){\n\t\tif(normalize){\n\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t} else {\n\t\t\tlastTag.data += data;\n\t\t}\n\t} else {\n\t\tif(\n\t\t\tthis._tagStack.length &&\n\t\t\t(lastTag = this._tagStack[this._tagStack.length - 1]) &&\n\t\t\t(lastTag = lastTag.children[lastTag.children.length - 1]) &&\n\t\t\tlastTag.type === ElementType.Text\n\t\t){\n\t\t\tif(normalize){\n\t\t\t\tlastTag.data = (lastTag.data + data).replace(re_whitespace, \" \");\n\t\t\t} else {\n\t\t\t\tlastTag.data += data;\n\t\t\t}\n\t\t} else {\n\t\t\tif(normalize){\n\t\t\t\tdata = data.replace(re_whitespace, \" \");\n\t\t\t}\n\n\t\t\tvar element = this._createDomElement({\n\t\t\t\tdata: data,\n\t\t\t\ttype: ElementType.Text\n\t\t\t});\n\n\t\t\tthis._addDomElement(element);\n\t\t}\n\t}\n};\n\nDomHandler.prototype.oncomment = function(data){\n\tvar lastTag = this._tagStack[this._tagStack.length - 1];\n\n\tif(lastTag && lastTag.type === ElementType.Comment){\n\t\tlastTag.data += data;\n\t\treturn;\n\t}\n\n\tvar properties = {\n\t\tdata: data,\n\t\ttype: ElementType.Comment\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncdatastart = function(){\n\tvar properties = {\n\t\tchildren: [{\n\t\t\tdata: \"\",\n\t\t\ttype: ElementType.Text\n\t\t}],\n\t\ttype: ElementType.CDATA\n\t};\n\n\tvar element = this._createDomElement(properties);\n\n\tthis._addDomElement(element);\n\tthis._tagStack.push(element);\n};\n\nDomHandler.prototype.oncommentend = DomHandler.prototype.oncdataend = function(){\n\tthis._tagStack.pop();\n};\n\nDomHandler.prototype.onprocessinginstruction = function(name, data){\n\tvar element = this._createDomElement({\n\t\tname: name,\n\t\tdata: data,\n\t\ttype: ElementType.Directive\n\t});\n\n\tthis._addDomElement(element);\n};\n\nmodule.exports = DomHandler;\n","// DOM-Level-1-compliant structure\nvar NodePrototype = require('./node');\nvar ElementPrototype = module.exports = Object.create(NodePrototype);\n\nvar domLvl1 = {\n\ttagName: \"name\"\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(ElementPrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n","// This object will be used as the prototype for Nodes when creating a\n// DOM-Level-1-compliant structure.\nvar NodePrototype = module.exports = {\n\tget firstChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[0] || null;\n\t},\n\tget lastChild() {\n\t\tvar children = this.children;\n\t\treturn children && children[children.length - 1] || null;\n\t},\n\tget nodeType() {\n\t\treturn nodeTypes[this.type] || nodeTypes.element;\n\t}\n};\n\nvar domLvl1 = {\n\ttagName: \"name\",\n\tchildNodes: \"children\",\n\tparentNode: \"parent\",\n\tpreviousSibling: \"prev\",\n\tnextSibling: \"next\",\n\tnodeValue: \"data\"\n};\n\nvar nodeTypes = {\n\telement: 1,\n\ttext: 3,\n\tcdata: 4,\n\tcomment: 8\n};\n\nObject.keys(domLvl1).forEach(function(key) {\n\tvar shorthand = domLvl1[key];\n\tObject.defineProperty(NodePrototype, key, {\n\t\tget: function() {\n\t\t\treturn this[shorthand] || null;\n\t\t},\n\t\tset: function(val) {\n\t\t\tthis[shorthand] = val;\n\t\t\treturn val;\n\t\t}\n\t});\n});\n","var DomUtils = module.exports;\n\n[\n\trequire(\"./lib/stringify\"),\n\trequire(\"./lib/traversal\"),\n\trequire(\"./lib/manipulation\"),\n\trequire(\"./lib/querying\"),\n\trequire(\"./lib/legacy\"),\n\trequire(\"./lib/helpers\")\n].forEach(function(ext){\n\tObject.keys(ext).forEach(function(key){\n\t\tDomUtils[key] = ext[key].bind(DomUtils);\n\t});\n});\n","// removeSubsets\n// Given an array of nodes, remove any member that is contained by another.\nexports.removeSubsets = function(nodes) {\n\tvar idx = nodes.length, node, ancestor, replace;\n\n\t// Check if each node (or one of its ancestors) is already contained in the\n\t// array.\n\twhile (--idx > -1) {\n\t\tnode = ancestor = nodes[idx];\n\n\t\t// Temporarily remove the node under consideration\n\t\tnodes[idx] = null;\n\t\treplace = true;\n\n\t\twhile (ancestor) {\n\t\t\tif (nodes.indexOf(ancestor) > -1) {\n\t\t\t\treplace = false;\n\t\t\t\tnodes.splice(idx, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tancestor = ancestor.parent;\n\t\t}\n\n\t\t// If the node has been found to be unique, re-insert it.\n\t\tif (replace) {\n\t\t\tnodes[idx] = node;\n\t\t}\n\t}\n\n\treturn nodes;\n};\n\n// Source: http://dom.spec.whatwg.org/#dom-node-comparedocumentposition\nvar POSITION = {\n\tDISCONNECTED: 1,\n\tPRECEDING: 2,\n\tFOLLOWING: 4,\n\tCONTAINS: 8,\n\tCONTAINED_BY: 16\n};\n\n// Compare the position of one node against another node in any other document.\n// The return value is a bitmask with the following values:\n//\n// document order:\n// > There is an ordering, document order, defined on all the nodes in the\n// > document corresponding to the order in which the first character of the\n// > XML representation of each node occurs in the XML representation of the\n// > document after expansion of general entities. Thus, the document element\n// > node will be the first node. Element nodes occur before their children.\n// > Thus, document order orders element nodes in order of the occurrence of\n// > their start-tag in the XML (after expansion of entities). The attribute\n// > nodes of an element occur after the element and before its children. The\n// > relative order of attribute nodes is implementation-dependent./\n// Source:\n// http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n//\n// @argument {Node} nodaA The first node to use in the comparison\n// @argument {Node} nodeB The second node to use in the comparison\n//\n// @return {Number} A bitmask describing the input nodes' relative position.\n//         See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n//         a description of these values.\nvar comparePos = exports.compareDocumentPosition = function(nodeA, nodeB) {\n\tvar aParents = [];\n\tvar bParents = [];\n\tvar current, sharedParent, siblings, aSibling, bSibling, idx;\n\n\tif (nodeA === nodeB) {\n\t\treturn 0;\n\t}\n\n\tcurrent = nodeA;\n\twhile (current) {\n\t\taParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\tcurrent = nodeB;\n\twhile (current) {\n\t\tbParents.unshift(current);\n\t\tcurrent = current.parent;\n\t}\n\n\tidx = 0;\n\twhile (aParents[idx] === bParents[idx]) {\n\t\tidx++;\n\t}\n\n\tif (idx === 0) {\n\t\treturn POSITION.DISCONNECTED;\n\t}\n\n\tsharedParent = aParents[idx - 1];\n\tsiblings = sharedParent.children;\n\taSibling = aParents[idx];\n\tbSibling = bParents[idx];\n\n\tif (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n\t\tif (sharedParent === nodeB) {\n\t\t\treturn POSITION.FOLLOWING | POSITION.CONTAINED_BY;\n\t\t}\n\t\treturn POSITION.FOLLOWING;\n\t} else {\n\t\tif (sharedParent === nodeA) {\n\t\t\treturn POSITION.PRECEDING | POSITION.CONTAINS;\n\t\t}\n\t\treturn POSITION.PRECEDING;\n\t}\n};\n\n// Sort an array of nodes based on their relative position in the document and\n// remove any duplicate nodes. If the array contains nodes that do not belong\n// to the same document, sort order is unspecified.\n//\n// @argument {Array} nodes Array of DOM nodes\n//\n// @returns {Array} collection of unique nodes, sorted in document order\nexports.uniqueSort = function(nodes) {\n\tvar idx = nodes.length, node, position;\n\n\tnodes = nodes.slice();\n\n\twhile (--idx > -1) {\n\t\tnode = nodes[idx];\n\t\tposition = nodes.indexOf(node);\n\t\tif (position > -1 && position < idx) {\n\t\t\tnodes.splice(idx, 1);\n\t\t}\n\t}\n\tnodes.sort(function(a, b) {\n\t\tvar relative = comparePos(a, b);\n\t\tif (relative & POSITION.PRECEDING) {\n\t\t\treturn -1;\n\t\t} else if (relative & POSITION.FOLLOWING) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn nodes;\n};\n","var ElementType = require(\"domelementtype\");\nvar isTag = exports.isTag = ElementType.isTag;\n\nexports.testElement = function(options, element){\n\tfor(var key in options){\n\t\tif(!options.hasOwnProperty(key));\n\t\telse if(key === \"tag_name\"){\n\t\t\tif(!isTag(element) || !options.tag_name(element.name)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(key === \"tag_type\"){\n\t\t\tif(!options.tag_type(element.type)) return false;\n\t\t} else if(key === \"tag_contains\"){\n\t\t\tif(isTag(element) || !options.tag_contains(element.data)){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(!element.attribs || !options[key](element.attribs[key])){\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n\nvar Checks = {\n\ttag_name: function(name){\n\t\tif(typeof name === \"function\"){\n\t\t\treturn function(elem){ return isTag(elem) && name(elem.name); };\n\t\t} else if(name === \"*\"){\n\t\t\treturn isTag;\n\t\t} else {\n\t\t\treturn function(elem){ return isTag(elem) && elem.name === name; };\n\t\t}\n\t},\n\ttag_type: function(type){\n\t\tif(typeof type === \"function\"){\n\t\t\treturn function(elem){ return type(elem.type); };\n\t\t} else {\n\t\t\treturn function(elem){ return elem.type === type; };\n\t\t}\n\t},\n\ttag_contains: function(data){\n\t\tif(typeof data === \"function\"){\n\t\t\treturn function(elem){ return !isTag(elem) && data(elem.data); };\n\t\t} else {\n\t\t\treturn function(elem){ return !isTag(elem) && elem.data === data; };\n\t\t}\n\t}\n};\n\nfunction getAttribCheck(attrib, value){\n\tif(typeof value === \"function\"){\n\t\treturn function(elem){ return elem.attribs && value(elem.attribs[attrib]); };\n\t} else {\n\t\treturn function(elem){ return elem.attribs && elem.attribs[attrib] === value; };\n\t}\n}\n\nfunction combineFuncs(a, b){\n\treturn function(elem){\n\t\treturn a(elem) || b(elem);\n\t};\n}\n\nexports.getElements = function(options, element, recurse, limit){\n\tvar funcs = Object.keys(options).map(function(key){\n\t\tvar value = options[key];\n\t\treturn key in Checks ? Checks[key](value) : getAttribCheck(key, value);\n\t});\n\n\treturn funcs.length === 0 ? [] : this.filter(\n\t\tfuncs.reduce(combineFuncs),\n\t\telement, recurse, limit\n\t);\n};\n\nexports.getElementById = function(id, element, recurse){\n\tif(!Array.isArray(element)) element = [element];\n\treturn this.findOne(getAttribCheck(\"id\", id), element, recurse !== false);\n};\n\nexports.getElementsByTagName = function(name, element, recurse, limit){\n\treturn this.filter(Checks.tag_name(name), element, recurse, limit);\n};\n\nexports.getElementsByTagType = function(type, element, recurse, limit){\n\treturn this.filter(Checks.tag_type(type), element, recurse, limit);\n};\n","exports.removeElement = function(elem){\n\tif(elem.prev) elem.prev.next = elem.next;\n\tif(elem.next) elem.next.prev = elem.prev;\n\n\tif(elem.parent){\n\t\tvar childs = elem.parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 1);\n\t}\n};\n\nexports.replaceElement = function(elem, replacement){\n\tvar prev = replacement.prev = elem.prev;\n\tif(prev){\n\t\tprev.next = replacement;\n\t}\n\n\tvar next = replacement.next = elem.next;\n\tif(next){\n\t\tnext.prev = replacement;\n\t}\n\n\tvar parent = replacement.parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds[childs.lastIndexOf(elem)] = replacement;\n\t}\n};\n\nexports.appendChild = function(elem, child){\n\tchild.parent = elem;\n\n\tif(elem.children.push(child) !== 1){\n\t\tvar sibling = elem.children[elem.children.length - 2];\n\t\tsibling.next = child;\n\t\tchild.prev = sibling;\n\t\tchild.next = null;\n\t}\n};\n\nexports.append = function(elem, next){\n\tvar parent = elem.parent,\n\t\tcurrNext = elem.next;\n\n\tnext.next = currNext;\n\tnext.prev = elem;\n\telem.next = next;\n\tnext.parent = parent;\n\n\tif(currNext){\n\t\tcurrNext.prev = next;\n\t\tif(parent){\n\t\t\tvar childs = parent.children;\n\t\t\tchilds.splice(childs.lastIndexOf(currNext), 0, next);\n\t\t}\n\t} else if(parent){\n\t\tparent.children.push(next);\n\t}\n};\n\nexports.prepend = function(elem, prev){\n\tvar parent = elem.parent;\n\tif(parent){\n\t\tvar childs = parent.children;\n\t\tchilds.splice(childs.lastIndexOf(elem), 0, prev);\n\t}\n\n\tif(elem.prev){\n\t\telem.prev.next = prev;\n\t}\n\t\n\tprev.parent = parent;\n\tprev.prev = elem.prev;\n\tprev.next = elem;\n\telem.prev = prev;\n};\n\n\n","var isTag = require(\"domelementtype\").isTag;\n\nmodule.exports = {\n\tfilter: filter,\n\tfind: find,\n\tfindOneChild: findOneChild,\n\tfindOne: findOne,\n\texistsOne: existsOne,\n\tfindAll: findAll\n};\n\nfunction filter(test, element, recurse, limit){\n\tif(!Array.isArray(element)) element = [element];\n\n\tif(typeof limit !== \"number\" || !isFinite(limit)){\n\t\tlimit = Infinity;\n\t}\n\treturn find(test, element, recurse !== false, limit);\n}\n\nfunction find(test, elems, recurse, limit){\n\tvar result = [], childs;\n\n\tfor(var i = 0, j = elems.length; i < j; i++){\n\t\tif(test(elems[i])){\n\t\t\tresult.push(elems[i]);\n\t\t\tif(--limit <= 0) break;\n\t\t}\n\n\t\tchilds = elems[i].children;\n\t\tif(recurse && childs && childs.length > 0){\n\t\t\tchilds = find(test, childs, recurse, limit);\n\t\t\tresult = result.concat(childs);\n\t\t\tlimit -= childs.length;\n\t\t\tif(limit <= 0) break;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction findOneChild(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(test(elems[i])) return elems[i];\n\t}\n\n\treturn null;\n}\n\nfunction findOne(test, elems){\n\tvar elem = null;\n\n\tfor(var i = 0, l = elems.length; i < l && !elem; i++){\n\t\tif(!isTag(elems[i])){\n\t\t\tcontinue;\n\t\t} else if(test(elems[i])){\n\t\t\telem = elems[i];\n\t\t} else if(elems[i].children.length > 0){\n\t\t\telem = findOne(test, elems[i].children);\n\t\t}\n\t}\n\n\treturn elem;\n}\n\nfunction existsOne(test, elems){\n\tfor(var i = 0, l = elems.length; i < l; i++){\n\t\tif(\n\t\t\tisTag(elems[i]) && (\n\t\t\t\ttest(elems[i]) || (\n\t\t\t\t\telems[i].children.length > 0 &&\n\t\t\t\t\texistsOne(test, elems[i].children)\n\t\t\t\t)\n\t\t\t)\n\t\t){\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction findAll(test, rootElems){\n\tvar result = [];\n\tvar stack = rootElems.slice();\n\twhile(stack.length){\n\t\tvar elem = stack.shift();\n\t\tif(!isTag(elem)) continue;\n\t\tif (elem.children && elem.children.length > 0) {\n\t\t\tstack.unshift.apply(stack, elem.children);\n\t\t}\n\t\tif(test(elem)) result.push(elem);\n\t}\n\treturn result;\n}\n","var ElementType = require(\"domelementtype\"),\n    getOuterHTML = require(\"dom-serializer\"),\n    isTag = ElementType.isTag;\n\nmodule.exports = {\n\tgetInnerHTML: getInnerHTML,\n\tgetOuterHTML: getOuterHTML,\n\tgetText: getText\n};\n\nfunction getInnerHTML(elem, opts){\n\treturn elem.children ? elem.children.map(function(elem){\n\t\treturn getOuterHTML(elem, opts);\n\t}).join(\"\") : \"\";\n}\n\nfunction getText(elem){\n\tif(Array.isArray(elem)) return elem.map(getText).join(\"\");\n\tif(isTag(elem)) return elem.name === \"br\" ? \"\\n\" : getText(elem.children);\n\tif(elem.type === ElementType.CDATA) return getText(elem.children);\n\tif(elem.type === ElementType.Text) return elem.data;\n\treturn \"\";\n}\n","var getChildren = exports.getChildren = function(elem){\n\treturn elem.children;\n};\n\nvar getParent = exports.getParent = function(elem){\n\treturn elem.parent;\n};\n\nexports.getSiblings = function(elem){\n\tvar parent = getParent(elem);\n\treturn parent ? getChildren(parent) : [elem];\n};\n\nexports.getAttributeValue = function(elem, name){\n\treturn elem.attribs && elem.attribs[name];\n};\n\nexports.hasAttrib = function(elem, name){\n\treturn !!elem.attribs && hasOwnProperty.call(elem.attribs, name);\n};\n\nexports.getName = function(elem){\n\treturn elem.name;\n};\n","var decodeMap = require(\"../maps/decode.json\");\n\nmodule.exports = decodeCodePoint;\n\n// modified version of https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n\n    if (codePoint in decodeMap) {\n        codePoint = decodeMap[codePoint];\n    }\n\n    var output = \"\";\n\n    if (codePoint > 0xffff) {\n        codePoint -= 0x10000;\n        output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n        codePoint = 0xdc00 | (codePoint & 0x3ff);\n    }\n\n    output += String.fromCharCode(codePoint);\n    return output;\n}\n","module.exports = CollectingHandler;\n\nfunction CollectingHandler(cbs) {\n    this._cbs = cbs || {};\n    this.events = [];\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function() {\n            this.events.push([name]);\n            if (this._cbs[name]) this._cbs[name]();\n        };\n    } else if (EVENTS[name] === 1) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function(a) {\n            this.events.push([name, a]);\n            if (this._cbs[name]) this._cbs[name](a);\n        };\n    } else if (EVENTS[name] === 2) {\n        name = \"on\" + name;\n        CollectingHandler.prototype[name] = function(a, b) {\n            this.events.push([name, a, b]);\n            if (this._cbs[name]) this._cbs[name](a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments\");\n    }\n});\n\nCollectingHandler.prototype.onreset = function() {\n    this.events = [];\n    if (this._cbs.onreset) this._cbs.onreset();\n};\n\nCollectingHandler.prototype.restart = function() {\n    if (this._cbs.onreset) this._cbs.onreset();\n\n    for (var i = 0, len = this.events.length; i < len; i++) {\n        if (this._cbs[this.events[i][0]]) {\n            var num = this.events[i].length;\n\n            if (num === 1) {\n                this._cbs[this.events[i][0]]();\n            } else if (num === 2) {\n                this._cbs[this.events[i][0]](this.events[i][1]);\n            } else {\n                this._cbs[this.events[i][0]](\n                    this.events[i][1],\n                    this.events[i][2]\n                );\n            }\n        }\n    }\n};\n","var DomHandler = require(\"domhandler\");\nvar DomUtils = require(\"domutils\");\n\n//TODO: make this a streamable handler\nfunction FeedHandler(callback, options) {\n    this.init(callback, options);\n}\n\nrequire(\"inherits\")(FeedHandler, DomHandler);\n\nFeedHandler.prototype.init = DomHandler;\n\nfunction getElements(what, where) {\n    return DomUtils.getElementsByTagName(what, where, true);\n}\nfunction getOneElement(what, where) {\n    return DomUtils.getElementsByTagName(what, where, true, 1)[0];\n}\nfunction fetch(what, where, recurse) {\n    return DomUtils.getText(\n        DomUtils.getElementsByTagName(what, where, recurse, 1)\n    ).trim();\n}\n\nfunction addConditionally(obj, prop, what, where, recurse) {\n    var tmp = fetch(what, where, recurse);\n    if (tmp) obj[prop] = tmp;\n}\n\nvar isValidFeed = function(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n};\n\nFeedHandler.prototype.onend = function() {\n    var feed = {},\n        feedRoot = getOneElement(isValidFeed, this.dom),\n        tmp,\n        childs;\n\n    if (feedRoot) {\n        if (feedRoot.name === \"feed\") {\n            childs = feedRoot.children;\n\n            feed.type = \"atom\";\n            addConditionally(feed, \"id\", \"id\", childs);\n            addConditionally(feed, \"title\", \"title\", childs);\n            if (\n                (tmp = getOneElement(\"link\", childs)) &&\n                (tmp = tmp.attribs) &&\n                (tmp = tmp.href)\n            )\n                feed.link = tmp;\n            addConditionally(feed, \"description\", \"subtitle\", childs);\n            if ((tmp = fetch(\"updated\", childs))) feed.updated = new Date(tmp);\n            addConditionally(feed, \"author\", \"email\", childs, true);\n\n            feed.items = getElements(\"entry\", childs).map(function(item) {\n                var entry = {},\n                    tmp;\n\n                item = item.children;\n\n                addConditionally(entry, \"id\", \"id\", item);\n                addConditionally(entry, \"title\", \"title\", item);\n                if (\n                    (tmp = getOneElement(\"link\", item)) &&\n                    (tmp = tmp.attribs) &&\n                    (tmp = tmp.href)\n                )\n                    entry.link = tmp;\n                if ((tmp = fetch(\"summary\", item) || fetch(\"content\", item)))\n                    entry.description = tmp;\n                if ((tmp = fetch(\"updated\", item)))\n                    entry.pubDate = new Date(tmp);\n                return entry;\n            });\n        } else {\n            childs = getOneElement(\"channel\", feedRoot.children).children;\n\n            feed.type = feedRoot.name.substr(0, 3);\n            feed.id = \"\";\n            addConditionally(feed, \"title\", \"title\", childs);\n            addConditionally(feed, \"link\", \"link\", childs);\n            addConditionally(feed, \"description\", \"description\", childs);\n            if ((tmp = fetch(\"lastBuildDate\", childs)))\n                feed.updated = new Date(tmp);\n            addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n\n            feed.items = getElements(\"item\", feedRoot.children).map(function(\n                item\n            ) {\n                var entry = {},\n                    tmp;\n\n                item = item.children;\n\n                addConditionally(entry, \"id\", \"guid\", item);\n                addConditionally(entry, \"title\", \"title\", item);\n                addConditionally(entry, \"link\", \"link\", item);\n                addConditionally(entry, \"description\", \"description\", item);\n                if ((tmp = fetch(\"pubDate\", item)))\n                    entry.pubDate = new Date(tmp);\n                return entry;\n            });\n        }\n    }\n    this.dom = feed;\n    DomHandler.prototype._handleCallback.call(\n        this,\n        feedRoot ? null : Error(\"couldn't find root of feed\")\n    );\n};\n\nmodule.exports = FeedHandler;\n","var Tokenizer = require(\"./Tokenizer.js\");\n\n/*\n\tOptions:\n\n\txmlMode: Disables the special behavior for script/style tags (false by default)\n\tlowerCaseAttributeNames: call .toLowerCase for each attribute name (true if xmlMode is `false`)\n\tlowerCaseTags: call .toLowerCase for each tag name (true if xmlMode is `false`)\n*/\n\n/*\n\tCallbacks:\n\n\toncdataend,\n\toncdatastart,\n\tonclosetag,\n\toncomment,\n\toncommentend,\n\tonerror,\n\tonopentag,\n\tonprocessinginstruction,\n\tonreset,\n\tontext\n*/\n\nvar formTags = {\n    input: true,\n    option: true,\n    optgroup: true,\n    select: true,\n    button: true,\n    datalist: true,\n    textarea: true\n};\n\nvar openImpliesClose = {\n    tr: { tr: true, th: true, td: true },\n    th: { th: true },\n    td: { thead: true, th: true, td: true },\n    body: { head: true, link: true, script: true },\n    li: { li: true },\n    p: { p: true },\n    h1: { p: true },\n    h2: { p: true },\n    h3: { p: true },\n    h4: { p: true },\n    h5: { p: true },\n    h6: { p: true },\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: { option: true },\n    optgroup: { optgroup: true }\n};\n\nvar voidElements = {\n    __proto__: null,\n    area: true,\n    base: true,\n    basefont: true,\n    br: true,\n    col: true,\n    command: true,\n    embed: true,\n    frame: true,\n    hr: true,\n    img: true,\n    input: true,\n    isindex: true,\n    keygen: true,\n    link: true,\n    meta: true,\n    param: true,\n    source: true,\n    track: true,\n    wbr: true\n};\n\nvar foreignContextElements = {\n    __proto__: null,\n    math: true,\n    svg: true\n};\nvar htmlIntegrationElements = {\n    __proto__: null,\n    mi: true,\n    mo: true,\n    mn: true,\n    ms: true,\n    mtext: true,\n    \"annotation-xml\": true,\n    foreignObject: true,\n    desc: true,\n    title: true\n};\n\nvar re_nameEnd = /\\s|\\//;\n\nfunction Parser(cbs, options) {\n    this._options = options || {};\n    this._cbs = cbs || {};\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n    this._attribs = null;\n    this._stack = [];\n    this._foreignContext = [];\n\n    this.startIndex = 0;\n    this.endIndex = null;\n\n    this._lowerCaseTagNames =\n        \"lowerCaseTags\" in this._options\n            ? !!this._options.lowerCaseTags\n            : !this._options.xmlMode;\n    this._lowerCaseAttributeNames =\n        \"lowerCaseAttributeNames\" in this._options\n            ? !!this._options.lowerCaseAttributeNames\n            : !this._options.xmlMode;\n\n    if (this._options.Tokenizer) {\n        Tokenizer = this._options.Tokenizer;\n    }\n    this._tokenizer = new Tokenizer(this._options, this);\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n}\n\nrequire(\"inherits\")(Parser, require(\"events\").EventEmitter);\n\nParser.prototype._updatePosition = function(initialOffset) {\n    if (this.endIndex === null) {\n        if (this._tokenizer._sectionStart <= initialOffset) {\n            this.startIndex = 0;\n        } else {\n            this.startIndex = this._tokenizer._sectionStart - initialOffset;\n        }\n    } else this.startIndex = this.endIndex + 1;\n    this.endIndex = this._tokenizer.getAbsoluteIndex();\n};\n\n//Tokenizer event handlers\nParser.prototype.ontext = function(data) {\n    this._updatePosition(1);\n    this.endIndex--;\n\n    if (this._cbs.ontext) this._cbs.ontext(data);\n};\n\nParser.prototype.onopentagname = function(name) {\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    this._tagname = name;\n\n    if (!this._options.xmlMode && name in openImpliesClose) {\n        for (\n            var el;\n            (el = this._stack[this._stack.length - 1]) in\n            openImpliesClose[name];\n            this.onclosetag(el)\n        );\n    }\n\n    if (this._options.xmlMode || !(name in voidElements)) {\n        this._stack.push(name);\n        if (name in foreignContextElements) this._foreignContext.push(true);\n        else if (name in htmlIntegrationElements)\n            this._foreignContext.push(false);\n    }\n\n    if (this._cbs.onopentagname) this._cbs.onopentagname(name);\n    if (this._cbs.onopentag) this._attribs = {};\n};\n\nParser.prototype.onopentagend = function() {\n    this._updatePosition(1);\n\n    if (this._attribs) {\n        if (this._cbs.onopentag)\n            this._cbs.onopentag(this._tagname, this._attribs);\n        this._attribs = null;\n    }\n\n    if (\n        !this._options.xmlMode &&\n        this._cbs.onclosetag &&\n        this._tagname in voidElements\n    ) {\n        this._cbs.onclosetag(this._tagname);\n    }\n\n    this._tagname = \"\";\n};\n\nParser.prototype.onclosetag = function(name) {\n    this._updatePosition(1);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n    \n    if (name in foreignContextElements || name in htmlIntegrationElements) {\n        this._foreignContext.pop();\n    }\n\n    if (\n        this._stack.length &&\n        (!(name in voidElements) || this._options.xmlMode)\n    ) {\n        var pos = this._stack.lastIndexOf(name);\n        if (pos !== -1) {\n            if (this._cbs.onclosetag) {\n                pos = this._stack.length - pos;\n                while (pos--) this._cbs.onclosetag(this._stack.pop());\n            } else this._stack.length = pos;\n        } else if (name === \"p\" && !this._options.xmlMode) {\n            this.onopentagname(name);\n            this._closeCurrentTag();\n        }\n    } else if (!this._options.xmlMode && (name === \"br\" || name === \"p\")) {\n        this.onopentagname(name);\n        this._closeCurrentTag();\n    }\n};\n\nParser.prototype.onselfclosingtag = function() {\n    if (\n        this._options.xmlMode ||\n        this._options.recognizeSelfClosing ||\n        this._foreignContext[this._foreignContext.length - 1]\n    ) {\n        this._closeCurrentTag();\n    } else {\n        this.onopentagend();\n    }\n};\n\nParser.prototype._closeCurrentTag = function() {\n    var name = this._tagname;\n\n    this.onopentagend();\n\n    //self-closing tags will be on the top of the stack\n    //(cheaper check than in onclosetag)\n    if (this._stack[this._stack.length - 1] === name) {\n        if (this._cbs.onclosetag) {\n            this._cbs.onclosetag(name);\n        }\n        this._stack.pop();\n        \n    }\n};\n\nParser.prototype.onattribname = function(name) {\n    if (this._lowerCaseAttributeNames) {\n        name = name.toLowerCase();\n    }\n    this._attribname = name;\n};\n\nParser.prototype.onattribdata = function(value) {\n    this._attribvalue += value;\n};\n\nParser.prototype.onattribend = function() {\n    if (this._cbs.onattribute)\n        this._cbs.onattribute(this._attribname, this._attribvalue);\n    if (\n        this._attribs &&\n        !Object.prototype.hasOwnProperty.call(this._attribs, this._attribname)\n    ) {\n        this._attribs[this._attribname] = this._attribvalue;\n    }\n    this._attribname = \"\";\n    this._attribvalue = \"\";\n};\n\nParser.prototype._getInstructionName = function(value) {\n    var idx = value.search(re_nameEnd),\n        name = idx < 0 ? value : value.substr(0, idx);\n\n    if (this._lowerCaseTagNames) {\n        name = name.toLowerCase();\n    }\n\n    return name;\n};\n\nParser.prototype.ondeclaration = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"!\" + name, \"!\" + value);\n    }\n};\n\nParser.prototype.onprocessinginstruction = function(value) {\n    if (this._cbs.onprocessinginstruction) {\n        var name = this._getInstructionName(value);\n        this._cbs.onprocessinginstruction(\"?\" + name, \"?\" + value);\n    }\n};\n\nParser.prototype.oncomment = function(value) {\n    this._updatePosition(4);\n\n    if (this._cbs.oncomment) this._cbs.oncomment(value);\n    if (this._cbs.oncommentend) this._cbs.oncommentend();\n};\n\nParser.prototype.oncdata = function(value) {\n    this._updatePosition(1);\n\n    if (this._options.xmlMode || this._options.recognizeCDATA) {\n        if (this._cbs.oncdatastart) this._cbs.oncdatastart();\n        if (this._cbs.ontext) this._cbs.ontext(value);\n        if (this._cbs.oncdataend) this._cbs.oncdataend();\n    } else {\n        this.oncomment(\"[CDATA[\" + value + \"]]\");\n    }\n};\n\nParser.prototype.onerror = function(err) {\n    if (this._cbs.onerror) this._cbs.onerror(err);\n};\n\nParser.prototype.onend = function() {\n    if (this._cbs.onclosetag) {\n        for (\n            var i = this._stack.length;\n            i > 0;\n            this._cbs.onclosetag(this._stack[--i])\n        );\n    }\n    if (this._cbs.onend) this._cbs.onend();\n};\n\n//Resets the parser to a blank state, ready to parse a new HTML document\nParser.prototype.reset = function() {\n    if (this._cbs.onreset) this._cbs.onreset();\n    this._tokenizer.reset();\n\n    this._tagname = \"\";\n    this._attribname = \"\";\n    this._attribs = null;\n    this._stack = [];\n\n    if (this._cbs.onparserinit) this._cbs.onparserinit(this);\n};\n\n//Parses a complete HTML document and pushes it to the handler\nParser.prototype.parseComplete = function(data) {\n    this.reset();\n    this.end(data);\n};\n\nParser.prototype.write = function(chunk) {\n    this._tokenizer.write(chunk);\n};\n\nParser.prototype.end = function(chunk) {\n    this._tokenizer.end(chunk);\n};\n\nParser.prototype.pause = function() {\n    this._tokenizer.pause();\n};\n\nParser.prototype.resume = function() {\n    this._tokenizer.resume();\n};\n\n//alias for backwards compat\nParser.prototype.parseChunk = Parser.prototype.write;\nParser.prototype.done = Parser.prototype.end;\n\nmodule.exports = Parser;\n","module.exports = ProxyHandler;\n\nfunction ProxyHandler(cbs) {\n    this._cbs = cbs || {};\n}\n\nvar EVENTS = require(\"./\").EVENTS;\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function() {\n            if (this._cbs[name]) this._cbs[name]();\n        };\n    } else if (EVENTS[name] === 1) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function(a) {\n            if (this._cbs[name]) this._cbs[name](a);\n        };\n    } else if (EVENTS[name] === 2) {\n        name = \"on\" + name;\n        ProxyHandler.prototype[name] = function(a, b) {\n            if (this._cbs[name]) this._cbs[name](a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments\");\n    }\n});\n","module.exports = Stream;\n\nvar Parser = require(\"./WritableStream.js\");\n\nfunction Stream(options) {\n    Parser.call(this, new Cbs(this), options);\n}\n\nrequire(\"inherits\")(Stream, Parser);\n\nStream.prototype.readable = true;\n\nfunction Cbs(scope) {\n    this.scope = scope;\n}\n\nvar EVENTS = require(\"../\").EVENTS;\n\nObject.keys(EVENTS).forEach(function(name) {\n    if (EVENTS[name] === 0) {\n        Cbs.prototype[\"on\" + name] = function() {\n            this.scope.emit(name);\n        };\n    } else if (EVENTS[name] === 1) {\n        Cbs.prototype[\"on\" + name] = function(a) {\n            this.scope.emit(name, a);\n        };\n    } else if (EVENTS[name] === 2) {\n        Cbs.prototype[\"on\" + name] = function(a, b) {\n            this.scope.emit(name, a, b);\n        };\n    } else {\n        throw Error(\"wrong number of arguments!\");\n    }\n});\n","module.exports = Tokenizer;\n\nvar decodeCodePoint = require(\"entities/lib/decode_codepoint.js\");\nvar entityMap = require(\"entities/maps/entities.json\");\nvar legacyMap = require(\"entities/maps/legacy.json\");\nvar xmlMap = require(\"entities/maps/xml.json\");\n\nvar i = 0;\n\nvar TEXT = i++;\nvar BEFORE_TAG_NAME = i++; //after <\nvar IN_TAG_NAME = i++;\nvar IN_SELF_CLOSING_TAG = i++;\nvar BEFORE_CLOSING_TAG_NAME = i++;\nvar IN_CLOSING_TAG_NAME = i++;\nvar AFTER_CLOSING_TAG_NAME = i++;\n\n//attributes\nvar BEFORE_ATTRIBUTE_NAME = i++;\nvar IN_ATTRIBUTE_NAME = i++;\nvar AFTER_ATTRIBUTE_NAME = i++;\nvar BEFORE_ATTRIBUTE_VALUE = i++;\nvar IN_ATTRIBUTE_VALUE_DQ = i++; // \"\nvar IN_ATTRIBUTE_VALUE_SQ = i++; // '\nvar IN_ATTRIBUTE_VALUE_NQ = i++;\n\n//declarations\nvar BEFORE_DECLARATION = i++; // !\nvar IN_DECLARATION = i++;\n\n//processing instructions\nvar IN_PROCESSING_INSTRUCTION = i++; // ?\n\n//comments\nvar BEFORE_COMMENT = i++;\nvar IN_COMMENT = i++;\nvar AFTER_COMMENT_1 = i++;\nvar AFTER_COMMENT_2 = i++;\n\n//cdata\nvar BEFORE_CDATA_1 = i++; // [\nvar BEFORE_CDATA_2 = i++; // C\nvar BEFORE_CDATA_3 = i++; // D\nvar BEFORE_CDATA_4 = i++; // A\nvar BEFORE_CDATA_5 = i++; // T\nvar BEFORE_CDATA_6 = i++; // A\nvar IN_CDATA = i++; // [\nvar AFTER_CDATA_1 = i++; // ]\nvar AFTER_CDATA_2 = i++; // ]\n\n//special tags\nvar BEFORE_SPECIAL = i++; //S\nvar BEFORE_SPECIAL_END = i++; //S\n\nvar BEFORE_SCRIPT_1 = i++; //C\nvar BEFORE_SCRIPT_2 = i++; //R\nvar BEFORE_SCRIPT_3 = i++; //I\nvar BEFORE_SCRIPT_4 = i++; //P\nvar BEFORE_SCRIPT_5 = i++; //T\nvar AFTER_SCRIPT_1 = i++; //C\nvar AFTER_SCRIPT_2 = i++; //R\nvar AFTER_SCRIPT_3 = i++; //I\nvar AFTER_SCRIPT_4 = i++; //P\nvar AFTER_SCRIPT_5 = i++; //T\n\nvar BEFORE_STYLE_1 = i++; //T\nvar BEFORE_STYLE_2 = i++; //Y\nvar BEFORE_STYLE_3 = i++; //L\nvar BEFORE_STYLE_4 = i++; //E\nvar AFTER_STYLE_1 = i++; //T\nvar AFTER_STYLE_2 = i++; //Y\nvar AFTER_STYLE_3 = i++; //L\nvar AFTER_STYLE_4 = i++; //E\n\nvar BEFORE_ENTITY = i++; //&\nvar BEFORE_NUMERIC_ENTITY = i++; //#\nvar IN_NAMED_ENTITY = i++;\nvar IN_NUMERIC_ENTITY = i++;\nvar IN_HEX_ENTITY = i++; //X\n\nvar j = 0;\n\nvar SPECIAL_NONE = j++;\nvar SPECIAL_SCRIPT = j++;\nvar SPECIAL_STYLE = j++;\n\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\n\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n\n    if (upper === lower) {\n        return function(c) {\n            if (c === lower) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    } else {\n        return function(c) {\n            if (c === lower || c === upper) {\n                this._state = SUCCESS;\n            } else {\n                this._state = FAILURE;\n                this._index--;\n            }\n        };\n    }\n}\n\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n\n    return function(c) {\n        if (c === lower || c === upper) {\n            this._state = NEXT_STATE;\n        } else {\n            this._state = IN_TAG_NAME;\n            this._index--; //consume the token again\n        }\n    };\n}\n\nfunction Tokenizer(options, cbs) {\n    this._state = TEXT;\n    this._buffer = \"\";\n    this._sectionStart = 0;\n    this._index = 0;\n    this._bufferOffset = 0; //chars removed from _buffer\n    this._baseState = TEXT;\n    this._special = SPECIAL_NONE;\n    this._cbs = cbs;\n    this._running = true;\n    this._ended = false;\n    this._xmlMode = !!(options && options.xmlMode);\n    this._decodeEntities = !!(options && options.decodeEntities);\n}\n\nTokenizer.prototype._stateText = function(c) {\n    if (c === \"<\") {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._state = BEFORE_TAG_NAME;\n        this._sectionStart = this._index;\n    } else if (\n        this._decodeEntities &&\n        this._special === SPECIAL_NONE &&\n        c === \"&\"\n    ) {\n        if (this._index > this._sectionStart) {\n            this._cbs.ontext(this._getSection());\n        }\n        this._baseState = TEXT;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeTagName = function(c) {\n    if (c === \"/\") {\n        this._state = BEFORE_CLOSING_TAG_NAME;\n    } else if (c === \"<\") {\n        this._cbs.ontext(this._getSection());\n        this._sectionStart = this._index;\n    } else if (c === \">\" || this._special !== SPECIAL_NONE || whitespace(c)) {\n        this._state = TEXT;\n    } else if (c === \"!\") {\n        this._state = BEFORE_DECLARATION;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"?\") {\n        this._state = IN_PROCESSING_INSTRUCTION;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state =\n            !this._xmlMode && (c === \"s\" || c === \"S\")\n                ? BEFORE_SPECIAL\n                : IN_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInTagName = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._emitToken(\"onopentagname\");\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateBeforeCloseingTagName = function(c) {\n    if (whitespace(c));\n    else if (c === \">\") {\n        this._state = TEXT;\n    } else if (this._special !== SPECIAL_NONE) {\n        if (c === \"s\" || c === \"S\") {\n            this._state = BEFORE_SPECIAL_END;\n        } else {\n            this._state = TEXT;\n            this._index--;\n        }\n    } else {\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInCloseingTagName = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._emitToken(\"onclosetag\");\n        this._state = AFTER_CLOSING_TAG_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterCloseingTagName = function(c) {\n    //skip everything until \">\"\n    if (c === \">\") {\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeName = function(c) {\n    if (c === \">\") {\n        this._cbs.onopentagend();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"/\") {\n        this._state = IN_SELF_CLOSING_TAG;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInSelfClosingTag = function(c) {\n    if (c === \">\") {\n        this._cbs.onselfclosingtag();\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInAttributeName = function(c) {\n    if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n        this._cbs.onattribname(this._getSection());\n        this._sectionStart = -1;\n        this._state = AFTER_ATTRIBUTE_NAME;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateAfterAttributeName = function(c) {\n    if (c === \"=\") {\n        this._state = BEFORE_ATTRIBUTE_VALUE;\n    } else if (c === \"/\" || c === \">\") {\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (!whitespace(c)) {\n        this._cbs.onattribend();\n        this._state = IN_ATTRIBUTE_NAME;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeAttributeValue = function(c) {\n    if (c === '\"') {\n        this._state = IN_ATTRIBUTE_VALUE_DQ;\n        this._sectionStart = this._index + 1;\n    } else if (c === \"'\") {\n        this._state = IN_ATTRIBUTE_VALUE_SQ;\n        this._sectionStart = this._index + 1;\n    } else if (!whitespace(c)) {\n        this._state = IN_ATTRIBUTE_VALUE_NQ;\n        this._sectionStart = this._index;\n        this._index--; //reconsume token\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueDoubleQuotes = function(c) {\n    if (c === '\"') {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueSingleQuotes = function(c) {\n    if (c === \"'\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateInAttributeValueNoQuotes = function(c) {\n    if (whitespace(c) || c === \">\") {\n        this._emitToken(\"onattribdata\");\n        this._cbs.onattribend();\n        this._state = BEFORE_ATTRIBUTE_NAME;\n        this._index--;\n    } else if (this._decodeEntities && c === \"&\") {\n        this._emitToken(\"onattribdata\");\n        this._baseState = this._state;\n        this._state = BEFORE_ENTITY;\n        this._sectionStart = this._index;\n    }\n};\n\nTokenizer.prototype._stateBeforeDeclaration = function(c) {\n    this._state =\n        c === \"[\"\n            ? BEFORE_CDATA_1\n            : c === \"-\"\n                ? BEFORE_COMMENT\n                : IN_DECLARATION;\n};\n\nTokenizer.prototype._stateInDeclaration = function(c) {\n    if (c === \">\") {\n        this._cbs.ondeclaration(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateInProcessingInstruction = function(c) {\n    if (c === \">\") {\n        this._cbs.onprocessinginstruction(this._getSection());\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    }\n};\n\nTokenizer.prototype._stateBeforeComment = function(c) {\n    if (c === \"-\") {\n        this._state = IN_COMMENT;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n    }\n};\n\nTokenizer.prototype._stateInComment = function(c) {\n    if (c === \"-\") this._state = AFTER_COMMENT_1;\n};\n\nTokenizer.prototype._stateAfterComment1 = function(c) {\n    if (c === \"-\") {\n        this._state = AFTER_COMMENT_2;\n    } else {\n        this._state = IN_COMMENT;\n    }\n};\n\nTokenizer.prototype._stateAfterComment2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncomment(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"-\") {\n        this._state = IN_COMMENT;\n    }\n    // else: stay in AFTER_COMMENT_2 (`--->`)\n};\n\nTokenizer.prototype._stateBeforeCdata1 = ifElseState(\n    \"C\",\n    BEFORE_CDATA_2,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata2 = ifElseState(\n    \"D\",\n    BEFORE_CDATA_3,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata3 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_4,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata4 = ifElseState(\n    \"T\",\n    BEFORE_CDATA_5,\n    IN_DECLARATION\n);\nTokenizer.prototype._stateBeforeCdata5 = ifElseState(\n    \"A\",\n    BEFORE_CDATA_6,\n    IN_DECLARATION\n);\n\nTokenizer.prototype._stateBeforeCdata6 = function(c) {\n    if (c === \"[\") {\n        this._state = IN_CDATA;\n        this._sectionStart = this._index + 1;\n    } else {\n        this._state = IN_DECLARATION;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInCdata = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_1;\n};\n\nTokenizer.prototype._stateAfterCdata1 = function(c) {\n    if (c === \"]\") this._state = AFTER_CDATA_2;\n    else this._state = IN_CDATA;\n};\n\nTokenizer.prototype._stateAfterCdata2 = function(c) {\n    if (c === \">\") {\n        //remove 2 trailing chars\n        this._cbs.oncdata(\n            this._buffer.substring(this._sectionStart, this._index - 2)\n        );\n        this._state = TEXT;\n        this._sectionStart = this._index + 1;\n    } else if (c !== \"]\") {\n        this._state = IN_CDATA;\n    }\n    //else: stay in AFTER_CDATA_2 (`]]]>`)\n};\n\nTokenizer.prototype._stateBeforeSpecial = function(c) {\n    if (c === \"c\" || c === \"C\") {\n        this._state = BEFORE_SCRIPT_1;\n    } else if (c === \"t\" || c === \"T\") {\n        this._state = BEFORE_STYLE_1;\n    } else {\n        this._state = IN_TAG_NAME;\n        this._index--; //consume the token again\n    }\n};\n\nTokenizer.prototype._stateBeforeSpecialEnd = function(c) {\n    if (this._special === SPECIAL_SCRIPT && (c === \"c\" || c === \"C\")) {\n        this._state = AFTER_SCRIPT_1;\n    } else if (this._special === SPECIAL_STYLE && (c === \"t\" || c === \"T\")) {\n        this._state = AFTER_STYLE_1;\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeScript1 = consumeSpecialNameChar(\n    \"R\",\n    BEFORE_SCRIPT_2\n);\nTokenizer.prototype._stateBeforeScript2 = consumeSpecialNameChar(\n    \"I\",\n    BEFORE_SCRIPT_3\n);\nTokenizer.prototype._stateBeforeScript3 = consumeSpecialNameChar(\n    \"P\",\n    BEFORE_SCRIPT_4\n);\nTokenizer.prototype._stateBeforeScript4 = consumeSpecialNameChar(\n    \"T\",\n    BEFORE_SCRIPT_5\n);\n\nTokenizer.prototype._stateBeforeScript5 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_SCRIPT;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterScript1 = ifElseState(\"R\", AFTER_SCRIPT_2, TEXT);\nTokenizer.prototype._stateAfterScript2 = ifElseState(\"I\", AFTER_SCRIPT_3, TEXT);\nTokenizer.prototype._stateAfterScript3 = ifElseState(\"P\", AFTER_SCRIPT_4, TEXT);\nTokenizer.prototype._stateAfterScript4 = ifElseState(\"T\", AFTER_SCRIPT_5, TEXT);\n\nTokenizer.prototype._stateAfterScript5 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 6;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeStyle1 = consumeSpecialNameChar(\n    \"Y\",\n    BEFORE_STYLE_2\n);\nTokenizer.prototype._stateBeforeStyle2 = consumeSpecialNameChar(\n    \"L\",\n    BEFORE_STYLE_3\n);\nTokenizer.prototype._stateBeforeStyle3 = consumeSpecialNameChar(\n    \"E\",\n    BEFORE_STYLE_4\n);\n\nTokenizer.prototype._stateBeforeStyle4 = function(c) {\n    if (c === \"/\" || c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_STYLE;\n    }\n    this._state = IN_TAG_NAME;\n    this._index--; //consume the token again\n};\n\nTokenizer.prototype._stateAfterStyle1 = ifElseState(\"Y\", AFTER_STYLE_2, TEXT);\nTokenizer.prototype._stateAfterStyle2 = ifElseState(\"L\", AFTER_STYLE_3, TEXT);\nTokenizer.prototype._stateAfterStyle3 = ifElseState(\"E\", AFTER_STYLE_4, TEXT);\n\nTokenizer.prototype._stateAfterStyle4 = function(c) {\n    if (c === \">\" || whitespace(c)) {\n        this._special = SPECIAL_NONE;\n        this._state = IN_CLOSING_TAG_NAME;\n        this._sectionStart = this._index - 5;\n        this._index--; //reconsume the token\n    } else this._state = TEXT;\n};\n\nTokenizer.prototype._stateBeforeEntity = ifElseState(\n    \"#\",\n    BEFORE_NUMERIC_ENTITY,\n    IN_NAMED_ENTITY\n);\nTokenizer.prototype._stateBeforeNumericEntity = ifElseState(\n    \"X\",\n    IN_HEX_ENTITY,\n    IN_NUMERIC_ENTITY\n);\n\n//for entities terminated with a semicolon\nTokenizer.prototype._parseNamedEntityStrict = function() {\n    //offset = 1\n    if (this._sectionStart + 1 < this._index) {\n        var entity = this._buffer.substring(\n                this._sectionStart + 1,\n                this._index\n            ),\n            map = this._xmlMode ? xmlMap : entityMap;\n\n        if (map.hasOwnProperty(entity)) {\n            this._emitPartial(map[entity]);\n            this._sectionStart = this._index + 1;\n        }\n    }\n};\n\n//parses legacy entities (without trailing semicolon)\nTokenizer.prototype._parseLegacyEntity = function() {\n    var start = this._sectionStart + 1,\n        limit = this._index - start;\n\n    if (limit > 6) limit = 6; //the max length of legacy entities is 6\n\n    while (limit >= 2) {\n        //the min length of legacy entities is 2\n        var entity = this._buffer.substr(start, limit);\n\n        if (legacyMap.hasOwnProperty(entity)) {\n            this._emitPartial(legacyMap[entity]);\n            this._sectionStart += limit + 1;\n            return;\n        } else {\n            limit--;\n        }\n    }\n};\n\nTokenizer.prototype._stateInNamedEntity = function(c) {\n    if (c === \";\") {\n        this._parseNamedEntityStrict();\n        if (this._sectionStart + 1 < this._index && !this._xmlMode) {\n            this._parseLegacyEntity();\n        }\n        this._state = this._baseState;\n    } else if (\n        (c < \"a\" || c > \"z\") &&\n        (c < \"A\" || c > \"Z\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (this._xmlMode);\n        else if (this._sectionStart + 1 === this._index);\n        else if (this._baseState !== TEXT) {\n            if (c !== \"=\") {\n                this._parseNamedEntityStrict();\n            }\n        } else {\n            this._parseLegacyEntity();\n        }\n\n        this._state = this._baseState;\n        this._index--;\n    }\n};\n\nTokenizer.prototype._decodeNumericEntity = function(offset, base) {\n    var sectionStart = this._sectionStart + offset;\n\n    if (sectionStart !== this._index) {\n        //parse entity\n        var entity = this._buffer.substring(sectionStart, this._index);\n        var parsed = parseInt(entity, base);\n\n        this._emitPartial(decodeCodePoint(parsed));\n        this._sectionStart = this._index;\n    } else {\n        this._sectionStart--;\n    }\n\n    this._state = this._baseState;\n};\n\nTokenizer.prototype._stateInNumericEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(2, 10);\n        this._sectionStart++;\n    } else if (c < \"0\" || c > \"9\") {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(2, 10);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._stateInHexEntity = function(c) {\n    if (c === \";\") {\n        this._decodeNumericEntity(3, 16);\n        this._sectionStart++;\n    } else if (\n        (c < \"a\" || c > \"f\") &&\n        (c < \"A\" || c > \"F\") &&\n        (c < \"0\" || c > \"9\")\n    ) {\n        if (!this._xmlMode) {\n            this._decodeNumericEntity(3, 16);\n        } else {\n            this._state = this._baseState;\n        }\n        this._index--;\n    }\n};\n\nTokenizer.prototype._cleanup = function() {\n    if (this._sectionStart < 0) {\n        this._buffer = \"\";\n        this._bufferOffset += this._index;\n        this._index = 0;\n    } else if (this._running) {\n        if (this._state === TEXT) {\n            if (this._sectionStart !== this._index) {\n                this._cbs.ontext(this._buffer.substr(this._sectionStart));\n            }\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else if (this._sectionStart === this._index) {\n            //the section just started\n            this._buffer = \"\";\n            this._bufferOffset += this._index;\n            this._index = 0;\n        } else {\n            //remove everything unnecessary\n            this._buffer = this._buffer.substr(this._sectionStart);\n            this._index -= this._sectionStart;\n            this._bufferOffset += this._sectionStart;\n        }\n\n        this._sectionStart = 0;\n    }\n};\n\n//TODO make events conditional\nTokenizer.prototype.write = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".write() after done!\"));\n\n    this._buffer += chunk;\n    this._parse();\n};\n\nTokenizer.prototype._parse = function() {\n    while (this._index < this._buffer.length && this._running) {\n        var c = this._buffer.charAt(this._index);\n        if (this._state === TEXT) {\n            this._stateText(c);\n        } else if (this._state === BEFORE_TAG_NAME) {\n            this._stateBeforeTagName(c);\n        } else if (this._state === IN_TAG_NAME) {\n            this._stateInTagName(c);\n        } else if (this._state === BEFORE_CLOSING_TAG_NAME) {\n            this._stateBeforeCloseingTagName(c);\n        } else if (this._state === IN_CLOSING_TAG_NAME) {\n            this._stateInCloseingTagName(c);\n        } else if (this._state === AFTER_CLOSING_TAG_NAME) {\n            this._stateAfterCloseingTagName(c);\n        } else if (this._state === IN_SELF_CLOSING_TAG) {\n            this._stateInSelfClosingTag(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_NAME) {\n\n        /*\n\t\t*\tattributes\n\t\t*/\n            this._stateBeforeAttributeName(c);\n        } else if (this._state === IN_ATTRIBUTE_NAME) {\n            this._stateInAttributeName(c);\n        } else if (this._state === AFTER_ATTRIBUTE_NAME) {\n            this._stateAfterAttributeName(c);\n        } else if (this._state === BEFORE_ATTRIBUTE_VALUE) {\n            this._stateBeforeAttributeValue(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_DQ) {\n            this._stateInAttributeValueDoubleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_SQ) {\n            this._stateInAttributeValueSingleQuotes(c);\n        } else if (this._state === IN_ATTRIBUTE_VALUE_NQ) {\n            this._stateInAttributeValueNoQuotes(c);\n        } else if (this._state === BEFORE_DECLARATION) {\n\n        /*\n\t\t*\tdeclarations\n\t\t*/\n            this._stateBeforeDeclaration(c);\n        } else if (this._state === IN_DECLARATION) {\n            this._stateInDeclaration(c);\n        } else if (this._state === IN_PROCESSING_INSTRUCTION) {\n\n        /*\n\t\t*\tprocessing instructions\n\t\t*/\n            this._stateInProcessingInstruction(c);\n        } else if (this._state === BEFORE_COMMENT) {\n\n        /*\n\t\t*\tcomments\n\t\t*/\n            this._stateBeforeComment(c);\n        } else if (this._state === IN_COMMENT) {\n            this._stateInComment(c);\n        } else if (this._state === AFTER_COMMENT_1) {\n            this._stateAfterComment1(c);\n        } else if (this._state === AFTER_COMMENT_2) {\n            this._stateAfterComment2(c);\n        } else if (this._state === BEFORE_CDATA_1) {\n\n        /*\n\t\t*\tcdata\n\t\t*/\n            this._stateBeforeCdata1(c);\n        } else if (this._state === BEFORE_CDATA_2) {\n            this._stateBeforeCdata2(c);\n        } else if (this._state === BEFORE_CDATA_3) {\n            this._stateBeforeCdata3(c);\n        } else if (this._state === BEFORE_CDATA_4) {\n            this._stateBeforeCdata4(c);\n        } else if (this._state === BEFORE_CDATA_5) {\n            this._stateBeforeCdata5(c);\n        } else if (this._state === BEFORE_CDATA_6) {\n            this._stateBeforeCdata6(c);\n        } else if (this._state === IN_CDATA) {\n            this._stateInCdata(c);\n        } else if (this._state === AFTER_CDATA_1) {\n            this._stateAfterCdata1(c);\n        } else if (this._state === AFTER_CDATA_2) {\n            this._stateAfterCdata2(c);\n        } else if (this._state === BEFORE_SPECIAL) {\n\n        /*\n\t\t* special tags\n\t\t*/\n            this._stateBeforeSpecial(c);\n        } else if (this._state === BEFORE_SPECIAL_END) {\n            this._stateBeforeSpecialEnd(c);\n        } else if (this._state === BEFORE_SCRIPT_1) {\n\n        /*\n\t\t* script\n\t\t*/\n            this._stateBeforeScript1(c);\n        } else if (this._state === BEFORE_SCRIPT_2) {\n            this._stateBeforeScript2(c);\n        } else if (this._state === BEFORE_SCRIPT_3) {\n            this._stateBeforeScript3(c);\n        } else if (this._state === BEFORE_SCRIPT_4) {\n            this._stateBeforeScript4(c);\n        } else if (this._state === BEFORE_SCRIPT_5) {\n            this._stateBeforeScript5(c);\n        } else if (this._state === AFTER_SCRIPT_1) {\n            this._stateAfterScript1(c);\n        } else if (this._state === AFTER_SCRIPT_2) {\n            this._stateAfterScript2(c);\n        } else if (this._state === AFTER_SCRIPT_3) {\n            this._stateAfterScript3(c);\n        } else if (this._state === AFTER_SCRIPT_4) {\n            this._stateAfterScript4(c);\n        } else if (this._state === AFTER_SCRIPT_5) {\n            this._stateAfterScript5(c);\n        } else if (this._state === BEFORE_STYLE_1) {\n\n        /*\n\t\t* style\n\t\t*/\n            this._stateBeforeStyle1(c);\n        } else if (this._state === BEFORE_STYLE_2) {\n            this._stateBeforeStyle2(c);\n        } else if (this._state === BEFORE_STYLE_3) {\n            this._stateBeforeStyle3(c);\n        } else if (this._state === BEFORE_STYLE_4) {\n            this._stateBeforeStyle4(c);\n        } else if (this._state === AFTER_STYLE_1) {\n            this._stateAfterStyle1(c);\n        } else if (this._state === AFTER_STYLE_2) {\n            this._stateAfterStyle2(c);\n        } else if (this._state === AFTER_STYLE_3) {\n            this._stateAfterStyle3(c);\n        } else if (this._state === AFTER_STYLE_4) {\n            this._stateAfterStyle4(c);\n        } else if (this._state === BEFORE_ENTITY) {\n\n        /*\n\t\t* entities\n\t\t*/\n            this._stateBeforeEntity(c);\n        } else if (this._state === BEFORE_NUMERIC_ENTITY) {\n            this._stateBeforeNumericEntity(c);\n        } else if (this._state === IN_NAMED_ENTITY) {\n            this._stateInNamedEntity(c);\n        } else if (this._state === IN_NUMERIC_ENTITY) {\n            this._stateInNumericEntity(c);\n        } else if (this._state === IN_HEX_ENTITY) {\n            this._stateInHexEntity(c);\n        } else {\n            this._cbs.onerror(Error(\"unknown _state\"), this._state);\n        }\n\n        this._index++;\n    }\n\n    this._cleanup();\n};\n\nTokenizer.prototype.pause = function() {\n    this._running = false;\n};\nTokenizer.prototype.resume = function() {\n    this._running = true;\n\n    if (this._index < this._buffer.length) {\n        this._parse();\n    }\n    if (this._ended) {\n        this._finish();\n    }\n};\n\nTokenizer.prototype.end = function(chunk) {\n    if (this._ended) this._cbs.onerror(Error(\".end() after done!\"));\n    if (chunk) this.write(chunk);\n\n    this._ended = true;\n\n    if (this._running) this._finish();\n};\n\nTokenizer.prototype._finish = function() {\n    //if there is remaining data, emit it in a reasonable way\n    if (this._sectionStart < this._index) {\n        this._handleTrailingData();\n    }\n\n    this._cbs.onend();\n};\n\nTokenizer.prototype._handleTrailingData = function() {\n    var data = this._buffer.substr(this._sectionStart);\n\n    if (\n        this._state === IN_CDATA ||\n        this._state === AFTER_CDATA_1 ||\n        this._state === AFTER_CDATA_2\n    ) {\n        this._cbs.oncdata(data);\n    } else if (\n        this._state === IN_COMMENT ||\n        this._state === AFTER_COMMENT_1 ||\n        this._state === AFTER_COMMENT_2\n    ) {\n        this._cbs.oncomment(data);\n    } else if (this._state === IN_NAMED_ENTITY && !this._xmlMode) {\n        this._parseLegacyEntity();\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_NUMERIC_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(2, 10);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (this._state === IN_HEX_ENTITY && !this._xmlMode) {\n        this._decodeNumericEntity(3, 16);\n        if (this._sectionStart < this._index) {\n            this._state = this._baseState;\n            this._handleTrailingData();\n        }\n    } else if (\n        this._state !== IN_TAG_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_NAME &&\n        this._state !== BEFORE_ATTRIBUTE_VALUE &&\n        this._state !== AFTER_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_NAME &&\n        this._state !== IN_ATTRIBUTE_VALUE_SQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_DQ &&\n        this._state !== IN_ATTRIBUTE_VALUE_NQ &&\n        this._state !== IN_CLOSING_TAG_NAME\n    ) {\n        this._cbs.ontext(data);\n    }\n    //else, ignore remaining data\n    //TODO add a way to remove current tag\n};\n\nTokenizer.prototype.reset = function() {\n    Tokenizer.call(\n        this,\n        { xmlMode: this._xmlMode, decodeEntities: this._decodeEntities },\n        this._cbs\n    );\n};\n\nTokenizer.prototype.getAbsoluteIndex = function() {\n    return this._bufferOffset + this._index;\n};\n\nTokenizer.prototype._getSection = function() {\n    return this._buffer.substring(this._sectionStart, this._index);\n};\n\nTokenizer.prototype._emitToken = function(name) {\n    this._cbs[name](this._getSection());\n    this._sectionStart = -1;\n};\n\nTokenizer.prototype._emitPartial = function(value) {\n    if (this._baseState !== TEXT) {\n        this._cbs.onattribdata(value); //TODO implement the new event\n    } else {\n        this._cbs.ontext(value);\n    }\n};\n","module.exports = Stream;\n\nvar Parser = require(\"./Parser.js\");\nvar WritableStream = require(\"readable-stream\").Writable;\nvar StringDecoder = require(\"string_decoder\").StringDecoder;\nvar Buffer = require(\"buffer\").Buffer;\n\nfunction Stream(cbs, options) {\n    var parser = (this._parser = new Parser(cbs, options));\n    var decoder = (this._decoder = new StringDecoder());\n\n    WritableStream.call(this, { decodeStrings: false });\n\n    this.once(\"finish\", function() {\n        parser.end(decoder.end());\n    });\n}\n\nrequire(\"inherits\")(Stream, WritableStream);\n\nStream.prototype._write = function(chunk, encoding, cb) {\n    if (chunk instanceof Buffer) chunk = this._decoder.write(chunk);\n    this._parser.write(chunk);\n    cb();\n};\n","var Parser = require(\"./Parser.js\");\nvar DomHandler = require(\"domhandler\");\n\nfunction defineProp(name, value) {\n    delete module.exports[name];\n    module.exports[name] = value;\n    return value;\n}\n\nmodule.exports = {\n    Parser: Parser,\n    Tokenizer: require(\"./Tokenizer.js\"),\n    ElementType: require(\"domelementtype\"),\n    DomHandler: DomHandler,\n    get FeedHandler() {\n        return defineProp(\"FeedHandler\", require(\"./FeedHandler.js\"));\n    },\n    get Stream() {\n        return defineProp(\"Stream\", require(\"./Stream.js\"));\n    },\n    get WritableStream() {\n        return defineProp(\"WritableStream\", require(\"./WritableStream.js\"));\n    },\n    get ProxyHandler() {\n        return defineProp(\"ProxyHandler\", require(\"./ProxyHandler.js\"));\n    },\n    get DomUtils() {\n        return defineProp(\"DomUtils\", require(\"domutils\"));\n    },\n    get CollectingHandler() {\n        return defineProp(\n            \"CollectingHandler\",\n            require(\"./CollectingHandler.js\")\n        );\n    },\n    // For legacy support\n    DefaultHandler: DomHandler,\n    get RssHandler() {\n        return defineProp(\"RssHandler\", this.FeedHandler);\n    },\n    //helper methods\n    parseDOM: function(data, options) {\n        var handler = new DomHandler(options);\n        new Parser(handler, options).end(data);\n        return handler.dom;\n    },\n    parseFeed: function(feed, options) {\n        var handler = new module.exports.FeedHandler(options);\n        new Parser(handler, options).end(feed);\n        return handler.dom;\n    },\n    createDomStream: function(cb, options, elementCb) {\n        var handler = new DomHandler(cb, options, elementCb);\n        return new Parser(handler, options);\n    },\n    // List of all events that the parser emits\n    EVENTS: {\n        /* Format: eventname: number of arguments */\n        attribute: 2,\n        cdatastart: 0,\n        cdataend: 0,\n        text: 1,\n        processinginstruction: 2,\n        comment: 1,\n        commentend: 0,\n        closetag: 1,\n        opentag: 2,\n        opentagname: 1,\n        error: 1,\n        end: 0\n    }\n};\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","import {Chart, registerables} from '../dist/chart.js';\n\nChart.register(...registerables);\n\nexport * from '../dist/chart.js';\nexport default Chart;\n","/*!\n * @kurkle/color v0.3.2\n * https://github.com/kurkle/color#readme\n * (c) 2023 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction b2p(v) {\n  return lim(round(v / 2.55), 0, 100);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\n\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\n\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\n\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\n\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\n\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\n\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\n\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nexport { Color, b2n, b2p, index_esm as default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round };\n","/**\n * @namespace Chart.helpers\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ActiveDataPoint, ChartEvent} from '../types/index.js';\n\n/**\n * An empty function that can be used, for example, for optional callback.\n */\nexport function noop() {\n  /* noop */\n}\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\nexport const uid = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isNullOrUndef(value: unknown): value is null | undefined {\n  return value === null || typeof value === 'undefined';\n}\n\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\nexport function isArray<T = unknown>(value: unknown): value is T[] {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isObject(value: unknown): value is AnyObject {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\nfunction isNumberFinite(value: unknown): value is number {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\nexport {\n  isNumberFinite as isFinite,\n};\n\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\nexport function finiteOrDefault(value: unknown, defaultValue: number) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\nexport function valueOrDefault<T>(value: T | undefined, defaultValue: T) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nexport const toPercentage = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : +value / dimension;\n\nexport const toDimension = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\n\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\nexport function callback<T extends (this: TA, ...restArgs: unknown[]) => R, TA, R>(\n  fn: T | undefined,\n  args: unknown[],\n  thisArg?: TA\n): R | undefined {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\n/**\n * Note(SB) for performance sake, this method should only be used when loopable type\n * is unknown or in none intensive code (not called often and small loopable). Else\n * it's preferable to use a regular for() loop and save extra function calls.\n * @param loopable - The object or array to be iterated.\n * @param fn - The function to call for each item.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n * @param [reverse] - If true, iterates backward on the loopable.\n */\nexport function each<T, TA>(\n  loopable: Record<string, T>,\n  fn: (this: TA, v: T, i: string) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[],\n  fn: (this: TA, v: T, i: number) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[] | Record<string, T>,\n  fn: (this: TA, v: T, i: any) => void,\n  thisArg?: TA,\n  reverse?: boolean\n) {\n  let i: number, len: number, keys: string[];\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\nexport function _elementsEqual(a0: ActiveDataPoint[], a1: ActiveDataPoint[]) {\n  let i: number, ilen: number, v0: ActiveDataPoint, v1: ActiveDataPoint;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\nexport function clone<T>(source: T): T {\n  if (isArray(source)) {\n    return source.map(clone) as unknown as T;\n  }\n\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key: string) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\nexport function _merger(key: string, target: AnyObject, source: AnyObject, options: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nexport interface MergeOptions {\n  merger?: (key: string, target: AnyObject, source: AnyObject, options?: AnyObject) => void;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` with the given `options`.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @param [options] - Merging options:\n * @param [options.merger] - The merge method (key, target, source, options)\n * @returns The `target` object.\n */\nexport function merge<T>(target: T, source: [], options?: MergeOptions): T;\nexport function merge<T, S1>(target: T, source: S1, options?: MergeOptions): T & S1;\nexport function merge<T, S1>(target: T, source: [S1], options?: MergeOptions): T & S1;\nexport function merge<T, S1, S2>(target: T, source: [S1, S2], options?: MergeOptions): T & S1 & S2;\nexport function merge<T, S1, S2, S3>(target: T, source: [S1, S2, S3], options?: MergeOptions): T & S1 & S2 & S3;\nexport function merge<T, S1, S2, S3, S4>(\n  target: T,\n  source: [S1, S2, S3, S4],\n  options?: MergeOptions\n): T & S1 & S2 & S3 & S4;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target as AnyObject;\n  }\n\n  options = options || {};\n  const merger = options.merger || _merger;\n  let current: AnyObject;\n\n  for (let i = 0; i < ilen; ++i) {\n    current = sources[i];\n    if (!isObject(current)) {\n      continue;\n    }\n\n    const keys = Object.keys(current);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options as AnyObject);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` *only* if not defined in target.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @returns The `target` object.\n */\nexport function mergeIf<T>(target: T, source: []): T;\nexport function mergeIf<T, S1>(target: T, source: S1): T & S1;\nexport function mergeIf<T, S1>(target: T, source: [S1]): T & S1;\nexport function mergeIf<T, S1, S2>(target: T, source: [S1, S2]): T & S1 & S2;\nexport function mergeIf<T, S1, S2, S3>(target: T, source: [S1, S2, S3]): T & S1 & S2 & S3;\nexport function mergeIf<T, S1, S2, S3, S4>(target: T, source: [S1, S2, S3, S4]): T & S1 & S2 & S3 & S4;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge<T>(target, source, {merger: _mergerIf});\n}\n\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\nexport function _mergerIf(key: string, target: AnyObject, source: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n\n/**\n * @private\n */\nexport function _deprecated(scope: string, value: unknown, previous: string, current: string) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n      '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\n\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': v => v,\n  // default resolvers\n  x: o => o.x,\n  y: o => o.y\n};\n\n/**\n * @private\n */\nexport function _splitKey(key: string) {\n  const parts = key.split('.');\n  const keys: string[] = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\n\nfunction _getKeyResolver(key: string) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        // For backward compatibility:\n        // Chart.helpers.core resolveObjectKey should break at empty key\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\n\nexport function resolveObjectKey(obj: AnyObject, key: string): any {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\n\n/**\n * @private\n */\nexport function _capitalize(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nexport const defined = (value: unknown) => typeof value !== 'undefined';\n\nexport const isFunction = (value: unknown): value is (...args: any[]) => any => typeof value === 'function';\n\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nexport const setsEqual = <T>(a: Set<T>, b: Set<T>) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @param e - The event\n * @private\n */\nexport function _isClickEvent(e: ChartEvent) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n","import type {Point} from '../types/geometric.js';\nimport {isFinite as isFiniteNumber} from './helpers.core.js';\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\nexport const PI = Math.PI;\nexport const TAU = 2 * PI;\nexport const PITAU = TAU + PI;\nexport const INFINITY = Number.POSITIVE_INFINITY;\nexport const RAD_PER_DEG = PI / 180;\nexport const HALF_PI = PI / 2;\nexport const QUARTER_PI = PI / 4;\nexport const TWO_THIRDS_PI = PI * 2 / 3;\n\nexport const log10 = Math.log10;\nexport const sign = Math.sign;\n\nexport function almostEquals(x: number, y: number, epsilon: number) {\n  return Math.abs(x - y) < epsilon;\n}\n\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\nexport function niceNum(range: number) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\nexport function _factorize(value: number) {\n  const result: number[] = [];\n  const sqrt = Math.sqrt(value);\n  let i: number;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) { // if value is a square number\n    result.push(sqrt);\n  }\n\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\n\nexport function isNumber(n: unknown): n is number {\n  return !isNaN(parseFloat(n as string)) && isFinite(n as number);\n}\n\nexport function almostWhole(x: number, epsilon: number) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\n\n/**\n * @private\n */\nexport function _setMinAndMaxByKey(\n  array: Record<string, number>[],\n  target: { min: number, max: number },\n  property: string\n) {\n  let i: number, ilen: number, value: number;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nexport function toRadians(degrees: number) {\n  return degrees * (PI / 180);\n}\n\nexport function toDegrees(radians: number) {\n  return radians * (180 / PI);\n}\n\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\nexport function _decimalPlaces(x: number) {\n  if (!isFiniteNumber(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\n// Gets the angle from vertical upright to the point about a centre.\nexport function getAngleFromPoint(\n  centrePoint: Point,\n  anglePoint: Point\n) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < (-0.5 * PI)) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nexport function distanceBetweenPoints(pt1: Point, pt2: Point) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\nexport function _angleDiff(a: number, b: number) {\n  return (a - b + PITAU) % TAU - PI;\n}\n\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\nexport function _normalizeAngle(a: number) {\n  return (a % TAU + TAU) % TAU;\n}\n\n/**\n * @private\n */\nexport function _angleBetween(angle: number, start: number, end: number, sameAngleIsFullCircle?: boolean) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\n\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\nexport function _limitValue(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * @param {number} value\n * @private\n */\nexport function _int16Range(value: number) {\n  return _limitValue(value, -32768, 32767);\n}\n\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\nexport function _isBetween(value: number, start: number, end: number, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n","import {_capitalize} from './helpers.core.js';\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param value - value to find\n * @param cmp\n * @private\n */\nexport function _lookup(\n  table: number[],\n  value: number,\n  cmp?: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup<T>(\n  table: T[],\n  value: number,\n  cmp: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup(\n  table: unknown[],\n  value: number,\n  cmp?: (value: number) => boolean\n) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid: number;\n\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {lo, hi};\n}\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\nexport const _lookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number,\n  last?: boolean\n) =>\n  _lookup(table, value, last\n    ? index => {\n      const ti = table[index][key];\n      return ti < value || ti === value && table[index + 1][key] === value;\n    }\n    : index => table[index][key] < value);\n\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\nexport const _rlookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number\n) =>\n  _lookup(table, value, index => table[index][key] >= value);\n\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\nexport function _filterBetween(values: number[], min: number, max: number) {\n  let start = 0;\n  let end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\n\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'] as const;\n\nexport interface ArrayListener<T> {\n  _onDataPush?(...item: T[]): void;\n  _onDataPop?(): void;\n  _onDataShift?(): void;\n  _onDataSplice?(index: number, deleteCount: number, ...items: T[]): void;\n  _onDataUnshift?(...item: T[]): void;\n}\n\n/**\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\n * called on the '_onData*' callbacks (e.g. _onDataPush, etc.) with same arguments.\n */\nexport function listenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\n\n/**\n * Removes the given array event listener and cleanup extra attached properties (such as\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\n */\nexport function unlistenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n\n  delete array._chartjs;\n}\n\n/**\n * @param items\n */\nexport function _arrayUnique<T>(items: T[]) {\n  const set = new Set<T>(items);\n\n  if (set.size === items.length) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n","import type {ChartMeta, PointElement} from '../types/index.js';\n\nimport {_limitValue} from './helpers.math.js';\nimport {_lookupByKey} from './helpers.collection.js';\n\nexport function fontString(pixelSize: number, fontStyle: string, fontFamily: string) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n\n/**\n* Request animation polyfill\n*/\nexport const requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\n\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\nexport function throttled<TArgs extends Array<any>>(\n  fn: (...args: TArgs) => void,\n  thisArg: any,\n) {\n  let argsToUse = [] as TArgs;\n  let ticking = false;\n\n  return function(...args: TArgs) {\n    // Save the args for use later\n    argsToUse = args;\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n\n/**\n * Debounces calling `fn` for `delay` ms\n */\nexport function debounce<TArgs extends Array<any>>(fn: (...args: TArgs) => void, delay: number) {\n  let timeout;\n  return function(...args: TArgs) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\n\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\nexport const _toLeftRightCenter = (align: 'start' | 'end' | 'center') => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\nexport const _alignStartEnd = (align: 'start' | 'end' | 'center', start: number, end: number) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\nexport const _textX = (align: 'left' | 'right' | 'center', left: number, right: number, rtl: boolean) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n\n/**\n * Return start and count of visible points.\n * @private\n */\nexport function _getStartAndCountOfVisiblePoints(meta: ChartMeta<'line' | 'scatter'>, points: PointElement[], animationsDisabled: boolean) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count = pointCount;\n\n  if (meta._sorted) {\n    const {iScale, _parsed} = meta;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n    if (minDefined) {\n      start = _limitValue(Math.min(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, axis, min).lo,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo),\n      0, pointCount - 1);\n    }\n    if (maxDefined) {\n      count = _limitValue(Math.max(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1),\n      start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {start, count};\n}\n\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\nexport function _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n","import {PI, TAU, HALF_PI} from './helpers.math.js';\n\nconst atEdge = (t: number) => t === 0 || t === 1;\nconst elasticIn = (t: number, s: number, p: number) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t: number, s: number, p: number) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\nconst effects = {\n  linear: (t: number) => t,\n\n  easeInQuad: (t: number) => t * t,\n\n  easeOutQuad: (t: number) => -t * (t - 2),\n\n  easeInOutQuad: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n\n  easeInCubic: (t: number) => t * t * t,\n\n  easeOutCubic: (t: number) => (t -= 1) * t * t + 1,\n\n  easeInOutCubic: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n\n  easeInQuart: (t: number) => t * t * t * t,\n\n  easeOutQuart: (t: number) => -((t -= 1) * t * t * t - 1),\n\n  easeInOutQuart: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n\n  easeInQuint: (t: number) => t * t * t * t * t,\n\n  easeOutQuint: (t: number) => (t -= 1) * t * t * t * t + 1,\n\n  easeInOutQuint: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n\n  easeInSine: (t: number) => -Math.cos(t * HALF_PI) + 1,\n\n  easeOutSine: (t: number) => Math.sin(t * HALF_PI),\n\n  easeInOutSine: (t: number) => -0.5 * (Math.cos(PI * t) - 1),\n\n  easeInExpo: (t: number) => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n\n  easeOutExpo: (t: number) => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n\n  easeInOutExpo: (t: number) => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n\n  easeInCirc: (t: number) => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n\n  easeOutCirc: (t: number) => Math.sqrt(1 - (t -= 1) * t),\n\n  easeInOutCirc: (t: number) => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n\n  easeInElastic: (t: number) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n\n  easeOutElastic: (t: number) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n\n  easeInOutElastic(t: number) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n\n  easeInBack(t: number) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  easeOutBack(t: number) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  easeInOutBack(t: number) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n\n  easeInBounce: (t: number) => 1 - effects.easeOutBounce(1 - t),\n\n  easeOutBounce(t: number) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n\n  easeInOutBounce: (t: number) => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n} as const;\n\nexport type EasingFunction = keyof typeof effects\n\nexport default effects;\n","import {Color} from '@kurkle/color';\n\nexport function isPatternOrGradient(value: unknown): value is CanvasPattern | CanvasGradient {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nexport function color(value: CanvasGradient): CanvasGradient;\nexport function color(value: CanvasPattern): CanvasPattern;\nexport function color(\n  value:\n  | string\n  | { r: number; g: number; b: number; a: number }\n  | [number, number, number]\n  | [number, number, number, number]\n): Color;\nexport function color(value) {\n  return isPatternOrGradient(value) ? value : new Color(value);\n}\n\nexport function getHoverColor(value: CanvasGradient): CanvasGradient;\nexport function getHoverColor(value: CanvasPattern): CanvasPattern;\nexport function getHoverColor(value: string): string;\nexport function getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n","const numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\n\nexport function applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined,\n  });\n\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n  });\n\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    },\n  });\n\n  defaults.describe('animations', {\n    _fallback: 'animation',\n  });\n\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0 // show immediately\n        },\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: v => v | 0 // for keeping the dataset visible all the way through the animation\n        },\n      }\n    }\n  });\n}\n","\nconst intlCache = new Map<string, Intl.NumberFormat>();\n\nfunction getNumberFormat(locale: string, options?: Intl.NumberFormatOptions) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\n\nexport function formatNumber(num: number, locale: string, options?: Intl.NumberFormatOptions) {\n  return getNumberFormat(locale, options).format(num);\n}\n","import {isArray} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {log10} from '../helpers/helpers.math.js';\n\n/**\n * Namespace to hold formatters for different types of ticks\n * @namespace Chart.Ticks.formatters\n */\nconst formatters = {\n  /**\n   * Formatter for value labels\n   * @method Chart.Ticks.formatters.values\n   * @param value the value to display\n   * @return {string|string[]} the label to display\n   */\n  values(value) {\n    return isArray(value) ? /** @type {string[]} */ (value) : '' + value;\n  },\n\n  /**\n   * Formatter for numeric ticks\n   * @method Chart.Ticks.formatters.numeric\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0'; // never show decimal places for 0\n    }\n\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue; // This is used when there are less than 2 ticks as the tick interval.\n\n    if (ticks.length > 1) {\n      // all ticks are small or there huge numbers; use scientific notation\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    const logDelta = log10(Math.abs(delta));\n\n    // When datasets have values approaching Number.MAX_VALUE, the tick calculations might result in\n    // infinity and eventually NaN. Passing NaN for minimumFractionDigits or maximumFractionDigits\n    // will make the number formatter throw. So instead we check for isNaN and use a fallback value.\n    //\n    // toFixed has a max of 20 decimal places\n    const numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n\n    return formatNumber(tickValue, locale, options);\n  },\n\n\n  /**\n   * Formatter for logarithmic ticks\n   * @method Chart.Ticks.formatters.logarithmic\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = ticks[index].significand || (tickValue / (Math.pow(10, Math.floor(log10(tickValue)))));\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n\n};\n\n\nfunction calculateDelta(tickValue, ticks) {\n  // Figure out how many digits to show\n  // The space between the first two ticks might be smaller than normal spacing\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  // If we have a number like 2.5 as the delta, figure out how many decimal places we need\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    // not an integer\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\n\n/**\n * Namespace to hold static tick generation functions\n * @namespace Chart.Ticks\n */\nexport default {formatters};\n","import {getHoverColor} from '../helpers/helpers.color.js';\nimport {isObject, merge, valueOrDefault} from '../helpers/helpers.core.js';\nimport {applyAnimationsDefaults} from './core.animations.defaults.js';\nimport {applyLayoutsDefaults} from './core.layouts.defaults.js';\nimport {applyScaleDefaults} from './core.scale.defaults.js';\n\nexport const overrides = Object.create(null);\nexport const descriptors = Object.create(null);\n\n/**\n * @param {object} node\n * @param {string} key\n * @return {object}\n */\nfunction getScope(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\n\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope(root, scope), values);\n  }\n  return merge(getScope(root, ''), scope);\n}\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Defaults {\n  constructor(_descriptors, _appliers) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n\n  /**\n\t * @param {string} scope\n\t */\n  get(scope) {\n    return getScope(this, scope);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n\n  /**\n\t * Routes the named defaults to fallback to another scope/name.\n\t * This routing is useful when those target values, like defaults.color, are changed runtime.\n\t * If the values would be copied, the runtime change would not take effect. By routing, the\n\t * fallback is evaluated at each access, so its always up to date.\n\t *\n\t * Example:\n\t *\n\t * \tdefaults.route('elements.arc', 'backgroundColor', '', 'color')\n\t *   - reads the backgroundColor from defaults.color when undefined locally\n\t *\n\t * @param {string} scope Scope this route applies to.\n\t * @param {string} name Property name that should be routed to different namespace when not defined here.\n\t * @param {string} targetScope The namespace where those properties should be routed to.\n\t * Empty string ('') is the root of defaults.\n\t * @param {string} targetName The target name in the target scope the property should be routed to.\n\t */\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope(this, scope);\n    const targetScopeObject = getScope(this, targetScope);\n    const privateName = '_' + name;\n\n    Object.defineProperties(scopeObject, {\n      // A private property is defined to hold the actual value, when this property is set in its scope (set in the setter)\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      // The actual property is defined as getter/setter so we can do the routing when value is not locally set.\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n\n  apply(appliers) {\n    appliers.forEach((apply) => apply(this));\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n","export function applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n","import Ticks from './core.ticks.js';\n\nexport function applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 3.0.0\n     */\n    bounds: 'ticks',\n\n    clip: true,\n\n    /**\n     * Addition grace added to max and reduced from min data value.\n     * @since 3.0.0\n     */\n    grace: 0,\n\n    // grid line settings\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: (_ctx, options) => options.lineWidth,\n      tickColor: (_ctx, options) => options.color,\n      offset: false,\n    },\n\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n\n    // scale title\n    title: {\n      // display property\n      display: false,\n\n      // actual label\n      text: '',\n\n      // top/bottom padding\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n\n    // label settings\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      // We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2,\n    }\n  });\n\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n    _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash',\n  });\n\n  defaults.describe('scales', {\n    _fallback: 'scale',\n  });\n\n  defaults.describe('scale.ticks', {\n    _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n    _indexable: (name) => name !== 'backdropPadding',\n  });\n}\n","import type {\n  Chart,\n  Point,\n  FontSpec,\n  CanvasFontSpec,\n  PointStyle,\n  RenderTextOpts,\n  BackdropOptions\n} from '../types/index.js';\nimport type {\n  TRBL,\n  SplinePoint,\n  RoundedRect,\n  TRBLCorners\n} from '../types/geometric.js';\nimport {isArray, isNullOrUndef} from './helpers.core.js';\nimport {PI, TAU, HALF_PI, QUARTER_PI, TWO_THIRDS_PI, RAD_PER_DEG} from './helpers.math.js';\n\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\nexport function toFontString(font: FontSpec) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\n\n/**\n * @private\n */\nexport function _measureText(\n  ctx: CanvasRenderingContext2D,\n  data: Record<string, number>,\n  gc: string[],\n  longest: number,\n  string: string\n) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\n\ntype Thing = string | undefined | null\ntype Things = (Thing | Thing[])[]\n\n/**\n * @private\n */\n// eslint-disable-next-line complexity\nexport function _longestText(\n  ctx: CanvasRenderingContext2D,\n  font: string,\n  arrayOfThings: Things,\n  cache?: {data?: Record<string, number>, garbageCollect?: string[], font?: string}\n) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i: number, j: number, jlen: number, thing: Thing | Thing[], nestedThing: Thing | Thing[];\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n\n    // Undefined strings and arrays should not be measured\n    if (thing !== undefined && thing !== null && !isArray(thing)) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        // Undefined strings and arrays should not be measured\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\n\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */\nexport function _alignPixel(chart: Chart, pixel: number, width: number) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n\n/**\n * Clears the entire canvas.\n */\nexport function clearCanvas(canvas: HTMLCanvasElement, ctx?: CanvasRenderingContext2D) {\n  ctx = ctx || canvas.getContext('2d');\n\n  ctx.save();\n  // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nexport interface DrawPointOptions {\n  pointStyle: PointStyle;\n  rotation?: number;\n  radius: number;\n  borderWidth: number;\n}\n\nexport function drawPoint(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number\n) {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  drawPointLegend(ctx, options, x, y, null);\n}\n\n// eslint-disable-next-line complexity\nexport function drawPointLegend(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number,\n  w: number\n) {\n  let type: string, xOffset: number, yOffset: number, size: number, cornerRadius: number, width: number, xOffsetW: number, yOffsetW: number;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n    default:\n      if (w) {\n        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n      } else {\n        ctx.arc(x, y, radius, 0, TAU);\n      }\n      ctx.closePath();\n      break;\n    case 'triangle':\n      width = w ? w / 2 : radius;\n      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      ctx.closePath();\n      break;\n    case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n      cornerRadius = radius * 0.516;\n      size = radius - cornerRadius;\n      xOffset = Math.cos(rad + QUARTER_PI) * size;\n      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      yOffset = Math.sin(rad + QUARTER_PI) * size;\n      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n      ctx.closePath();\n      break;\n    case 'rect':\n      if (!rotation) {\n        size = Math.SQRT1_2 * radius;\n        width = w ? w / 2 : size;\n        ctx.rect(x - width, y - size, 2 * width, 2 * size);\n        break;\n      }\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'rectRot':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      ctx.closePath();\n      break;\n    case 'crossRot':\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'cross':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'star':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      rad += QUARTER_PI;\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'line':\n      xOffset = w ? w / 2 : Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      ctx.moveTo(x - xOffset, y - yOffset);\n      ctx.lineTo(x + xOffset, y + yOffset);\n      break;\n    case 'dash':\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n      break;\n    case false:\n      ctx.closePath();\n      break;\n  }\n\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */\nexport function _isPointInArea(\n  point: Point,\n  area: TRBL,\n  margin?: number\n) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\n\nexport function clipArea(ctx: CanvasRenderingContext2D, area: TRBL) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nexport function unclipArea(ctx: CanvasRenderingContext2D) {\n  ctx.restore();\n}\n\n/**\n * @private\n */\nexport function _steppedLineTo(\n  ctx: CanvasRenderingContext2D,\n  previous: Point,\n  target: Point,\n  flip?: boolean,\n  mode?: string\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @private\n */\nexport function _bezierCurveTo(\n  ctx: CanvasRenderingContext2D,\n  previous: SplinePoint,\n  target: SplinePoint,\n  flip?: boolean\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\n\nfunction setRenderOpts(ctx: CanvasRenderingContext2D, opts: RenderTextOpts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  line: string,\n  opts: RenderTextOpts\n) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx: CanvasRenderingContext2D, opts: BackdropOptions) {\n  const oldColor = ctx.fillStyle;\n\n  ctx.fillStyle = opts.color as string;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n\n/**\n * Render text onto the canvas\n */\nexport function renderText(\n  ctx: CanvasRenderingContext2D,\n  text: string | string[],\n  x: number,\n  y: number,\n  font: CanvasFontSpec,\n  opts: RenderTextOpts = {}\n) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i: number, line: string;\n\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n\n    y += Number(font.lineHeight);\n  }\n\n  ctx.restore();\n}\n\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */\nexport function addRoundedRectPath(\n  ctx: CanvasRenderingContext2D,\n  rect: RoundedRect & { radius: TRBLCorners }\n) {\n  const {x, y, w, h, radius} = rect;\n\n  // top left arc\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);\n\n  // line from top left to bottom left\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n\n  // bottom left arc\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n\n  // line from bottom left to bottom right\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n\n  // bottom right arc\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n\n  // line from bottom right to top right\n  ctx.lineTo(x + w, y + radius.topRight);\n\n  // top right arc\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n\n  // line from top right to top left\n  ctx.lineTo(x + radius.topLeft, y);\n}\n","import defaults from '../core/core.defaults.js';\nimport {isArray, isObject, toDimension, valueOrDefault} from './helpers.core.js';\nimport {toFontString} from './helpers.canvas.js';\nimport type {ChartArea, FontSpec, Point} from '../types/index.js';\nimport type {TRBL, TRBLCorners} from '../types/geometric.js';\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n/**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */\nexport function toLineHeight(value: number | string, size: number): number {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n    case '%':\n      value /= 100;\n      break;\n    default:\n      break;\n  }\n\n  return size * value;\n}\n\nconst numberOrZero = (v: unknown) => +v || 0;\n\n/**\n * @param value\n * @param props\n */\nexport function _readValueToProps<K extends string>(value: number | Record<K, number>, props: K[]): Record<K, number>;\nexport function _readValueToProps<K extends string, T extends string>(value: number | Record<K & T, number>, props: Record<T, K>): Record<T, number>;\nexport function _readValueToProps(value: number | Record<string, number>, props: string[] | Record<string, string>) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\n\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\nexport function toTRBL(value: number | TRBL | Point) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\n\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\nexport function toTRBLCorners(value: number | TRBLCorners) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\nexport function toPadding(value?: number | TRBL): ChartArea {\n  const obj = toTRBL(value) as ChartArea;\n\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n\n  return obj;\n}\n\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\nexport function toFont(options: Partial<FontSpec>, fallback?: Partial<FontSpec>) {\n  options = options || {};\n  fallback = fallback || defaults.font as FontSpec;\n\n  let size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n\n  font.string = toFontString(font);\n  return font;\n}\n\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\nexport function resolve(inputs: Array<unknown>, context?: object, index?: number, info?: { cacheable: boolean }) {\n  let cacheable = true;\n  let i: number, ilen: number, value: unknown;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\n\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\nexport function _addGrace(minmax: { min: number; max: number; }, grace: number | string, beginAtZero: boolean) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value: number, add: number) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */\nexport function createContext<T extends object>(parentContext: null, context: T): T;\nexport function createContext<T extends object, P extends T>(parentContext: P, context: T): P & T;\nexport function createContext(parentContext: object, context: object) {\n  return Object.assign(Object.create(parentContext), context);\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartMeta} from '../types/index.js';\nimport type {\n  ResolverObjectKey,\n  ResolverCache,\n  ResolverProxy,\n  DescriptorDefaults,\n  Descriptor,\n  ContextCache,\n  ContextProxy\n} from './helpers.config.types.js';\nimport {isArray, isFunction, isObject, resolveObjectKey, _capitalize} from './helpers.core.js';\n\nexport * from './helpers.config.types.js';\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\nexport function _createResolver<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  scopes: T,\n  prefixes = [''],\n  rootScopes?: R,\n  fallback?: ResolverObjectKey,\n  getTarget = () => scopes[0]\n) {\n  const finalRootScopes = rootScopes || scopes;\n  if (typeof fallback === 'undefined') {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache: ResolverCache<T, R> = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: finalRootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope: AnyObject) => _createResolver([scope, ...scopes], prefixes, finalRootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop: string) {\n      delete target[prop]; // remove from cache\n      delete target._keys; // remove cached keys\n      delete scopes[0][prop]; // remove from top level scope\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop: string) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop: string, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n      delete target._keys; // remove cached keys\n      return true;\n    }\n  }) as ResolverProxy<T, R>;\n}\n\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */\nexport function _attachContext<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  proxy: ResolverProxy<T, R>,\n  context: AnyObject,\n  subProxy?: ResolverProxy<T, R>,\n  descriptorDefaults?: DescriptorDefaults\n) {\n  const cache: ContextCache<T, R> = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx: AnyObject) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope: AnyObject) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete proxy[prop]; // remove from proxy\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n      delete target[prop]; // remove from cache\n      return true;\n    }\n  }) as ContextProxy<T, R>;\n}\n\n/**\n * @private\n */\nexport function _descriptors(\n  proxy: ResolverCache,\n  defaults: DescriptorDefaults = {scriptable: true, indexable: true}\n): Descriptor {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\n\nconst readKey = (prefix: string, name: string) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop: string, value: unknown) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\n\nfunction _cached(\n  target: AnyObject,\n  prop: string,\n  resolve: () => unknown\n) {\n  if (Object.prototype.hasOwnProperty.call(target, prop)) {\n    return target[prop];\n  }\n\n  const value = resolve();\n  // cache the resolved value\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(\n  target: ContextCache,\n  prop: string,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop]; // resolve from proxy\n\n  // resolve with context\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\n\nfunction _resolveScriptable(\n  prop: string,\n  getValue: (ctx: AnyObject, sub: AnyObject) => unknown,\n  target: ContextCache,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  let value = getValue(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\n\nfunction _resolveArray(\n  prop: string,\n  value: unknown[],\n  target: ContextCache,\n  isIndexable: (key: string) => boolean\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n\n  if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n    return value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\n\nfunction resolveFallback(\n  fallback: ResolverObjectKey | ((prop: ResolverObjectKey, value: unknown) => ResolverObjectKey),\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nconst getScope = (key: ResolverObjectKey, parent: AnyObject) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n\nfunction addScopes(\n  set: Set<AnyObject>,\n  parentScopes: AnyObject[],\n  key: ResolverObjectKey,\n  parentFallback: ResolverObjectKey,\n  value: unknown\n) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n        // When we reach the descriptor that defines a new _fallback, return that.\n        // The fallback will resume to that new scope.\n        return fallback;\n      }\n    } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n      // Fallback to `false` results to `false`, when falling back to different key.\n      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n      return null;\n    }\n  }\n  return false;\n}\n\nfunction createSubResolver(\n  parentScopes: AnyObject[],\n  resolver: ResolverCache,\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set<AnyObject>();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (typeof fallback !== 'undefined' && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop as string, value));\n}\n\nfunction addScopesFromKey(\n  set: Set<AnyObject>,\n  allScopes: AnyObject[],\n  key: ResolverObjectKey,\n  fallback: ResolverObjectKey,\n  item: unknown\n) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\n\nfunction subGetTarget(\n  resolver: ResolverCache,\n  prop: string,\n  value: unknown\n) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(\n  prop: string,\n  prefixes: string[],\n  scopes: AnyObject[],\n  proxy: ResolverProxy\n) {\n  let value: unknown;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (typeof value !== 'undefined') {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\n\nfunction _resolve(key: string, scopes: AnyObject[]) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (typeof value !== 'undefined') {\n      return value;\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target: ResolverCache) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes: AnyObject[]) {\n  const set = new Set<string>();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\n\nexport function _parseObjectDataRadialScale(\n  meta: ChartMeta<'line' | 'scatter'>,\n  data: AnyObject[],\n  start: number,\n  count: number\n) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array<{r: unknown}>(count);\n  let i: number, ilen: number, index: number, item: AnyObject;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n","import {almostEquals, distanceBetweenPoints, sign} from './helpers.math.js';\nimport {_isPointInArea} from './helpers.canvas.js';\nimport type {ChartArea} from '../types/index.js';\nimport type {SplinePoint} from '../types/geometric.js';\n\nconst EPSILON = Number.EPSILON || 1e-14;\n\ntype OptionalSplinePoint = SplinePoint | false\nconst getPoint = (points: SplinePoint[], i: number): OptionalSplinePoint => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis: 'x' | 'y') => indexAxis === 'x' ? 'y' : 'x';\n\nexport function splineCurve(\n  firstPoint: SplinePoint,\n  middlePoint: SplinePoint,\n  afterPoint: SplinePoint,\n  t: number\n): {\n    previous: SplinePoint\n    next: SplinePoint\n  } {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n  // This function must also respect \"skipped\" points\n\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n\n  // If all points are the same, s01 & s02 will be inf\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n\n  const fa = t * s01; // scaling factor for triangle Ta\n  const fb = t * s12;\n\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n\n/**\n * Adjust tangents to ensure monotonic properties\n */\nfunction monotoneAdjust(points: SplinePoint[], deltaK: number[], mK: number[]) {\n  const pointsLen = points.length;\n\n  let alphaK: number, betaK: number, tauK: number, squaredMagnitude: number, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points: SplinePoint[], mK: number[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta: number, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\n\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nexport function splineCurveMonotone(points: SplinePoint[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK: number[] = Array(pointsLen).fill(0);\n  const mK: number[] = Array(pointsLen);\n\n  // Calculate slopes (deltaK) and initialize tangents (mK)\n  let i, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n\n      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n        : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n          : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt: number, min: number, max: number) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points: SplinePoint[], area: ChartArea) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function _updateBezierControlPoints(\n  points: SplinePoint[],\n  options,\n  area: ChartArea,\n  loop: boolean,\n  indexAxis: 'x' | 'y'\n) {\n  let i: number, ilen: number, point: SplinePoint, controlPoints: ReturnType<typeof splineCurve>;\n\n  // Only consider points that are drawn in case the spanGaps option is used\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n","import type {ChartArea, Scale} from '../types/index.js';\nimport type Chart from '../core/core.controller.js';\nimport type {ChartEvent} from '../types.js';\nimport {INFINITY} from './helpers.math.js';\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `dom` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import('../core/core.controller.js').default } dom.Chart\n * @typedef { import('../../types').ChartEvent } ChartEvent\n */\n\n/**\n * @private\n */\nexport function _isDomSupported(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * @private\n */\nexport function _getParentNode(domNode: HTMLCanvasElement): HTMLCanvasElement {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = (parent as ShadowRoot).host;\n  }\n  return parent as HTMLCanvasElement;\n}\n\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\nfunction parseMaxStyle(styleValue: string | number, node: HTMLElement, parentProperty: string) {\n  let valueInPixels: number;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = (valueInPixels / 100) * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nconst getComputedStyle = (element: HTMLElement): CSSStyleDeclaration =>\n  element.ownerDocument.defaultView.getComputedStyle(element, null);\n\nexport function getStyle(el: HTMLElement, property: string): string {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles: CSSStyleDeclaration, style: string, suffix?: string): ChartArea {\n  const result = {} as ChartArea;\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nconst useOffsetPos = (x: number, y: number, target: HTMLElement | EventTarget) =>\n  (x > 0 || y > 0) && (!target || !(target as HTMLElement).shadowRoot);\n\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\nfunction getCanvasPosition(\n  e: Event | TouchEvent | MouseEvent,\n  canvas: HTMLCanvasElement\n): {\n    x: number;\n    y: number;\n    box: boolean;\n  } {\n  const touches = (e as TouchEvent).touches;\n  const source = (touches && touches.length ? touches[0] : e) as MouseEvent;\n  const {offsetX, offsetY} = source as MouseEvent;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\n\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\nexport function getRelativePosition(\n  event: Event | ChartEvent | TouchEvent | MouseEvent,\n  chart: Chart\n): { x: number; y: number } {\n  if ('native' in event) {\n    return event;\n  }\n\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(event, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas: HTMLCanvasElement, width: number, height: number): Partial<Scale> {\n  let maxWidth: number, maxHeight: number;\n\n  if (width === undefined || height === undefined) {\n    const container = _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect(); // this is the border box of the container\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nconst round1 = (v: number) => Math.round(v * 10) / 10;\n\n// eslint-disable-next-line complexity\nexport function getMaximumSize(\n  canvas: HTMLCanvasElement,\n  bbWidth?: number,\n  bbHeight?: number,\n  aspectRatio?: number\n): { width: number; height: number } {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {width, height};\n}\n\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\nexport function retinaScale(\n  chart: Chart,\n  forceRatio: number,\n  forceStyle?: boolean\n): boolean | void {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n\n  chart.height = Math.floor(chart.height);\n  chart.width = Math.floor(chart.width);\n\n  const canvas = chart.canvas;\n\n  // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nexport const supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() { // This function will be called when the browser attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    } as EventListenerOptions;\n\n    window.addEventListener('test', null, options);\n    window.removeEventListener('test', null, options);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return passiveSupported;\n}());\n\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\nexport function readUsedSize(\n  element: HTMLElement,\n  property: 'width' | 'height'\n): number | undefined {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n","import type {Point, SplinePoint} from '../types/geometric.js';\n\n/**\n * @private\n */\nexport function _pointInLine(p1: Point, p2: Point, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n\n/**\n * @private\n */\nexport function _steppedInterpolation(\n  p1: Point,\n  p2: Point,\n  t: number, mode: 'middle' | 'after' | unknown\n) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n      : mode === 'after' ? t < 1 ? p1.y : p2.y\n        : t > 0 ? p2.y : p1.y\n  };\n}\n\n/**\n * @private\n */\nexport function _bezierInterpolation(p1: SplinePoint, p2: SplinePoint, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n","export interface RTLAdapter {\n  x(x: number): number;\n  setWidth(w: number): void;\n  textAlign(align: 'center' | 'left' | 'right'): 'center' | 'left' | 'right';\n  xPlus(x: number, value: number): number;\n  leftForLtr(x: number, itemWidth: number): number;\n}\n\nconst getRightToLeftAdapter = function(rectX: number, width: number): RTLAdapter {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\n\nconst getLeftToRightAdapter = function(): RTLAdapter {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) { // eslint-disable-line no-unused-vars\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) { // eslint-disable-line @typescript-eslint/no-unused-vars\n      return x;\n    },\n  };\n};\n\nexport function getRtlAdapter(rtl: boolean, rectX: number, width: number) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nexport function overrideTextDirection(ctx: CanvasRenderingContext2D, direction: 'ltr' | 'rtl') {\n  let style: CSSStyleDeclaration, original: [string, string];\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n\n    style.setProperty('direction', direction, 'important');\n    (ctx as { prevTextDirection?: [string, string] }).prevTextDirection = original;\n  }\n}\n\nexport function restoreTextDirection(ctx: CanvasRenderingContext2D, original?: [string, string]) {\n  if (original !== undefined) {\n    delete (ctx as { prevTextDirection?: [string, string] }).prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n","import {_angleBetween, _angleDiff, _isBetween, _normalizeAngle} from './helpers.math.js';\nimport {createContext} from './helpers.options.js';\nimport {isPatternOrGradient} from './helpers.color.js';\n\n/**\n * @typedef { import('../elements/element.line.js').default } LineElement\n * @typedef { import('../elements/element.point.js').default } PointElement\n * @typedef {{start: number, end: number, loop: boolean, style?: any}} Segment\n */\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\n\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  // eslint-disable-next-line prefer-const\n  let {start, end, loop} = segment;\n  let i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\n\n/**\n * Returns the sub-segment(s) of a line segment that fall in the given bounds\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} [segment.style] - segment style\n * @param {PointElement[]} points - the points that this segment refers to\n * @param {object} [bounds]\n * @param {string} bounds.property - the property of a `PointElement` we are bounding. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the property\n * @param {number} bounds.end - end value of the property\n * @private\n **/\nexport function _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n\n  return result;\n}\n\n\n/**\n * Returns the segments of the line that are inside given bounds\n * @param {LineElement} line\n * @param {object} [bounds]\n * @param {string} bounds.property - the property we are bounding with. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the `property`\n * @param {number} bounds.end - end value of the `property`\n * @private\n */\nexport function _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\n\n/**\n * Find start and end index of a line.\n */\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n\n  if (loop && !spanGaps) {\n    // loop and not spanning gaps, first find a gap to start from\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  // find first non skipped point (after the first gap possibly)\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  // if we looped to count, start needs to be 0\n  start %= count;\n\n  if (loop) {\n    // loop will go past count, if start > 0\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  // end could be more than count, normalize\n  end %= count;\n\n  return {start, end};\n}\n\n/**\n * Compute solid segments from Points, when spanGaps === false\n * @param {PointElement[]} points - the points\n * @param {number} start - start index\n * @param {number} max - max index (can go past count on a loop)\n * @param {boolean} loop - boolean indicating that this would be a loop if no gaps are found\n */\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        // @ts-ignore\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n\n  return result;\n}\n\n/**\n * Compute the continuous segments that define the whole line\n * There can be skipped points within a segment, if spanGaps is true.\n * @param {LineElement} line\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n * @private\n */\nexport function _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\n/**\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\n/**\n * @param {LineElement} line\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    // Style can not start/end on a skipped point, adjust indices accordingly\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  if (!prevStyle) {\n    return false;\n  }\n  const cache = [];\n  const replacer = function(key, value) {\n    if (!isPatternOrGradient(value)) {\n      return value;\n    }\n    if (!cache.includes(value)) {\n      cache.push(value);\n    }\n    return cache.indexOf(value);\n  };\n  return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n","import {requestAnimFrame} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('./core.animation.js').default } Animation\n * @typedef { import('./core.controller.js').default } Chart\n */\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is export for typedoc\n */\nexport class Animator {\n  constructor() {\n    this._request = null;\n    this._charts = new Map();\n    this._running = false;\n    this._lastDate = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(chart, anims, date, type) {\n    const callbacks = anims.listeners[type];\n    const numSteps = anims.duration;\n\n    callbacks.forEach(fn => fn({\n      chart,\n      initial: anims.initial,\n      numSteps,\n      currentStep: Math.min(date - anims.start, numSteps)\n    }));\n  }\n\n  /**\n\t * @private\n\t */\n  _refresh() {\n    if (this._request) {\n      return;\n    }\n    this._running = true;\n\n    this._request = requestAnimFrame.call(window, () => {\n      this._update();\n      this._request = null;\n\n      if (this._running) {\n        this._refresh();\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _update(date = Date.now()) {\n    let remaining = 0;\n\n    this._charts.forEach((anims, chart) => {\n      if (!anims.running || !anims.items.length) {\n        return;\n      }\n      const items = anims.items;\n      let i = items.length - 1;\n      let draw = false;\n      let item;\n\n      for (; i >= 0; --i) {\n        item = items[i];\n\n        if (item._active) {\n          if (item._total > anims.duration) {\n            // if the animation has been updated and its duration prolonged,\n            // update to total duration of current animations run (for progress event)\n            anims.duration = item._total;\n          }\n          item.tick(date);\n          draw = true;\n        } else {\n          // Remove the item by replacing it with last item and removing the last\n          // A lot faster than splice.\n          items[i] = items[items.length - 1];\n          items.pop();\n        }\n      }\n\n      if (draw) {\n        chart.draw();\n        this._notify(chart, anims, date, 'progress');\n      }\n\n      if (!items.length) {\n        anims.running = false;\n        this._notify(chart, anims, date, 'complete');\n        anims.initial = false;\n      }\n\n      remaining += items.length;\n    });\n\n    this._lastDate = date;\n\n    if (remaining === 0) {\n      this._running = false;\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getAnims(chart) {\n    const charts = this._charts;\n    let anims = charts.get(chart);\n    if (!anims) {\n      anims = {\n        running: false,\n        initial: true,\n        items: [],\n        listeners: {\n          complete: [],\n          progress: []\n        }\n      };\n      charts.set(chart, anims);\n    }\n    return anims;\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} event - event name\n\t * @param {Function} cb - callback\n\t */\n  listen(chart, event, cb) {\n    this._getAnims(chart).listeners[event].push(cb);\n  }\n\n  /**\n\t * Add animations\n\t * @param {Chart} chart\n\t * @param {Animation[]} items - animations\n\t */\n  add(chart, items) {\n    if (!items || !items.length) {\n      return;\n    }\n    this._getAnims(chart).items.push(...items);\n  }\n\n  /**\n\t * Counts number of active animations for the chart\n\t * @param {Chart} chart\n\t */\n  has(chart) {\n    return this._getAnims(chart).items.length > 0;\n  }\n\n  /**\n\t * Start animating (all charts)\n\t * @param {Chart} chart\n\t */\n  start(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims) {\n      return;\n    }\n    anims.running = true;\n    anims.start = Date.now();\n    anims.duration = anims.items.reduce((acc, cur) => Math.max(acc, cur._duration), 0);\n    this._refresh();\n  }\n\n  running(chart) {\n    if (!this._running) {\n      return false;\n    }\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.running || !anims.items.length) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n\t * Stop all animations for the chart\n\t * @param {Chart} chart\n\t */\n  stop(chart) {\n    const anims = this._charts.get(chart);\n    if (!anims || !anims.items.length) {\n      return;\n    }\n    const items = anims.items;\n    let i = items.length - 1;\n\n    for (; i >= 0; --i) {\n      items[i].cancel();\n    }\n    anims.items = [];\n    this._notify(chart, anims, Date.now(), 'complete');\n  }\n\n  /**\n\t * Remove chart from Animator\n\t * @param {Chart} chart\n\t */\n  remove(chart) {\n    return this._charts.delete(chart);\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Animator();\n","import effects from '../helpers/helpers.easing.js';\nimport {resolve} from '../helpers/helpers.options.js';\nimport {color as helpersColor} from '../helpers/helpers.color.js';\n\nconst transparent = 'transparent';\nconst interpolators = {\n  boolean(from, to, factor) {\n    return factor > 0.5 ? to : from;\n  },\n  /**\n   * @param {string} from\n   * @param {string} to\n   * @param {number} factor\n   */\n  color(from, to, factor) {\n    const c0 = helpersColor(from || transparent);\n    const c1 = c0.valid && helpersColor(to || transparent);\n    return c1 && c1.valid\n      ? c1.mix(c0, factor).hexString()\n      : to;\n  },\n  number(from, to, factor) {\n    return from + (to - from) * factor;\n  }\n};\n\nexport default class Animation {\n  constructor(cfg, target, prop, to) {\n    const currentValue = target[prop];\n\n    to = resolve([cfg.to, to, currentValue, cfg.from]);\n    const from = resolve([cfg.from, currentValue, to]);\n\n    this._active = true;\n    this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n    this._easing = effects[cfg.easing] || effects.linear;\n    this._start = Math.floor(Date.now() + (cfg.delay || 0));\n    this._duration = this._total = Math.floor(cfg.duration);\n    this._loop = !!cfg.loop;\n    this._target = target;\n    this._prop = prop;\n    this._from = from;\n    this._to = to;\n    this._promises = undefined;\n  }\n\n  active() {\n    return this._active;\n  }\n\n  update(cfg, to, date) {\n    if (this._active) {\n      this._notify(false);\n\n      const currentValue = this._target[this._prop];\n      const elapsed = date - this._start;\n      const remain = this._duration - elapsed;\n      this._start = date;\n      this._duration = Math.floor(Math.max(remain, cfg.duration));\n      this._total += elapsed;\n      this._loop = !!cfg.loop;\n      this._to = resolve([cfg.to, to, currentValue, cfg.from]);\n      this._from = resolve([cfg.from, currentValue, to]);\n    }\n  }\n\n  cancel() {\n    if (this._active) {\n      // update current evaluated value, for smoother animations\n      this.tick(Date.now());\n      this._active = false;\n      this._notify(false);\n    }\n  }\n\n  tick(date) {\n    const elapsed = date - this._start;\n    const duration = this._duration;\n    const prop = this._prop;\n    const from = this._from;\n    const loop = this._loop;\n    const to = this._to;\n    let factor;\n\n    this._active = from !== to && (loop || (elapsed < duration));\n\n    if (!this._active) {\n      this._target[prop] = to;\n      this._notify(true);\n      return;\n    }\n\n    if (elapsed < 0) {\n      this._target[prop] = from;\n      return;\n    }\n\n    factor = (elapsed / duration) % 2;\n    factor = loop && factor > 1 ? 2 - factor : factor;\n    factor = this._easing(Math.min(1, Math.max(0, factor)));\n\n    this._target[prop] = this._fn(from, to, factor);\n  }\n\n  wait() {\n    const promises = this._promises || (this._promises = []);\n    return new Promise((res, rej) => {\n      promises.push({res, rej});\n    });\n  }\n\n  _notify(resolved) {\n    const method = resolved ? 'res' : 'rej';\n    const promises = this._promises || [];\n    for (let i = 0; i < promises.length; i++) {\n      promises[i][method]();\n    }\n  }\n}\n","import animator from './core.animator.js';\nimport Animation from './core.animation.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isObject} from '../helpers/helpers.core.js';\n\nexport default class Animations {\n  constructor(chart, config) {\n    this._chart = chart;\n    this._properties = new Map();\n    this.configure(config);\n  }\n\n  configure(config) {\n    if (!isObject(config)) {\n      return;\n    }\n\n    const animationOptions = Object.keys(defaults.animation);\n    const animatedProps = this._properties;\n\n    Object.getOwnPropertyNames(config).forEach(key => {\n      const cfg = config[key];\n      if (!isObject(cfg)) {\n        return;\n      }\n      const resolved = {};\n      for (const option of animationOptions) {\n        resolved[option] = cfg[option];\n      }\n\n      (isArray(cfg.properties) && cfg.properties || [key]).forEach((prop) => {\n        if (prop === key || !animatedProps.has(prop)) {\n          animatedProps.set(prop, resolved);\n        }\n      });\n    });\n  }\n\n  /**\n\t * Utility to handle animation of `options`.\n\t * @private\n\t */\n  _animateOptions(target, values) {\n    const newOptions = values.options;\n    const options = resolveTargetOptions(target, newOptions);\n    if (!options) {\n      return [];\n    }\n\n    const animations = this._createAnimations(options, newOptions);\n    if (newOptions.$shared) {\n      // Going to shared options:\n      // After all animations are done, assign the shared options object to the element\n      // So any new updates to the shared options are observed\n      awaitAll(target.options.$animations, newOptions).then(() => {\n        target.options = newOptions;\n      }, () => {\n        // rejected, noop\n      });\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @private\n\t */\n  _createAnimations(target, values) {\n    const animatedProps = this._properties;\n    const animations = [];\n    const running = target.$animations || (target.$animations = {});\n    const props = Object.keys(values);\n    const date = Date.now();\n    let i;\n\n    for (i = props.length - 1; i >= 0; --i) {\n      const prop = props[i];\n      if (prop.charAt(0) === '$') {\n        continue;\n      }\n\n      if (prop === 'options') {\n        animations.push(...this._animateOptions(target, values));\n        continue;\n      }\n      const value = values[prop];\n      let animation = running[prop];\n      const cfg = animatedProps.get(prop);\n\n      if (animation) {\n        if (cfg && animation.active()) {\n          // There is an existing active animation, let's update that\n          animation.update(cfg, value, date);\n          continue;\n        } else {\n          animation.cancel();\n        }\n      }\n      if (!cfg || !cfg.duration) {\n        // not animated, set directly to new value\n        target[prop] = value;\n        continue;\n      }\n\n      running[prop] = animation = new Animation(cfg, target, prop, value);\n      animations.push(animation);\n    }\n    return animations;\n  }\n\n\n  /**\n\t * Update `target` properties to new values, using configured animations\n\t * @param {object} target - object to update\n\t * @param {object} values - new target properties\n\t * @returns {boolean|undefined} - `true` if animations were started\n\t **/\n  update(target, values) {\n    if (this._properties.size === 0) {\n      // Nothing is animated, just apply the new values.\n      Object.assign(target, values);\n      return;\n    }\n\n    const animations = this._createAnimations(target, values);\n\n    if (animations.length) {\n      animator.add(this._chart, animations);\n      return true;\n    }\n  }\n}\n\nfunction awaitAll(animations, properties) {\n  const running = [];\n  const keys = Object.keys(properties);\n  for (let i = 0; i < keys.length; i++) {\n    const anim = animations[keys[i]];\n    if (anim && anim.active()) {\n      running.push(anim.wait());\n    }\n  }\n  // @ts-ignore\n  return Promise.all(running);\n}\n\nfunction resolveTargetOptions(target, newOptions) {\n  if (!newOptions) {\n    return;\n  }\n  let options = target.options;\n  if (!options) {\n    target.options = newOptions;\n    return;\n  }\n  if (options.$shared) {\n    // Going from shared options to distinct one:\n    // Create new options object containing the old shared values and start updating that.\n    target.options = options = Object.assign({}, options, {$shared: false, $animations: {}});\n  }\n  return options;\n}\n","import Animations from './core.animations.js';\nimport defaults from './core.defaults.js';\nimport {isArray, isFinite, isObject, valueOrDefault, resolveObjectKey, defined} from '../helpers/helpers.core.js';\nimport {listenArrayEvents, unlistenArrayEvents} from '../helpers/helpers.collection.js';\nimport {createContext, sign} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('./core.scale.js').default } Scale\n */\n\nfunction scaleClip(scale, allowedOverflow) {\n  const opts = scale && scale.options || {};\n  const reverse = opts.reverse;\n  const min = opts.min === undefined ? allowedOverflow : 0;\n  const max = opts.max === undefined ? allowedOverflow : 0;\n  return {\n    start: reverse ? max : min,\n    end: reverse ? min : max\n  };\n}\n\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n  if (allowedOverflow === false) {\n    return false;\n  }\n  const x = scaleClip(xScale, allowedOverflow);\n  const y = scaleClip(yScale, allowedOverflow);\n\n  return {\n    top: y.end,\n    right: x.end,\n    bottom: y.start,\n    left: x.start\n  };\n}\n\nfunction toClip(value) {\n  let t, r, b, l;\n\n  if (isObject(value)) {\n    t = value.top;\n    r = value.right;\n    b = value.bottom;\n    l = value.left;\n  } else {\n    t = r = b = l = value;\n  }\n\n  return {\n    top: t,\n    right: r,\n    bottom: b,\n    left: l,\n    disabled: value === false\n  };\n}\n\nfunction getSortedDatasetIndices(chart, filterVisible) {\n  const keys = [];\n  const metasets = chart._getSortedDatasetMetas(filterVisible);\n  let i, ilen;\n\n  for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n    keys.push(metasets[i].index);\n  }\n  return keys;\n}\n\nfunction applyStack(stack, value, dsIndex, options = {}) {\n  const keys = stack.keys;\n  const singleMode = options.mode === 'single';\n  let i, ilen, datasetIndex, otherValue;\n\n  if (value === null) {\n    return;\n  }\n\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    datasetIndex = +keys[i];\n    if (datasetIndex === dsIndex) {\n      if (options.all) {\n        continue;\n      }\n      break;\n    }\n    otherValue = stack.values[datasetIndex];\n    if (isFinite(otherValue) && (singleMode || (value === 0 || sign(value) === sign(otherValue)))) {\n      value += otherValue;\n    }\n  }\n  return value;\n}\n\nfunction convertObjectDataToArray(data) {\n  const keys = Object.keys(data);\n  const adata = new Array(keys.length);\n  let i, ilen, key;\n  for (i = 0, ilen = keys.length; i < ilen; ++i) {\n    key = keys[i];\n    adata[i] = {\n      x: key,\n      y: data[key]\n    };\n  }\n  return adata;\n}\n\nfunction isStacked(scale, meta) {\n  const stacked = scale && scale.options.stacked;\n  return stacked || (stacked === undefined && meta.stack !== undefined);\n}\n\nfunction getStackKey(indexScale, valueScale, meta) {\n  return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\n\nfunction getUserBounds(scale) {\n  const {min, max, minDefined, maxDefined} = scale.getUserBounds();\n  return {\n    min: minDefined ? min : Number.NEGATIVE_INFINITY,\n    max: maxDefined ? max : Number.POSITIVE_INFINITY\n  };\n}\n\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n  const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n  return subStack[indexValue] || (subStack[indexValue] = {});\n}\n\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n  for (const meta of vScale.getMatchingVisibleMetas(type).reverse()) {\n    const value = stack[meta.index];\n    if ((positive && value > 0) || (!positive && value < 0)) {\n      return meta.index;\n    }\n  }\n\n  return null;\n}\n\nfunction updateStacks(controller, parsed) {\n  const {chart, _cachedMeta: meta} = controller;\n  const stacks = chart._stacks || (chart._stacks = {}); // map structure is {stackKey: {datasetIndex: value}}\n  const {iScale, vScale, index: datasetIndex} = meta;\n  const iAxis = iScale.axis;\n  const vAxis = vScale.axis;\n  const key = getStackKey(iScale, vScale, meta);\n  const ilen = parsed.length;\n  let stack;\n\n  for (let i = 0; i < ilen; ++i) {\n    const item = parsed[i];\n    const {[iAxis]: index, [vAxis]: value} = item;\n    const itemStacks = item._stacks || (item._stacks = {});\n    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n    stack[datasetIndex] = value;\n\n    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n\n    const visualValues = stack._visualValues || (stack._visualValues = {});\n    visualValues[datasetIndex] = value;\n  }\n}\n\nfunction getFirstScaleId(chart, axis) {\n  const scales = chart.scales;\n  return Object.keys(scales).filter(key => scales[key].axis === axis).shift();\n}\n\nfunction createDatasetContext(parent, index) {\n  return createContext(parent,\n    {\n      active: false,\n      dataset: undefined,\n      datasetIndex: index,\n      index,\n      mode: 'default',\n      type: 'dataset'\n    }\n  );\n}\n\nfunction createDataContext(parent, index, element) {\n  return createContext(parent, {\n    active: false,\n    dataIndex: index,\n    parsed: undefined,\n    raw: undefined,\n    element,\n    index,\n    mode: 'default',\n    type: 'data'\n  });\n}\n\nfunction clearStacks(meta, items) {\n  // Not using meta.index here, because it might be already updated if the dataset changed location\n  const datasetIndex = meta.controller.index;\n  const axis = meta.vScale && meta.vScale.axis;\n  if (!axis) {\n    return;\n  }\n\n  items = items || meta._parsed;\n  for (const parsed of items) {\n    const stacks = parsed._stacks;\n    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n      return;\n    }\n    delete stacks[axis][datasetIndex];\n    if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {\n      delete stacks[axis]._visualValues[datasetIndex];\n    }\n  }\n}\n\nconst isDirectUpdateMode = (mode) => mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared) => shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart) => canStack && !meta.hidden && meta._stacked\n  && {keys: getSortedDatasetIndices(chart, true), values: null};\n\nexport default class DatasetController {\n\n  /**\n   * @type {any}\n   */\n  static defaults = {};\n\n  /**\n   * Element type used to generate a meta dataset (e.g. Chart.element.LineElement).\n   */\n  static datasetElementType = null;\n\n  /**\n   * Element type used to generate a meta data (e.g. Chart.element.PointElement).\n   */\n  static dataElementType = null;\n\n  /**\n\t * @param {Chart} chart\n\t * @param {number} datasetIndex\n\t */\n  constructor(chart, datasetIndex) {\n    this.chart = chart;\n    this._ctx = chart.ctx;\n    this.index = datasetIndex;\n    this._cachedDataOpts = {};\n    this._cachedMeta = this.getMeta();\n    this._type = this._cachedMeta.type;\n    this.options = undefined;\n    /** @type {boolean | object} */\n    this._parsing = false;\n    this._data = undefined;\n    this._objectData = undefined;\n    this._sharedOptions = undefined;\n    this._drawStart = undefined;\n    this._drawCount = undefined;\n    this.enableOptionSharing = false;\n    this.supportsDecimation = false;\n    this.$context = undefined;\n    this._syncList = [];\n    this.datasetElementType = new.target.datasetElementType;\n    this.dataElementType = new.target.dataElementType;\n\n    this.initialize();\n  }\n\n  initialize() {\n    const meta = this._cachedMeta;\n    this.configure();\n    this.linkScales();\n    meta._stacked = isStacked(meta.vScale, meta);\n    this.addElements();\n\n    if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n      console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n    }\n  }\n\n  updateIndex(datasetIndex) {\n    if (this.index !== datasetIndex) {\n      clearStacks(this._cachedMeta);\n    }\n    this.index = datasetIndex;\n  }\n\n  linkScales() {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n\n    const chooseId = (axis, x, y, r) => axis === 'x' ? x : axis === 'r' ? r : y;\n\n    const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n    const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n    const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n    const indexAxis = meta.indexAxis;\n    const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n    const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n    meta.xScale = this.getScaleForId(xid);\n    meta.yScale = this.getScaleForId(yid);\n    meta.rScale = this.getScaleForId(rid);\n    meta.iScale = this.getScaleForId(iid);\n    meta.vScale = this.getScaleForId(vid);\n  }\n\n  getDataset() {\n    return this.chart.data.datasets[this.index];\n  }\n\n  getMeta() {\n    return this.chart.getDatasetMeta(this.index);\n  }\n\n  /**\n\t * @param {string} scaleID\n\t * @return {Scale}\n\t */\n  getScaleForId(scaleID) {\n    return this.chart.scales[scaleID];\n  }\n\n  /**\n\t * @private\n\t */\n  _getOtherScale(scale) {\n    const meta = this._cachedMeta;\n    return scale === meta.iScale\n      ? meta.vScale\n      : meta.iScale;\n  }\n\n  reset() {\n    this._update('reset');\n  }\n\n  /**\n\t * @private\n\t */\n  _destroy() {\n    const meta = this._cachedMeta;\n    if (this._data) {\n      unlistenArrayEvents(this._data, this);\n    }\n    if (meta._stacked) {\n      clearStacks(meta);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _dataCheck() {\n    const dataset = this.getDataset();\n    const data = dataset.data || (dataset.data = []);\n    const _data = this._data;\n\n    // In order to correctly handle data addition/deletion animation (and thus simulate\n    // real-time charts), we need to monitor these data modifications and synchronize\n    // the internal metadata accordingly.\n\n    if (isObject(data)) {\n      this._data = convertObjectDataToArray(data);\n    } else if (_data !== data) {\n      if (_data) {\n        // This case happens when the user replaced the data array instance.\n        unlistenArrayEvents(_data, this);\n        // Discard old parsed data and stacks\n        const meta = this._cachedMeta;\n        clearStacks(meta);\n        meta._parsed = [];\n      }\n      if (data && Object.isExtensible(data)) {\n        listenArrayEvents(data, this);\n      }\n      this._syncList = [];\n      this._data = data;\n    }\n  }\n\n  addElements() {\n    const meta = this._cachedMeta;\n\n    this._dataCheck();\n\n    if (this.datasetElementType) {\n      meta.dataset = new this.datasetElementType();\n    }\n  }\n\n  buildOrUpdateElements(resetNewElements) {\n    const meta = this._cachedMeta;\n    const dataset = this.getDataset();\n    let stackChanged = false;\n\n    this._dataCheck();\n\n    // make sure cached _stacked status is current\n    const oldStacked = meta._stacked;\n    meta._stacked = isStacked(meta.vScale, meta);\n\n    // detect change in stack option\n    if (meta.stack !== dataset.stack) {\n      stackChanged = true;\n      // remove values from old stack\n      clearStacks(meta);\n      meta.stack = dataset.stack;\n    }\n\n    // Re-sync meta data in case the user replaced the data array or if we missed\n    // any updates and so make sure that we handle number of datapoints changing.\n    this._resyncElements(resetNewElements);\n\n    // if stack changed, update stack values for the whole dataset\n    if (stackChanged || oldStacked !== meta._stacked) {\n      updateStacks(this, meta._parsed);\n    }\n  }\n\n  /**\n\t * Merges user-supplied and default dataset-level options\n\t * @private\n\t */\n  configure() {\n    const config = this.chart.config;\n    const scopeKeys = config.datasetScopeKeys(this._type);\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n    this.options = config.createResolver(scopes, this.getContext());\n    this._parsing = this.options.parsing;\n    this._cachedDataOpts = {};\n  }\n\n  /**\n\t * @param {number} start\n\t * @param {number} count\n\t */\n  parse(start, count) {\n    const {_cachedMeta: meta, _data: data} = this;\n    const {iScale, _stacked} = meta;\n    const iAxis = iScale.axis;\n\n    let sorted = start === 0 && count === data.length ? true : meta._sorted;\n    let prev = start > 0 && meta._parsed[start - 1];\n    let i, cur, parsed;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n      meta._sorted = true;\n      parsed = data;\n    } else {\n      if (isArray(data[start])) {\n        parsed = this.parseArrayData(meta, data, start, count);\n      } else if (isObject(data[start])) {\n        parsed = this.parseObjectData(meta, data, start, count);\n      } else {\n        parsed = this.parsePrimitiveData(meta, data, start, count);\n      }\n\n      const isNotInOrderComparedToPrev = () => cur[iAxis] === null || (prev && cur[iAxis] < prev[iAxis]);\n      for (i = 0; i < count; ++i) {\n        meta._parsed[i + start] = cur = parsed[i];\n        if (sorted) {\n          if (isNotInOrderComparedToPrev()) {\n            sorted = false;\n          }\n          prev = cur;\n        }\n      }\n      meta._sorted = sorted;\n    }\n\n    if (_stacked) {\n      updateStacks(this, parsed);\n    }\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [1,3,4]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {xScale0: 0, yScale0: 1}\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = new Array(count);\n    let i, ilen, index;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      parsed[i] = {\n        [iAxis]: singleScale || iScale.parse(labels[index], index),\n        [vAxis]: vScale.parse(data[index], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [[1,2],[3,4]]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id.\n\t * Example: {x: 0, y: 1}\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(item[0], index),\n        y: yScale.parse(item[1], index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @param {object} meta - dataset meta\n\t * @param {array} data - data array. Example [{x:1, y:5}, {x:2, y:10}]\n\t * @param {number} start - start index\n\t * @param {number} count - number of items to parse\n\t * @returns {object} parsed item - item containing index and a parsed value\n\t * for each scale id. _custom is optional\n\t * Example: {xScale0: 0, yScale0: 1, _custom: {r: 10, foo: 'bar'}}\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {xScale, yScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      index = i + start;\n      item = data[index];\n      parsed[i] = {\n        x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n        y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n      };\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getParsed(index) {\n    return this._cachedMeta._parsed[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataElement(index) {\n    return this._cachedMeta.data[index];\n  }\n\n  /**\n\t * @protected\n\t */\n  applyStack(scale, parsed, mode) {\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const value = parsed[scale.axis];\n    const stack = {\n      keys: getSortedDatasetIndices(chart, true),\n      values: parsed._stacks[scale.axis]._visualValues\n    };\n    return applyStack(stack, value, meta.index, {mode});\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    const parsedValue = parsed[scale.axis];\n    let value = parsedValue === null ? NaN : parsedValue;\n    const values = stack && parsed._stacks[scale.axis];\n    if (stack && values) {\n      stack.values = values;\n      value = applyStack(stack, parsedValue, this._cachedMeta.index);\n    }\n    range.min = Math.min(range.min, value);\n    range.max = Math.max(range.max, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMinMax(scale, canStack) {\n    const meta = this._cachedMeta;\n    const _parsed = meta._parsed;\n    const sorted = meta._sorted && scale === meta.iScale;\n    const ilen = _parsed.length;\n    const otherScale = this._getOtherScale(scale);\n    const stack = createStack(canStack, meta, this.chart);\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n    const {min: otherMin, max: otherMax} = getUserBounds(otherScale);\n    let i, parsed;\n\n    function _skip() {\n      parsed = _parsed[i];\n      const otherValue = parsed[otherScale.axis];\n      return !isFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n    }\n\n    for (i = 0; i < ilen; ++i) {\n      if (_skip()) {\n        continue;\n      }\n      this.updateRangeFromParsed(range, scale, parsed, stack);\n      if (sorted) {\n        // if the data is sorted, we don't need to check further from this end of array\n        break;\n      }\n    }\n    if (sorted) {\n      // in the sorted case, find first non-skipped value from other end of array\n      for (i = ilen - 1; i >= 0; --i) {\n        if (_skip()) {\n          continue;\n        }\n        this.updateRangeFromParsed(range, scale, parsed, stack);\n        break;\n      }\n    }\n    return range;\n  }\n\n  getAllParsedValues(scale) {\n    const parsed = this._cachedMeta._parsed;\n    const values = [];\n    let i, ilen, value;\n\n    for (i = 0, ilen = parsed.length; i < ilen; ++i) {\n      value = parsed[i][scale.axis];\n      if (isFinite(value)) {\n        values.push(value);\n      }\n    }\n    return values;\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return false;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const parsed = this.getParsed(index);\n    return {\n      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _update(mode) {\n    const meta = this._cachedMeta;\n    this.update(mode || 'default');\n    meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {} // eslint-disable-line no-unused-vars\n\n  draw() {\n    const ctx = this._ctx;\n    const chart = this.chart;\n    const meta = this._cachedMeta;\n    const elements = meta.data || [];\n    const area = chart.chartArea;\n    const active = [];\n    const start = this._drawStart || 0;\n    const count = this._drawCount || (elements.length - start);\n    const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n    let i;\n\n    if (meta.dataset) {\n      meta.dataset.draw(ctx, area, start, count);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const element = elements[i];\n      if (element.hidden) {\n        continue;\n      }\n      if (element.active && drawActiveElementsOnTop) {\n        active.push(element);\n      } else {\n        element.draw(ctx, area);\n      }\n    }\n\n    for (i = 0; i < active.length; ++i) {\n      active[i].draw(ctx, area);\n    }\n  }\n\n  /**\n\t * Returns a set of predefined style properties that should be used to represent the dataset\n\t * or the data if the index is specified\n\t * @param {number} index - data index\n\t * @param {boolean} [active] - true if hover\n\t * @return {object} style object\n\t */\n  getStyle(index, active) {\n    const mode = active ? 'active' : 'default';\n    return index === undefined && this._cachedMeta.dataset\n      ? this.resolveDatasetElementOptions(mode)\n      : this.resolveDataElementOptions(index || 0, mode);\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index, active, mode) {\n    const dataset = this.getDataset();\n    let context;\n    if (index >= 0 && index < this._cachedMeta.data.length) {\n      const element = this._cachedMeta.data[index];\n      context = element.$context ||\n        (element.$context = createDataContext(this.getContext(), index, element));\n      context.parsed = this.getParsed(index);\n      context.raw = dataset.data[index];\n      context.index = context.dataIndex = index;\n    } else {\n      context = this.$context ||\n        (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n      context.dataset = dataset;\n      context.index = context.datasetIndex = this.index;\n    }\n\n    context.active = !!active;\n    context.mode = mode;\n    return context;\n  }\n\n  /**\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDatasetElementOptions(mode) {\n    return this._resolveElementOptions(this.datasetElementType.id, mode);\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    return this._resolveElementOptions(this.dataElementType.id, mode, index);\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveElementOptions(elementType, mode = 'default', index) {\n    const active = mode === 'active';\n    const cache = this._cachedDataOpts;\n    const cacheKey = elementType + '-' + mode;\n    const cached = cache[cacheKey];\n    const sharing = this.enableOptionSharing && defined(index);\n    if (cached) {\n      return cloneIfNotShared(cached, sharing);\n    }\n    const config = this.chart.config;\n    const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n    const prefixes = active ? [`${elementType}Hover`, 'hover', elementType, ''] : [elementType, ''];\n    const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n    const names = Object.keys(defaults.elements[elementType]);\n    // context is provided as a function, and is called only if needed,\n    // so we don't create a context for each element if not needed.\n    const context = () => this.getContext(index, active, mode);\n    const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n\n    if (values.$shared) {\n      // `$shared` indicates this set of options can be shared between multiple elements.\n      // Sharing is used to reduce number of properties to change during animation.\n      values.$shared = sharing;\n\n      // We cache options by `mode`, which can be 'active' for example. This enables us\n      // to have the 'active' element options and 'default' options to switch between\n      // when interacting.\n      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n    }\n\n    return values;\n  }\n\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations(index, transition, active) {\n    const chart = this.chart;\n    const cache = this._cachedDataOpts;\n    const cacheKey = `animation-${transition}`;\n    const cached = cache[cacheKey];\n    if (cached) {\n      return cached;\n    }\n    let options;\n    if (chart.options.animation !== false) {\n      const config = this.chart.config;\n      const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n      const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n      options = config.createResolver(scopes, this.getContext(index, active, transition));\n    }\n    const animations = new Animations(chart, options && options.animations);\n    if (options && options._cacheable) {\n      cache[cacheKey] = Object.freeze(animations);\n    }\n    return animations;\n  }\n\n  /**\n\t * Utility for getting the options object shared between elements\n\t * @protected\n\t */\n  getSharedOptions(options) {\n    if (!options.$shared) {\n      return;\n    }\n    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n  }\n\n  /**\n\t * Utility for determining if `options` should be included in the updated properties\n\t * @protected\n\t */\n  includeOptions(mode, sharedOptions) {\n    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n  }\n\n  /**\n   * @todo v4, rename to getSharedOptions and remove excess functions\n   */\n  _getSharedOptions(start, mode) {\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const previouslySharedOptions = this._sharedOptions;\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions) || (sharedOptions !== previouslySharedOptions);\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    return {sharedOptions, includeOptions};\n  }\n\n  /**\n\t * Utility for updating an element with new properties, using animations when appropriate.\n\t * @protected\n\t */\n  updateElement(element, index, properties, mode) {\n    if (isDirectUpdateMode(mode)) {\n      Object.assign(element, properties);\n    } else {\n      this._resolveAnimations(index, mode).update(element, properties);\n    }\n  }\n\n  /**\n\t * Utility to animate the shared options, that are potentially affecting multiple elements.\n\t * @protected\n\t */\n  updateSharedOptions(sharedOptions, mode, newOptions) {\n    if (sharedOptions && !isDirectUpdateMode(mode)) {\n      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setStyle(element, index, mode, active) {\n    element.active = active;\n    const options = this.getStyle(index, active);\n    this._resolveAnimations(index, mode, active).update(element, {\n      // When going from active to inactive, we need to update to the shared options.\n      // This way the once hovered element will end up with the same original shared options instance, after animation.\n      options: (!active && this.getSharedOptions(options)) || options\n    });\n  }\n\n  removeHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', false);\n  }\n\n  setHoverStyle(element, datasetIndex, index) {\n    this._setStyle(element, index, 'active', true);\n  }\n\n  /**\n\t * @private\n\t */\n  _removeDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', false);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _setDatasetHoverStyle() {\n    const element = this._cachedMeta.dataset;\n\n    if (element) {\n      this._setStyle(element, undefined, 'active', true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _resyncElements(resetNewElements) {\n    const data = this._data;\n    const elements = this._cachedMeta.data;\n\n    // Apply changes detected through array listeners\n    for (const [method, arg1, arg2] of this._syncList) {\n      this[method](arg1, arg2);\n    }\n    this._syncList = [];\n\n    const numMeta = elements.length;\n    const numData = data.length;\n    const count = Math.min(numData, numMeta);\n\n    if (count) {\n      // TODO: It is not optimal to always parse the old data\n      // This is done because we are not detecting direct assignments:\n      // chart.data.datasets[0].data[5] = 10;\n      // chart.data.datasets[0].data[5].y = 10;\n      this.parse(0, count);\n    }\n\n    if (numData > numMeta) {\n      this._insertElements(numMeta, numData - numMeta, resetNewElements);\n    } else if (numData < numMeta) {\n      this._removeElements(numData, numMeta - numData);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _insertElements(start, count, resetNewElements = true) {\n    const meta = this._cachedMeta;\n    const data = meta.data;\n    const end = start + count;\n    let i;\n\n    const move = (arr) => {\n      arr.length += count;\n      for (i = arr.length - 1; i >= end; i--) {\n        arr[i] = arr[i - count];\n      }\n    };\n    move(data);\n\n    for (i = start; i < end; ++i) {\n      data[i] = new this.dataElementType();\n    }\n\n    if (this._parsing) {\n      move(meta._parsed);\n    }\n    this.parse(start, count);\n\n    if (resetNewElements) {\n      this.updateElements(data, start, count, 'reset');\n    }\n  }\n\n  updateElements(element, start, count, mode) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @private\n\t */\n  _removeElements(start, count) {\n    const meta = this._cachedMeta;\n    if (this._parsing) {\n      const removed = meta._parsed.splice(start, count);\n      if (meta._stacked) {\n        clearStacks(meta, removed);\n      }\n    }\n    meta.data.splice(start, count);\n  }\n\n  /**\n\t * @private\n   */\n  _sync(args) {\n    if (this._parsing) {\n      this._syncList.push(args);\n    } else {\n      const [method, arg1, arg2] = args;\n      this[method](arg1, arg2);\n    }\n    this.chart._dataChanges.push([this.index, ...args]);\n  }\n\n  _onDataPush() {\n    const count = arguments.length;\n    this._sync(['_insertElements', this.getDataset().data.length - count, count]);\n  }\n\n  _onDataPop() {\n    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);\n  }\n\n  _onDataShift() {\n    this._sync(['_removeElements', 0, 1]);\n  }\n\n  _onDataSplice(start, count) {\n    if (count) {\n      this._sync(['_removeElements', start, count]);\n    }\n    const newCount = arguments.length - 2;\n    if (newCount) {\n      this._sync(['_insertElements', start, newCount]);\n    }\n  }\n\n  _onDataUnshift() {\n    this._sync(['_insertElements', 0, arguments.length]);\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {\n  _arrayUnique, isArray, isNullOrUndef,\n  valueOrDefault, resolveObjectKey, sign, defined\n} from '../helpers/index.js';\n\nfunction getAllScaleValues(scale, type) {\n  if (!scale._cache.$bar) {\n    const visibleMetas = scale.getMatchingVisibleMetas(type);\n    let values = [];\n\n    for (let i = 0, ilen = visibleMetas.length; i < ilen; i++) {\n      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n    }\n    scale._cache.$bar = _arrayUnique(values.sort((a, b) => a - b));\n  }\n  return scale._cache.$bar;\n}\n\n/**\n * Computes the \"optimal\" sample size to maintain bars equally sized while preventing overlap.\n * @private\n */\nfunction computeMinSampleSize(meta) {\n  const scale = meta.iScale;\n  const values = getAllScaleValues(scale, meta.type);\n  let min = scale._length;\n  let i, ilen, curr, prev;\n  const updateMinAndPrev = () => {\n    if (curr === 32767 || curr === -32768) {\n      // Ignore truncated pixels\n      return;\n    }\n    if (defined(prev)) {\n      // curr - prev === 0 is ignored\n      min = Math.min(min, Math.abs(curr - prev) || min);\n    }\n    prev = curr;\n  };\n\n  for (i = 0, ilen = values.length; i < ilen; ++i) {\n    curr = scale.getPixelForValue(values[i]);\n    updateMinAndPrev();\n  }\n\n  prev = undefined;\n  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {\n    curr = scale.getPixelForTick(i);\n    updateMinAndPrev();\n  }\n\n  return min;\n}\n\n/**\n * Computes an \"ideal\" category based on the absolute bar thickness or, if undefined or null,\n * uses the smallest interval (see computeMinSampleSize) that prevents bar overlapping. This\n * mode currently always generates bars equally sized (until we introduce scriptable options?).\n * @private\n */\nfunction computeFitCategoryTraits(index, ruler, options, stackCount) {\n  const thickness = options.barThickness;\n  let size, ratio;\n\n  if (isNullOrUndef(thickness)) {\n    size = ruler.min * options.categoryPercentage;\n    ratio = options.barPercentage;\n  } else {\n    // When bar thickness is enforced, category and bar percentages are ignored.\n    // Note(SB): we could add support for relative bar thickness (e.g. barThickness: '50%')\n    // and deprecate barPercentage since this value is ignored when thickness is absolute.\n    size = thickness * stackCount;\n    ratio = 1;\n  }\n\n  return {\n    chunk: size / stackCount,\n    ratio,\n    start: ruler.pixels[index] - (size / 2)\n  };\n}\n\n/**\n * Computes an \"optimal\" category that globally arranges bars side by side (no gap when\n * percentage options are 1), based on the previous and following categories. This mode\n * generates bars with different widths when data are not evenly spaced.\n * @private\n */\nfunction computeFlexCategoryTraits(index, ruler, options, stackCount) {\n  const pixels = ruler.pixels;\n  const curr = pixels[index];\n  let prev = index > 0 ? pixels[index - 1] : null;\n  let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n  const percent = options.categoryPercentage;\n\n  if (prev === null) {\n    // first data: its size is double based on the next point or,\n    // if it's also the last data, we use the scale size.\n    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n  }\n\n  if (next === null) {\n    // last data: its size is also double based on the previous point.\n    next = curr + curr - prev;\n  }\n\n  const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n  const size = Math.abs(next - prev) / 2 * percent;\n\n  return {\n    chunk: size / stackCount,\n    ratio: options.barPercentage,\n    start\n  };\n}\n\nfunction parseFloatBar(entry, item, vScale, i) {\n  const startValue = vScale.parse(entry[0], i);\n  const endValue = vScale.parse(entry[1], i);\n  const min = Math.min(startValue, endValue);\n  const max = Math.max(startValue, endValue);\n  let barStart = min;\n  let barEnd = max;\n\n  if (Math.abs(min) > Math.abs(max)) {\n    barStart = max;\n    barEnd = min;\n  }\n\n  // Store `barEnd` (furthest away from origin) as parsed value,\n  // to make stacking straight forward\n  item[vScale.axis] = barEnd;\n\n  item._custom = {\n    barStart,\n    barEnd,\n    start: startValue,\n    end: endValue,\n    min,\n    max\n  };\n}\n\nfunction parseValue(entry, item, vScale, i) {\n  if (isArray(entry)) {\n    parseFloatBar(entry, item, vScale, i);\n  } else {\n    item[vScale.axis] = vScale.parse(entry, i);\n  }\n  return item;\n}\n\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n  const iScale = meta.iScale;\n  const vScale = meta.vScale;\n  const labels = iScale.getLabels();\n  const singleScale = iScale === vScale;\n  const parsed = [];\n  let i, ilen, item, entry;\n\n  for (i = start, ilen = start + count; i < ilen; ++i) {\n    entry = data[i];\n    item = {};\n    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n    parsed.push(parseValue(entry, item, vScale, i));\n  }\n  return parsed;\n}\n\nfunction isFloatBar(custom) {\n  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\n\nfunction barSign(size, vScale, actualBase) {\n  if (size !== 0) {\n    return sign(size);\n  }\n  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\n\nfunction borderProps(properties) {\n  let reverse, start, end, top, bottom;\n  if (properties.horizontal) {\n    reverse = properties.base > properties.x;\n    start = 'left';\n    end = 'right';\n  } else {\n    reverse = properties.base < properties.y;\n    start = 'bottom';\n    end = 'top';\n  }\n  if (reverse) {\n    top = 'end';\n    bottom = 'start';\n  } else {\n    top = 'start';\n    bottom = 'end';\n  }\n  return {start, end, reverse, top, bottom};\n}\n\nfunction setBorderSkipped(properties, options, stack, index) {\n  let edge = options.borderSkipped;\n  const res = {};\n\n  if (!edge) {\n    properties.borderSkipped = res;\n    return;\n  }\n\n  if (edge === true) {\n    properties.borderSkipped = {top: true, right: true, bottom: true, left: true};\n    return;\n  }\n\n  const {start, end, reverse, top, bottom} = borderProps(properties);\n\n  if (edge === 'middle' && stack) {\n    properties.enableBorderRadius = true;\n    if ((stack._top || 0) === index) {\n      edge = top;\n    } else if ((stack._bottom || 0) === index) {\n      edge = bottom;\n    } else {\n      res[parseEdge(bottom, start, end, reverse)] = true;\n      edge = top;\n    }\n  }\n\n  res[parseEdge(edge, start, end, reverse)] = true;\n  properties.borderSkipped = res;\n}\n\nfunction parseEdge(edge, a, b, reverse) {\n  if (reverse) {\n    edge = swap(edge, a, b);\n    edge = startEnd(edge, b, a);\n  } else {\n    edge = startEnd(edge, a, b);\n  }\n  return edge;\n}\n\nfunction swap(orig, v1, v2) {\n  return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\n\nfunction startEnd(v, start, end) {\n  return v === 'start' ? start : v === 'end' ? end : v;\n}\n\nfunction setInflateAmount(properties, {inflateAmount}, ratio) {\n  properties.inflateAmount = inflateAmount === 'auto'\n    ? ratio === 1 ? 0.33 : 0\n    : inflateAmount;\n}\n\nexport default class BarController extends DatasetController {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'bar',\n\n    categoryPercentage: 0.8,\n    barPercentage: 0.9,\n    grouped: true,\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'base', 'width', 'height']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n        offset: true,\n        grid: {\n          offset: true\n        }\n      },\n      _value_: {\n        type: 'linear',\n        beginAtZero: true,\n      }\n    }\n  };\n\n\n  /**\n\t * Overriding primitive data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding array data parsing since we support mixed primitive/array\n\t * data for float bars\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    return parseArrayOrPrimitive(meta, data, start, count);\n  }\n\n  /**\n\t * Overriding object data parsing since we support mixed primitive/array\n\t * value-scale data for float bars\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const {iScale, vScale} = meta;\n    const {xAxisKey = 'x', yAxisKey = 'y'} = this._parsing;\n    const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n    const parsed = [];\n    let i, ilen, item, obj;\n    for (i = start, ilen = start + count; i < ilen; ++i) {\n      obj = data[i];\n      item = {};\n      item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n      parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  updateRangeFromParsed(range, scale, parsed, stack) {\n    super.updateRangeFromParsed(range, scale, parsed, stack);\n    const custom = parsed._custom;\n    if (custom && scale === this._cachedMeta.vScale) {\n      // float bar: only one end of the bar is considered by `super`\n      range.min = Math.min(range.min, custom.min);\n      range.max = Math.max(range.max, custom.max);\n    }\n  }\n\n  /**\n\t * @return {number|boolean}\n\t * @protected\n\t */\n  getMaxOverflow() {\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const {iScale, vScale} = meta;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const value = isFloatBar(custom)\n      ? '[' + custom.start + ', ' + custom.end + ']'\n      : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n\n    return {\n      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n      value\n    };\n  }\n\n  initialize() {\n    this.enableOptionSharing = true;\n\n    super.initialize();\n\n    const meta = this._cachedMeta;\n    meta.stack = this.getDataset().stack;\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    this.updateElements(meta.data, 0, meta.data.length, mode);\n  }\n\n  updateElements(bars, start, count, mode) {\n    const reset = mode === 'reset';\n    const {index, _cachedMeta: {vScale}} = this;\n    const base = vScale.getBasePixel();\n    const horizontal = vScale.isHorizontal();\n    const ruler = this._getRuler();\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n\n    for (let i = start; i < start + count; i++) {\n      const parsed = this.getParsed(i);\n      const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {base, head: base} : this._calculateBarValuePixels(i);\n      const ipixels = this._calculateBarIndexPixels(i, ruler);\n      const stack = (parsed._stacks || {})[vScale.axis];\n\n      const properties = {\n        horizontal,\n        base: vpixels.base,\n        enableBorderRadius: !stack || isFloatBar(parsed._custom) || (index === stack._top || index === stack._bottom),\n        x: horizontal ? vpixels.head : ipixels.center,\n        y: horizontal ? ipixels.center : vpixels.head,\n        height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n        width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n      };\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n      }\n      const options = properties.options || bars[i].options;\n      setBorderSkipped(properties, options, stack, index);\n      setInflateAmount(properties, options, ruler.ratio);\n      this.updateElement(bars[i], i, properties, mode);\n    }\n  }\n\n  /**\n\t * Returns the stacks based on groups and bar visibility.\n\t * @param {number} [last] - The dataset index\n\t * @param {number} [dataIndex] - The data index of the ruler\n\t * @returns {string[]} The list of stack IDs\n\t * @private\n\t */\n  _getStacks(last, dataIndex) {\n    const {iScale} = this._cachedMeta;\n    const metasets = iScale.getMatchingVisibleMetas(this._type)\n      .filter(meta => meta.controller.options.grouped);\n    const stacked = iScale.options.stacked;\n    const stacks = [];\n\n    const skipNull = (meta) => {\n      const parsed = meta.controller.getParsed(dataIndex);\n      const val = parsed && parsed[meta.vScale.axis];\n\n      if (isNullOrUndef(val) || isNaN(val)) {\n        return true;\n      }\n    };\n\n    for (const meta of metasets) {\n      if (dataIndex !== undefined && skipNull(meta)) {\n        continue;\n      }\n\n      // stacked   | meta.stack\n      //           | found | not found | undefined\n      // false     |   x   |     x     |     x\n      // true      |       |     x     |\n      // undefined |       |     x     |     x\n      if (stacked === false || stacks.indexOf(meta.stack) === -1 ||\n\t\t\t\t(stacked === undefined && meta.stack === undefined)) {\n        stacks.push(meta.stack);\n      }\n      if (meta.index === last) {\n        break;\n      }\n    }\n\n    // No stacks? that means there is no visible data. Let's still initialize an `undefined`\n    // stack where possible invisible bars will be located.\n    // https://github.com/chartjs/Chart.js/issues/6368\n    if (!stacks.length) {\n      stacks.push(undefined);\n    }\n\n    return stacks;\n  }\n\n  /**\n\t * Returns the effective number of stacks based on groups and bar visibility.\n\t * @private\n\t */\n  _getStackCount(index) {\n    return this._getStacks(undefined, index).length;\n  }\n\n  /**\n\t * Returns the stack index for the given dataset based on groups and bar visibility.\n\t * @param {number} [datasetIndex] - The dataset index\n\t * @param {string} [name] - The stack name to find\n   * @param {number} [dataIndex]\n\t * @returns {number} The stack index\n\t * @private\n\t */\n  _getStackIndex(datasetIndex, name, dataIndex) {\n    const stacks = this._getStacks(datasetIndex, dataIndex);\n    const index = (name !== undefined)\n      ? stacks.indexOf(name)\n      : -1; // indexOf returns -1 if element is not present\n\n    return (index === -1)\n      ? stacks.length - 1\n      : index;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRuler() {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const iScale = meta.iScale;\n    const pixels = [];\n    let i, ilen;\n\n    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {\n      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n    }\n\n    const barThickness = opts.barThickness;\n    const min = barThickness || computeMinSampleSize(meta);\n\n    return {\n      min,\n      pixels,\n      start: iScale._startPixel,\n      end: iScale._endPixel,\n      stackCount: this._getStackCount(),\n      scale: iScale,\n      grouped: opts.grouped,\n      // bar thickness ratio used for non-grouped bars\n      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n    };\n  }\n\n  /**\n\t * Note: pixel values are not clamped to the scale area.\n\t * @private\n\t */\n  _calculateBarValuePixels(index) {\n    const {_cachedMeta: {vScale, _stacked, index: datasetIndex}, options: {base: baseValue, minBarLength}} = this;\n    const actualBase = baseValue || 0;\n    const parsed = this.getParsed(index);\n    const custom = parsed._custom;\n    const floating = isFloatBar(custom);\n    let value = parsed[vScale.axis];\n    let start = 0;\n    let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n    let head, size;\n\n    if (length !== value) {\n      start = length - value;\n      length = value;\n    }\n\n    if (floating) {\n      value = custom.barStart;\n      length = custom.barEnd - custom.barStart;\n      // bars crossing origin are not stacked\n      if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n        start = 0;\n      }\n      start += value;\n    }\n\n    const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n    let base = vScale.getPixelForValue(startValue);\n\n    if (this.chart.getDataVisibility(index)) {\n      head = vScale.getPixelForValue(start + length);\n    } else {\n      // When not visible, no height\n      head = base;\n    }\n\n    size = head - base;\n\n    if (Math.abs(size) < minBarLength) {\n      size = barSign(size, vScale, actualBase) * minBarLength;\n      if (value === actualBase) {\n        base -= size / 2;\n      }\n      const startPixel = vScale.getPixelForDecimal(0);\n      const endPixel = vScale.getPixelForDecimal(1);\n      const min = Math.min(startPixel, endPixel);\n      const max = Math.max(startPixel, endPixel);\n      base = Math.max(Math.min(base, max), min);\n      head = base + size;\n\n      if (_stacked && !floating) {\n        // visual data coordinates after applying minBarLength\n        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);\n      }\n    }\n\n    if (base === vScale.getPixelForValue(actualBase)) {\n      const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n      base += halfGrid;\n      size -= halfGrid;\n    }\n\n    return {\n      size,\n      base,\n      head,\n      center: head + size / 2\n    };\n  }\n\n  /**\n\t * @private\n\t */\n  _calculateBarIndexPixels(index, ruler) {\n    const scale = ruler.scale;\n    const options = this.options;\n    const skipNull = options.skipNull;\n    const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n    let center, size;\n    if (ruler.grouped) {\n      const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n      const range = options.barThickness === 'flex'\n        ? computeFlexCategoryTraits(index, ruler, options, stackCount)\n        : computeFitCategoryTraits(index, ruler, options, stackCount);\n\n      const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n      center = range.start + (range.chunk * stackIndex) + (range.chunk / 2);\n      size = Math.min(maxBarThickness, range.chunk * range.ratio);\n    } else {\n      // For non-grouped bar charts, exact pixel values are used\n      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n    }\n\n    return {\n      base: center - size / 2,\n      head: center + size / 2,\n      center,\n      size\n    };\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    const vScale = meta.vScale;\n    const rects = meta.data;\n    const ilen = rects.length;\n    let i = 0;\n\n    for (; i < ilen; ++i) {\n      if (this.getParsed(i)[vScale.axis] !== null) {\n        rects[i].draw(this._ctx);\n      }\n    }\n  }\n\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {valueOrDefault} from '../helpers/helpers.core.js';\n\nexport default class BubbleController extends DatasetController {\n\n  static id = 'bubble';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'borderWidth', 'radius']\n      }\n    }\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    super.initialize();\n  }\n\n  /**\n\t * Parse array of primitive values\n\t * @protected\n\t */\n  parsePrimitiveData(meta, data, start, count) {\n    const parsed = super.parsePrimitiveData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of arrays\n\t * @protected\n\t */\n  parseArrayData(meta, data, start, count) {\n    const parsed = super.parseArrayData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * Parse array of objects\n\t * @protected\n\t */\n  parseObjectData(meta, data, start, count) {\n    const parsed = super.parseObjectData(meta, data, start, count);\n    for (let i = 0; i < parsed.length; i++) {\n      const item = data[start + i];\n      parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n    }\n    return parsed;\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const data = this._cachedMeta.data;\n\n    let max = 0;\n    for (let i = data.length - 1; i >= 0; --i) {\n      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n    }\n    return max > 0 && max;\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n    const r = parsed._custom;\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n    };\n  }\n\n  update(mode) {\n    const points = this._cachedMeta.data;\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const parsed = !reset && this.getParsed(i);\n      const properties = {};\n      const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n      const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel);\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n\n        if (reset) {\n          properties.options.radius = 0;\n        }\n      }\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n\n  /**\n\t * @param {number} index\n\t * @param {string} [mode]\n\t * @protected\n\t */\n  resolveDataElementOptions(index, mode) {\n    const parsed = this.getParsed(index);\n    let values = super.resolveDataElementOptions(index, mode);\n\n    // In case values were cached (and thus frozen), we need to clone the values\n    if (values.$shared) {\n      values = Object.assign({}, values, {$shared: false});\n    }\n\n    // Custom radius resolution\n    const radius = values.radius;\n    if (mode !== 'active') {\n      values.radius = 0;\n    }\n    values.radius += valueOrDefault(parsed && parsed._custom, radius);\n\n    return values;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isObject, resolveObjectKey, toPercentage, toDimension, valueOrDefault} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {toRadians, PI, TAU, HALF_PI, _angleBetween} from '../helpers/helpers.math.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n  let ratioX = 1;\n  let ratioY = 1;\n  let offsetX = 0;\n  let offsetY = 0;\n  // If the chart's circumference isn't a full circle, calculate size as a ratio of the width/height of the arc\n  if (circumference < TAU) {\n    const startAngle = rotation;\n    const endAngle = startAngle + circumference;\n    const startX = Math.cos(startAngle);\n    const startY = Math.sin(startAngle);\n    const endX = Math.cos(endAngle);\n    const endY = Math.sin(endAngle);\n    const calcMax = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n    const calcMin = (angle, a, b) => _angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n    const maxX = calcMax(0, startX, endX);\n    const maxY = calcMax(HALF_PI, startY, endY);\n    const minX = calcMin(PI, startX, endX);\n    const minY = calcMin(PI + HALF_PI, startY, endY);\n    ratioX = (maxX - minX) / 2;\n    ratioY = (maxY - minY) / 2;\n    offsetX = -(maxX + minX) / 2;\n    offsetY = -(maxY + minY) / 2;\n  }\n  return {ratioX, ratioY, offsetX, offsetY};\n}\n\nexport default class DoughnutController extends DatasetController {\n\n  static id = 'doughnut';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'arc',\n    animation: {\n      // Boolean - Whether we animate the rotation of the Doughnut\n      animateRotate: true,\n      // Boolean - Whether we animate scaling the Doughnut from the centre\n      animateScale: false\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']\n      },\n    },\n    // The percentage of the chart that we cut out of the middle.\n    cutout: '50%',\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outer radius of the chart\n    radius: '100%',\n\n    // Spacing between arcs\n    spacing: 0,\n\n    indexAxis: 'r',\n  };\n\n  static descriptors = {\n    _scriptable: (name) => name !== 'spacing',\n    _indexable: (name) => name !== 'spacing' && !name.startsWith('borderDash') && !name.startsWith('hoverBorderDash'),\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    // Need to override these to give a nice default\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.enableOptionSharing = true;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.offsetX = undefined;\n    this.offsetY = undefined;\n  }\n\n  linkScales() {}\n\n  /**\n\t * Override data parsing, since we are not using scales\n\t */\n  parse(start, count) {\n    const data = this.getDataset().data;\n    const meta = this._cachedMeta;\n\n    if (this._parsing === false) {\n      meta._parsed = data;\n    } else {\n      let getter = (i) => +data[i];\n\n      if (isObject(data[start])) {\n        const {key = 'value'} = this._parsing;\n        getter = (i) => +resolveObjectKey(data[i], key);\n      }\n\n      let i, ilen;\n      for (i = start, ilen = start + count; i < ilen; ++i) {\n        meta._parsed[i] = getter(i);\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _getRotation() {\n    return toRadians(this.options.rotation - 90);\n  }\n\n  /**\n\t * @private\n\t */\n  _getCircumference() {\n    return toRadians(this.options.circumference);\n  }\n\n  /**\n\t * Get the maximal rotation & circumference extents\n\t * across all visible datasets.\n\t */\n  _getRotationExtents() {\n    let min = TAU;\n    let max = -TAU;\n\n    for (let i = 0; i < this.chart.data.datasets.length; ++i) {\n      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n        const controller = this.chart.getDatasetMeta(i).controller;\n        const rotation = controller._getRotation();\n        const circumference = controller._getCircumference();\n\n        min = Math.min(min, rotation);\n        max = Math.max(max, rotation + circumference);\n      }\n    }\n\n    return {\n      rotation: min,\n      circumference: max - min,\n    };\n  }\n\n  /**\n\t * @param {string} mode\n\t */\n  update(mode) {\n    const chart = this.chart;\n    const {chartArea} = chart;\n    const meta = this._cachedMeta;\n    const arcs = meta.data;\n    const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n    const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n    const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n    const chartWeight = this._getRingWeight(this.index);\n\n    // Compute the maximal rotation & circumference limits.\n    // If we only consider our dataset, this can cause problems when two datasets\n    // are both less than a circle with different rotations (starting angles)\n    const {circumference, rotation} = this._getRotationExtents();\n    const {ratioX, ratioY, offsetX, offsetY} = getRatioAndOffset(rotation, circumference, cutout);\n    const maxWidth = (chartArea.width - spacing) / ratioX;\n    const maxHeight = (chartArea.height - spacing) / ratioY;\n    const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n    const outerRadius = toDimension(this.options.radius, maxRadius);\n    const innerRadius = Math.max(outerRadius * cutout, 0);\n    const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n    this.offsetX = offsetX * outerRadius;\n    this.offsetY = offsetY * outerRadius;\n\n    meta.total = this.calculateTotal();\n\n    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @private\n   */\n  _circumference(i, reset) {\n    const opts = this.options;\n    const meta = this._cachedMeta;\n    const circumference = this._getCircumference();\n    if ((reset && opts.animation.animateRotate) || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n      return 0;\n    }\n    return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const centerX = (chartArea.left + chartArea.right) / 2;\n    const centerY = (chartArea.top + chartArea.bottom) / 2;\n    const animateScale = reset && animationOpts.animateScale;\n    const innerRadius = animateScale ? 0 : this.innerRadius;\n    const outerRadius = animateScale ? 0 : this.outerRadius;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    let startAngle = this._getRotation();\n    let i;\n\n    for (i = 0; i < start; ++i) {\n      startAngle += this._circumference(i, reset);\n    }\n\n    for (i = start; i < start + count; ++i) {\n      const circumference = this._circumference(i, reset);\n      const arc = arcs[i];\n      const properties = {\n        x: centerX + this.offsetX,\n        y: centerY + this.offsetY,\n        startAngle,\n        endAngle: startAngle + circumference,\n        circumference,\n        outerRadius,\n        innerRadius\n      };\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n      }\n      startAngle += circumference;\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  calculateTotal() {\n    const meta = this._cachedMeta;\n    const metaData = meta.data;\n    let total = 0;\n    let i;\n\n    for (i = 0; i < metaData.length; i++) {\n      const value = meta._parsed[i];\n      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n        total += Math.abs(value);\n      }\n    }\n\n    return total;\n  }\n\n  calculateCircumference(value) {\n    const total = this._cachedMeta.total;\n    if (total > 0 && !isNaN(value)) {\n      return TAU * (Math.abs(value) / total);\n    }\n    return 0;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index], chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  getMaxBorderWidth(arcs) {\n    let max = 0;\n    const chart = this.chart;\n    let i, ilen, meta, controller, options;\n\n    if (!arcs) {\n      // Find the outmost visible dataset\n      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {\n        if (chart.isDatasetVisible(i)) {\n          meta = chart.getDatasetMeta(i);\n          arcs = meta.data;\n          controller = meta.controller;\n          break;\n        }\n      }\n    }\n\n    if (!arcs) {\n      return 0;\n    }\n\n    for (i = 0, ilen = arcs.length; i < ilen; ++i) {\n      options = controller.resolveDataElementOptions(i);\n      if (options.borderAlign !== 'inner') {\n        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n      }\n    }\n    return max;\n  }\n\n  getMaxOffset(arcs) {\n    let max = 0;\n\n    for (let i = 0, ilen = arcs.length; i < ilen; ++i) {\n      const options = this.resolveDataElementOptions(i);\n      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n    }\n    return max;\n  }\n\n  /**\n\t * Get radius length offset of the dataset in relation to the visible datasets weights. This allows determining the inner and outer radius correctly\n\t * @private\n\t */\n  _getRingWeightOffset(datasetIndex) {\n    let ringWeightOffset = 0;\n\n    for (let i = 0; i < datasetIndex; ++i) {\n      if (this.chart.isDatasetVisible(i)) {\n        ringWeightOffset += this._getRingWeight(i);\n      }\n    }\n\n    return ringWeightOffset;\n  }\n\n  /**\n\t * @private\n\t */\n  _getRingWeight(datasetIndex) {\n    return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n  }\n\n  /**\n\t * Returns the sum of all visible data set weights.\n\t * @private\n\t */\n  _getVisibleDatasetWeightTotal() {\n    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class LineController extends DatasetController {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n\n    showLine: true,\n    spanGaps: false,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    scales: {\n      _index_: {\n        type: 'category',\n      },\n      _value_: {\n        type: 'linear',\n      },\n    }\n  };\n\n  initialize() {\n    this.enableOptionSharing = true;\n    this.supportsDecimation = true;\n    super.initialize();\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {dataset: line, data: points = [], _dataset} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    // Update Line\n    line._chart = this.chart;\n    line._datasetIndex = this.index;\n    line._decimated = !!_dataset._decimated;\n    line.points = points;\n\n    const options = this.resolveDatasetElementOptions(mode);\n    if (!this.options.showLine) {\n      options.borderWidth = 0;\n    }\n    options.segment = this.options.segment;\n    this.updateElement(line, undefined, {\n      animated: !animationsDisabled,\n      options\n    }, mode);\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const {sharedOptions, includeOptions} = this._getSharedOptions(start, mode);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    const end = start + count;\n    const pointsCount = points.length;\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = 0; i < pointsCount; ++i) {\n      const point = points[i];\n      const properties = directUpdate ? point : {};\n\n      if (i < start || i >= end) {\n        properties.skip = true;\n        continue;\n      }\n\n      const parsed = this.getParsed(i);\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n    const data = meta.data || [];\n    if (!data.length) {\n      return border;\n    }\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n\n  draw() {\n    const meta = this._cachedMeta;\n    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n    super.draw();\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {toRadians, PI, formatNumber, _parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class PolarAreaController extends DatasetController {\n\n  static id = 'polarArea';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    dataElementType: 'arc',\n    animation: {\n      animateRotate: true,\n      animateScale: true\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']\n      },\n    },\n    indexAxis: 'r',\n    startAngle: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    plugins: {\n      legend: {\n        labels: {\n          generateLabels(chart) {\n            const data = chart.data;\n            if (data.labels.length && data.datasets.length) {\n              const {labels: {pointStyle, color}} = chart.legend.options;\n\n              return data.labels.map((label, i) => {\n                const meta = chart.getDatasetMeta(0);\n                const style = meta.controller.getStyle(i);\n\n                return {\n                  text: label,\n                  fillStyle: style.backgroundColor,\n                  strokeStyle: style.borderColor,\n                  fontColor: color,\n                  lineWidth: style.borderWidth,\n                  pointStyle: pointStyle,\n                  hidden: !chart.getDataVisibility(i),\n\n                  // Extra data used for toggling the correct item\n                  index: i\n                };\n              });\n            }\n            return [];\n          }\n        },\n\n        onClick(e, legendItem, legend) {\n          legend.chart.toggleDataVisibility(legendItem.index);\n          legend.chart.update();\n        }\n      }\n    },\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n        angleLines: {\n          display: false\n        },\n        beginAtZero: true,\n        grid: {\n          circular: true\n        },\n        pointLabels: {\n          display: false\n        },\n        startAngle: 0\n      }\n    }\n  };\n\n  constructor(chart, datasetIndex) {\n    super(chart, datasetIndex);\n\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n  }\n\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const chart = this.chart;\n    const labels = chart.data.labels || [];\n    const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n\n    return {\n      label: labels[index] || '',\n      value,\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const arcs = this._cachedMeta.data;\n\n    this._updateRadius();\n    this.updateElements(arcs, 0, arcs.length, mode);\n  }\n\n  /**\n   * @protected\n   */\n  getMinMax() {\n    const meta = this._cachedMeta;\n    const range = {min: Number.POSITIVE_INFINITY, max: Number.NEGATIVE_INFINITY};\n\n    meta.data.forEach((element, index) => {\n      const parsed = this.getParsed(index).r;\n\n      if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n        if (parsed < range.min) {\n          range.min = parsed;\n        }\n\n        if (parsed > range.max) {\n          range.max = parsed;\n        }\n      }\n    });\n\n    return range;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateRadius() {\n    const chart = this.chart;\n    const chartArea = chart.chartArea;\n    const opts = chart.options;\n    const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n\n    const outerRadius = Math.max(minSize / 2, 0);\n    const innerRadius = Math.max(opts.cutoutPercentage ? (outerRadius / 100) * (opts.cutoutPercentage) : 1, 0);\n    const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n\n    this.outerRadius = outerRadius - (radiusLength * this.index);\n    this.innerRadius = this.outerRadius - radiusLength;\n  }\n\n  updateElements(arcs, start, count, mode) {\n    const reset = mode === 'reset';\n    const chart = this.chart;\n    const opts = chart.options;\n    const animationOpts = opts.animation;\n    const scale = this._cachedMeta.rScale;\n    const centerX = scale.xCenter;\n    const centerY = scale.yCenter;\n    const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n    let angle = datasetStartAngle;\n    let i;\n\n    const defaultAngle = 360 / this.countVisibleElements();\n\n    for (i = 0; i < start; ++i) {\n      angle += this._computeAngle(i, mode, defaultAngle);\n    }\n    for (i = start; i < start + count; i++) {\n      const arc = arcs[i];\n      let startAngle = angle;\n      let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n      let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n      angle = endAngle;\n\n      if (reset) {\n        if (animationOpts.animateScale) {\n          outerRadius = 0;\n        }\n        if (animationOpts.animateRotate) {\n          startAngle = endAngle = datasetStartAngle;\n        }\n      }\n\n      const properties = {\n        x: centerX,\n        y: centerY,\n        innerRadius: 0,\n        outerRadius,\n        startAngle,\n        endAngle,\n        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n      };\n\n      this.updateElement(arc, i, properties, mode);\n    }\n  }\n\n  countVisibleElements() {\n    const meta = this._cachedMeta;\n    let count = 0;\n\n    meta.data.forEach((element, index) => {\n      if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n        count++;\n      }\n    });\n\n    return count;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeAngle(index, mode, defaultAngle) {\n    return this.chart.getDataVisibility(index)\n      ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle)\n      : 0;\n  }\n}\n","import DoughnutController from './controller.doughnut.js';\n\n// Pie charts are Doughnut chart with different defaults\nexport default class PieController extends DoughnutController {\n\n  static id = 'pie';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    // The percentage of the chart that we cut out of the middle.\n    cutout: 0,\n\n    // The rotation of the chart, where the first data arc begins.\n    rotation: 0,\n\n    // The total circumference of the chart.\n    circumference: 360,\n\n    // The outer radius of the chart\n    radius: '100%'\n  };\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {_parseObjectDataRadialScale} from '../helpers/index.js';\n\nexport default class RadarController extends DatasetController {\n\n  static id = 'radar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: 'line',\n    dataElementType: 'point',\n    indexAxis: 'r',\n    showLine: true,\n    elements: {\n      line: {\n        fill: 'start'\n      }\n    },\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n    aspectRatio: 1,\n\n    scales: {\n      r: {\n        type: 'radialLinear',\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const vScale = this._cachedMeta.vScale;\n    const parsed = this.getParsed(index);\n\n    return {\n      label: vScale.getLabels()[index],\n      value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n    };\n  }\n\n  parseObjectData(meta, data, start, count) {\n    return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const line = meta.dataset;\n    const points = meta.data || [];\n    const labels = meta.iScale.getLabels();\n\n    // Update Line\n    line.points = points;\n    // In resize mode only point locations change, so no need to set the points or options.\n    if (mode !== 'resize') {\n      const options = this.resolveDatasetElementOptions(mode);\n      if (!this.options.showLine) {\n        options.borderWidth = 0;\n      }\n\n      const properties = {\n        _loop: true,\n        _fullLoop: labels.length === points.length,\n        options\n      };\n\n      this.updateElement(line, undefined, properties, mode);\n    }\n\n    // Update Points\n    this.updateElements(points, 0, points.length, mode);\n  }\n\n  updateElements(points, start, count, mode) {\n    const scale = this._cachedMeta.rScale;\n    const reset = mode === 'reset';\n\n    for (let i = start; i < start + count; i++) {\n      const point = points[i];\n      const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n\n      const x = reset ? scale.xCenter : pointPosition.x;\n      const y = reset ? scale.yCenter : pointPosition.y;\n\n      const properties = {\n        x,\n        y,\n        angle: pointPosition.angle,\n        skip: isNaN(x) || isNaN(y),\n        options\n      };\n\n      this.updateElement(point, i, properties, mode);\n    }\n  }\n}\n","import DatasetController from '../core/core.datasetController.js';\nimport {isNullOrUndef} from '../helpers/index.js';\nimport {isNumber} from '../helpers/helpers.math.js';\nimport {_getStartAndCountOfVisiblePoints, _scaleRangesChanged} from '../helpers/helpers.extras.js';\n\nexport default class ScatterController extends DatasetController {\n\n  static id = 'scatter';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    datasetElementType: false,\n    dataElementType: 'point',\n    showLine: false,\n    fill: false\n  };\n\n  /**\n   * @type {any}\n   */\n  static overrides = {\n\n    interaction: {\n      mode: 'point'\n    },\n\n    scales: {\n      x: {\n        type: 'linear'\n      },\n      y: {\n        type: 'linear'\n      }\n    }\n  };\n\n  /**\n\t * @protected\n\t */\n  getLabelAndValue(index) {\n    const meta = this._cachedMeta;\n    const labels = this.chart.data.labels || [];\n    const {xScale, yScale} = meta;\n    const parsed = this.getParsed(index);\n    const x = xScale.getLabelForValue(parsed.x);\n    const y = yScale.getLabelForValue(parsed.y);\n\n    return {\n      label: labels[index] || '',\n      value: '(' + x + ', ' + y + ')'\n    };\n  }\n\n  update(mode) {\n    const meta = this._cachedMeta;\n    const {data: points = []} = meta;\n    // @ts-ignore\n    const animationsDisabled = this.chart._animationsDisabled;\n    let {start, count} = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n\n    this._drawStart = start;\n    this._drawCount = count;\n\n    if (_scaleRangesChanged(meta)) {\n      start = 0;\n      count = points.length;\n    }\n\n    if (this.options.showLine) {\n\n      // https://github.com/chartjs/Chart.js/issues/11333\n      if (!this.datasetElementType) {\n        this.addElements();\n      }\n      const {dataset: line, _dataset} = meta;\n\n      // Update Line\n      line._chart = this.chart;\n      line._datasetIndex = this.index;\n      line._decimated = !!_dataset._decimated;\n      line.points = points;\n\n      const options = this.resolveDatasetElementOptions(mode);\n      options.segment = this.options.segment;\n      this.updateElement(line, undefined, {\n        animated: !animationsDisabled,\n        options\n      }, mode);\n    } else if (this.datasetElementType) {\n      // https://github.com/chartjs/Chart.js/issues/11333\n      delete meta.dataset;\n      this.datasetElementType = false;\n    }\n\n    // Update Points\n    this.updateElements(points, start, count, mode);\n  }\n\n  addElements() {\n    const {showLine} = this.options;\n\n    if (!this.datasetElementType && showLine) {\n      this.datasetElementType = this.chart.registry.getElement('line');\n    }\n\n    super.addElements();\n  }\n\n  updateElements(points, start, count, mode) {\n    const reset = mode === 'reset';\n    const {iScale, vScale, _stacked, _dataset} = this._cachedMeta;\n    const firstOpts = this.resolveDataElementOptions(start, mode);\n    const sharedOptions = this.getSharedOptions(firstOpts);\n    const includeOptions = this.includeOptions(mode, sharedOptions);\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const {spanGaps, segment} = this.options;\n    const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n    const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n    let prevParsed = start > 0 && this.getParsed(start - 1);\n\n    for (let i = start; i < start + count; ++i) {\n      const point = points[i];\n      const parsed = this.getParsed(i);\n      const properties = directUpdate ? point : {};\n      const nullData = isNullOrUndef(parsed[vAxis]);\n      const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n      const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n\n      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n      properties.stop = i > 0 && (Math.abs(parsed[iAxis] - prevParsed[iAxis])) > maxGapLength;\n      if (segment) {\n        properties.parsed = parsed;\n        properties.raw = _dataset.data[i];\n      }\n\n      if (includeOptions) {\n        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n      }\n\n      if (!directUpdate) {\n        this.updateElement(point, i, properties, mode);\n      }\n\n      prevParsed = parsed;\n    }\n\n    this.updateSharedOptions(sharedOptions, mode, firstOpts);\n  }\n\n  /**\n\t * @protected\n\t */\n  getMaxOverflow() {\n    const meta = this._cachedMeta;\n    const data = meta.data || [];\n\n    if (!this.options.showLine) {\n      let max = 0;\n      for (let i = data.length - 1; i >= 0; --i) {\n        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n      }\n      return max > 0 && max;\n    }\n\n    const dataset = meta.dataset;\n    const border = dataset.options && dataset.options.borderWidth || 0;\n\n    if (!data.length) {\n      return border;\n    }\n\n    const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n    const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n    return Math.max(border, firstPoint, lastPoint) / 2;\n  }\n}\n","/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartOptions} from '../types/index.js';\n\nexport type TimeUnit = 'millisecond' | 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'quarter' | 'year';\n\nexport interface DateAdapter<T extends AnyObject = AnyObject> {\n  readonly options: T;\n  /**\n   * Will called with chart options after adapter creation.\n   */\n  init(this: DateAdapter<T>, chartOptions: ChartOptions): void;\n  /**\n   * Returns a map of time formats for the supported formatting units defined\n   * in Unit as well as 'datetime' representing a detailed date/time string.\n   */\n  formats(this: DateAdapter<T>): Record<string, string>;\n  /**\n   * Parses the given `value` and return the associated timestamp.\n   * @param value - the value to parse (usually comes from the data)\n   * @param [format] - the expected data format\n   */\n  parse(this: DateAdapter<T>, value: unknown, format?: TimeUnit): number | null;\n  /**\n   * Returns the formatted date in the specified `format` for a given `timestamp`.\n   * @param timestamp - the timestamp to format\n   * @param format - the date/time token\n   */\n  format(this: DateAdapter<T>, timestamp: number, format: TimeUnit): string;\n  /**\n   * Adds the specified `amount` of `unit` to the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param amount - the amount to add\n   * @param unit - the unit as string\n   */\n  add(this: DateAdapter<T>, timestamp: number, amount: number, unit: TimeUnit): number;\n  /**\n   * Returns the number of `unit` between the given timestamps.\n   * @param a - the input timestamp (reference)\n   * @param b - the timestamp to subtract\n   * @param unit - the unit as string\n   */\n  diff(this: DateAdapter<T>, a: number, b: number, unit: TimeUnit): number;\n  /**\n   * Returns start of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   * @param [weekday] - the ISO day of the week with 1 being Monday\n   * and 7 being Sunday (only needed if param *unit* is `isoWeek`).\n   */\n  startOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek', weekday?: number): number;\n  /**\n   * Returns end of `unit` for the given `timestamp`.\n   * @param timestamp - the input timestamp\n   * @param unit - the unit as string\n   */\n  endOf(this: DateAdapter<T>, timestamp: number, unit: TimeUnit | 'isoWeek'): number;\n}\n\nfunction abstract<T = void>(): T {\n  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */\nclass DateAdapterBase implements DateAdapter {\n\n  /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */\n  static override<T extends AnyObject = AnyObject>(\n    members: Partial<Omit<DateAdapter<T>, 'options'>>\n  ) {\n    Object.assign(DateAdapterBase.prototype, members);\n  }\n\n  readonly options: AnyObject;\n\n  constructor(options: AnyObject) {\n    this.options = options || {};\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {}\n\n  formats(): Record<string, string> {\n    return abstract();\n  }\n\n  parse(): number | null {\n    return abstract();\n  }\n\n  format(): string {\n    return abstract();\n  }\n\n  add(): number {\n    return abstract();\n  }\n\n  diff(): number {\n    return abstract();\n  }\n\n  startOf(): number {\n    return abstract();\n  }\n\n  endOf(): number {\n    return abstract();\n  }\n}\n\nexport default {\n  _date: DateAdapterBase\n};\n","import {_lookupByKey, _rlookupByKey} from '../helpers/helpers.collection.js';\nimport {getRelativePosition} from '../helpers/helpers.dom.js';\nimport {_angleBetween, getAngleFromPoint} from '../helpers/helpers.math.js';\nimport {_isPointInArea} from '../helpers/index.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef {{axis?: string, intersect?: boolean, includeInvisible?: boolean}} InteractionOptions\n * @typedef {{datasetIndex: number, index: number, element: import('./core.element.js').default}} InteractionItem\n * @typedef { import('../types/index.js').Point } Point\n */\n\n/**\n * Helper function to do binary search when possible\n * @param {object} metaset - the dataset meta\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {number} value - the value to find\n * @param {boolean} [intersect] - should the element intersect\n * @returns {{lo:number, hi:number}} indices to search data array between\n */\nfunction binarySearch(metaset, axis, value, intersect) {\n  const {controller, data, _sorted} = metaset;\n  const iScale = controller._cachedMeta.iScale;\n  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n    const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n    if (!intersect) {\n      return lookupMethod(data, axis, value);\n    } else if (controller._sharedOptions) {\n      // _sharedOptions indicates that each element has equal options -> equal proportions\n      // So we can do a ranged binary search based on the range of first element and\n      // be confident to get the full range of indices that can intersect with the value.\n      const el = data[0];\n      const range = typeof el.getRange === 'function' && el.getRange(axis);\n      if (range) {\n        const start = lookupMethod(data, axis, value - range);\n        const end = lookupMethod(data, axis, value + range);\n        return {lo: start.lo, hi: end.hi};\n      }\n    }\n  }\n  // Default to all elements, when binary search can not be used.\n  return {lo: 0, hi: data.length - 1};\n}\n\n/**\n * Helper function to select candidate elements for interaction\n * @param {Chart} chart - the chart\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {function} handler - the callback to execute for each visible item\n * @param {boolean} [intersect] - consider intersecting items\n */\nfunction evaluateInteractionItems(chart, axis, position, handler, intersect) {\n  const metasets = chart.getSortedVisibleDatasetMetas();\n  const value = position[axis];\n  for (let i = 0, ilen = metasets.length; i < ilen; ++i) {\n    const {index, data} = metasets[i];\n    const {lo, hi} = binarySearch(metasets[i], axis, value, intersect);\n    for (let j = lo; j <= hi; ++j) {\n      const element = data[j];\n      if (!element.skip) {\n        handler(element, index, j);\n      }\n    }\n  }\n}\n\n/**\n * Get a distance metric function for two points based on the\n * axis mode setting\n * @param {string} axis - the axis mode. x|y|xy|r\n */\nfunction getDistanceMetricForAxis(axis) {\n  const useX = axis.indexOf('x') !== -1;\n  const useY = axis.indexOf('y') !== -1;\n\n  return function(pt1, pt2) {\n    const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n    const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n  };\n}\n\n/**\n * Helper function to get the items that intersect the event position\n * @param {Chart} chart - the chart\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis mode. x|y|xy|r\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n  const items = [];\n\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return items;\n  }\n\n  const evaluationFunc = function(element, datasetIndex, index) {\n    if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n      return;\n    }\n    if (element.inRange(position.x, position.y, useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n    }\n  };\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a radial chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestRadialItems(chart, position, axis, useFinalPosition) {\n  let items = [];\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const {startAngle, endAngle} = element.getProps(['startAngle', 'endAngle'], useFinalPosition);\n    const {angle} = getAngleFromPoint(element, {x: position.x, y: position.y});\n\n    if (_angleBetween(angle, startAngle, endAngle)) {\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position for a cartesian chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  let items = [];\n  const distanceMetric = getDistanceMetricForAxis(axis);\n  let minDistance = Number.POSITIVE_INFINITY;\n\n  function evaluationFunc(element, datasetIndex, index) {\n    const inRange = element.inRange(position.x, position.y, useFinalPosition);\n    if (intersect && !inRange) {\n      return;\n    }\n\n    const center = element.getCenterPoint(useFinalPosition);\n    const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n    if (!pointInArea && !inRange) {\n      return;\n    }\n\n    const distance = distanceMetric(position, center);\n    if (distance < minDistance) {\n      items = [{element, datasetIndex, index}];\n      minDistance = distance;\n    } else if (distance === minDistance) {\n      // Can have multiple items at the same distance in which case we sort by size\n      items.push({element, datasetIndex, index});\n    }\n  }\n\n  evaluateInteractionItems(chart, axis, position, evaluationFunc);\n  return items;\n}\n\n/**\n * Helper function to get the items nearest to the event position considering all visible items in the chart\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axes along which to measure distance\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @param {boolean} [includeInvisible] - include invisible points that are outside of the chart area\n * @return {InteractionItem[]} the nearest items\n */\nfunction getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n  if (!includeInvisible && !chart.isPointInArea(position)) {\n    return [];\n  }\n\n  return axis === 'r' && !intersect\n    ? getNearestRadialItems(chart, position, axis, useFinalPosition)\n    : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n\n/**\n * Helper function to get the items matching along the given X or Y axis\n * @param {Chart} chart - the chart to look at elements from\n * @param {Point} position - the point to be nearest to, in relative coordinates\n * @param {string} axis - the axis to match\n * @param {boolean} [intersect] - if true, only consider items that intersect the position\n * @param {boolean} [useFinalPosition] - use the element's animation target instead of current position\n * @return {InteractionItem[]} the nearest items\n */\nfunction getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n  const items = [];\n  const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n  let intersectsItem = false;\n\n  evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index) => {\n    if (element[rangeMethod](position[axis], useFinalPosition)) {\n      items.push({element, datasetIndex, index});\n      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n    }\n  });\n\n  // If we want to trigger on an intersect and we don't have any items\n  // that intersect the position, return nothing\n  if (intersect && !intersectsItem) {\n    return [];\n  }\n  return items;\n}\n\n/**\n * Contains interaction related functions\n * @namespace Chart.Interaction\n */\nexport default {\n  // Part of the public API to facilitate developers creating their own modes\n  evaluateInteractionItems,\n\n  // Helper function for different modes\n  modes: {\n    /**\n\t\t * Returns items at the same index. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect mode is false, we find the nearest item and return the items at the same index as that item\n\t\t * @function Chart.Interaction.modes.index\n\t\t * @since v2.4.0\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    index(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      // Default axis for index mode is 'x' to match old behaviour\n      const axis = options.axis || 'x';\n      const includeInvisible = options.includeInvisible || false;\n      const items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible)\n        : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n      const elements = [];\n\n      if (!items.length) {\n        return [];\n      }\n\n      chart.getSortedVisibleDatasetMetas().forEach((meta) => {\n        const index = items[0].index;\n        const element = meta.data[index];\n\n        // don't count items that are skipped (null data)\n        if (element && !element.skip) {\n          elements.push({element, datasetIndex: meta.index, index});\n        }\n      });\n\n      return elements;\n    },\n\n    /**\n\t\t * Returns items in the same dataset. If the options.intersect parameter is true, we only return items if we intersect something\n\t\t * If the options.intersect is false, we find the nearest item and return the items in that dataset\n\t\t * @function Chart.Interaction.modes.dataset\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    dataset(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      let items = options.intersect\n        ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) :\n        getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n\n      if (items.length > 0) {\n        const datasetIndex = items[0].datasetIndex;\n        const data = chart.getDatasetMeta(datasetIndex).data;\n        items = [];\n        for (let i = 0; i < data.length; ++i) {\n          items.push({element: data[i], datasetIndex, index: i});\n        }\n      }\n\n      return items;\n    },\n\n    /**\n\t\t * Point mode returns all elements that hit test based on the event position\n\t\t * of the event\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    point(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * nearest mode returns the element closest to the point\n\t\t * @function Chart.Interaction.modes.intersect\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    nearest(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      const axis = options.axis || 'xy';\n      const includeInvisible = options.includeInvisible || false;\n      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n    },\n\n    /**\n\t\t * x mode returns the elements that hit-test at the current x coordinate\n\t\t * @function Chart.Interaction.modes.x\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    x(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n    },\n\n    /**\n\t\t * y mode returns the elements that hit-test at the current y coordinate\n\t\t * @function Chart.Interaction.modes.y\n\t\t * @param {Chart} chart - the chart we are returning items from\n\t\t * @param {Event} e - the event we are find things at\n\t\t * @param {InteractionOptions} options - options to use\n\t\t * @param {boolean} [useFinalPosition] - use final element position (animation target)\n\t\t * @return {InteractionItem[]} - items that are found\n\t\t */\n    y(chart, e, options, useFinalPosition) {\n      const position = getRelativePosition(e, chart);\n      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n    }\n  }\n};\n","import {defined, each, isObject} from '../helpers/helpers.core.js';\nimport {toPadding} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n */\n\nconst STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];\n\nfunction filterByPosition(array, position) {\n  return array.filter(v => v.pos === position);\n}\n\nfunction filterDynamicPositionByAxis(array, axis) {\n  return array.filter(v => STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\n\nfunction sortByWeight(array, reverse) {\n  return array.sort((a, b) => {\n    const v0 = reverse ? b : a;\n    const v1 = reverse ? a : b;\n    return v0.weight === v1.weight ?\n      v0.index - v1.index :\n      v0.weight - v1.weight;\n  });\n}\n\nfunction wrapBoxes(boxes) {\n  const layoutBoxes = [];\n  let i, ilen, box, pos, stack, stackWeight;\n\n  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {\n    box = boxes[i];\n    ({position: pos, options: {stack, stackWeight = 1}} = box);\n    layoutBoxes.push({\n      index: i,\n      box,\n      pos,\n      horizontal: box.isHorizontal(),\n      weight: box.weight,\n      stack: stack && (pos + stack),\n      stackWeight\n    });\n  }\n  return layoutBoxes;\n}\n\nfunction buildStacks(layouts) {\n  const stacks = {};\n  for (const wrap of layouts) {\n    const {stack, pos, stackWeight} = wrap;\n    if (!stack || !STATIC_POSITIONS.includes(pos)) {\n      continue;\n    }\n    const _stack = stacks[stack] || (stacks[stack] = {count: 0, placed: 0, weight: 0, size: 0});\n    _stack.count++;\n    _stack.weight += stackWeight;\n  }\n  return stacks;\n}\n\n/**\n * store dimensions used instead of available chartArea in fitBoxes\n **/\nfunction setLayoutDims(layouts, params) {\n  const stacks = buildStacks(layouts);\n  const {vBoxMaxWidth, hBoxMaxHeight} = params;\n  let i, ilen, layout;\n  for (i = 0, ilen = layouts.length; i < ilen; ++i) {\n    layout = layouts[i];\n    const {fullSize} = layout.box;\n    const stack = stacks[layout.stack];\n    const factor = stack && layout.stackWeight / stack.weight;\n    if (layout.horizontal) {\n      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n      layout.height = hBoxMaxHeight;\n    } else {\n      layout.width = vBoxMaxWidth;\n      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n    }\n  }\n  return stacks;\n}\n\nfunction buildLayoutBoxes(boxes) {\n  const layoutBoxes = wrapBoxes(boxes);\n  const fullSize = sortByWeight(layoutBoxes.filter(wrap => wrap.box.fullSize), true);\n  const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n  const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n  const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n  const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n  const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n  const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n\n  return {\n    fullSize,\n    leftAndTop: left.concat(top),\n    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n    chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n    vertical: left.concat(right).concat(centerVertical),\n    horizontal: top.concat(bottom).concat(centerHorizontal)\n  };\n}\n\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\n\nfunction updateMaxPadding(maxPadding, boxPadding) {\n  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\n\nfunction updateDims(chartArea, params, layout, stacks) {\n  const {pos, box} = layout;\n  const maxPadding = chartArea.maxPadding;\n\n  // dynamically placed boxes size is not considered\n  if (!isObject(pos)) {\n    if (layout.size) {\n      // this layout was already counted for, lets first reduce old size\n      chartArea[pos] -= layout.size;\n    }\n    const stack = stacks[layout.stack] || {size: 0, count: 1};\n    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n    layout.size = stack.size / stack.count;\n    chartArea[pos] += layout.size;\n  }\n\n  if (box.getPadding) {\n    updateMaxPadding(maxPadding, box.getPadding());\n  }\n\n  const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n  const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n  const widthChanged = newWidth !== chartArea.w;\n  const heightChanged = newHeight !== chartArea.h;\n  chartArea.w = newWidth;\n  chartArea.h = newHeight;\n\n  // return booleans on the changes per direction\n  return layout.horizontal\n    ? {same: widthChanged, other: heightChanged}\n    : {same: heightChanged, other: widthChanged};\n}\n\nfunction handleMaxPadding(chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function updatePos(pos) {\n    const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n    chartArea[pos] += change;\n    return change;\n  }\n  chartArea.y += updatePos('top');\n  chartArea.x += updatePos('left');\n  updatePos('right');\n  updatePos('bottom');\n}\n\nfunction getMargins(horizontal, chartArea) {\n  const maxPadding = chartArea.maxPadding;\n\n  function marginForPositions(positions) {\n    const margin = {left: 0, top: 0, right: 0, bottom: 0};\n    positions.forEach((pos) => {\n      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n    });\n    return margin;\n  }\n\n  return horizontal\n    ? marginForPositions(['left', 'right'])\n    : marginForPositions(['top', 'bottom']);\n}\n\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n  const refitBoxes = [];\n  let i, ilen, layout, box, refit, changed;\n\n  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {\n    layout = boxes[i];\n    box = layout.box;\n\n    box.update(\n      layout.width || chartArea.w,\n      layout.height || chartArea.h,\n      getMargins(layout.horizontal, chartArea)\n    );\n    const {same, other} = updateDims(chartArea, params, layout, stacks);\n\n    // Dimensions changed and there were non full width boxes before this\n    // -> we have to refit those\n    refit |= same && refitBoxes.length;\n\n    // Chart area changed in the opposite direction\n    changed = changed || other;\n\n    if (!box.fullSize) { // fullSize boxes don't need to be re-fitted in any case\n      refitBoxes.push(layout);\n    }\n  }\n\n  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\n\nfunction setBoxDims(box, left, top, width, height) {\n  box.top = top;\n  box.left = left;\n  box.right = left + width;\n  box.bottom = top + height;\n  box.width = width;\n  box.height = height;\n}\n\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n  const userPadding = params.padding;\n  let {x, y} = chartArea;\n\n  for (const layout of boxes) {\n    const box = layout.box;\n    const stack = stacks[layout.stack] || {count: 1, placed: 0, weight: 1};\n    const weight = (layout.stackWeight / stack.weight) || 1;\n    if (layout.horizontal) {\n      const width = chartArea.w * weight;\n      const height = stack.size || box.height;\n      if (defined(stack.start)) {\n        y = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n      } else {\n        setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n      }\n      stack.start = y;\n      stack.placed += width;\n      y = box.bottom;\n    } else {\n      const height = chartArea.h * weight;\n      const width = stack.size || box.width;\n      if (defined(stack.start)) {\n        x = stack.start;\n      }\n      if (box.fullSize) {\n        setBoxDims(box, x, userPadding.top, width, params.outerHeight - userPadding.bottom - userPadding.top);\n      } else {\n        setBoxDims(box, x, chartArea.top + stack.placed, width, height);\n      }\n      stack.start = x;\n      stack.placed += height;\n      x = box.right;\n    }\n  }\n\n  chartArea.x = x;\n  chartArea.y = y;\n}\n\n/**\n * @interface LayoutItem\n * @typedef {object} LayoutItem\n * @prop {string} position - The position of the item in the chart layout. Possible values are\n * 'left', 'top', 'right', 'bottom', and 'chartArea'\n * @prop {number} weight - The weight used to sort the item. Higher weights are further away from the chart area\n * @prop {boolean} fullSize - if true, and the item is horizontal, then push vertical boxes down\n * @prop {function} isHorizontal - returns true if the layout item is horizontal (ie. top or bottom)\n * @prop {function} update - Takes two parameters: width and height. Returns size of item\n * @prop {function} draw - Draws the element\n * @prop {function} [getPadding] -  Returns an object with padding on the edges\n * @prop {number} width - Width of item. Must be valid after update()\n * @prop {number} height - Height of item. Must be valid after update()\n * @prop {number} left - Left edge of the item. Set by layout system and cannot be used in update\n * @prop {number} top - Top edge of the item. Set by layout system and cannot be used in update\n * @prop {number} right - Right edge of the item. Set by layout system and cannot be used in update\n * @prop {number} bottom - Bottom edge of the item. Set by layout system and cannot be used in update\n */\n\n// The layout service is very self explanatory.  It's responsible for the layout within a chart.\n// Scales, Legends and Plugins all rely on the layout service and can easily register to be placed anywhere they need\n// It is this service's responsibility of carrying out that layout.\nexport default {\n\n  /**\n\t * Register a box to a chart.\n\t * A box is simply a reference to an object that requires layout. eg. Scales, Legend, Title.\n\t * @param {Chart} chart - the chart to use\n\t * @param {LayoutItem} item - the item to add to be laid out\n\t */\n  addBox(chart, item) {\n    if (!chart.boxes) {\n      chart.boxes = [];\n    }\n\n    // initialize item with default values\n    item.fullSize = item.fullSize || false;\n    item.position = item.position || 'top';\n    item.weight = item.weight || 0;\n    // @ts-ignore\n    item._layers = item._layers || function() {\n      return [{\n        z: 0,\n        draw(chartArea) {\n          item.draw(chartArea);\n        }\n      }];\n    };\n\n    chart.boxes.push(item);\n  },\n\n  /**\n\t * Remove a layoutItem from a chart\n\t * @param {Chart} chart - the chart to remove the box from\n\t * @param {LayoutItem} layoutItem - the item to remove from the layout\n\t */\n  removeBox(chart, layoutItem) {\n    const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n    if (index !== -1) {\n      chart.boxes.splice(index, 1);\n    }\n  },\n\n  /**\n\t * Sets (or updates) options on the given `item`.\n\t * @param {Chart} chart - the chart in which the item lives (or will be added to)\n\t * @param {LayoutItem} item - the item to configure with the given options\n\t * @param {object} options - the new item options.\n\t */\n  configure(chart, item, options) {\n    item.fullSize = options.fullSize;\n    item.position = options.position;\n    item.weight = options.weight;\n  },\n\n  /**\n\t * Fits boxes of the given chart into the given size by having each box measure itself\n\t * then running a fitting algorithm\n\t * @param {Chart} chart - the chart\n\t * @param {number} width - the width to fit into\n\t * @param {number} height - the height to fit into\n   * @param {number} minPadding - minimum padding required for each side of chart area\n\t */\n  update(chart, width, height, minPadding) {\n    if (!chart) {\n      return;\n    }\n\n    const padding = toPadding(chart.options.layout.padding);\n    const availableWidth = Math.max(width - padding.width, 0);\n    const availableHeight = Math.max(height - padding.height, 0);\n    const boxes = buildLayoutBoxes(chart.boxes);\n    const verticalBoxes = boxes.vertical;\n    const horizontalBoxes = boxes.horizontal;\n\n    // Before any changes are made, notify boxes that an update is about to being\n    // This is used to clear any cached data (e.g. scale limits)\n    each(chart.boxes, box => {\n      if (typeof box.beforeLayout === 'function') {\n        box.beforeLayout();\n      }\n    });\n\n    // Essentially we now have any number of boxes on each of the 4 sides.\n    // Our canvas looks like the following.\n    // The areas L1 and L2 are the left axes. R1 is the right axis, T1 is the top axis and\n    // B1 is the bottom axis\n    // There are also 4 quadrant-like locations (left to right instead of clockwise) reserved for chart overlays\n    // These locations are single-box locations only, when trying to register a chartArea location that is already taken,\n    // an error will be thrown.\n    //\n    // |----------------------------------------------------|\n    // |                  T1 (Full Width)                   |\n    // |----------------------------------------------------|\n    // |    |    |                 T2                  |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    | C1 |                           | C2 |    |\n    // |    |    |----|                           |----|    |\n    // |    |    |                                     |    |\n    // | L1 | L2 |           ChartArea (C0)            | R1 |\n    // |    |    |                                     |    |\n    // |    |    |----|                           |----|    |\n    // |    |    | C3 |                           | C4 |    |\n    // |    |----|-------------------------------------|----|\n    // |    |    |                 B1                  |    |\n    // |----------------------------------------------------|\n    // |                  B2 (Full Width)                   |\n    // |----------------------------------------------------|\n    //\n\n    const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap) =>\n      wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n\n    const params = Object.freeze({\n      outerWidth: width,\n      outerHeight: height,\n      padding,\n      availableWidth,\n      availableHeight,\n      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n      hBoxMaxHeight: availableHeight / 2\n    });\n    const maxPadding = Object.assign({}, padding);\n    updateMaxPadding(maxPadding, toPadding(minPadding));\n    const chartArea = Object.assign({\n      maxPadding,\n      w: availableWidth,\n      h: availableHeight,\n      x: padding.left,\n      y: padding.top\n    }, padding);\n\n    const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n\n    // First fit the fullSize boxes, to reduce probability of re-fitting.\n    fitBoxes(boxes.fullSize, chartArea, params, stacks);\n\n    // Then fit vertical boxes\n    fitBoxes(verticalBoxes, chartArea, params, stacks);\n\n    // Then fit horizontal boxes\n    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n      // if the area changed, re-fit vertical boxes\n      fitBoxes(verticalBoxes, chartArea, params, stacks);\n    }\n\n    handleMaxPadding(chartArea);\n\n    // Finally place the boxes to correct coordinates\n    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n\n    // Move to opposite side of chart\n    chartArea.x += chartArea.w;\n    chartArea.y += chartArea.h;\n\n    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n\n    chart.chartArea = {\n      left: chartArea.left,\n      top: chartArea.top,\n      right: chartArea.left + chartArea.w,\n      bottom: chartArea.top + chartArea.h,\n      height: chartArea.h,\n      width: chartArea.w,\n    };\n\n    // Finally update boxes in chartArea (radial scale for example)\n    each(boxes.chartArea, (layout) => {\n      const box = layout.box;\n      Object.assign(box, chart.chartArea);\n      box.update(chartArea.w, chartArea.h, {left: 0, top: 0, right: 0, bottom: 0});\n    });\n  }\n};\n","\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\n/**\n * Abstract class that allows abstracting platform dependencies away from the chart.\n */\nexport default class BasePlatform {\n  /**\n\t * Called at chart construction time, returns a context2d instance implementing\n\t * the [W3C Canvas 2D Context API standard]{@link https://www.w3.org/TR/2dcontext/}.\n\t * @param {HTMLCanvasElement} canvas - The canvas from which to acquire context (platform specific)\n\t * @param {number} [aspectRatio] - The chart options\n\t */\n  acquireContext(canvas, aspectRatio) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Called at chart destruction time, releases any resources associated to the context\n\t * previously returned by the acquireContext() method.\n\t * @param {CanvasRenderingContext2D} context - The context2d instance\n\t * @returns {boolean} true if the method succeeded, else false\n\t */\n  releaseContext(context) { // eslint-disable-line no-unused-vars\n    return false;\n  }\n\n  /**\n\t * Registers the specified listener on the given chart.\n\t * @param {Chart} chart - Chart from which to listen for event\n\t * @param {string} type - The ({@link ChartEvent}) type to listen for\n\t * @param {function} listener - Receives a notification (an object that implements\n\t * the {@link ChartEvent} interface) when an event of the specified type occurs.\n\t */\n  addEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Removes the specified listener previously registered with addEventListener.\n\t * @param {Chart} chart - Chart from which to remove the listener\n\t * @param {string} type - The ({@link ChartEvent}) type to remove\n\t * @param {function} listener - The listener function to remove from the event target.\n\t */\n  removeEventListener(chart, type, listener) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * @returns {number} the current devicePixelRatio of the device this platform is connected to.\n\t */\n  getDevicePixelRatio() {\n    return 1;\n  }\n\n  /**\n\t * Returns the maximum size in pixels of given canvas element.\n\t * @param {HTMLCanvasElement} element\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(element, width, height, aspectRatio) {\n    width = Math.max(0, width || element.width);\n    height = height || element.height;\n    return {\n      width,\n      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n    };\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @returns {boolean} true if the canvas is attached to the platform, false if not.\n\t */\n  isAttached(canvas) { // eslint-disable-line no-unused-vars\n    return true;\n  }\n\n  /**\n   * Updates config with platform specific requirements\n   * @param {import('../core/core.config.js').default} config\n   */\n  updateConfig(config) { // eslint-disable-line no-unused-vars\n    // no-op\n  }\n}\n","/**\n * Platform fallback implementation (minimal).\n * @see https://github.com/chartjs/Chart.js/pull/4591#issuecomment-319575939\n */\n\nimport BasePlatform from './platform.base.js';\n\n/**\n * Platform class for charts without access to the DOM or to many element properties\n * This platform is used by default for any chart passed an OffscreenCanvas.\n * @extends BasePlatform\n */\nexport default class BasicPlatform extends BasePlatform {\n  acquireContext(item) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    return item && item.getContext && item.getContext('2d') || null;\n  }\n  updateConfig(config) {\n    config.options.animation = false;\n  }\n}\n","/**\n * Chart.Platform implementation for targeting a web browser\n */\n\nimport BasePlatform from './platform.base.js';\nimport {_getParentNode, getRelativePosition, supportsEventListenerOptions, readUsedSize, getMaximumSize} from '../helpers/helpers.dom.js';\nimport {throttled} from '../helpers/helpers.extras.js';\nimport {isNullOrUndef} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../core/core.controller.js').default } Chart\n */\n\nconst EXPANDO_KEY = '$chartjs';\n\n/**\n * DOM event types -> Chart.js event types.\n * Note: only events with different types are mapped.\n * @see https://developer.mozilla.org/en-US/docs/Web/Events\n */\nconst EVENT_TYPES = {\n  touchstart: 'mousedown',\n  touchmove: 'mousemove',\n  touchend: 'mouseup',\n  pointerenter: 'mouseenter',\n  pointerdown: 'mousedown',\n  pointermove: 'mousemove',\n  pointerup: 'mouseup',\n  pointerleave: 'mouseout',\n  pointerout: 'mouseout'\n};\n\nconst isNullOrEmpty = value => value === null || value === '';\n/**\n * Initializes the canvas style and render size without modifying the canvas display size,\n * since responsiveness is handled by the controller.resize() method. The config is used\n * to determine the aspect ratio to apply in case no explicit height has been specified.\n * @param {HTMLCanvasElement} canvas\n * @param {number} [aspectRatio]\n */\nfunction initCanvas(canvas, aspectRatio) {\n  const style = canvas.style;\n\n  // NOTE(SB) canvas.getAttribute('width') !== canvas.width: in the first case it\n  // returns null or '' if no explicit value has been set to the canvas attribute.\n  const renderHeight = canvas.getAttribute('height');\n  const renderWidth = canvas.getAttribute('width');\n\n  // Chart.js modifies some canvas values that we want to restore on destroy\n  canvas[EXPANDO_KEY] = {\n    initial: {\n      height: renderHeight,\n      width: renderWidth,\n      style: {\n        display: style.display,\n        height: style.height,\n        width: style.width\n      }\n    }\n  };\n\n  // Force canvas to display as block to avoid extra space caused by inline\n  // elements, which would interfere with the responsive resize process.\n  // https://github.com/chartjs/Chart.js/issues/2538\n  style.display = style.display || 'block';\n  // Include possible borders in the size\n  style.boxSizing = style.boxSizing || 'border-box';\n\n  if (isNullOrEmpty(renderWidth)) {\n    const displayWidth = readUsedSize(canvas, 'width');\n    if (displayWidth !== undefined) {\n      canvas.width = displayWidth;\n    }\n  }\n\n  if (isNullOrEmpty(renderHeight)) {\n    if (canvas.style.height === '') {\n      // If no explicit render height and style height, let's apply the aspect ratio,\n      // which one can be specified by the user but also by charts as default option\n      // (i.e. options.aspectRatio). If not specified, use canvas aspect ratio of 2.\n      canvas.height = canvas.width / (aspectRatio || 2);\n    } else {\n      const displayHeight = readUsedSize(canvas, 'height');\n      if (displayHeight !== undefined) {\n        canvas.height = displayHeight;\n      }\n    }\n  }\n\n  return canvas;\n}\n\n// Default passive to true as expected by Chrome for 'touchstart' and 'touchend' events.\n// https://github.com/chartjs/Chart.js/issues/4287\nconst eventListenerOptions = supportsEventListenerOptions ? {passive: true} : false;\n\nfunction addListener(node, type, listener) {\n  node.addEventListener(type, listener, eventListenerOptions);\n}\n\nfunction removeListener(chart, type, listener) {\n  chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n}\n\nfunction fromNativeEvent(event, chart) {\n  const type = EVENT_TYPES[event.type] || event.type;\n  const {x, y} = getRelativePosition(event, chart);\n  return {\n    type,\n    chart,\n    native: event,\n    x: x !== undefined ? x : null,\n    y: y !== undefined ? y : null,\n  };\n}\n\nfunction nodeListContains(nodeList, canvas) {\n  for (const node of nodeList) {\n    if (node === canvas || node.contains(canvas)) {\n      return true;\n    }\n  }\n}\n\nfunction createAttachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nfunction createDetachObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const observer = new MutationObserver(entries => {\n    let trigger = false;\n    for (const entry of entries) {\n      trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n    }\n    if (trigger) {\n      listener();\n    }\n  });\n  observer.observe(document, {childList: true, subtree: true});\n  return observer;\n}\n\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\n\nfunction onWindowResize() {\n  const dpr = window.devicePixelRatio;\n  if (dpr === oldDevicePixelRatio) {\n    return;\n  }\n  oldDevicePixelRatio = dpr;\n  drpListeningCharts.forEach((resize, chart) => {\n    if (chart.currentDevicePixelRatio !== dpr) {\n      resize();\n    }\n  });\n}\n\nfunction listenDevicePixelRatioChanges(chart, resize) {\n  if (!drpListeningCharts.size) {\n    window.addEventListener('resize', onWindowResize);\n  }\n  drpListeningCharts.set(chart, resize);\n}\n\nfunction unlistenDevicePixelRatioChanges(chart) {\n  drpListeningCharts.delete(chart);\n  if (!drpListeningCharts.size) {\n    window.removeEventListener('resize', onWindowResize);\n  }\n}\n\nfunction createResizeObserver(chart, type, listener) {\n  const canvas = chart.canvas;\n  const container = canvas && _getParentNode(canvas);\n  if (!container) {\n    return;\n  }\n  const resize = throttled((width, height) => {\n    const w = container.clientWidth;\n    listener(width, height);\n    if (w < container.clientWidth) {\n      // If the container size shrank during chart resize, let's assume\n      // scrollbar appeared. So we resize again with the scrollbar visible -\n      // effectively making chart smaller and the scrollbar hidden again.\n      // Because we are inside `throttled`, and currently `ticking`, scroll\n      // events are ignored during this whole 2 resize process.\n      // If we assumed wrong and something else happened, we are resizing\n      // twice in a frame (potential performance issue)\n      listener();\n    }\n  }, window);\n\n  // @ts-ignore until https://github.com/microsoft/TypeScript/issues/37861 implemented\n  const observer = new ResizeObserver(entries => {\n    const entry = entries[0];\n    const width = entry.contentRect.width;\n    const height = entry.contentRect.height;\n    // When its container's display is set to 'none' the callback will be called with a\n    // size of (0, 0), which will cause the chart to lose its original height, so skip\n    // resizing in such case.\n    if (width === 0 && height === 0) {\n      return;\n    }\n    resize(width, height);\n  });\n  observer.observe(container);\n  listenDevicePixelRatioChanges(chart, resize);\n\n  return observer;\n}\n\nfunction releaseObserver(chart, type, observer) {\n  if (observer) {\n    observer.disconnect();\n  }\n  if (type === 'resize') {\n    unlistenDevicePixelRatioChanges(chart);\n  }\n}\n\nfunction createProxyAndListen(chart, type, listener) {\n  const canvas = chart.canvas;\n  const proxy = throttled((event) => {\n    // This case can occur if the chart is destroyed while waiting\n    // for the throttled function to occur. We prevent crashes by checking\n    // for a destroyed chart\n    if (chart.ctx !== null) {\n      listener(fromNativeEvent(event, chart));\n    }\n  }, chart);\n\n  addListener(canvas, type, proxy);\n\n  return proxy;\n}\n\n/**\n * Platform class for charts that can access the DOM and global window/document properties\n * @extends BasePlatform\n */\nexport default class DomPlatform extends BasePlatform {\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [aspectRatio]\n\t * @return {CanvasRenderingContext2D|null}\n\t */\n  acquireContext(canvas, aspectRatio) {\n    // To prevent canvas fingerprinting, some add-ons undefine the getContext\n    // method, for example: https://github.com/kkapsner/CanvasBlocker\n    // https://github.com/chartjs/Chart.js/issues/2807\n    const context = canvas && canvas.getContext && canvas.getContext('2d');\n\n    // `instanceof HTMLCanvasElement/CanvasRenderingContext2D` fails when the canvas is\n    // inside an iframe or when running in a protected environment. We could guess the\n    // types from their toString() value but let's keep things flexible and assume it's\n    // a sufficient condition if the canvas has a context2D which has canvas as `canvas`.\n    // https://github.com/chartjs/Chart.js/issues/3887\n    // https://github.com/chartjs/Chart.js/issues/4102\n    // https://github.com/chartjs/Chart.js/issues/4152\n    if (context && context.canvas === canvas) {\n      // Load platform resources on first chart creation, to make it possible to\n      // import the library before setting platform options.\n      initCanvas(canvas, aspectRatio);\n      return context;\n    }\n\n    return null;\n  }\n\n  /**\n\t * @param {CanvasRenderingContext2D} context\n\t */\n  releaseContext(context) {\n    const canvas = context.canvas;\n    if (!canvas[EXPANDO_KEY]) {\n      return false;\n    }\n\n    const initial = canvas[EXPANDO_KEY].initial;\n    ['height', 'width'].forEach((prop) => {\n      const value = initial[prop];\n      if (isNullOrUndef(value)) {\n        canvas.removeAttribute(prop);\n      } else {\n        canvas.setAttribute(prop, value);\n      }\n    });\n\n    const style = initial.style || {};\n    Object.keys(style).forEach((key) => {\n      canvas.style[key] = style[key];\n    });\n\n    // The canvas render size might have been changed (and thus the state stack discarded),\n    // we can't use save() and restore() to restore the initial state. So make sure that at\n    // least the canvas context is reset to the default state by setting the canvas width.\n    // https://www.w3.org/TR/2011/WD-html5-20110525/the-canvas-element.html\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width;\n\n    delete canvas[EXPANDO_KEY];\n    return true;\n  }\n\n  /**\n\t *\n\t * @param {Chart} chart\n\t * @param {string} type\n\t * @param {function} listener\n\t */\n  addEventListener(chart, type, listener) {\n    // Can have only one listener per type, so make sure previous is removed\n    this.removeEventListener(chart, type);\n\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const handlers = {\n      attach: createAttachObserver,\n      detach: createDetachObserver,\n      resize: createResizeObserver\n    };\n    const handler = handlers[type] || createProxyAndListen;\n    proxies[type] = handler(chart, type, listener);\n  }\n\n\n  /**\n\t * @param {Chart} chart\n\t * @param {string} type\n\t */\n  removeEventListener(chart, type) {\n    const proxies = chart.$proxies || (chart.$proxies = {});\n    const proxy = proxies[type];\n\n    if (!proxy) {\n      return;\n    }\n\n    const handlers = {\n      attach: releaseObserver,\n      detach: releaseObserver,\n      resize: releaseObserver\n    };\n    const handler = handlers[type] || removeListener;\n    handler(chart, type, proxy);\n    proxies[type] = undefined;\n  }\n\n  getDevicePixelRatio() {\n    return window.devicePixelRatio;\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t * @param {number} [width] - content width of parent element\n\t * @param {number} [height] - content height of parent element\n\t * @param {number} [aspectRatio] - aspect ratio to maintain\n\t */\n  getMaximumSize(canvas, width, height, aspectRatio) {\n    return getMaximumSize(canvas, width, height, aspectRatio);\n  }\n\n  /**\n\t * @param {HTMLCanvasElement} canvas\n\t */\n  isAttached(canvas) {\n    const container = _getParentNode(canvas);\n    return !!(container && container.isConnected);\n  }\n}\n","import type {AnyObject} from '../types/basic.js';\nimport type {Point} from '../types/geometric.js';\nimport type {Animation} from '../types/animation.js';\nimport {isNumber} from '../helpers/helpers.math.js';\n\nexport default class Element<T = AnyObject, O = AnyObject> {\n\n  static defaults = {};\n  static defaultRoutes = undefined;\n\n  x: number;\n  y: number;\n  active = false;\n  options: O;\n  $animations: Record<keyof T, Animation>;\n\n  tooltipPosition(useFinalPosition: boolean): Point {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y} as Point;\n  }\n\n  hasValue() {\n    return isNumber(this.x) && isNumber(this.y);\n  }\n\n  /**\n   * Gets the current or final value of each prop. Can return extra properties (whole object).\n   * @param props - properties to get\n   * @param [final] - get the final value (animation target)\n   */\n  getProps<P extends (keyof T)[]>(props: P, final?: boolean): Pick<T, P[number]>;\n  getProps<P extends string>(props: P[], final?: boolean): Partial<Record<P, unknown>>;\n  getProps(props: string[], final?: boolean): Partial<Record<string, unknown>> {\n    const anims = this.$animations;\n    if (!final || !anims) {\n      // let's not create an object, if not needed\n      return this as Record<string, unknown>;\n    }\n    const ret: Record<string, unknown> = {};\n    props.forEach((prop) => {\n      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop as string];\n    });\n    return ret;\n  }\n}\n","import {isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\nimport {_factorize} from '../helpers/helpers.math.js';\n\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a subset of ticks to be plotted to avoid overlapping labels.\n * @param {import('./core.scale.js').default} scale\n * @param {Tick[]} ticks\n * @return {Tick[]}\n * @private\n */\nexport function autoSkip(scale, ticks) {\n  const tickOpts = scale.options.ticks;\n  const determinedMaxTicks = determineMaxTicks(scale);\n  const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n  const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n  const numMajorIndices = majorIndices.length;\n  const first = majorIndices[0];\n  const last = majorIndices[numMajorIndices - 1];\n  const newTicks = [];\n\n  // If there are too many major ticks to display them all\n  if (numMajorIndices > ticksLimit) {\n    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n    return newTicks;\n  }\n\n  const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n\n  if (numMajorIndices > 0) {\n    let i, ilen;\n    const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n    skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {\n      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n    }\n    skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n    return newTicks;\n  }\n  skip(ticks, newTicks, spacing);\n  return newTicks;\n}\n\nfunction determineMaxTicks(scale) {\n  const offset = scale.options.offset;\n  const tickLength = scale._tickSize();\n  const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n  const maxChart = scale._maxLength / tickLength;\n  return Math.floor(Math.min(maxScale, maxChart));\n}\n\n/**\n * @param {number[]} majorIndices\n * @param {Tick[]} ticks\n * @param {number} ticksLimit\n */\nfunction calculateSpacing(majorIndices, ticks, ticksLimit) {\n  const evenMajorSpacing = getEvenSpacing(majorIndices);\n  const spacing = ticks.length / ticksLimit;\n\n  // If the major ticks are evenly spaced apart, place the minor ticks\n  // so that they divide the major ticks into even chunks\n  if (!evenMajorSpacing) {\n    return Math.max(spacing, 1);\n  }\n\n  const factors = _factorize(evenMajorSpacing);\n  for (let i = 0, ilen = factors.length - 1; i < ilen; i++) {\n    const factor = factors[i];\n    if (factor > spacing) {\n      return factor;\n    }\n  }\n  return Math.max(spacing, 1);\n}\n\n/**\n * @param {Tick[]} ticks\n */\nfunction getMajorIndices(ticks) {\n  const result = [];\n  let i, ilen;\n  for (i = 0, ilen = ticks.length; i < ilen; i++) {\n    if (ticks[i].major) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number[]} majorIndices\n * @param {number} spacing\n */\nfunction skipMajors(ticks, newTicks, majorIndices, spacing) {\n  let count = 0;\n  let next = majorIndices[0];\n  let i;\n\n  spacing = Math.ceil(spacing);\n  for (i = 0; i < ticks.length; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = majorIndices[count * spacing];\n    }\n  }\n}\n\n/**\n * @param {Tick[]} ticks\n * @param {Tick[]} newTicks\n * @param {number} spacing\n * @param {number} [majorStart]\n * @param {number} [majorEnd]\n */\nfunction skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n  const start = valueOrDefault(majorStart, 0);\n  const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n  let count = 0;\n  let length, i, next;\n\n  spacing = Math.ceil(spacing);\n  if (majorEnd) {\n    length = majorEnd - majorStart;\n    spacing = length / Math.floor(length / spacing);\n  }\n\n  next = start;\n\n  while (next < 0) {\n    count++;\n    next = Math.round(start + count * spacing);\n  }\n\n  for (i = Math.max(start, 0); i < end; i++) {\n    if (i === next) {\n      newTicks.push(ticks[i]);\n      count++;\n      next = Math.round(start + count * spacing);\n    }\n  }\n}\n\n\n/**\n * @param {number[]} arr\n */\nfunction getEvenSpacing(arr) {\n  const len = arr.length;\n  let i, diff;\n\n  if (len < 2) {\n    return false;\n  }\n\n  for (diff = arr[0], i = 1; i < len; ++i) {\n    if (arr[i] - arr[i - 1] !== diff) {\n      return false;\n    }\n  }\n  return diff;\n}\n","import Element from './core.element.js';\nimport {_alignPixel, _measureText, renderText, clipArea, unclipArea} from '../helpers/helpers.canvas.js';\nimport {callback as call, each, finiteOrDefault, isArray, isFinite, isNullOrUndef, isObject, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toDegrees, toRadians, _int16Range, _limitValue, HALF_PI} from '../helpers/helpers.math.js';\nimport {_alignStartEnd, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {createContext, toFont, toPadding, _addGrace} from '../helpers/helpers.options.js';\nimport {autoSkip} from './core.scale.autoskip.js';\n\nconst reverseAlign = (align) => align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset) => edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\nconst getTicksLimit = (ticksLength, maxTicksLimit) => Math.min(maxTicksLimit || ticksLength, ticksLength);\n\n/**\n * @typedef { import('../types/index.js').Chart } Chart\n * @typedef {{value:number | string, label?:string, major?:boolean, $context?:any}} Tick\n */\n\n/**\n * Returns a new array containing numItems from arr\n * @param {any[]} arr\n * @param {number} numItems\n */\nfunction sample(arr, numItems) {\n  const result = [];\n  const increment = arr.length / numItems;\n  const len = arr.length;\n  let i = 0;\n\n  for (; i < len; i += increment) {\n    result.push(arr[Math.floor(i)]);\n  }\n  return result;\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @param {boolean} offsetGridLines\n */\nfunction getPixelForGridLine(scale, index, offsetGridLines) {\n  const length = scale.ticks.length;\n  const validIndex = Math.min(index, length - 1);\n  const start = scale._startPixel;\n  const end = scale._endPixel;\n  const epsilon = 1e-6; // 1e-6 is margin in pixels for accumulated error.\n  let lineValue = scale.getPixelForTick(validIndex);\n  let offset;\n\n  if (offsetGridLines) {\n    if (length === 1) {\n      offset = Math.max(lineValue - start, end - lineValue);\n    } else if (index === 0) {\n      offset = (scale.getPixelForTick(1) - lineValue) / 2;\n    } else {\n      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n    }\n    lineValue += validIndex < index ? offset : -offset;\n\n    // Return undefined if the pixel is out of the range\n    if (lineValue < start - epsilon || lineValue > end + epsilon) {\n      return;\n    }\n  }\n  return lineValue;\n}\n\n/**\n * @param {object} caches\n * @param {number} length\n */\nfunction garbageCollect(caches, length) {\n  each(caches, (cache) => {\n    const gc = cache.gc;\n    const gcLen = gc.length / 2;\n    let i;\n    if (gcLen > length) {\n      for (i = 0; i < gcLen; ++i) {\n        delete cache.data[gc[i]];\n      }\n      gc.splice(0, gcLen);\n    }\n  });\n}\n\n/**\n * @param {object} options\n */\nfunction getTickMarkLength(options) {\n  return options.drawTicks ? options.tickLength : 0;\n}\n\n/**\n * @param {object} options\n */\nfunction getTitleHeight(options, fallback) {\n  if (!options.display) {\n    return 0;\n  }\n\n  const font = toFont(options.font, fallback);\n  const padding = toPadding(options.padding);\n  const lines = isArray(options.text) ? options.text.length : 1;\n\n  return (lines * font.lineHeight) + padding.height;\n}\n\nfunction createScaleContext(parent, scale) {\n  return createContext(parent, {\n    scale,\n    type: 'scale'\n  });\n}\n\nfunction createTickContext(parent, index, tick) {\n  return createContext(parent, {\n    tick,\n    index,\n    type: 'tick'\n  });\n}\n\nfunction titleAlign(align, position, reverse) {\n  /** @type {CanvasTextAlign} */\n  let ret = _toLeftRightCenter(align);\n  if ((reverse && position !== 'right') || (!reverse && position === 'right')) {\n    ret = reverseAlign(ret);\n  }\n  return ret;\n}\n\nfunction titleArgs(scale, offset, position, align) {\n  const {top, left, bottom, right, chart} = scale;\n  const {chartArea, scales} = chart;\n  let rotation = 0;\n  let maxWidth, titleX, titleY;\n  const height = bottom - top;\n  const width = right - left;\n\n  if (scale.isHorizontal()) {\n    titleX = _alignStartEnd(align, left, right);\n\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n    } else if (position === 'center') {\n      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n    } else {\n      titleY = offsetFromEdge(scale, position, offset);\n    }\n    maxWidth = right - left;\n  } else {\n    if (isObject(position)) {\n      const positionAxisID = Object.keys(position)[0];\n      const value = position[positionAxisID];\n      titleX = scales[positionAxisID].getPixelForValue(value) - width + offset;\n    } else if (position === 'center') {\n      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n    } else {\n      titleX = offsetFromEdge(scale, position, offset);\n    }\n    titleY = _alignStartEnd(align, bottom, top);\n    rotation = position === 'left' ? -HALF_PI : HALF_PI;\n  }\n  return {titleX, titleY, maxWidth, rotation};\n}\n\nexport default class Scale extends Element {\n\n  // eslint-disable-next-line max-statements\n  constructor(cfg) {\n    super();\n\n    /** @type {string} */\n    this.id = cfg.id;\n    /** @type {string} */\n    this.type = cfg.type;\n    /** @type {any} */\n    this.options = undefined;\n    /** @type {CanvasRenderingContext2D} */\n    this.ctx = cfg.ctx;\n    /** @type {Chart} */\n    this.chart = cfg.chart;\n\n    // implements box\n    /** @type {number} */\n    this.top = undefined;\n    /** @type {number} */\n    this.bottom = undefined;\n    /** @type {number} */\n    this.left = undefined;\n    /** @type {number} */\n    this.right = undefined;\n    /** @type {number} */\n    this.width = undefined;\n    /** @type {number} */\n    this.height = undefined;\n    this._margins = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    /** @type {number} */\n    this.maxWidth = undefined;\n    /** @type {number} */\n    this.maxHeight = undefined;\n    /** @type {number} */\n    this.paddingTop = undefined;\n    /** @type {number} */\n    this.paddingBottom = undefined;\n    /** @type {number} */\n    this.paddingLeft = undefined;\n    /** @type {number} */\n    this.paddingRight = undefined;\n\n    // scale-specific properties\n    /** @type {string=} */\n    this.axis = undefined;\n    /** @type {number=} */\n    this.labelRotation = undefined;\n    this.min = undefined;\n    this.max = undefined;\n    this._range = undefined;\n    /** @type {Tick[]} */\n    this.ticks = [];\n    /** @type {object[]|null} */\n    this._gridLineItems = null;\n    /** @type {object[]|null} */\n    this._labelItems = null;\n    /** @type {object|null} */\n    this._labelSizes = null;\n    this._length = 0;\n    this._maxLength = 0;\n    this._longestTextCache = {};\n    /** @type {number} */\n    this._startPixel = undefined;\n    /** @type {number} */\n    this._endPixel = undefined;\n    this._reversePixels = false;\n    this._userMax = undefined;\n    this._userMin = undefined;\n    this._suggestedMax = undefined;\n    this._suggestedMin = undefined;\n    this._ticksLength = 0;\n    this._borderValue = 0;\n    this._cache = {};\n    this._dataLimitsCached = false;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @param {any} options\n\t * @since 3.0\n\t */\n  init(options) {\n    this.options = options.setContext(this.getContext());\n\n    this.axis = options.axis;\n\n    // parse min/max value, so we can properly determine min/max for other scales\n    this._userMin = this.parse(options.min);\n    this._userMax = this.parse(options.max);\n    this._suggestedMin = this.parse(options.suggestedMin);\n    this._suggestedMax = this.parse(options.suggestedMax);\n  }\n\n  /**\n\t * Parse a supported input value to internal representation.\n\t * @param {*} raw\n\t * @param {number} [index]\n\t * @since 3.0\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    return raw;\n  }\n\n  /**\n\t * @return {{min: number, max: number, minDefined: boolean, maxDefined: boolean}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getUserBounds() {\n    let {_userMin, _userMax, _suggestedMin, _suggestedMax} = this;\n    _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n    _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n    _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n    _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n    return {\n      min: finiteOrDefault(_userMin, _suggestedMin),\n      max: finiteOrDefault(_userMax, _suggestedMax),\n      minDefined: isFinite(_userMin),\n      maxDefined: isFinite(_userMax)\n    };\n  }\n\n  /**\n\t * @param {boolean} canStack\n\t * @return {{min: number, max: number}}\n\t * @protected\n\t * @since 3.0\n\t */\n  getMinMax(canStack) {\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n    let range;\n\n    if (minDefined && maxDefined) {\n      return {min, max};\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n    for (let i = 0, ilen = metas.length; i < ilen; ++i) {\n      range = metas[i].controller.getMinMax(this, canStack);\n      if (!minDefined) {\n        min = Math.min(min, range.min);\n      }\n      if (!maxDefined) {\n        max = Math.max(max, range.max);\n      }\n    }\n\n    // Make sure min <= max when only min or max is defined by user and the data is outside that range\n    min = maxDefined && min > max ? max : min;\n    max = minDefined && min > max ? min : max;\n\n    return {\n      min: finiteOrDefault(min, finiteOrDefault(max, min)),\n      max: finiteOrDefault(max, finiteOrDefault(min, max))\n    };\n  }\n\n  /**\n\t * Get the padding needed for the scale\n\t * @return {{top: number, left: number, bottom: number, right: number}} the necessary padding\n\t * @private\n\t */\n  getPadding() {\n    return {\n      left: this.paddingLeft || 0,\n      top: this.paddingTop || 0,\n      right: this.paddingRight || 0,\n      bottom: this.paddingBottom || 0\n    };\n  }\n\n  /**\n\t * Returns the scale tick objects\n\t * @return {Tick[]}\n\t * @since 2.7\n\t */\n  getTicks() {\n    return this.ticks;\n  }\n\n  /**\n\t * @return {string[]}\n\t */\n  getLabels() {\n    const data = this.chart.data;\n    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n  }\n\n  /**\n   * @return {import('../types.js').LabelItem[]}\n   */\n  getLabelItems(chartArea = this.chart.chartArea) {\n    const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n    return items;\n  }\n\n  // When a new layout is created, reset the data limits cache\n  beforeLayout() {\n    this._cache = {};\n    this._dataLimitsCached = false;\n  }\n\n  // These methods are ordered by lifecycle. Utilities then follow.\n  // Any function defined here is inherited by all scale types.\n  // Any function can be extended by the scale type\n\n  beforeUpdate() {\n    call(this.options.beforeUpdate, [this]);\n  }\n\n  /**\n\t * @param {number} maxWidth - the max width in pixels\n\t * @param {number} maxHeight - the max height in pixels\n\t * @param {{top: number, left: number, bottom: number, right: number}} margins - the space between the edge of the other scales and edge of the chart\n\t *   This space comes from two sources:\n\t *     - padding - space that's required to show the labels at the edges of the scale\n\t *     - thickness of scales or legends in another orientation\n\t */\n  update(maxWidth, maxHeight, margins) {\n    const {beginAtZero, grace, ticks: tickOpts} = this.options;\n    const sampleSize = tickOpts.sampleSize;\n\n    // Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n    this.beforeUpdate();\n\n    // Absorb the master measurements\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins = Object.assign({\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }, margins);\n\n    this.ticks = null;\n    this._labelSizes = null;\n    this._gridLineItems = null;\n    this._labelItems = null;\n\n    // Dimensions\n    this.beforeSetDimensions();\n    this.setDimensions();\n    this.afterSetDimensions();\n\n    this._maxLength = this.isHorizontal()\n      ? this.width + margins.left + margins.right\n      : this.height + margins.top + margins.bottom;\n\n    // Data min/max\n    if (!this._dataLimitsCached) {\n      this.beforeDataLimits();\n      this.determineDataLimits();\n      this.afterDataLimits();\n      this._range = _addGrace(this, grace, beginAtZero);\n      this._dataLimitsCached = true;\n    }\n\n    this.beforeBuildTicks();\n\n    this.ticks = this.buildTicks() || [];\n\n    // Allow modification of ticks in callback.\n    this.afterBuildTicks();\n\n    // Compute tick rotation and fit using a sampled subset of labels\n    // We generally don't need to compute the size of every single label for determining scale size\n    const samplingEnabled = sampleSize < this.ticks.length;\n    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n\n    // configure is called twice, once here, once from core.controller.updateLayout.\n    // Here we haven't been positioned yet, but dimensions are correct.\n    // Variables set in configure are needed for calculateLabelRotation, and\n    // it's ok that coordinates are not correct there, only dimensions matter.\n    this.configure();\n\n    // Tick Rotation\n    this.beforeCalculateLabelRotation();\n    this.calculateLabelRotation(); // Preconditions: number of ticks and sizes of largest labels must be calculated beforehand\n    this.afterCalculateLabelRotation();\n\n    // Auto-skip\n    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n      this.ticks = autoSkip(this, this.ticks);\n      this._labelSizes = null;\n      this.afterAutoSkip();\n    }\n\n    if (samplingEnabled) {\n      // Generate labels using all non-skipped ticks\n      this._convertTicksToLabels(this.ticks);\n    }\n\n    this.beforeFit();\n    this.fit(); // Preconditions: label rotation and label sizes must be calculated beforehand\n    this.afterFit();\n\n    // IMPORTANT: after this point, we consider that `this.ticks` will NEVER change!\n\n    this.afterUpdate();\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    let reversePixels = this.options.reverse;\n    let startPixel, endPixel;\n\n    if (this.isHorizontal()) {\n      startPixel = this.left;\n      endPixel = this.right;\n    } else {\n      startPixel = this.top;\n      endPixel = this.bottom;\n      // by default vertical scales are from bottom to top, so pixels are reversed\n      reversePixels = !reversePixels;\n    }\n    this._startPixel = startPixel;\n    this._endPixel = endPixel;\n    this._reversePixels = reversePixels;\n    this._length = endPixel - startPixel;\n    this._alignToPixels = this.options.alignToPixels;\n  }\n\n  afterUpdate() {\n    call(this.options.afterUpdate, [this]);\n  }\n\n  //\n\n  beforeSetDimensions() {\n    call(this.options.beforeSetDimensions, [this]);\n  }\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    if (this.isHorizontal()) {\n      // Reset position before calculating rotation\n      this.width = this.maxWidth;\n      this.left = 0;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n\n      // Reset position before calculating rotation\n      this.top = 0;\n      this.bottom = this.height;\n    }\n\n    // Reset padding\n    this.paddingLeft = 0;\n    this.paddingTop = 0;\n    this.paddingRight = 0;\n    this.paddingBottom = 0;\n  }\n  afterSetDimensions() {\n    call(this.options.afterSetDimensions, [this]);\n  }\n\n  _callHooks(name) {\n    this.chart.notifyPlugins(name, this.getContext());\n    call(this.options[name], [this]);\n  }\n\n  // Data limits\n  beforeDataLimits() {\n    this._callHooks('beforeDataLimits');\n  }\n  determineDataLimits() {}\n  afterDataLimits() {\n    this._callHooks('afterDataLimits');\n  }\n\n  //\n  beforeBuildTicks() {\n    this._callHooks('beforeBuildTicks');\n  }\n  /**\n\t * @return {object[]} the ticks\n\t */\n  buildTicks() {\n    return [];\n  }\n  afterBuildTicks() {\n    this._callHooks('afterBuildTicks');\n  }\n\n  beforeTickToLabelConversion() {\n    call(this.options.beforeTickToLabelConversion, [this]);\n  }\n  /**\n\t * Convert ticks to label strings\n\t * @param {Tick[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    const tickOpts = this.options.ticks;\n    let i, ilen, tick;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      tick = ticks[i];\n      tick.label = call(tickOpts.callback, [tick.value, i, ticks], this);\n    }\n  }\n  afterTickToLabelConversion() {\n    call(this.options.afterTickToLabelConversion, [this]);\n  }\n\n  //\n\n  beforeCalculateLabelRotation() {\n    call(this.options.beforeCalculateLabelRotation, [this]);\n  }\n  calculateLabelRotation() {\n    const options = this.options;\n    const tickOpts = options.ticks;\n    const numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);\n    const minRotation = tickOpts.minRotation || 0;\n    const maxRotation = tickOpts.maxRotation;\n    let labelRotation = minRotation;\n    let tickWidth, maxHeight, maxLabelDiagonal;\n\n    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n      this.labelRotation = minRotation;\n      return;\n    }\n\n    const labelSizes = this._getLabelSizes();\n    const maxLabelWidth = labelSizes.widest.width;\n    const maxLabelHeight = labelSizes.highest.height;\n\n    // Estimate the width of each grid based on the canvas width, the maximum\n    // label width and the number of tick intervals\n    const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n\n    // Allow 3 pixels x2 padding either side for label readability\n    if (maxLabelWidth + 6 > tickWidth) {\n      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n      maxHeight = this.maxHeight - getTickMarkLength(options.grid)\n\t\t\t\t- tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n      labelRotation = toDegrees(Math.min(\n        Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)),\n        Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))\n      ));\n      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n    }\n\n    this.labelRotation = labelRotation;\n  }\n  afterCalculateLabelRotation() {\n    call(this.options.afterCalculateLabelRotation, [this]);\n  }\n  afterAutoSkip() {}\n\n  //\n\n  beforeFit() {\n    call(this.options.beforeFit, [this]);\n  }\n  fit() {\n    // Reset\n    const minSize = {\n      width: 0,\n      height: 0\n    };\n\n    const {chart, options: {ticks: tickOpts, title: titleOpts, grid: gridOpts}} = this;\n    const display = this._isVisible();\n    const isHorizontal = this.isHorizontal();\n\n    if (display) {\n      const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n      if (isHorizontal) {\n        minSize.width = this.maxWidth;\n        minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n      } else {\n        minSize.height = this.maxHeight; // fill all the height\n        minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n      }\n\n      // Don't bother fitting the ticks if we are not showing the labels\n      if (tickOpts.display && this.ticks.length) {\n        const {first, last, widest, highest} = this._getLabelSizes();\n        const tickPadding = tickOpts.padding * 2;\n        const angleRadians = toRadians(this.labelRotation);\n        const cos = Math.cos(angleRadians);\n        const sin = Math.sin(angleRadians);\n\n        if (isHorizontal) {\n        // A horizontal axis is more constrained by the height.\n          const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n        } else {\n        // A vertical axis is more constrained by the width. Labels are the\n        // dominant factor here, so get that length first and account for padding\n          const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n\n          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n        }\n        this._calculatePadding(first, last, sin, cos);\n      }\n    }\n\n    this._handleMargins();\n\n    if (isHorizontal) {\n      this.width = this._length = chart.width - this._margins.left - this._margins.right;\n      this.height = minSize.height;\n    } else {\n      this.width = minSize.width;\n      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n    }\n  }\n\n  _calculatePadding(first, last, sin, cos) {\n    const {ticks: {align, padding}, position} = this.options;\n    const isRotated = this.labelRotation !== 0;\n    const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n\n    if (this.isHorizontal()) {\n      const offsetLeft = this.getPixelForTick(0) - this.left;\n      const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n      let paddingLeft = 0;\n      let paddingRight = 0;\n\n      // Ensure that our ticks are always inside the canvas. When rotated, ticks are right aligned\n      // which means that the right padding is dominated by the font height\n      if (isRotated) {\n        if (labelsBelowTicks) {\n          paddingLeft = cos * first.width;\n          paddingRight = sin * last.height;\n        } else {\n          paddingLeft = sin * first.height;\n          paddingRight = cos * last.width;\n        }\n      } else if (align === 'start') {\n        paddingRight = last.width;\n      } else if (align === 'end') {\n        paddingLeft = first.width;\n      } else if (align !== 'inner') {\n        paddingLeft = first.width / 2;\n        paddingRight = last.width / 2;\n      }\n\n      // Adjust padding taking into account changes in offsets\n      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n    } else {\n      let paddingTop = last.height / 2;\n      let paddingBottom = first.height / 2;\n\n      if (align === 'start') {\n        paddingTop = 0;\n        paddingBottom = first.height;\n      } else if (align === 'end') {\n        paddingTop = last.height;\n        paddingBottom = 0;\n      }\n\n      this.paddingTop = paddingTop + padding;\n      this.paddingBottom = paddingBottom + padding;\n    }\n  }\n\n  /**\n\t * Handle margins and padding interactions\n\t * @private\n\t */\n  _handleMargins() {\n    if (this._margins) {\n      this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n      this._margins.top = Math.max(this.paddingTop, this._margins.top);\n      this._margins.right = Math.max(this.paddingRight, this._margins.right);\n      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n    }\n  }\n\n  afterFit() {\n    call(this.options.afterFit, [this]);\n  }\n\n  // Shared Methods\n  /**\n\t * @return {boolean}\n\t */\n  isHorizontal() {\n    const {axis, position} = this.options;\n    return position === 'top' || position === 'bottom' || axis === 'x';\n  }\n  /**\n\t * @return {boolean}\n\t */\n  isFullSize() {\n    return this.options.fullSize;\n  }\n\n  /**\n\t * @param {Tick[]} ticks\n\t * @private\n\t */\n  _convertTicksToLabels(ticks) {\n    this.beforeTickToLabelConversion();\n\n    this.generateTickLabels(ticks);\n\n    // Ticks should be skipped when callback returns null or undef, so lets remove those.\n    let i, ilen;\n    for (i = 0, ilen = ticks.length; i < ilen; i++) {\n      if (isNullOrUndef(ticks[i].label)) {\n        ticks.splice(i, 1);\n        ilen--;\n        i--;\n      }\n    }\n\n    this.afterTickToLabelConversion();\n  }\n\n  /**\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _getLabelSizes() {\n    let labelSizes = this._labelSizes;\n\n    if (!labelSizes) {\n      const sampleSize = this.options.ticks.sampleSize;\n      let ticks = this.ticks;\n      if (sampleSize < ticks.length) {\n        ticks = sample(ticks, sampleSize);\n      }\n\n      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);\n    }\n\n    return labelSizes;\n  }\n\n  /**\n\t * Returns {width, height, offset} objects for the first, last, widest, highest tick\n\t * labels where offset indicates the anchor point offset from the top in pixels.\n\t * @return {{ first: object, last: object, widest: object, highest: object, widths: Array, heights: array }}\n\t * @private\n\t */\n  _computeLabelSizes(ticks, length, maxTicksLimit) {\n    const {ctx, _longestTextCache: caches} = this;\n    const widths = [];\n    const heights = [];\n    const increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));\n    let widestLabelSize = 0;\n    let highestLabelSize = 0;\n    let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n\n    for (i = 0; i < length; i += increment) {\n      label = ticks[i].label;\n      tickFont = this._resolveTickFontOptions(i);\n      ctx.font = fontString = tickFont.string;\n      cache = caches[fontString] = caches[fontString] || {data: {}, gc: []};\n      lineHeight = tickFont.lineHeight;\n      width = height = 0;\n      // Undefined labels and arrays should not be measured\n      if (!isNullOrUndef(label) && !isArray(label)) {\n        width = _measureText(ctx, cache.data, cache.gc, width, label);\n        height = lineHeight;\n      } else if (isArray(label)) {\n        // if it is an array let's measure each element\n        for (j = 0, jlen = label.length; j < jlen; ++j) {\n          nestedLabel = /** @type {string} */ (label[j]);\n          // Undefined labels and arrays should not be measured\n          if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n            width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n            height += lineHeight;\n          }\n        }\n      }\n      widths.push(width);\n      heights.push(height);\n      widestLabelSize = Math.max(width, widestLabelSize);\n      highestLabelSize = Math.max(height, highestLabelSize);\n    }\n    garbageCollect(caches, length);\n\n    const widest = widths.indexOf(widestLabelSize);\n    const highest = heights.indexOf(highestLabelSize);\n\n    const valueAt = (idx) => ({width: widths[idx] || 0, height: heights[idx] || 0});\n\n    return {\n      first: valueAt(0),\n      last: valueAt(length - 1),\n      widest: valueAt(widest),\n      highest: valueAt(highest),\n      widths,\n      heights,\n    };\n  }\n\n  /**\n\t * Used to get the label to display in the tooltip for the given value\n\t * @param {*} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value;\n  }\n\n  /**\n\t * Returns the location of the given data point. Value can either be an index or a numerical value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {*} value\n\t * @param {number} [index]\n\t * @return {number}\n\t */\n  getPixelForValue(value, index) { // eslint-disable-line no-unused-vars\n    return NaN;\n  }\n\n  /**\n\t * Used to get the data value from a given pixel. This is the inverse of getPixelForValue\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} pixel\n\t * @return {*}\n\t */\n  getValueForPixel(pixel) {} // eslint-disable-line no-unused-vars\n\n  /**\n\t * Returns the location of the tick at the given index\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} index\n\t * @return {number}\n\t */\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  /**\n\t * Utility for getting the pixel location of a percentage of scale\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @param {number} decimal\n\t * @return {number}\n\t */\n  getPixelForDecimal(decimal) {\n    if (this._reversePixels) {\n      decimal = 1 - decimal;\n    }\n\n    const pixel = this._startPixel + decimal * this._length;\n    return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getDecimalForPixel(pixel) {\n    const decimal = (pixel - this._startPixel) / this._length;\n    return this._reversePixels ? 1 - decimal : decimal;\n  }\n\n  /**\n\t * Returns the pixel for the minimum chart value\n\t * The coordinate (0, 0) is at the upper-left corner of the canvas\n\t * @return {number}\n\t */\n  getBasePixel() {\n    return this.getPixelForValue(this.getBaseValue());\n  }\n\n  /**\n\t * @return {number}\n\t */\n  getBaseValue() {\n    const {min, max} = this;\n\n    return min < 0 && max < 0 ? max :\n      min > 0 && max > 0 ? min :\n      0;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext(index) {\n    const ticks = this.ticks || [];\n\n    if (index >= 0 && index < ticks.length) {\n      const tick = ticks[index];\n      return tick.$context ||\n\t\t\t\t(tick.$context = createTickContext(this.getContext(), index, tick));\n    }\n    return this.$context ||\n\t\t\t(this.$context = createScaleContext(this.chart.getContext(), this));\n  }\n\n  /**\n\t * @return {number}\n\t * @private\n\t */\n  _tickSize() {\n    const optionTicks = this.options.ticks;\n\n    // Calculate space needed by label in axis direction.\n    const rot = toRadians(this.labelRotation);\n    const cos = Math.abs(Math.cos(rot));\n    const sin = Math.abs(Math.sin(rot));\n\n    const labelSizes = this._getLabelSizes();\n    const padding = optionTicks.autoSkipPadding || 0;\n    const w = labelSizes ? labelSizes.widest.width + padding : 0;\n    const h = labelSizes ? labelSizes.highest.height + padding : 0;\n\n    // Calculate space needed for 1 tick in axis direction.\n    return this.isHorizontal()\n      ? h * cos > w * sin ? w / cos : h / sin\n      : h * sin < w * cos ? h / cos : w / sin;\n  }\n\n  /**\n\t * @return {boolean}\n\t * @private\n\t */\n  _isVisible() {\n    const display = this.options.display;\n\n    if (display !== 'auto') {\n      return !!display;\n    }\n\n    return this.getMatchingVisibleMetas().length > 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeGridLineItems(chartArea) {\n    const axis = this.axis;\n    const chart = this.chart;\n    const options = this.options;\n    const {grid, position, border} = options;\n    const offset = grid.offset;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const ticksLength = ticks.length + (offset ? 1 : 0);\n    const tl = getTickMarkLength(grid);\n    const items = [];\n\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = borderOpts.display ? borderOpts.width : 0;\n    const axisHalfWidth = axisWidth / 2;\n    const alignBorderValue = function(pixel) {\n      return _alignPixel(chart, pixel, axisWidth);\n    };\n    let borderValue, i, lineValue, alignedLineValue;\n    let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n\n    if (position === 'top') {\n      borderValue = alignBorderValue(this.bottom);\n      ty1 = this.bottom - tl;\n      ty2 = borderValue - axisHalfWidth;\n      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n      y2 = chartArea.bottom;\n    } else if (position === 'bottom') {\n      borderValue = alignBorderValue(this.top);\n      y1 = chartArea.top;\n      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = this.top + tl;\n    } else if (position === 'left') {\n      borderValue = alignBorderValue(this.right);\n      tx1 = this.right - tl;\n      tx2 = borderValue - axisHalfWidth;\n      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n      x2 = chartArea.right;\n    } else if (position === 'right') {\n      borderValue = alignBorderValue(this.left);\n      x1 = chartArea.left;\n      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n      tx1 = borderValue + axisHalfWidth;\n      tx2 = this.left + tl;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      y1 = chartArea.top;\n      y2 = chartArea.bottom;\n      ty1 = borderValue + axisHalfWidth;\n      ty2 = ty1 + tl;\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n      }\n\n      tx1 = borderValue - axisHalfWidth;\n      tx2 = tx1 - tl;\n      x1 = chartArea.left;\n      x2 = chartArea.right;\n    }\n\n    const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n    const step = Math.max(1, Math.ceil(ticksLength / limit));\n    for (i = 0; i < ticksLength; i += step) {\n      const context = this.getContext(i);\n      const optsAtIndex = grid.setContext(context);\n      const optsAtIndexBorder = border.setContext(context);\n\n      const lineWidth = optsAtIndex.lineWidth;\n      const lineColor = optsAtIndex.color;\n      const borderDash = optsAtIndexBorder.dash || [];\n      const borderDashOffset = optsAtIndexBorder.dashOffset;\n\n      const tickWidth = optsAtIndex.tickWidth;\n      const tickColor = optsAtIndex.tickColor;\n      const tickBorderDash = optsAtIndex.tickBorderDash || [];\n      const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n\n      lineValue = getPixelForGridLine(this, i, offset);\n\n      // Skip if the pixel is out of the range\n      if (lineValue === undefined) {\n        continue;\n      }\n\n      alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n\n      if (isHorizontal) {\n        tx1 = tx2 = x1 = x2 = alignedLineValue;\n      } else {\n        ty1 = ty2 = y1 = y2 = alignedLineValue;\n      }\n\n      items.push({\n        tx1,\n        ty1,\n        tx2,\n        ty2,\n        x1,\n        y1,\n        x2,\n        y2,\n        width: lineWidth,\n        color: lineColor,\n        borderDash,\n        borderDashOffset,\n        tickWidth,\n        tickColor,\n        tickBorderDash,\n        tickBorderDashOffset,\n      });\n    }\n\n    this._ticksLength = ticksLength;\n    this._borderValue = borderValue;\n\n    return items;\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelItems(chartArea) {\n    const axis = this.axis;\n    const options = this.options;\n    const {position, ticks: optionTicks} = options;\n    const isHorizontal = this.isHorizontal();\n    const ticks = this.ticks;\n    const {align, crossAlign, padding, mirror} = optionTicks;\n    const tl = getTickMarkLength(options.grid);\n    const tickAndPadding = tl + padding;\n    const hTickAndPadding = mirror ? -padding : tickAndPadding;\n    const rotation = -toRadians(this.labelRotation);\n    const items = [];\n    let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n    let textBaseline = 'middle';\n\n    if (position === 'top') {\n      y = this.bottom - hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'bottom') {\n      y = this.top + hTickAndPadding;\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (position === 'left') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (position === 'right') {\n      const ret = this._getYAxisLabelAlignment(tl);\n      textAlign = ret.textAlign;\n      x = ret.x;\n    } else if (axis === 'x') {\n      if (position === 'center') {\n        y = ((chartArea.top + chartArea.bottom) / 2) + tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n      }\n      textAlign = this._getXAxisLabelAlignment();\n    } else if (axis === 'y') {\n      if (position === 'center') {\n        x = ((chartArea.left + chartArea.right) / 2) - tickAndPadding;\n      } else if (isObject(position)) {\n        const positionAxisID = Object.keys(position)[0];\n        const value = position[positionAxisID];\n        x = this.chart.scales[positionAxisID].getPixelForValue(value);\n      }\n      textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n    }\n\n    if (axis === 'y') {\n      if (align === 'start') {\n        textBaseline = 'top';\n      } else if (align === 'end') {\n        textBaseline = 'bottom';\n      }\n    }\n\n    const labelSizes = this._getLabelSizes();\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      label = tick.label;\n\n      const optsAtIndex = optionTicks.setContext(this.getContext(i));\n      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n      font = this._resolveTickFontOptions(i);\n      lineHeight = font.lineHeight;\n      lineCount = isArray(label) ? label.length : 1;\n      const halfCount = lineCount / 2;\n      const color = optsAtIndex.color;\n      const strokeColor = optsAtIndex.textStrokeColor;\n      const strokeWidth = optsAtIndex.textStrokeWidth;\n      let tickTextAlign = textAlign;\n\n      if (isHorizontal) {\n        x = pixel;\n\n        if (textAlign === 'inner') {\n          if (i === ilen - 1) {\n            tickTextAlign = !this.options.reverse ? 'right' : 'left';\n          } else if (i === 0) {\n            tickTextAlign = !this.options.reverse ? 'left' : 'right';\n          } else {\n            tickTextAlign = 'center';\n          }\n        }\n\n        if (position === 'top') {\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = -lineCount * lineHeight + lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n          } else {\n            textOffset = -labelSizes.highest.height + lineHeight / 2;\n          }\n        } else {\n          // eslint-disable-next-line no-lonely-if\n          if (crossAlign === 'near' || rotation !== 0) {\n            textOffset = lineHeight / 2;\n          } else if (crossAlign === 'center') {\n            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n          } else {\n            textOffset = labelSizes.highest.height - lineCount * lineHeight;\n          }\n        }\n        if (mirror) {\n          textOffset *= -1;\n        }\n        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n          x += (lineHeight / 2) * Math.sin(rotation);\n        }\n      } else {\n        y = pixel;\n        textOffset = (1 - lineCount) * lineHeight / 2;\n      }\n\n      let backdrop;\n\n      if (optsAtIndex.showLabelBackdrop) {\n        const labelPadding = toPadding(optsAtIndex.backdropPadding);\n        const height = labelSizes.heights[i];\n        const width = labelSizes.widths[i];\n\n        let top = textOffset - labelPadding.top;\n        let left = 0 - labelPadding.left;\n\n        switch (textBaseline) {\n        case 'middle':\n          top -= height / 2;\n          break;\n        case 'bottom':\n          top -= height;\n          break;\n        default:\n          break;\n        }\n\n        switch (textAlign) {\n        case 'center':\n          left -= width / 2;\n          break;\n        case 'right':\n          left -= width;\n          break;\n        default:\n          break;\n        }\n\n        backdrop = {\n          left,\n          top,\n          width: width + labelPadding.width,\n          height: height + labelPadding.height,\n\n          color: optsAtIndex.backdropColor,\n        };\n      }\n\n      items.push({\n        label,\n        font,\n        textOffset,\n        options: {\n          rotation,\n          color,\n          strokeColor,\n          strokeWidth,\n          textAlign: tickTextAlign,\n          textBaseline,\n          translation: [x, y],\n          backdrop,\n        }\n      });\n    }\n\n    return items;\n  }\n\n  _getXAxisLabelAlignment() {\n    const {position, ticks} = this.options;\n    const rotation = -toRadians(this.labelRotation);\n\n    if (rotation) {\n      return position === 'top' ? 'left' : 'right';\n    }\n\n    let align = 'center';\n\n    if (ticks.align === 'start') {\n      align = 'left';\n    } else if (ticks.align === 'end') {\n      align = 'right';\n    } else if (ticks.align === 'inner') {\n      align = 'inner';\n    }\n\n    return align;\n  }\n\n  _getYAxisLabelAlignment(tl) {\n    const {position, ticks: {crossAlign, mirror, padding}} = this.options;\n    const labelSizes = this._getLabelSizes();\n    const tickAndPadding = tl + padding;\n    const widest = labelSizes.widest.width;\n\n    let textAlign;\n    let x;\n\n    if (position === 'left') {\n      if (mirror) {\n        x = this.right + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += (widest / 2);\n        } else {\n          textAlign = 'right';\n          x += widest;\n        }\n      } else {\n        x = this.right - tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x = this.left;\n        }\n      }\n    } else if (position === 'right') {\n      if (mirror) {\n        x = this.left + padding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'right';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x -= (widest / 2);\n        } else {\n          textAlign = 'left';\n          x -= widest;\n        }\n      } else {\n        x = this.left + tickAndPadding;\n\n        if (crossAlign === 'near') {\n          textAlign = 'left';\n        } else if (crossAlign === 'center') {\n          textAlign = 'center';\n          x += widest / 2;\n        } else {\n          textAlign = 'right';\n          x = this.right;\n        }\n      }\n    } else {\n      textAlign = 'right';\n    }\n\n    return {textAlign, x};\n  }\n\n  /**\n\t * @private\n\t */\n  _computeLabelArea() {\n    if (this.options.ticks.mirror) {\n      return;\n    }\n\n    const chart = this.chart;\n    const position = this.options.position;\n\n    if (position === 'left' || position === 'right') {\n      return {top: 0, left: this.left, bottom: chart.height, right: this.right};\n    } if (position === 'top' || position === 'bottom') {\n      return {top: this.top, left: 0, bottom: this.bottom, right: chart.width};\n    }\n  }\n\n  /**\n   * @protected\n   */\n  drawBackground() {\n    const {ctx, options: {backgroundColor}, left, top, width, height} = this;\n    if (backgroundColor) {\n      ctx.save();\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(left, top, width, height);\n      ctx.restore();\n    }\n  }\n\n  getLineWidthForValue(value) {\n    const grid = this.options.grid;\n    if (!this._isVisible() || !grid.display) {\n      return 0;\n    }\n    const ticks = this.ticks;\n    const index = ticks.findIndex(t => t.value === value);\n    if (index >= 0) {\n      const opts = grid.setContext(this.getContext(index));\n      return opts.lineWidth;\n    }\n    return 0;\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid(chartArea) {\n    const grid = this.options.grid;\n    const ctx = this.ctx;\n    const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n    let i, ilen;\n\n    const drawLine = (p1, p2, style) => {\n      if (!style.width || !style.color) {\n        return;\n      }\n      ctx.save();\n      ctx.lineWidth = style.width;\n      ctx.strokeStyle = style.color;\n      ctx.setLineDash(style.borderDash || []);\n      ctx.lineDashOffset = style.borderDashOffset;\n\n      ctx.beginPath();\n      ctx.moveTo(p1.x, p1.y);\n      ctx.lineTo(p2.x, p2.y);\n      ctx.stroke();\n      ctx.restore();\n    };\n\n    if (grid.display) {\n      for (i = 0, ilen = items.length; i < ilen; ++i) {\n        const item = items[i];\n\n        if (grid.drawOnChartArea) {\n          drawLine(\n            {x: item.x1, y: item.y1},\n            {x: item.x2, y: item.y2},\n            item\n          );\n        }\n\n        if (grid.drawTicks) {\n          drawLine(\n            {x: item.tx1, y: item.ty1},\n            {x: item.tx2, y: item.ty2},\n            {\n              color: item.tickColor,\n              width: item.tickWidth,\n              borderDash: item.tickBorderDash,\n              borderDashOffset: item.tickBorderDashOffset\n            }\n          );\n        }\n      }\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {\n    const {chart, ctx, options: {border, grid}} = this;\n    const borderOpts = border.setContext(this.getContext());\n    const axisWidth = border.display ? borderOpts.width : 0;\n    if (!axisWidth) {\n      return;\n    }\n    const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n    const borderValue = this._borderValue;\n    let x1, x2, y1, y2;\n\n    if (this.isHorizontal()) {\n      x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n      x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n      y1 = y2 = borderValue;\n    } else {\n      y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n      y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n      x1 = x2 = borderValue;\n    }\n    ctx.save();\n    ctx.lineWidth = borderOpts.width;\n    ctx.strokeStyle = borderOpts.color;\n\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawLabels(chartArea) {\n    const optionTicks = this.options.ticks;\n\n    if (!optionTicks.display) {\n      return;\n    }\n\n    const ctx = this.ctx;\n\n    const area = this._computeLabelArea();\n    if (area) {\n      clipArea(ctx, area);\n    }\n\n    const items = this.getLabelItems(chartArea);\n    for (const item of items) {\n      const renderTextOptions = item.options;\n      const tickFont = item.font;\n      const label = item.label;\n      const y = item.textOffset;\n      renderText(ctx, label, 0, y, tickFont, renderTextOptions);\n    }\n\n    if (area) {\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const {ctx, options: {position, title, reverse}} = this;\n\n    if (!title.display) {\n      return;\n    }\n\n    const font = toFont(title.font);\n    const padding = toPadding(title.padding);\n    const align = title.align;\n    let offset = font.lineHeight / 2;\n\n    if (position === 'bottom' || position === 'center' || isObject(position)) {\n      offset += padding.bottom;\n      if (isArray(title.text)) {\n        offset += font.lineHeight * (title.text.length - 1);\n      }\n    } else {\n      offset += padding.top;\n    }\n\n    const {titleX, titleY, maxWidth, rotation} = titleArgs(this, offset, position, align);\n\n    renderText(ctx, title.text, 0, 0, font, {\n      color: title.color,\n      maxWidth,\n      rotation,\n      textAlign: titleAlign(align, position, reverse),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n\n  draw(chartArea) {\n    if (!this._isVisible()) {\n      return;\n    }\n\n    this.drawBackground();\n    this.drawGrid(chartArea);\n    this.drawBorder();\n    this.drawTitle();\n    this.drawLabels(chartArea);\n  }\n\n  /**\n\t * @return {object[]}\n\t * @private\n\t */\n  _layers() {\n    const opts = this.options;\n    const tz = opts.ticks && opts.ticks.z || 0;\n    const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n    const bz = valueOrDefault(opts.border && opts.border.z, 0);\n\n    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n      // backward compatibility: draw has been overridden by custom scale\n      return [{\n        z: tz,\n        draw: (chartArea) => {\n          this.draw(chartArea);\n        }\n      }];\n    }\n\n    return [{\n      z: gz,\n      draw: (chartArea) => {\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawTitle();\n      }\n    }, {\n      z: bz,\n      draw: () => {\n        this.drawBorder();\n      }\n    }, {\n      z: tz,\n      draw: (chartArea) => {\n        this.drawLabels(chartArea);\n      }\n    }];\n  }\n\n  /**\n\t * Returns visible dataset metas that are attached to this scale\n\t * @param {string} [type] - if specified, also filter by dataset type\n\t * @return {object[]}\n\t */\n  getMatchingVisibleMetas(type) {\n    const metas = this.chart.getSortedVisibleDatasetMetas();\n    const axisID = this.axis + 'AxisID';\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      const meta = metas[i];\n      if (meta[axisID] === this.id && (!type || meta.type === type)) {\n        result.push(meta);\n      }\n    }\n    return result;\n  }\n\n  /**\n\t * @param {number} index\n\t * @return {object}\n\t * @protected\n \t */\n  _resolveTickFontOptions(index) {\n    const opts = this.options.ticks.setContext(this.getContext(index));\n    return toFont(opts.font);\n  }\n\n  /**\n   * @protected\n   */\n  _maxDigits() {\n    const fontSize = this._resolveTickFontOptions(0).lineHeight;\n    return (this.isHorizontal() ? this.width : this.height) / fontSize;\n  }\n}\n","import {merge} from '../helpers/index.js';\nimport defaults, {overrides} from './core.defaults.js';\n\n/**\n * @typedef {{id: string, defaults: any, overrides?: any, defaultRoutes: any}} IChartComponent\n */\n\nexport default class TypedRegistry {\n  constructor(type, scope, override) {\n    this.type = type;\n    this.scope = scope;\n    this.override = override;\n    this.items = Object.create(null);\n  }\n\n  isForType(type) {\n    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t * @returns {string} The scope where items defaults were registered to.\n\t */\n  register(item) {\n    const proto = Object.getPrototypeOf(item);\n    let parentScope;\n\n    if (isIChartComponent(proto)) {\n      // Make sure the parent is registered and note the scope where its defaults are.\n      parentScope = this.register(proto);\n    }\n\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope + '.' + id;\n\n    if (!id) {\n      throw new Error('class does not have id: ' + item);\n    }\n\n    if (id in items) {\n      // already registered\n      return scope;\n    }\n\n    items[id] = item;\n    registerDefaults(item, scope, parentScope);\n    if (this.override) {\n      defaults.override(item.id, item.overrides);\n    }\n\n    return scope;\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object?}\n\t */\n  get(id) {\n    return this.items[id];\n  }\n\n  /**\n\t * @param {IChartComponent} item\n\t */\n  unregister(item) {\n    const items = this.items;\n    const id = item.id;\n    const scope = this.scope;\n\n    if (id in items) {\n      delete items[id];\n    }\n\n    if (scope && id in defaults[scope]) {\n      delete defaults[scope][id];\n      if (this.override) {\n        delete overrides[id];\n      }\n    }\n  }\n}\n\nfunction registerDefaults(item, scope, parentScope) {\n  // Inherit the parent's defaults and keep existing defaults\n  const itemDefaults = merge(Object.create(null), [\n    parentScope ? defaults.get(parentScope) : {},\n    defaults.get(scope),\n    item.defaults\n  ]);\n\n  defaults.set(scope, itemDefaults);\n\n  if (item.defaultRoutes) {\n    routeDefaults(scope, item.defaultRoutes);\n  }\n\n  if (item.descriptors) {\n    defaults.describe(scope, item.descriptors);\n  }\n}\n\nfunction routeDefaults(scope, routes) {\n  Object.keys(routes).forEach(property => {\n    const propertyParts = property.split('.');\n    const sourceName = propertyParts.pop();\n    const sourceScope = [scope].concat(propertyParts).join('.');\n    const parts = routes[property].split('.');\n    const targetName = parts.pop();\n    const targetScope = parts.join('.');\n    defaults.route(sourceScope, sourceName, targetScope, targetName);\n  });\n}\n\nfunction isIChartComponent(proto) {\n  return 'id' in proto && 'defaults' in proto;\n}\n","import DatasetController from './core.datasetController.js';\nimport Element from './core.element.js';\nimport Scale from './core.scale.js';\nimport TypedRegistry from './core.typedRegistry.js';\nimport {each, callback as call, _capitalize} from '../helpers/helpers.core.js';\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Registry {\n  constructor() {\n    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n    this.elements = new TypedRegistry(Element, 'elements');\n    this.plugins = new TypedRegistry(Object, 'plugins');\n    this.scales = new TypedRegistry(Scale, 'scales');\n    // Order is important, Scale has Element in prototype chain,\n    // so Scales must be before Elements. Plugins are a fallback, so not listed here.\n    this._typedRegistries = [this.controllers, this.scales, this.elements];\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  add(...args) {\n    this._each('register', args);\n  }\n\n  remove(...args) {\n    this._each('unregister', args);\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  addControllers(...args) {\n    this._each('register', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  addElements(...args) {\n    this._each('register', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  addPlugins(...args) {\n    this._each('register', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  addScales(...args) {\n    this._each('register', args, this.scales);\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof DatasetController}\n\t */\n  getController(id) {\n    return this._get(id, this.controllers, 'controller');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Element}\n\t */\n  getElement(id) {\n    return this._get(id, this.elements, 'element');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {object}\n\t */\n  getPlugin(id) {\n    return this._get(id, this.plugins, 'plugin');\n  }\n\n  /**\n\t * @param {string} id\n\t * @returns {typeof Scale}\n\t */\n  getScale(id) {\n    return this._get(id, this.scales, 'scale');\n  }\n\n  /**\n\t * @param  {...typeof DatasetController} args\n\t */\n  removeControllers(...args) {\n    this._each('unregister', args, this.controllers);\n  }\n\n  /**\n\t * @param  {...typeof Element} args\n\t */\n  removeElements(...args) {\n    this._each('unregister', args, this.elements);\n  }\n\n  /**\n\t * @param  {...any} args\n\t */\n  removePlugins(...args) {\n    this._each('unregister', args, this.plugins);\n  }\n\n  /**\n\t * @param  {...typeof Scale} args\n\t */\n  removeScales(...args) {\n    this._each('unregister', args, this.scales);\n  }\n\n  /**\n\t * @private\n\t */\n  _each(method, args, typedRegistry) {\n    [...args].forEach(arg => {\n      const reg = typedRegistry || this._getRegistryForType(arg);\n      if (typedRegistry || reg.isForType(arg) || (reg === this.plugins && arg.id)) {\n        this._exec(method, reg, arg);\n      } else {\n        // Handle loopable args\n        // Use case:\n        //  import * as plugins from './plugins.js';\n        //  Chart.register(plugins);\n        each(arg, item => {\n          // If there are mixed types in the loopable, make sure those are\n          // registered in correct registry\n          // Use case: (treemap exporting controller, elements etc)\n          //  import * as treemap from 'chartjs-chart-treemap.js';\n          //  Chart.register(treemap);\n\n          const itemReg = typedRegistry || this._getRegistryForType(item);\n          this._exec(method, itemReg, item);\n        });\n      }\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _exec(method, registry, component) {\n    const camelMethod = _capitalize(method);\n    call(component['before' + camelMethod], [], component); // beforeRegister / beforeUnregister\n    registry[method](component);\n    call(component['after' + camelMethod], [], component); // afterRegister / afterUnregister\n  }\n\n  /**\n\t * @private\n\t */\n  _getRegistryForType(type) {\n    for (let i = 0; i < this._typedRegistries.length; i++) {\n      const reg = this._typedRegistries[i];\n      if (reg.isForType(type)) {\n        return reg;\n      }\n    }\n    // plugins is the fallback registry\n    return this.plugins;\n  }\n\n  /**\n\t * @private\n\t */\n  _get(id, typedRegistry, type) {\n    const item = typedRegistry.get(id);\n    if (item === undefined) {\n      throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n    }\n    return item;\n  }\n\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Registry();\n","import registry from './core.registry.js';\nimport {callback as callCallback, isNullOrUndef, valueOrDefault} from '../helpers/helpers.core.js';\n\n/**\n * @typedef { import('./core.controller.js').default } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../plugins/plugin.tooltip.js').default } Tooltip\n */\n\n/**\n * @callback filterCallback\n * @param {{plugin: object, options: object}} value\n * @param {number} [index]\n * @param {array} [array]\n * @param {object} [thisArg]\n * @return {boolean}\n */\n\n\nexport default class PluginService {\n  constructor() {\n    this._init = [];\n  }\n\n  /**\n\t * Calls enabled plugins for `chart` on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {Chart} chart - The chart instance for which plugins should be called.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {object} [args] - Extra arguments to apply to the hook call.\n   * @param {filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notify(chart, hook, args, filter) {\n    if (hook === 'beforeInit') {\n      this._init = this._createDescriptors(chart, true);\n      this._notify(this._init, chart, 'install');\n    }\n\n    const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n    const result = this._notify(descriptors, chart, hook, args);\n\n    if (hook === 'afterDestroy') {\n      this._notify(descriptors, chart, 'stop');\n      this._notify(this._init, chart, 'uninstall');\n    }\n    return result;\n  }\n\n  /**\n\t * @private\n\t */\n  _notify(descriptors, chart, hook, args) {\n    args = args || {};\n    for (const descriptor of descriptors) {\n      const plugin = descriptor.plugin;\n      const method = plugin[hook];\n      const params = [chart, args, descriptor.options];\n      if (callCallback(method, params, plugin) === false && args.cancelable) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  invalidate() {\n    // When plugins are registered, there is the possibility of a double\n    // invalidate situation. In this case, we only want to invalidate once.\n    // If we invalidate multiple times, the `_oldCache` is lost and all of the\n    // plugins are restarted without being correctly stopped.\n    // See https://github.com/chartjs/Chart.js/issues/8147\n    if (!isNullOrUndef(this._cache)) {\n      this._oldCache = this._cache;\n      this._cache = undefined;\n    }\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _descriptors(chart) {\n    if (this._cache) {\n      return this._cache;\n    }\n\n    const descriptors = this._cache = this._createDescriptors(chart);\n\n    this._notifyStateChanges(chart);\n\n    return descriptors;\n  }\n\n  _createDescriptors(chart, all) {\n    const config = chart && chart.config;\n    const options = valueOrDefault(config.options && config.options.plugins, {});\n    const plugins = allPlugins(config);\n    // options === false => all plugins are disabled\n    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n  }\n\n  /**\n\t * @param {Chart} chart\n\t * @private\n\t */\n  _notifyStateChanges(chart) {\n    const previousDescriptors = this._oldCache || [];\n    const descriptors = this._cache;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.plugin.id === y.plugin.id));\n    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n    this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n  }\n}\n\n/**\n * @param {import('./core.config.js').default} config\n */\nfunction allPlugins(config) {\n  const localIds = {};\n  const plugins = [];\n  const keys = Object.keys(registry.plugins.items);\n  for (let i = 0; i < keys.length; i++) {\n    plugins.push(registry.getPlugin(keys[i]));\n  }\n\n  const local = config.plugins || [];\n  for (let i = 0; i < local.length; i++) {\n    const plugin = local[i];\n\n    if (plugins.indexOf(plugin) === -1) {\n      plugins.push(plugin);\n      localIds[plugin.id] = true;\n    }\n  }\n\n  return {plugins, localIds};\n}\n\nfunction getOpts(options, all) {\n  if (!all && options === false) {\n    return null;\n  }\n  if (options === true) {\n    return {};\n  }\n  return options;\n}\n\nfunction createDescriptors(chart, {plugins, localIds}, options, all) {\n  const result = [];\n  const context = chart.getContext();\n\n  for (const plugin of plugins) {\n    const id = plugin.id;\n    const opts = getOpts(options[id], all);\n    if (opts === null) {\n      continue;\n    }\n    result.push({\n      plugin,\n      options: pluginOpts(chart.config, {plugin, local: localIds[id]}, opts, context)\n    });\n  }\n\n  return result;\n}\n\nfunction pluginOpts(config, {plugin, local}, opts, context) {\n  const keys = config.pluginScopeKeys(plugin);\n  const scopes = config.getOptionScopes(opts, keys);\n  if (local && plugin.defaults) {\n    // make sure plugin defaults are in scopes for local (not registered) plugins\n    scopes.push(plugin.defaults);\n  }\n  return config.createResolver(scopes, context, [''], {\n    // These are just defaults that plugins can override\n    scriptable: false,\n    indexable: false,\n    allKeys: true\n  });\n}\n","import defaults, {overrides, descriptors} from './core.defaults.js';\nimport {mergeIf, resolveObjectKey, isArray, isFunction, valueOrDefault, isObject} from '../helpers/helpers.core.js';\nimport {_attachContext, _createResolver, _descriptors} from '../helpers/helpers.config.js';\n\nexport function getIndexAxis(type, options) {\n  const datasetDefaults = defaults.datasets[type] || {};\n  const datasetOptions = (options.datasets || {})[type] || {};\n  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\n\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n  let axis = id;\n  if (id === '_index_') {\n    axis = indexAxis;\n  } else if (id === '_value_') {\n    axis = indexAxis === 'x' ? 'y' : 'x';\n  }\n  return axis;\n}\n\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n  return axis === indexAxis ? '_index_' : '_value_';\n}\n\nfunction idMatchesAxis(id) {\n  if (id === 'x' || id === 'y' || id === 'r') {\n    return id;\n  }\n}\n\nfunction axisFromPosition(position) {\n  if (position === 'top' || position === 'bottom') {\n    return 'x';\n  }\n  if (position === 'left' || position === 'right') {\n    return 'y';\n  }\n}\n\nexport function determineAxis(id, ...scaleOptions) {\n  if (idMatchesAxis(id)) {\n    return id;\n  }\n  for (const opts of scaleOptions) {\n    const axis = opts.axis\n      || axisFromPosition(opts.position)\n      || id.length > 1 && idMatchesAxis(id[0].toLowerCase());\n    if (axis) {\n      return axis;\n    }\n  }\n  throw new Error(`Cannot determine type of '${id}' axis. Please provide 'axis' or 'position' option.`);\n}\n\nfunction getAxisFromDataset(id, axis, dataset) {\n  if (dataset[axis + 'AxisID'] === id) {\n    return {axis};\n  }\n}\n\nfunction retrieveAxisFromDatasets(id, config) {\n  if (config.data && config.data.datasets) {\n    const boundDs = config.data.datasets.filter((d) => d.xAxisID === id || d.yAxisID === id);\n    if (boundDs.length) {\n      return getAxisFromDataset(id, 'x', boundDs[0]) || getAxisFromDataset(id, 'y', boundDs[0]);\n    }\n  }\n  return {};\n}\n\nfunction mergeScaleConfig(config, options) {\n  const chartDefaults = overrides[config.type] || {scales: {}};\n  const configScales = options.scales || {};\n  const chartIndexAxis = getIndexAxis(config.type, options);\n  const scales = Object.create(null);\n\n  // First figure out first scale id's per axis.\n  Object.keys(configScales).forEach(id => {\n    const scaleConf = configScales[id];\n    if (!isObject(scaleConf)) {\n      return console.error(`Invalid scale configuration for scale: ${id}`);\n    }\n    if (scaleConf._proxy) {\n      return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n    }\n    const axis = determineAxis(id, scaleConf, retrieveAxisFromDatasets(id, config), defaults.scales[scaleConf.type]);\n    const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n    const defaultScaleOptions = chartDefaults.scales || {};\n    scales[id] = mergeIf(Object.create(null), [{axis}, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);\n  });\n\n  // Then merge dataset defaults to scale configs\n  config.data.datasets.forEach(dataset => {\n    const type = dataset.type || config.type;\n    const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n    const datasetDefaults = overrides[type] || {};\n    const defaultScaleOptions = datasetDefaults.scales || {};\n    Object.keys(defaultScaleOptions).forEach(defaultID => {\n      const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n      const id = dataset[axis + 'AxisID'] || axis;\n      scales[id] = scales[id] || Object.create(null);\n      mergeIf(scales[id], [{axis}, configScales[id], defaultScaleOptions[defaultID]]);\n    });\n  });\n\n  // apply scale defaults, if not overridden by dataset defaults\n  Object.keys(scales).forEach(key => {\n    const scale = scales[key];\n    mergeIf(scale, [defaults.scales[scale.type], defaults.scale]);\n  });\n\n  return scales;\n}\n\nfunction initOptions(config) {\n  const options = config.options || (config.options = {});\n\n  options.plugins = valueOrDefault(options.plugins, {});\n  options.scales = mergeScaleConfig(config, options);\n}\n\nfunction initData(data) {\n  data = data || {};\n  data.datasets = data.datasets || [];\n  data.labels = data.labels || [];\n  return data;\n}\n\nfunction initConfig(config) {\n  config = config || {};\n  config.data = initData(config.data);\n\n  initOptions(config);\n\n  return config;\n}\n\nconst keyCache = new Map();\nconst keysCached = new Set();\n\nfunction cachedKeys(cacheKey, generate) {\n  let keys = keyCache.get(cacheKey);\n  if (!keys) {\n    keys = generate();\n    keyCache.set(cacheKey, keys);\n    keysCached.add(keys);\n  }\n  return keys;\n}\n\nconst addIfFound = (set, obj, key) => {\n  const opts = resolveObjectKey(obj, key);\n  if (opts !== undefined) {\n    set.add(opts);\n  }\n};\n\nexport default class Config {\n  constructor(config) {\n    this._config = initConfig(config);\n    this._scopeCache = new Map();\n    this._resolverCache = new Map();\n  }\n\n  get platform() {\n    return this._config.platform;\n  }\n\n  get type() {\n    return this._config.type;\n  }\n\n  set type(type) {\n    this._config.type = type;\n  }\n\n  get data() {\n    return this._config.data;\n  }\n\n  set data(data) {\n    this._config.data = initData(data);\n  }\n\n  get options() {\n    return this._config.options;\n  }\n\n  set options(options) {\n    this._config.options = options;\n  }\n\n  get plugins() {\n    return this._config.plugins;\n  }\n\n  update() {\n    const config = this._config;\n    this.clearCache();\n    initOptions(config);\n  }\n\n  clearCache() {\n    this._scopeCache.clear();\n    this._resolverCache.clear();\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @return {string[][]}\n   */\n  datasetScopeKeys(datasetType) {\n    return cachedKeys(datasetType,\n      () => [[\n        `datasets.${datasetType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the option scope keys for resolving dataset animation options.\n   * These keys do not include the dataset itself, because it is not under options.\n   * @param {string} datasetType\n   * @param {string} transition\n   * @return {string[][]}\n   */\n  datasetAnimationScopeKeys(datasetType, transition) {\n    return cachedKeys(`${datasetType}.transition.${transition}`,\n      () => [\n        [\n          `datasets.${datasetType}.transitions.${transition}`,\n          `transitions.${transition}`,\n        ],\n        // The following are used for looking up the `animations` and `animation` keys\n        [\n          `datasets.${datasetType}`,\n          ''\n        ]\n      ]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving element options that belong\n   * to an dataset. These keys do not include the dataset itself, because it\n   * is not under options.\n   * @param {string} datasetType\n   * @param {string} elementType\n   * @return {string[][]}\n   */\n  datasetElementScopeKeys(datasetType, elementType) {\n    return cachedKeys(`${datasetType}-${elementType}`,\n      () => [[\n        `datasets.${datasetType}.elements.${elementType}`,\n        `datasets.${datasetType}`,\n        `elements.${elementType}`,\n        ''\n      ]]);\n  }\n\n  /**\n   * Returns the options scope keys for resolving plugin options.\n   * @param {{id: string, additionalOptionScopes?: string[]}} plugin\n   * @return {string[][]}\n   */\n  pluginScopeKeys(plugin) {\n    const id = plugin.id;\n    const type = this.type;\n    return cachedKeys(`${type}-plugin-${id}`,\n      () => [[\n        `plugins.${id}`,\n        ...plugin.additionalOptionScopes || [],\n      ]]);\n  }\n\n  /**\n   * @private\n   */\n  _cachedScopes(mainScope, resetCache) {\n    const _scopeCache = this._scopeCache;\n    let cache = _scopeCache.get(mainScope);\n    if (!cache || resetCache) {\n      cache = new Map();\n      _scopeCache.set(mainScope, cache);\n    }\n    return cache;\n  }\n\n  /**\n   * Resolves the objects from options and defaults for option value resolution.\n   * @param {object} mainScope - The main scope object for options\n   * @param {string[][]} keyLists - The arrays of keys in resolution order\n   * @param {boolean} [resetCache] - reset the cache for this mainScope\n   */\n  getOptionScopes(mainScope, keyLists, resetCache) {\n    const {options, type} = this;\n    const cache = this._cachedScopes(mainScope, resetCache);\n    const cached = cache.get(keyLists);\n    if (cached) {\n      return cached;\n    }\n\n    const scopes = new Set();\n\n    keyLists.forEach(keys => {\n      if (mainScope) {\n        scopes.add(mainScope);\n        keys.forEach(key => addIfFound(scopes, mainScope, key));\n      }\n      keys.forEach(key => addIfFound(scopes, options, key));\n      keys.forEach(key => addIfFound(scopes, overrides[type] || {}, key));\n      keys.forEach(key => addIfFound(scopes, defaults, key));\n      keys.forEach(key => addIfFound(scopes, descriptors, key));\n    });\n\n    const array = Array.from(scopes);\n    if (array.length === 0) {\n      array.push(Object.create(null));\n    }\n    if (keysCached.has(keyLists)) {\n      cache.set(keyLists, array);\n    }\n    return array;\n  }\n\n  /**\n   * Returns the option scopes for resolving chart options\n   * @return {object[]}\n   */\n  chartOptionScopes() {\n    const {options, type} = this;\n\n    return [\n      options,\n      overrides[type] || {},\n      defaults.datasets[type] || {}, // https://github.com/chartjs/Chart.js/issues/8531\n      {type},\n      defaults,\n      descriptors\n    ];\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {string[]} names\n   * @param {function|object} context\n   * @param {string[]} [prefixes]\n   * @return {object}\n   */\n  resolveNamedOptions(scopes, names, context, prefixes = ['']) {\n    const result = {$shared: true};\n    const {resolver, subPrefixes} = getResolver(this._resolverCache, scopes, prefixes);\n    let options = resolver;\n    if (needContext(resolver, names)) {\n      result.$shared = false;\n      context = isFunction(context) ? context() : context;\n      // subResolver is passed to scriptable options. It should not resolve to hover options.\n      const subResolver = this.createResolver(scopes, context, subPrefixes);\n      options = _attachContext(resolver, context, subResolver);\n    }\n\n    for (const prop of names) {\n      result[prop] = options[prop];\n    }\n    return result;\n  }\n\n  /**\n   * @param {object[]} scopes\n   * @param {object} [context]\n   * @param {string[]} [prefixes]\n   * @param {{scriptable: boolean, indexable: boolean, allKeys?: boolean}} [descriptorDefaults]\n   */\n  createResolver(scopes, context, prefixes = [''], descriptorDefaults) {\n    const {resolver} = getResolver(this._resolverCache, scopes, prefixes);\n    return isObject(context)\n      ? _attachContext(resolver, context, undefined, descriptorDefaults)\n      : resolver;\n  }\n}\n\nfunction getResolver(resolverCache, scopes, prefixes) {\n  let cache = resolverCache.get(scopes);\n  if (!cache) {\n    cache = new Map();\n    resolverCache.set(scopes, cache);\n  }\n  const cacheKey = prefixes.join();\n  let cached = cache.get(cacheKey);\n  if (!cached) {\n    const resolver = _createResolver(scopes, prefixes);\n    cached = {\n      resolver,\n      subPrefixes: prefixes.filter(p => !p.toLowerCase().includes('hover'))\n    };\n    cache.set(cacheKey, cached);\n  }\n  return cached;\n}\n\nconst hasFunction = value => isObject(value)\n  && Object.getOwnPropertyNames(value).reduce((acc, key) => acc || isFunction(value[key]), false);\n\nfunction needContext(proxy, names) {\n  const {isScriptable, isIndexable} = _descriptors(proxy);\n\n  for (const prop of names) {\n    const scriptable = isScriptable(prop);\n    const indexable = isIndexable(prop);\n    const value = (indexable || scriptable) && proxy[prop];\n    if ((scriptable && (isFunction(value) || hasFunction(value)))\n      || (indexable && isArray(value))) {\n      return true;\n    }\n  }\n  return false;\n}\n","import animator from './core.animator.js';\nimport defaults, {overrides} from './core.defaults.js';\nimport Interaction from './core.interaction.js';\nimport layouts from './core.layouts.js';\nimport {_detectPlatform} from '../platform/index.js';\nimport PluginService from './core.plugins.js';\nimport registry from './core.registry.js';\nimport Config, {determineAxis, getIndexAxis} from './core.config.js';\nimport {retinaScale, _isDomSupported} from '../helpers/helpers.dom.js';\nimport {each, callback as callCallback, uid, valueOrDefault, _elementsEqual, isNullOrUndef, setsEqual, defined, isFunction, _isClickEvent} from '../helpers/helpers.core.js';\nimport {clearCanvas, clipArea, createContext, unclipArea, _isPointInArea} from '../helpers/index.js';\n// @ts-ignore\nimport {version} from '../../package.json';\nimport {debounce} from '../helpers/helpers.extras.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').Point } Point\n */\n\nconst KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];\nfunction positionIsHorizontal(position, axis) {\n  return position === 'top' || position === 'bottom' || (KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x');\n}\n\nfunction compare2Level(l1, l2) {\n  return function(a, b) {\n    return a[l1] === b[l1]\n      ? a[l2] - b[l2]\n      : a[l1] - b[l1];\n  };\n}\n\nfunction onAnimationsComplete(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n\n  chart.notifyPlugins('afterRender');\n  callCallback(animationOptions && animationOptions.onComplete, [context], chart);\n}\n\nfunction onAnimationProgress(context) {\n  const chart = context.chart;\n  const animationOptions = chart.options.animation;\n  callCallback(animationOptions && animationOptions.onProgress, [context], chart);\n}\n\n/**\n * Chart.js can take a string id of a canvas element, a 2d context, or a canvas element itself.\n * Attempt to unwrap the item passed into the chart constructor so that it is a canvas element (if possible).\n */\nfunction getCanvas(item) {\n  if (_isDomSupported() && typeof item === 'string') {\n    item = document.getElementById(item);\n  } else if (item && item.length) {\n    // Support for array based queries (such as jQuery)\n    item = item[0];\n  }\n\n  if (item && item.canvas) {\n    // Support for any object associated to a canvas (including a context2d)\n    item = item.canvas;\n  }\n  return item;\n}\n\nconst instances = {};\nconst getChart = (key) => {\n  const canvas = getCanvas(key);\n  return Object.values(instances).filter((c) => c.canvas === canvas).pop();\n};\n\nfunction moveNumericKeys(obj, start, move) {\n  const keys = Object.keys(obj);\n  for (const key of keys) {\n    const intKey = +key;\n    if (intKey >= start) {\n      const value = obj[key];\n      delete obj[key];\n      if (move > 0 || intKey > start) {\n        obj[intKey + move] = value;\n      }\n    }\n  }\n}\n\n/**\n * @param {ChartEvent} e\n * @param {ChartEvent|null} lastEvent\n * @param {boolean} inChartArea\n * @param {boolean} isClick\n * @returns {ChartEvent|null}\n */\nfunction determineLastEvent(e, lastEvent, inChartArea, isClick) {\n  if (!inChartArea || e.type === 'mouseout') {\n    return null;\n  }\n  if (isClick) {\n    return lastEvent;\n  }\n  return e;\n}\n\nfunction getSizeForArea(scale, chartArea, field) {\n  return scale.options.clip ? scale[field] : chartArea[field];\n}\n\nfunction getDatasetArea(meta, chartArea) {\n  const {xScale, yScale} = meta;\n  if (xScale && yScale) {\n    return {\n      left: getSizeForArea(xScale, chartArea, 'left'),\n      right: getSizeForArea(xScale, chartArea, 'right'),\n      top: getSizeForArea(yScale, chartArea, 'top'),\n      bottom: getSizeForArea(yScale, chartArea, 'bottom')\n    };\n  }\n  return chartArea;\n}\n\nclass Chart {\n\n  static defaults = defaults;\n  static instances = instances;\n  static overrides = overrides;\n  static registry = registry;\n  static version = version;\n  static getChart = getChart;\n\n  static register(...items) {\n    registry.add(...items);\n    invalidatePlugins();\n  }\n\n  static unregister(...items) {\n    registry.remove(...items);\n    invalidatePlugins();\n  }\n\n  // eslint-disable-next-line max-statements\n  constructor(item, userConfig) {\n    const config = this.config = new Config(userConfig);\n    const initialCanvas = getCanvas(item);\n    const existingChart = getChart(initialCanvas);\n    if (existingChart) {\n      throw new Error(\n        'Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' +\n\t\t\t\t' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.'\n      );\n    }\n\n    const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n\n    this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n    this.platform.updateConfig(config);\n\n    const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n    const canvas = context && context.canvas;\n    const height = canvas && canvas.height;\n    const width = canvas && canvas.width;\n\n    this.id = uid();\n    this.ctx = context;\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this._options = options;\n    // Store the previously used aspect ratio to determine if a resize\n    // is needed during updates. Do this after _options is set since\n    // aspectRatio uses a getter\n    this._aspectRatio = this.aspectRatio;\n    this._layers = [];\n    this._metasets = [];\n    this._stacks = undefined;\n    this.boxes = [];\n    this.currentDevicePixelRatio = undefined;\n    this.chartArea = undefined;\n    this._active = [];\n    this._lastEvent = undefined;\n    this._listeners = {};\n    /** @type {?{attach?: function, detach?: function, resize?: function}} */\n    this._responsiveListeners = undefined;\n    this._sortedMetasets = [];\n    this.scales = {};\n    this._plugins = new PluginService();\n    this.$proxies = {};\n    this._hiddenIndices = {};\n    this.attached = false;\n    this._animationsDisabled = undefined;\n    this.$context = undefined;\n    this._doResize = debounce(mode => this.update(mode), options.resizeDelay || 0);\n    this._dataChanges = [];\n\n    // Add the chart instance to the global namespace\n    instances[this.id] = this;\n\n    if (!context || !canvas) {\n      // The given item is not a compatible context2d element, let's return before finalizing\n      // the chart initialization but after setting basic chart / controller properties that\n      // can help to figure out that the chart is not valid (e.g chart.canvas !== null);\n      // https://github.com/chartjs/Chart.js/issues/2807\n      console.error(\"Failed to create chart: can't acquire context from the given item\");\n      return;\n    }\n\n    animator.listen(this, 'complete', onAnimationsComplete);\n    animator.listen(this, 'progress', onAnimationProgress);\n\n    this._initialize();\n    if (this.attached) {\n      this.update();\n    }\n  }\n\n  get aspectRatio() {\n    const {options: {aspectRatio, maintainAspectRatio}, width, height, _aspectRatio} = this;\n    if (!isNullOrUndef(aspectRatio)) {\n      // If aspectRatio is defined in options, use that.\n      return aspectRatio;\n    }\n\n    if (maintainAspectRatio && _aspectRatio) {\n      // If maintainAspectRatio is truthly and we had previously determined _aspectRatio, use that\n      return _aspectRatio;\n    }\n\n    // Calculate\n    return height ? width / height : null;\n  }\n\n  get data() {\n    return this.config.data;\n  }\n\n  set data(data) {\n    this.config.data = data;\n  }\n\n  get options() {\n    return this._options;\n  }\n\n  set options(options) {\n    this.config.options = options;\n  }\n\n  get registry() {\n    return registry;\n  }\n\n  /**\n\t * @private\n\t */\n  _initialize() {\n    // Before init plugin notification\n    this.notifyPlugins('beforeInit');\n\n    if (this.options.responsive) {\n      this.resize();\n    } else {\n      retinaScale(this, this.options.devicePixelRatio);\n    }\n\n    this.bindEvents();\n\n    // After init plugin notification\n    this.notifyPlugins('afterInit');\n\n    return this;\n  }\n\n  clear() {\n    clearCanvas(this.canvas, this.ctx);\n    return this;\n  }\n\n  stop() {\n    animator.stop(this);\n    return this;\n  }\n\n  /**\n\t * Resize the chart to its container or to explicit dimensions.\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n  resize(width, height) {\n    if (!animator.running(this)) {\n      this._resize(width, height);\n    } else {\n      this._resizeBeforeDraw = {width, height};\n    }\n  }\n\n  _resize(width, height) {\n    const options = this.options;\n    const canvas = this.canvas;\n    const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n    const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n    const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n    const mode = this.width ? 'resize' : 'attach';\n\n    this.width = newSize.width;\n    this.height = newSize.height;\n    this._aspectRatio = this.aspectRatio;\n    if (!retinaScale(this, newRatio, true)) {\n      return;\n    }\n\n    this.notifyPlugins('resize', {size: newSize});\n\n    callCallback(options.onResize, [this, newSize], this);\n\n    if (this.attached) {\n      if (this._doResize(mode)) {\n        // The resize update is delayed, only draw without updating.\n        this.render();\n      }\n    }\n  }\n\n  ensureScalesHaveIDs() {\n    const options = this.options;\n    const scalesOptions = options.scales || {};\n\n    each(scalesOptions, (axisOptions, axisID) => {\n      axisOptions.id = axisID;\n    });\n  }\n\n  /**\n\t * Builds a map of scale ID to scale object for future lookup.\n\t */\n  buildOrUpdateScales() {\n    const options = this.options;\n    const scaleOpts = options.scales;\n    const scales = this.scales;\n    const updated = Object.keys(scales).reduce((obj, id) => {\n      obj[id] = false;\n      return obj;\n    }, {});\n    let items = [];\n\n    if (scaleOpts) {\n      items = items.concat(\n        Object.keys(scaleOpts).map((id) => {\n          const scaleOptions = scaleOpts[id];\n          const axis = determineAxis(id, scaleOptions);\n          const isRadial = axis === 'r';\n          const isHorizontal = axis === 'x';\n          return {\n            options: scaleOptions,\n            dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n            dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n          };\n        })\n      );\n    }\n\n    each(items, (item) => {\n      const scaleOptions = item.options;\n      const id = scaleOptions.id;\n      const axis = determineAxis(id, scaleOptions);\n      const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n\n      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n        scaleOptions.position = item.dposition;\n      }\n\n      updated[id] = true;\n      let scale = null;\n      if (id in scales && scales[id].type === scaleType) {\n        scale = scales[id];\n      } else {\n        const scaleClass = registry.getScale(scaleType);\n        scale = new scaleClass({\n          id,\n          type: scaleType,\n          ctx: this.ctx,\n          chart: this\n        });\n        scales[scale.id] = scale;\n      }\n\n      scale.init(scaleOptions, options);\n    });\n    // clear up discarded scales\n    each(updated, (hasUpdated, id) => {\n      if (!hasUpdated) {\n        delete scales[id];\n      }\n    });\n\n    each(scales, (scale) => {\n      layouts.configure(this, scale, scale.options);\n      layouts.addBox(this, scale);\n    });\n  }\n\n  /**\n\t * @private\n\t */\n  _updateMetasets() {\n    const metasets = this._metasets;\n    const numData = this.data.datasets.length;\n    const numMeta = metasets.length;\n\n    metasets.sort((a, b) => a.index - b.index);\n    if (numMeta > numData) {\n      for (let i = numData; i < numMeta; ++i) {\n        this._destroyDatasetMeta(i);\n      }\n      metasets.splice(numData, numMeta - numData);\n    }\n    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n  }\n\n  /**\n\t * @private\n\t */\n  _removeUnreferencedMetasets() {\n    const {_metasets: metasets, data: {datasets}} = this;\n    if (metasets.length > datasets.length) {\n      delete this._stacks;\n    }\n    metasets.forEach((meta, index) => {\n      if (datasets.filter(x => x === meta._dataset).length === 0) {\n        this._destroyDatasetMeta(index);\n      }\n    });\n  }\n\n  buildOrUpdateControllers() {\n    const newControllers = [];\n    const datasets = this.data.datasets;\n    let i, ilen;\n\n    this._removeUnreferencedMetasets();\n\n    for (i = 0, ilen = datasets.length; i < ilen; i++) {\n      const dataset = datasets[i];\n      let meta = this.getDatasetMeta(i);\n      const type = dataset.type || this.config.type;\n\n      if (meta.type && meta.type !== type) {\n        this._destroyDatasetMeta(i);\n        meta = this.getDatasetMeta(i);\n      }\n      meta.type = type;\n      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n      meta.order = dataset.order || 0;\n      meta.index = i;\n      meta.label = '' + dataset.label;\n      meta.visible = this.isDatasetVisible(i);\n\n      if (meta.controller) {\n        meta.controller.updateIndex(i);\n        meta.controller.linkScales();\n      } else {\n        const ControllerClass = registry.getController(type);\n        const {datasetElementType, dataElementType} = defaults.datasets[type];\n        Object.assign(ControllerClass, {\n          dataElementType: registry.getElement(dataElementType),\n          datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n        });\n        meta.controller = new ControllerClass(this, i);\n        newControllers.push(meta.controller);\n      }\n    }\n\n    this._updateMetasets();\n    return newControllers;\n  }\n\n  /**\n\t * Reset the elements of all datasets\n\t * @private\n\t */\n  _resetElements() {\n    each(this.data.datasets, (dataset, datasetIndex) => {\n      this.getDatasetMeta(datasetIndex).controller.reset();\n    }, this);\n  }\n\n  /**\n\t* Resets the chart back to its state before the initial animation\n\t*/\n  reset() {\n    this._resetElements();\n    this.notifyPlugins('reset');\n  }\n\n  update(mode) {\n    const config = this.config;\n\n    config.update();\n    const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n    const animsDisabled = this._animationsDisabled = !options.animation;\n\n    this._updateScales();\n    this._checkEventBindings();\n    this._updateHiddenIndices();\n\n    // plugins options references might have change, let's invalidate the cache\n    // https://github.com/chartjs/Chart.js/issues/5111#issuecomment-355934167\n    this._plugins.invalidate();\n\n    if (this.notifyPlugins('beforeUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    // Make sure dataset controllers are updated and new controllers are reset\n    const newControllers = this.buildOrUpdateControllers();\n\n    this.notifyPlugins('beforeElementsUpdate');\n\n    // Make sure all dataset controllers have correct meta data counts\n    let minPadding = 0;\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; i++) {\n      const {controller} = this.getDatasetMeta(i);\n      const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n      // New controllers will be reset after the layout pass, so we only want to modify\n      // elements added to new datasets\n      controller.buildOrUpdateElements(reset);\n      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n    }\n    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n    this._updateLayout(minPadding);\n\n    // Only reset the controllers if we have animations\n    if (!animsDisabled) {\n      // Can only reset the new controllers after the scales have been updated\n      // Reset is done to get the starting point for the initial animation\n      each(newControllers, (controller) => {\n        controller.reset();\n      });\n    }\n\n    this._updateDatasets(mode);\n\n    // Do this before render so that any plugins that need final scale updates can use it\n    this.notifyPlugins('afterUpdate', {mode});\n\n    this._layers.sort(compare2Level('z', '_idx'));\n\n    // Replay last event from before update, or set hover styles on active elements\n    const {_active, _lastEvent} = this;\n    if (_lastEvent) {\n      this._eventHandler(_lastEvent, true);\n    } else if (_active.length) {\n      this._updateHoverStyles(_active, _active, true);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  _updateScales() {\n    each(this.scales, (scale) => {\n      layouts.removeBox(this, scale);\n    });\n\n    this.ensureScalesHaveIDs();\n    this.buildOrUpdateScales();\n  }\n\n  /**\n   * @private\n   */\n  _checkEventBindings() {\n    const options = this.options;\n    const existingEvents = new Set(Object.keys(this._listeners));\n    const newEvents = new Set(options.events);\n\n    if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n      // The configured events have changed. Rebind.\n      this.unbindEvents();\n      this.bindEvents();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _updateHiddenIndices() {\n    const {_hiddenIndices} = this;\n    const changes = this._getUniformDataChanges() || [];\n    for (const {method, start, count} of changes) {\n      const move = method === '_removeElements' ? -count : count;\n      moveNumericKeys(_hiddenIndices, start, move);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _getUniformDataChanges() {\n    const _dataChanges = this._dataChanges;\n    if (!_dataChanges || !_dataChanges.length) {\n      return;\n    }\n\n    this._dataChanges = [];\n    const datasetCount = this.data.datasets.length;\n    const makeSet = (idx) => new Set(\n      _dataChanges\n        .filter(c => c[0] === idx)\n        .map((c, i) => i + ',' + c.splice(1).join(','))\n    );\n\n    const changeSet = makeSet(0);\n    for (let i = 1; i < datasetCount; i++) {\n      if (!setsEqual(changeSet, makeSet(i))) {\n        return;\n      }\n    }\n    return Array.from(changeSet)\n      .map(c => c.split(','))\n      .map(a => ({method: a[1], start: +a[2], count: +a[3]}));\n  }\n\n  /**\n\t * Updates the chart layout unless a plugin returns `false` to the `beforeLayout`\n\t * hook, in which case, plugins will not be called on `afterLayout`.\n\t * @private\n\t */\n  _updateLayout(minPadding) {\n    if (this.notifyPlugins('beforeLayout', {cancelable: true}) === false) {\n      return;\n    }\n\n    layouts.update(this, this.width, this.height, minPadding);\n\n    const area = this.chartArea;\n    const noArea = area.width <= 0 || area.height <= 0;\n\n    this._layers = [];\n    each(this.boxes, (box) => {\n      if (noArea && box.position === 'chartArea') {\n        // Skip drawing and configuring chartArea boxes when chartArea is zero or negative\n        return;\n      }\n\n      // configure is called twice, once in core.scale.update and once here.\n      // Here the boxes are fully updated and at their final positions.\n      if (box.configure) {\n        box.configure();\n      }\n      this._layers.push(...box._layers());\n    }, this);\n\n    this._layers.forEach((item, index) => {\n      item._idx = index;\n    });\n\n    this.notifyPlugins('afterLayout');\n  }\n\n  /**\n\t * Updates all datasets unless a plugin returns `false` to the `beforeDatasetsUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetsUpdate`.\n\t * @private\n\t */\n  _updateDatasets(mode) {\n    if (this.notifyPlugins('beforeDatasetsUpdate', {mode, cancelable: true}) === false) {\n      return;\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this.getDatasetMeta(i).controller.configure();\n    }\n\n    for (let i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._updateDataset(i, isFunction(mode) ? mode({datasetIndex: i}) : mode);\n    }\n\n    this.notifyPlugins('afterDatasetsUpdate', {mode});\n  }\n\n  /**\n\t * Updates dataset at index unless a plugin returns `false` to the `beforeDatasetUpdate`\n\t * hook, in which case, plugins will not be called on `afterDatasetUpdate`.\n\t * @private\n\t */\n  _updateDataset(index, mode) {\n    const meta = this.getDatasetMeta(index);\n    const args = {meta, index, mode, cancelable: true};\n\n    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n      return;\n    }\n\n    meta.controller._update(mode);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetUpdate', args);\n  }\n\n  render() {\n    if (this.notifyPlugins('beforeRender', {cancelable: true}) === false) {\n      return;\n    }\n\n    if (animator.has(this)) {\n      if (this.attached && !animator.running(this)) {\n        animator.start(this);\n      }\n    } else {\n      this.draw();\n      onAnimationsComplete({chart: this});\n    }\n  }\n\n  draw() {\n    let i;\n    if (this._resizeBeforeDraw) {\n      const {width, height} = this._resizeBeforeDraw;\n      this._resize(width, height);\n      this._resizeBeforeDraw = null;\n    }\n    this.clear();\n\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n\n    if (this.notifyPlugins('beforeDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    // Because of plugin hooks (before/afterDatasetsDraw), datasets can't\n    // currently be part of layers. Instead, we draw\n    // layers <= 0 before(default, backward compat), and the rest after\n    const layers = this._layers;\n    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this._drawDatasets();\n\n    // Rest of layers\n    for (; i < layers.length; ++i) {\n      layers[i].draw(this.chartArea);\n    }\n\n    this.notifyPlugins('afterDraw');\n  }\n\n  /**\n\t * @private\n\t */\n  _getSortedDatasetMetas(filterVisible) {\n    const metasets = this._sortedMetasets;\n    const result = [];\n    let i, ilen;\n\n    for (i = 0, ilen = metasets.length; i < ilen; ++i) {\n      const meta = metasets[i];\n      if (!filterVisible || meta.visible) {\n        result.push(meta);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n\t * Gets the visible dataset metas in drawing order\n\t * @return {object[]}\n\t */\n  getSortedVisibleDatasetMetas() {\n    return this._getSortedDatasetMetas(true);\n  }\n\n  /**\n\t * Draws all datasets unless a plugin returns `false` to the `beforeDatasetsDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetsDraw`.\n\t * @private\n\t */\n  _drawDatasets() {\n    if (this.notifyPlugins('beforeDatasetsDraw', {cancelable: true}) === false) {\n      return;\n    }\n\n    const metasets = this.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      this._drawDataset(metasets[i]);\n    }\n\n    this.notifyPlugins('afterDatasetsDraw');\n  }\n\n  /**\n\t * Draws dataset at index unless a plugin returns `false` to the `beforeDatasetDraw`\n\t * hook, in which case, plugins will not be called on `afterDatasetDraw`.\n\t * @private\n\t */\n  _drawDataset(meta) {\n    const ctx = this.ctx;\n    const clip = meta._clip;\n    const useClip = !clip.disabled;\n    const area = getDatasetArea(meta, this.chartArea);\n    const args = {\n      meta,\n      index: meta.index,\n      cancelable: true\n    };\n\n    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n      return;\n    }\n\n    if (useClip) {\n      clipArea(ctx, {\n        left: clip.left === false ? 0 : area.left - clip.left,\n        right: clip.right === false ? this.width : area.right + clip.right,\n        top: clip.top === false ? 0 : area.top - clip.top,\n        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n      });\n    }\n\n    meta.controller.draw();\n\n    if (useClip) {\n      unclipArea(ctx);\n    }\n\n    args.cancelable = false;\n    this.notifyPlugins('afterDatasetDraw', args);\n  }\n\n  /**\n   * Checks whether the given point is in the chart area.\n   * @param {Point} point - in relative coordinates (see, e.g., getRelativePosition)\n   * @returns {boolean}\n   */\n  isPointInArea(point) {\n    return _isPointInArea(point, this.chartArea, this._minPadding);\n  }\n\n  getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n    const method = Interaction.modes[mode];\n    if (typeof method === 'function') {\n      return method(this, e, options, useFinalPosition);\n    }\n\n    return [];\n  }\n\n  getDatasetMeta(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    const metasets = this._metasets;\n    let meta = metasets.filter(x => x && x._dataset === dataset).pop();\n\n    if (!meta) {\n      meta = {\n        type: null,\n        data: [],\n        dataset: null,\n        controller: null,\n        hidden: null,\t\t\t// See isDatasetVisible() comment\n        xAxisID: null,\n        yAxisID: null,\n        order: dataset && dataset.order || 0,\n        index: datasetIndex,\n        _dataset: dataset,\n        _parsed: [],\n        _sorted: false\n      };\n      metasets.push(meta);\n    }\n\n    return meta;\n  }\n\n  getContext() {\n    return this.$context || (this.$context = createContext(null, {chart: this, type: 'chart'}));\n  }\n\n  getVisibleDatasetCount() {\n    return this.getSortedVisibleDatasetMetas().length;\n  }\n\n  isDatasetVisible(datasetIndex) {\n    const dataset = this.data.datasets[datasetIndex];\n    if (!dataset) {\n      return false;\n    }\n\n    const meta = this.getDatasetMeta(datasetIndex);\n\n    // meta.hidden is a per chart dataset hidden flag override with 3 states: if true or false,\n    // the dataset.hidden value is ignored, else if null, the dataset hidden state is returned.\n    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n  }\n\n  setDatasetVisibility(datasetIndex, visible) {\n    const meta = this.getDatasetMeta(datasetIndex);\n    meta.hidden = !visible;\n  }\n\n  toggleDataVisibility(index) {\n    this._hiddenIndices[index] = !this._hiddenIndices[index];\n  }\n\n  getDataVisibility(index) {\n    return !this._hiddenIndices[index];\n  }\n\n  /**\n\t * @private\n\t */\n  _updateVisibility(datasetIndex, dataIndex, visible) {\n    const mode = visible ? 'show' : 'hide';\n    const meta = this.getDatasetMeta(datasetIndex);\n    const anims = meta.controller._resolveAnimations(undefined, mode);\n\n    if (defined(dataIndex)) {\n      meta.data[dataIndex].hidden = !visible;\n      this.update();\n    } else {\n      this.setDatasetVisibility(datasetIndex, visible);\n      // Animate visible state, so hide animation can be seen. This could be handled better if update / updateDataset returned a Promise.\n      anims.update(meta, {visible});\n      this.update((ctx) => ctx.datasetIndex === datasetIndex ? mode : undefined);\n    }\n  }\n\n  hide(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, false);\n  }\n\n  show(datasetIndex, dataIndex) {\n    this._updateVisibility(datasetIndex, dataIndex, true);\n  }\n\n  /**\n\t * @private\n\t */\n  _destroyDatasetMeta(datasetIndex) {\n    const meta = this._metasets[datasetIndex];\n    if (meta && meta.controller) {\n      meta.controller._destroy();\n    }\n    delete this._metasets[datasetIndex];\n  }\n\n  _stop() {\n    let i, ilen;\n    this.stop();\n    animator.remove(this);\n\n    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {\n      this._destroyDatasetMeta(i);\n    }\n  }\n\n  destroy() {\n    this.notifyPlugins('beforeDestroy');\n    const {canvas, ctx} = this;\n\n    this._stop();\n    this.config.clearCache();\n\n    if (canvas) {\n      this.unbindEvents();\n      clearCanvas(canvas, ctx);\n      this.platform.releaseContext(ctx);\n      this.canvas = null;\n      this.ctx = null;\n    }\n\n    delete instances[this.id];\n\n    this.notifyPlugins('afterDestroy');\n  }\n\n  toBase64Image(...args) {\n    return this.canvas.toDataURL(...args);\n  }\n\n  /**\n\t * @private\n\t */\n  bindEvents() {\n    this.bindUserEvents();\n    if (this.options.responsive) {\n      this.bindResponsiveEvents();\n    } else {\n      this.attached = true;\n    }\n  }\n\n  /**\n   * @private\n   */\n  bindUserEvents() {\n    const listeners = this._listeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n\n    const listener = (e, x, y) => {\n      e.offsetX = x;\n      e.offsetY = y;\n      this._eventHandler(e);\n    };\n\n    each(this.options.events, (type) => _add(type, listener));\n  }\n\n  /**\n   * @private\n   */\n  bindResponsiveEvents() {\n    if (!this._responsiveListeners) {\n      this._responsiveListeners = {};\n    }\n    const listeners = this._responsiveListeners;\n    const platform = this.platform;\n\n    const _add = (type, listener) => {\n      platform.addEventListener(this, type, listener);\n      listeners[type] = listener;\n    };\n    const _remove = (type, listener) => {\n      if (listeners[type]) {\n        platform.removeEventListener(this, type, listener);\n        delete listeners[type];\n      }\n    };\n\n    const listener = (width, height) => {\n      if (this.canvas) {\n        this.resize(width, height);\n      }\n    };\n\n    let detached; // eslint-disable-line prefer-const\n    const attached = () => {\n      _remove('attach', attached);\n\n      this.attached = true;\n      this.resize();\n\n      _add('resize', listener);\n      _add('detach', detached);\n    };\n\n    detached = () => {\n      this.attached = false;\n\n      _remove('resize', listener);\n\n      // Stop animating and remove metasets, so when re-attached, the animations start from beginning.\n      this._stop();\n      this._resize(0, 0);\n\n      _add('attach', attached);\n    };\n\n    if (platform.isAttached(this.canvas)) {\n      attached();\n    } else {\n      detached();\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  unbindEvents() {\n    each(this._listeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._listeners = {};\n\n    each(this._responsiveListeners, (listener, type) => {\n      this.platform.removeEventListener(this, type, listener);\n    });\n    this._responsiveListeners = undefined;\n  }\n\n  updateHoverStyle(items, mode, enabled) {\n    const prefix = enabled ? 'set' : 'remove';\n    let meta, item, i, ilen;\n\n    if (mode === 'dataset') {\n      meta = this.getDatasetMeta(items[0].datasetIndex);\n      meta.controller['_' + prefix + 'DatasetHoverStyle']();\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      item = items[i];\n      const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n      if (controller) {\n        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n      }\n    }\n  }\n\n  /**\n\t * Get active (hovered) elements\n\t * @returns array\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active (hovered) elements\n\t * @param {array} activeElements New active data points\n\t */\n  setActiveElements(activeElements) {\n    const lastActive = this._active || [];\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.getDatasetMeta(datasetIndex);\n      if (!meta) {\n        throw new Error('No dataset found at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(active, lastActive);\n\n    if (changed) {\n      this._active = active;\n      // Make sure we don't use the previous mouse event to override the active elements in update.\n      this._lastEvent = null;\n      this._updateHoverStyles(active, lastActive);\n    }\n  }\n\n  /**\n\t * Calls enabled plugins on the specified hook and with the given args.\n\t * This method immediately returns as soon as a plugin explicitly returns false. The\n\t * returned value can be used, for instance, to interrupt the current action.\n\t * @param {string} hook - The name of the plugin method to call (e.g. 'beforeUpdate').\n\t * @param {Object} [args] - Extra arguments to apply to the hook call.\n   * @param {import('./core.plugins.js').filterCallback} [filter] - Filtering function for limiting which plugins are notified\n\t * @returns {boolean} false if any of the plugins return false, else returns true.\n\t */\n  notifyPlugins(hook, args, filter) {\n    return this._plugins.notify(this, hook, args, filter);\n  }\n\n  /**\n   * Check if a plugin with the specific ID is registered and enabled\n   * @param {string} pluginId - The ID of the plugin of which to check if it is enabled\n   * @returns {boolean}\n   */\n  isPluginEnabled(pluginId) {\n    return this._plugins._cache.filter(p => p.plugin.id === pluginId).length === 1;\n  }\n\n  /**\n\t * @private\n\t */\n  _updateHoverStyles(active, lastActive, replay) {\n    const hoverOptions = this.options.hover;\n    const diff = (a, b) => a.filter(x => !b.some(y => x.datasetIndex === y.datasetIndex && x.index === y.index));\n    const deactivated = diff(lastActive, active);\n    const activated = replay ? active : diff(active, lastActive);\n\n    if (deactivated.length) {\n      this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n    }\n\n    if (activated.length && hoverOptions.mode) {\n      this.updateHoverStyle(activated, hoverOptions.mode, true);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _eventHandler(e, replay) {\n    const args = {\n      event: e,\n      replay,\n      cancelable: true,\n      inChartArea: this.isPointInArea(e)\n    };\n    const eventFilter = (plugin) => (plugin.options.events || this.options.events).includes(e.native.type);\n\n    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n      return;\n    }\n\n    const changed = this._handleEvent(e, replay, args.inChartArea);\n\n    args.cancelable = false;\n    this.notifyPlugins('afterEvent', args, eventFilter);\n\n    if (changed || args.changed) {\n      this.render();\n    }\n\n    return this;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e the event to handle\n\t * @param {boolean} [replay] - true if the event was replayed by `update`\n   * @param {boolean} [inChartArea] - true if the event is inside chartArea\n\t * @return {boolean} true if the chart needs to re-render\n\t * @private\n\t */\n  _handleEvent(e, replay, inChartArea) {\n    const {_active: lastActive = [], options} = this;\n\n    // If the event is replayed from `update`, we should evaluate with the final positions.\n    //\n    // The `replay`:\n    // It's the last event (excluding click) that has occurred before `update`.\n    // So mouse has not moved. It's also over the chart, because there is a `replay`.\n    //\n    // The why:\n    // If animations are active, the elements haven't moved yet compared to state before update.\n    // But if they will, we are activating the elements that would be active, if this check\n    // was done after the animations have completed. => \"final positions\".\n    // If there is no animations, the \"final\" and \"current\" positions are equal.\n    // This is done so we do not have to evaluate the active elements each animation frame\n    // - it would be expensive.\n    const useFinalPosition = replay;\n    const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n    const isClick = _isClickEvent(e);\n    const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n\n    if (inChartArea) {\n      // Set _lastEvent to null while we are processing the event handlers.\n      // This prevents recursion if the handler calls chart.update()\n      this._lastEvent = null;\n\n      // Invoke onHover hook\n      callCallback(options.onHover, [e, active, this], this);\n\n      if (isClick) {\n        callCallback(options.onClick, [e, active, this], this);\n      }\n    }\n\n    const changed = !_elementsEqual(active, lastActive);\n    if (changed || replay) {\n      this._active = active;\n      this._updateHoverStyles(active, lastActive, replay);\n    }\n\n    this._lastEvent = lastEvent;\n\n    return changed;\n  }\n\n  /**\n   * @param {ChartEvent} e - The event\n   * @param {import('../types/index.js').ActiveElement[]} lastActive - Previously active elements\n   * @param {boolean} inChartArea - Is the envent inside chartArea\n   * @param {boolean} useFinalPosition - Should the evaluation be done with current or final (after animation) element positions\n   * @returns {import('../types/index.js').ActiveElement[]} - The active elements\n   * @pravate\n   */\n  _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    const hoverOptions = this.options.hover;\n    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n  }\n}\n\n// @ts-ignore\nfunction invalidatePlugins() {\n  return each(Chart.instances, (chart) => chart._plugins.invalidate());\n}\n\nexport default Chart;\n","import {_isDomSupported} from '../helpers/index.js';\nimport BasePlatform from './platform.base.js';\nimport BasicPlatform from './platform.basic.js';\nimport DomPlatform from './platform.dom.js';\n\nexport function _detectPlatform(canvas) {\n  if (!_isDomSupported() || (typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n    return BasicPlatform;\n  }\n  return DomPlatform;\n}\n\nexport {BasePlatform, BasicPlatform, DomPlatform};\n","import Element from '../core/core.element.js';\nimport {_angleBetween, getAngleFromPoint, TAU, HALF_PI, valueOrDefault} from '../helpers/index.js';\nimport {PI, _isBetween, _limitValue} from '../helpers/helpers.math.js';\nimport {_readValueToProps} from '../helpers/helpers.options.js';\nimport type {ArcOptions, Point} from '../types/index.js';\n\n\nfunction clipArc(ctx: CanvasRenderingContext2D, element: ArcElement, endAngle: number) {\n  const {startAngle, pixelMargin, x, y, outerRadius, innerRadius} = element;\n  let angleMargin = pixelMargin / outerRadius;\n\n  // Draw an inner border by clipping the arc and drawing a double-width border\n  // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n  ctx.beginPath();\n  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n  if (innerRadius > pixelMargin) {\n    angleMargin = pixelMargin / innerRadius;\n    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n  } else {\n    ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n  }\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction toRadiusCorners(value) {\n  return _readValueToProps(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);\n}\n\n/**\n * Parse border radius from the provided options\n */\nfunction parseBorderRadius(arc: ArcElement, innerRadius: number, outerRadius: number, angleDelta: number) {\n  const o = toRadiusCorners(arc.options.borderRadius);\n  const halfThickness = (outerRadius - innerRadius) / 2;\n  const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n\n  // Outer limits are complicated. We want to compute the available angular distance at\n  // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n  // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n  //\n  // If the borderRadius is large, that value can become negative.\n  // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n  // we know that the thickness term will dominate and compute the limits at that point\n  const computeOuterLimit = (val) => {\n    const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n    return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n  };\n\n  return {\n    outerStart: computeOuterLimit(o.outerStart),\n    outerEnd: computeOuterLimit(o.outerEnd),\n    innerStart: _limitValue(o.innerStart, 0, innerLimit),\n    innerEnd: _limitValue(o.innerEnd, 0, innerLimit),\n  };\n}\n\n/**\n * Convert (r, 𝜃) to (x, y)\n */\nfunction rThetaToXY(r: number, theta: number, x: number, y: number) {\n  return {\n    x: x + r * Math.cos(theta),\n    y: y + r * Math.sin(theta),\n  };\n}\n\n\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */\nfunction pathArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  end: number,\n  circular: boolean,\n) {\n  const {x, y, startAngle: start, pixelMargin, innerRadius: innerR} = element;\n\n  const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n  const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n\n  let spacingOffset = 0;\n  const alpha = end - start;\n\n  if (spacing) {\n    // When spacing is present, it is the same for all items\n    // So we adjust the start and end angle of the arc such that\n    // the distance is the same as it would be without the spacing\n    const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n    const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n    const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n    const adjustedAngle = avNogSpacingRadius !== 0 ? (alpha * avNogSpacingRadius) / (avNogSpacingRadius + spacing) : alpha;\n    spacingOffset = (alpha - adjustedAngle) / 2;\n  }\n\n  const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n  const angleOffset = (alpha - beta) / 2;\n  const startAngle = start + angleOffset + spacingOffset;\n  const endAngle = end - angleOffset - spacingOffset;\n  const {outerStart, outerEnd, innerStart, innerEnd} = parseBorderRadius(element, innerRadius, outerRadius, endAngle - startAngle);\n\n  const outerStartAdjustedRadius = outerRadius - outerStart;\n  const outerEndAdjustedRadius = outerRadius - outerEnd;\n  const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n  const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n\n  const innerStartAdjustedRadius = innerRadius + innerStart;\n  const innerEndAdjustedRadius = innerRadius + innerEnd;\n  const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n  const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n\n  ctx.beginPath();\n\n  if (circular) {\n    // The first arc segments from point 1 to point a to point 2\n    const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n\n    // The corner segment from point 2 to point 3\n    if (outerEnd > 0) {\n      const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n    }\n\n    // The line from point 3 to point 4\n    const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n    ctx.lineTo(p4.x, p4.y);\n\n    // The corner segment from point 4 to point 5\n    if (innerEnd > 0) {\n      const pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n    }\n\n    // The inner arc from point 5 to point b to point 6\n    const innerMidAdjustedAngle = ((endAngle - (innerEnd / innerRadius)) + (startAngle + (innerStart / innerRadius))) / 2;\n    ctx.arc(x, y, innerRadius, endAngle - (innerEnd / innerRadius), innerMidAdjustedAngle, true);\n    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + (innerStart / innerRadius), true);\n\n    // The corner segment from point 6 to point 7\n    if (innerStart > 0) {\n      const pCenter = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n    }\n\n    // The line from point 7 to point 8\n    const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n    ctx.lineTo(p8.x, p8.y);\n\n    // The corner segment from point 8 to point 1\n    if (outerStart > 0) {\n      const pCenter = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n      ctx.arc(pCenter.x, pCenter.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n    }\n  } else {\n    ctx.moveTo(x, y);\n\n    const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n    const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerStartX, outerStartY);\n\n    const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n    const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n    ctx.lineTo(outerEndX, outerEndY);\n  }\n\n  ctx.closePath();\n}\n\nfunction drawArc(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference} = element;\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.fill();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n  pathArc(ctx, element, offset, spacing, endAngle, circular);\n  ctx.fill();\n  return endAngle;\n}\n\nfunction drawBorder(\n  ctx: CanvasRenderingContext2D,\n  element: ArcElement,\n  offset: number,\n  spacing: number,\n  circular: boolean,\n) {\n  const {fullCircles, startAngle, circumference, options} = element;\n  const {borderWidth, borderJoinStyle, borderDash, borderDashOffset} = options;\n  const inner = options.borderAlign === 'inner';\n\n  if (!borderWidth) {\n    return;\n  }\n\n  ctx.setLineDash(borderDash || []);\n  ctx.lineDashOffset = borderDashOffset;\n\n  if (inner) {\n    ctx.lineWidth = borderWidth * 2;\n    ctx.lineJoin = borderJoinStyle || 'round';\n  } else {\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = borderJoinStyle || 'bevel';\n  }\n\n  let endAngle = element.endAngle;\n  if (fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    for (let i = 0; i < fullCircles; ++i) {\n      ctx.stroke();\n    }\n    if (!isNaN(circumference)) {\n      endAngle = startAngle + (circumference % TAU || TAU);\n    }\n  }\n\n  if (inner) {\n    clipArc(ctx, element, endAngle);\n  }\n\n  if (!fullCircles) {\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.stroke();\n  }\n}\n\nexport interface ArcProps extends Point {\n  startAngle: number;\n  endAngle: number;\n  innerRadius: number;\n  outerRadius: number;\n  circumference: number;\n}\n\nexport default class ArcElement extends Element<ArcProps, ArcOptions> {\n\n  static id = 'arc';\n\n  static defaults = {\n    borderAlign: 'center',\n    borderColor: '#fff',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: undefined,\n    borderRadius: 0,\n    borderWidth: 2,\n    offset: 0,\n    spacing: 0,\n    angle: undefined,\n    circular: true,\n  };\n\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor'\n  };\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash'\n  };\n\n  circumference: number;\n  endAngle: number;\n  fullCircles: number;\n  innerRadius: number;\n  outerRadius: number;\n  pixelMargin: number;\n  startAngle: number;\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.circumference = undefined;\n    this.startAngle = undefined;\n    this.endAngle = undefined;\n    this.innerRadius = undefined;\n    this.outerRadius = undefined;\n    this.pixelMargin = 0;\n    this.fullCircles = 0;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(chartX: number, chartY: number, useFinalPosition: boolean) {\n    const point = this.getProps(['x', 'y'], useFinalPosition);\n    const {angle, distance} = getAngleFromPoint(point, {x: chartX, y: chartY});\n    const {startAngle, endAngle, innerRadius, outerRadius, circumference} = this.getProps([\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius',\n      'circumference'\n    ], useFinalPosition);\n    const rAdjust = (this.options.spacing + this.options.borderWidth) / 2;\n    const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n    const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n    const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n\n    return (betweenAngles && withinRadius);\n  }\n\n  getCenterPoint(useFinalPosition: boolean) {\n    const {x, y, startAngle, endAngle, innerRadius, outerRadius} = this.getProps([\n      'x',\n      'y',\n      'startAngle',\n      'endAngle',\n      'innerRadius',\n      'outerRadius'\n    ], useFinalPosition);\n    const {offset, spacing} = this.options;\n    const halfAngle = (startAngle + endAngle) / 2;\n    const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n    return {\n      x: x + Math.cos(halfAngle) * halfRadius,\n      y: y + Math.sin(halfAngle) * halfRadius\n    };\n  }\n\n  tooltipPosition(useFinalPosition: boolean) {\n    return this.getCenterPoint(useFinalPosition);\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    const {options, circumference} = this;\n    const offset = (options.offset || 0) / 4;\n    const spacing = (options.spacing || 0) / 2;\n    const circular = options.circular;\n    this.pixelMargin = (options.borderAlign === 'inner') ? 0.33 : 0;\n    this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n\n    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n      return;\n    }\n\n    ctx.save();\n\n    const halfAngle = (this.startAngle + this.endAngle) / 2;\n    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n    const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n    const radiusOffset = offset * fix;\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n\n    drawArc(ctx, this, radiusOffset, spacing, circular);\n    drawBorder(ctx, this, radiusOffset, spacing, circular);\n\n    ctx.restore();\n  }\n}\n","import Element from '../core/core.element.js';\nimport {_bezierInterpolation, _pointInLine, _steppedInterpolation} from '../helpers/helpers.interpolation.js';\nimport {_computeSegments, _boundSegments} from '../helpers/helpers.segment.js';\nimport {_steppedLineTo, _bezierCurveTo} from '../helpers/helpers.canvas.js';\nimport {_updateBezierControlPoints} from '../helpers/helpers.curve.js';\nimport {valueOrDefault} from '../helpers/index.js';\n\n/**\n * @typedef { import('./element.point.js').default } PointElement\n */\n\nfunction setStyle(ctx, options, style = options) {\n  ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n  ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n  ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n  ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n  ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n  ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\n\nfunction lineTo(ctx, previous, target) {\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @returns {any}\n */\nfunction getLineMethod(options) {\n  if (options.stepped) {\n    return _steppedLineTo;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierCurveTo;\n  }\n\n  return lineTo;\n}\n\nfunction pathVars(points, segment, params = {}) {\n  const count = points.length;\n  const {start: paramsStart = 0, end: paramsEnd = count - 1} = params;\n  const {start: segmentStart, end: segmentEnd} = segment;\n  const start = Math.max(paramsStart, segmentStart);\n  const end = Math.min(paramsEnd, segmentEnd);\n  const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n\n  return {\n    count,\n    start,\n    loop: segment.loop,\n    ilen: end < start && !outside ? count + end - start : end - start\n  };\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction pathSegment(ctx, line, segment, params) {\n  const {points, options} = line;\n  const {count, start, loop, ilen} = pathVars(points, segment, params);\n  const lineMethod = getLineMethod(options);\n  // eslint-disable-next-line prefer-const\n  let {move = true, reverse} = params || {};\n  let i, point, prev;\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[(start + (reverse ? ilen - i : i)) % count];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    } else if (move) {\n      ctx.moveTo(point.x, point.y);\n      move = false;\n    } else {\n      lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n\n    prev = point;\n  }\n\n  if (loop) {\n    point = points[(start + (reverse ? ilen : 0)) % count];\n    lineMethod(ctx, prev, point, reverse, options.stepped);\n  }\n\n  return !!loop;\n}\n\n/**\n * Create path from points, grouping by truncated x-coordinate\n * Points need to be in order by x-coordinate for this to work efficiently\n * @param {CanvasRenderingContext2D|Path2D} ctx - Context\n * @param {LineElement} line\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} params\n * @param {boolean} params.move - move to starting point (vs line to it)\n * @param {boolean} params.reverse - path the segment from end to start\n * @param {number} params.start - limit segment to points starting from `start` index\n * @param {number} params.end - limit segment to points ending at `start` + `count` index\n */\nfunction fastPathSegment(ctx, line, segment, params) {\n  const points = line.points;\n  const {count, start, ilen} = pathVars(points, segment, params);\n  const {move = true, reverse} = params || {};\n  let avgX = 0;\n  let countX = 0;\n  let i, point, prevX, minY, maxY, lastY;\n\n  const pointIndex = (index) => (start + (reverse ? ilen - index : index)) % count;\n  const drawX = () => {\n    if (minY !== maxY) {\n      // Draw line to maxY and minY, using the average x-coordinate\n      ctx.lineTo(avgX, maxY);\n      ctx.lineTo(avgX, minY);\n      // Line to y-value of last point in group. So the line continues\n      // from correct position. Not using move, to have solid path.\n      ctx.lineTo(avgX, lastY);\n    }\n  };\n\n  if (move) {\n    point = points[pointIndex(0)];\n    ctx.moveTo(point.x, point.y);\n  }\n\n  for (i = 0; i <= ilen; ++i) {\n    point = points[pointIndex(i)];\n\n    if (point.skip) {\n      // If there is a skipped point inside a segment, spanGaps must be true\n      continue;\n    }\n\n    const x = point.x;\n    const y = point.y;\n    const truncX = x | 0; // truncated x-coordinate\n\n    if (truncX === prevX) {\n      // Determine `minY` / `maxY` and `avgX` while we stay within same x-position\n      if (y < minY) {\n        minY = y;\n      } else if (y > maxY) {\n        maxY = y;\n      }\n      // For first point in group, countX is `0`, so average will be `x` / 1.\n      avgX = (countX * avgX + x) / ++countX;\n    } else {\n      drawX();\n      // Draw line to next x-position, using the first (or only)\n      // y-value in that group\n      ctx.lineTo(x, y);\n\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n    }\n    // Keep track of the last y-value in group\n    lastY = y;\n  }\n  drawX();\n}\n\n/**\n * @param {LineElement} line - the line\n * @returns {function}\n * @private\n */\nfunction _getSegmentMethod(line) {\n  const opts = line.options;\n  const borderDash = opts.borderDash && opts.borderDash.length;\n  const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n  return useFastPath ? fastPathSegment : pathSegment;\n}\n\n/**\n * @private\n */\nfunction _getInterpolationMethod(options) {\n  if (options.stepped) {\n    return _steppedInterpolation;\n  }\n\n  if (options.tension || options.cubicInterpolationMode === 'monotone') {\n    return _bezierInterpolation;\n  }\n\n  return _pointInLine;\n}\n\nfunction strokePathWithCache(ctx, line, start, count) {\n  let path = line._path;\n  if (!path) {\n    path = line._path = new Path2D();\n    if (line.path(path, start, count)) {\n      path.closePath();\n    }\n  }\n  setStyle(ctx, line.options);\n  ctx.stroke(path);\n}\n\nfunction strokePathDirect(ctx, line, start, count) {\n  const {segments, options} = line;\n  const segmentMethod = _getSegmentMethod(line);\n\n  for (const segment of segments) {\n    setStyle(ctx, options, segment.style);\n    ctx.beginPath();\n    if (segmentMethod(ctx, line, segment, {start, end: start + count - 1})) {\n      ctx.closePath();\n    }\n    ctx.stroke();\n  }\n}\n\nconst usePath2D = typeof Path2D === 'function';\n\nfunction draw(ctx, line, start, count) {\n  if (usePath2D && !line.options.segment) {\n    strokePathWithCache(ctx, line, start, count);\n  } else {\n    strokePathDirect(ctx, line, start, count);\n  }\n}\n\nexport default class LineElement extends Element {\n\n  static id = 'line';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderCapStyle: 'butt',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderWidth: 3,\n    capBezierPoints: true,\n    cubicInterpolationMode: 'default',\n    fill: false,\n    spanGaps: false,\n    stepped: false,\n    tension: 0,\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n\n  static descriptors = {\n    _scriptable: true,\n    _indexable: (name) => name !== 'borderDash' && name !== 'fill',\n  };\n\n\n  constructor(cfg) {\n    super();\n\n    this.animated = true;\n    this.options = undefined;\n    this._chart = undefined;\n    this._loop = undefined;\n    this._fullLoop = undefined;\n    this._path = undefined;\n    this._points = undefined;\n    this._segments = undefined;\n    this._decimated = false;\n    this._pointsUpdated = false;\n    this._datasetIndex = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  updateControlPoints(chartArea, indexAxis) {\n    const options = this.options;\n    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n      const loop = options.spanGaps ? this._loop : this._fullLoop;\n      _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n      this._pointsUpdated = true;\n    }\n  }\n\n  set points(points) {\n    this._points = points;\n    delete this._segments;\n    delete this._path;\n    this._pointsUpdated = false;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  get segments() {\n    return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n  }\n\n  /**\n\t * First non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  first() {\n    const segments = this.segments;\n    const points = this.points;\n    return segments.length && points[segments[0].start];\n  }\n\n  /**\n\t * Last non-skipped point on this line\n\t * @returns {PointElement|undefined}\n\t */\n  last() {\n    const segments = this.segments;\n    const points = this.points;\n    const count = segments.length;\n    return count && points[segments[count - 1].end];\n  }\n\n  /**\n\t * Interpolate a point in this line at the same value on `property` as\n\t * the reference `point` provided\n\t * @param {PointElement} point - the reference point\n\t * @param {string} property - the property to match on\n\t * @returns {PointElement|undefined}\n\t */\n  interpolate(point, property) {\n    const options = this.options;\n    const value = point[property];\n    const points = this.points;\n    const segments = _boundSegments(this, {property, start: value, end: value});\n\n    if (!segments.length) {\n      return;\n    }\n\n    const result = [];\n    const _interpolate = _getInterpolationMethod(options);\n    let i, ilen;\n    for (i = 0, ilen = segments.length; i < ilen; ++i) {\n      const {start, end} = segments[i];\n      const p1 = points[start];\n      const p2 = points[end];\n      if (p1 === p2) {\n        result.push(p1);\n        continue;\n      }\n      const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n      const interpolated = _interpolate(p1, p2, t, options.stepped);\n      interpolated[property] = point[property];\n      result.push(interpolated);\n    }\n    return result.length === 1 ? result[0] : result;\n  }\n\n  /**\n\t * Append a segment of this line to current path.\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} segment\n\t * @param {number} segment.start - start index of the segment, referring the points array\n \t * @param {number} segment.end - end index of the segment, referring the points array\n \t * @param {boolean} segment.loop - indicates that the segment is a loop\n\t * @param {object} params\n\t * @param {boolean} params.move - move to starting point (vs line to it)\n\t * @param {boolean} params.reverse - path the segment from end to start\n\t * @param {number} params.start - limit segment to points starting from `start` index\n\t * @param {number} params.end - limit segment to points ending at `start` + `count` index\n\t * @returns {undefined|boolean} - true if the segment is a full loop (path should be closed)\n\t */\n  pathSegment(ctx, segment, params) {\n    const segmentMethod = _getSegmentMethod(this);\n    return segmentMethod(ctx, this, segment, params);\n  }\n\n  /**\n\t * Append all segments of this line to current path.\n\t * @param {CanvasRenderingContext2D|Path2D} ctx\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t * @returns {undefined|boolean} - true if line is a full loop (path should be closed)\n\t */\n  path(ctx, start, count) {\n    const segments = this.segments;\n    const segmentMethod = _getSegmentMethod(this);\n    let loop = this._loop;\n\n    start = start || 0;\n    count = count || (this.points.length - start);\n\n    for (const segment of segments) {\n      loop &= segmentMethod(ctx, this, segment, {start, end: start + count - 1});\n    }\n    return !!loop;\n  }\n\n  /**\n\t * Draw\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {object} chartArea\n\t * @param {number} [start]\n\t * @param {number} [count]\n\t */\n  draw(ctx, chartArea, start, count) {\n    const options = this.options || {};\n    const points = this.points || [];\n\n    if (points.length && options.borderWidth) {\n      ctx.save();\n\n      draw(ctx, this, start, count);\n\n      ctx.restore();\n    }\n\n    if (this.animated) {\n      // When line is animated, the control points and path are not cached.\n      this._pointsUpdated = false;\n      this._path = undefined;\n    }\n  }\n}\n","import Element from '../core/core.element.js';\nimport {drawPoint, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport type {\n  CartesianParsedData,\n  ChartArea,\n  Point,\n  PointHoverOptions,\n  PointOptions,\n} from '../types/index.js';\n\nfunction inRange(el: PointElement, pos: number, axis: 'x' | 'y', useFinalPosition?: boolean) {\n  const options = el.options;\n  const {[axis]: value} = el.getProps([axis], useFinalPosition);\n\n  return (Math.abs(pos - value) < options.radius + options.hitRadius);\n}\n\nexport type PointProps = Point\n\nexport default class PointElement extends Element<PointProps, PointOptions & PointHoverOptions> {\n\n  static id = 'point';\n\n  parsed: CartesianParsedData;\n  skip?: boolean;\n  stop?: boolean;\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderWidth: 1,\n    hitRadius: 1,\n    hoverBorderWidth: 1,\n    hoverRadius: 4,\n    pointStyle: 'circle',\n    radius: 3,\n    rotation: 0\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.parsed = undefined;\n    this.skip = undefined;\n    this.stop = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  inRange(mouseX: number, mouseY: number, useFinalPosition?: boolean) {\n    const options = this.options;\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return ((Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2)) < Math.pow(options.hitRadius + options.radius, 2));\n  }\n\n  inXRange(mouseX: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseX, 'x', useFinalPosition);\n  }\n\n  inYRange(mouseY: number, useFinalPosition?: boolean) {\n    return inRange(this, mouseY, 'y', useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition?: boolean) {\n    const {x, y} = this.getProps(['x', 'y'], useFinalPosition);\n    return {x, y};\n  }\n\n  size(options?: Partial<PointOptions & PointHoverOptions>) {\n    options = options || this.options || {};\n    let radius = options.radius || 0;\n    radius = Math.max(radius, radius && options.hoverRadius || 0);\n    const borderWidth = radius && options.borderWidth || 0;\n    return (radius + borderWidth) * 2;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, area: ChartArea) {\n    const options = this.options;\n\n    if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n      return;\n    }\n\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n    ctx.fillStyle = options.backgroundColor;\n    drawPoint(ctx, options, this.x, this.y);\n  }\n\n  getRange() {\n    const options = this.options || {};\n    // @ts-expect-error Fallbacks should never be hit in practice\n    return options.radius + options.hitRadius;\n  }\n}\n","import Element from '../core/core.element.js';\nimport {isObject, _isBetween, _limitValue} from '../helpers/index.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {toTRBL, toTRBLCorners} from '../helpers/helpers.options.js';\n\n/** @typedef {{ x: number, y: number, base: number, horizontal: boolean, width: number, height: number }} BarProps */\n\n/**\n * Helper function to get the bounds of the bar regardless of the orientation\n * @param {BarElement} bar the bar\n * @param {boolean} [useFinalPosition]\n * @return {object} bounds of the bar\n * @private\n */\nfunction getBarBounds(bar, useFinalPosition) {\n  const {x, y, base, width, height} = /** @type {BarProps} */ (bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition));\n\n  let left, right, top, bottom, half;\n\n  if (bar.horizontal) {\n    half = height / 2;\n    left = Math.min(x, base);\n    right = Math.max(x, base);\n    top = y - half;\n    bottom = y + half;\n  } else {\n    half = width / 2;\n    left = x - half;\n    right = x + half;\n    top = Math.min(y, base);\n    bottom = Math.max(y, base);\n  }\n\n  return {left, top, right, bottom};\n}\n\nfunction skipOrLimit(skip, value, min, max) {\n  return skip ? 0 : _limitValue(value, min, max);\n}\n\nfunction parseBorderWidth(bar, maxW, maxH) {\n  const value = bar.options.borderWidth;\n  const skip = bar.borderSkipped;\n  const o = toTRBL(value);\n\n  return {\n    t: skipOrLimit(skip.top, o.top, 0, maxH),\n    r: skipOrLimit(skip.right, o.right, 0, maxW),\n    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n    l: skipOrLimit(skip.left, o.left, 0, maxW)\n  };\n}\n\nfunction parseBorderRadius(bar, maxW, maxH) {\n  const {enableBorderRadius} = bar.getProps(['enableBorderRadius']);\n  const value = bar.options.borderRadius;\n  const o = toTRBLCorners(value);\n  const maxR = Math.min(maxW, maxH);\n  const skip = bar.borderSkipped;\n\n  // If the value is an object, assume the user knows what they are doing\n  // and apply as directed.\n  const enableBorder = enableBorderRadius || isObject(value);\n\n  return {\n    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n  };\n}\n\nfunction boundingRects(bar) {\n  const bounds = getBarBounds(bar);\n  const width = bounds.right - bounds.left;\n  const height = bounds.bottom - bounds.top;\n  const border = parseBorderWidth(bar, width / 2, height / 2);\n  const radius = parseBorderRadius(bar, width / 2, height / 2);\n\n  return {\n    outer: {\n      x: bounds.left,\n      y: bounds.top,\n      w: width,\n      h: height,\n      radius\n    },\n    inner: {\n      x: bounds.left + border.l,\n      y: bounds.top + border.t,\n      w: width - border.l - border.r,\n      h: height - border.t - border.b,\n      radius: {\n        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r)),\n      }\n    }\n  };\n}\n\nfunction inRange(bar, x, y, useFinalPosition) {\n  const skipX = x === null;\n  const skipY = y === null;\n  const skipBoth = skipX && skipY;\n  const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n\n  return bounds\n\t\t&& (skipX || _isBetween(x, bounds.left, bounds.right))\n\t\t&& (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\n\nfunction hasRadius(radius) {\n  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n\n/**\n * Add a path of a rectangle to the current sub-path\n * @param {CanvasRenderingContext2D} ctx Context\n * @param {*} rect Bounding rect\n */\nfunction addNormalRectPath(ctx, rect) {\n  ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\n\nfunction inflateRect(rect, amount, refRect = {}) {\n  const x = rect.x !== refRect.x ? -amount : 0;\n  const y = rect.y !== refRect.y ? -amount : 0;\n  const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n  const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n  return {\n    x: rect.x + x,\n    y: rect.y + y,\n    w: rect.w + w,\n    h: rect.h + h,\n    radius: rect.radius\n  };\n}\n\nexport default class BarElement extends Element {\n\n  static id = 'bar';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    borderSkipped: 'start',\n    borderWidth: 0,\n    borderRadius: 0,\n    inflateAmount: 'auto',\n    pointStyle: undefined\n  };\n\n  /**\n   * @type {any}\n   */\n  static defaultRoutes = {\n    backgroundColor: 'backgroundColor',\n    borderColor: 'borderColor'\n  };\n\n  constructor(cfg) {\n    super();\n\n    this.options = undefined;\n    this.horizontal = undefined;\n    this.base = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.inflateAmount = undefined;\n\n    if (cfg) {\n      Object.assign(this, cfg);\n    }\n  }\n\n  draw(ctx) {\n    const {inflateAmount, options: {borderColor, backgroundColor}} = this;\n    const {inner, outer} = boundingRects(this);\n    const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n\n    ctx.save();\n\n    if (outer.w !== inner.w || outer.h !== inner.h) {\n      ctx.beginPath();\n      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n      ctx.clip();\n      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n      ctx.fillStyle = borderColor;\n      ctx.fill('evenodd');\n    }\n\n    ctx.beginPath();\n    addRectPath(ctx, inflateRect(inner, inflateAmount));\n    ctx.fillStyle = backgroundColor;\n    ctx.fill();\n\n    ctx.restore();\n  }\n\n  inRange(mouseX, mouseY, useFinalPosition) {\n    return inRange(this, mouseX, mouseY, useFinalPosition);\n  }\n\n  inXRange(mouseX, useFinalPosition) {\n    return inRange(this, mouseX, null, useFinalPosition);\n  }\n\n  inYRange(mouseY, useFinalPosition) {\n    return inRange(this, null, mouseY, useFinalPosition);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    const {x, y, base, horizontal} = /** @type {BarProps} */ (this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition));\n    return {\n      x: horizontal ? (x + base) / 2 : x,\n      y: horizontal ? y : (y + base) / 2\n    };\n  }\n\n  getRange(axis) {\n    return axis === 'x' ? this.width / 2 : this.height / 2;\n  }\n}\n","import {DoughnutController, PolarAreaController} from '../index.js';\nimport type {Chart, ChartDataset} from '../types.js';\n\nexport interface ColorsPluginOptions {\n  enabled?: boolean;\n  forceOverride?: boolean;\n}\n\ninterface ColorsDescriptor {\n  backgroundColor?: unknown;\n  borderColor?: unknown;\n}\n\nconst BORDER_COLORS = [\n  'rgb(54, 162, 235)', // blue\n  'rgb(255, 99, 132)', // red\n  'rgb(255, 159, 64)', // orange\n  'rgb(255, 205, 86)', // yellow\n  'rgb(75, 192, 192)', // green\n  'rgb(153, 102, 255)', // purple\n  'rgb(201, 203, 207)' // grey\n];\n\n// Border colors with 50% transparency\nconst BACKGROUND_COLORS = /* #__PURE__ */ BORDER_COLORS.map(color => color.replace('rgb(', 'rgba(').replace(')', ', 0.5)'));\n\nfunction getBorderColor(i: number) {\n  return BORDER_COLORS[i % BORDER_COLORS.length];\n}\n\nfunction getBackgroundColor(i: number) {\n  return BACKGROUND_COLORS[i % BACKGROUND_COLORS.length];\n}\n\nfunction colorizeDefaultDataset(dataset: ChartDataset, i: number) {\n  dataset.borderColor = getBorderColor(i);\n  dataset.backgroundColor = getBackgroundColor(i);\n\n  return ++i;\n}\n\nfunction colorizeDoughnutDataset(dataset: ChartDataset, i: number) {\n  dataset.backgroundColor = dataset.data.map(() => getBorderColor(i++));\n\n  return i;\n}\n\nfunction colorizePolarAreaDataset(dataset: ChartDataset, i: number) {\n  dataset.backgroundColor = dataset.data.map(() => getBackgroundColor(i++));\n\n  return i;\n}\n\nfunction getColorizer(chart: Chart) {\n  let i = 0;\n\n  return (dataset: ChartDataset, datasetIndex: number) => {\n    const controller = chart.getDatasetMeta(datasetIndex).controller;\n\n    if (controller instanceof DoughnutController) {\n      i = colorizeDoughnutDataset(dataset, i);\n    } else if (controller instanceof PolarAreaController) {\n      i = colorizePolarAreaDataset(dataset, i);\n    } else if (controller) {\n      i = colorizeDefaultDataset(dataset, i);\n    }\n  };\n}\n\nfunction containsColorsDefinitions(\n  descriptors: ColorsDescriptor[] | Record<string, ColorsDescriptor>\n) {\n  let k: number | string;\n\n  for (k in descriptors) {\n    if (descriptors[k].borderColor || descriptors[k].backgroundColor) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction containsColorsDefinition(\n  descriptor: ColorsDescriptor\n) {\n  return descriptor && (descriptor.borderColor || descriptor.backgroundColor);\n}\n\nexport default {\n  id: 'colors',\n\n  defaults: {\n    enabled: true,\n    forceOverride: false\n  } as ColorsPluginOptions,\n\n  beforeLayout(chart: Chart, _args, options: ColorsPluginOptions) {\n    if (!options.enabled) {\n      return;\n    }\n\n    const {\n      data: {datasets},\n      options: chartOptions\n    } = chart.config;\n    const {elements} = chartOptions;\n\n    if (!options.forceOverride && (containsColorsDefinitions(datasets) || containsColorsDefinition(chartOptions) || (elements && containsColorsDefinitions(elements)))) {\n      return;\n    }\n\n    const colorizer = getColorizer(chart);\n\n    datasets.forEach(colorizer);\n  }\n};\n","import {_limitValue, _lookupByKey, isNullOrUndef, resolve} from '../helpers/index.js';\n\nfunction lttbDecimation(data, start, count, availableWidth, options) {\n  /**\n   * Implementation of the Largest Triangle Three Buckets algorithm.\n   *\n   * This implementation is based on the original implementation by Sveinn Steinarsson\n   * in https://github.com/sveinn-steinarsson/flot-downsample/blob/master/jquery.flot.downsample.js\n   *\n   * The original implementation is MIT licensed.\n   */\n  const samples = options.samples || availableWidth;\n  // There are less points than the threshold, returning the whole array\n  if (samples >= count) {\n    return data.slice(start, start + count);\n  }\n\n  const decimated = [];\n\n  const bucketWidth = (count - 2) / (samples - 2);\n  let sampledIndex = 0;\n  const endIndex = start + count - 1;\n  // Starting from offset\n  let a = start;\n  let i, maxAreaPoint, maxArea, area, nextA;\n\n  decimated[sampledIndex++] = data[a];\n\n  for (i = 0; i < samples - 2; i++) {\n    let avgX = 0;\n    let avgY = 0;\n    let j;\n\n    // Adding offset\n    const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\n    const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\n    const avgRangeLength = avgRangeEnd - avgRangeStart;\n\n    for (j = avgRangeStart; j < avgRangeEnd; j++) {\n      avgX += data[j].x;\n      avgY += data[j].y;\n    }\n\n    avgX /= avgRangeLength;\n    avgY /= avgRangeLength;\n\n    // Adding offset\n    const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\n    const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\n    const {x: pointAx, y: pointAy} = data[a];\n\n    // Note that this is changed from the original algorithm which initializes these\n    // values to 1. The reason for this change is that if the area is small, nextA\n    // would never be set and thus a crash would occur in the next loop as `a` would become\n    // `undefined`. Since the area is always positive, but could be 0 in the case of a flat trace,\n    // initializing with a negative number is the correct solution.\n    maxArea = area = -1;\n\n    for (j = rangeOffs; j < rangeTo; j++) {\n      area = 0.5 * Math.abs(\n        (pointAx - avgX) * (data[j].y - pointAy) -\n        (pointAx - data[j].x) * (avgY - pointAy)\n      );\n\n      if (area > maxArea) {\n        maxArea = area;\n        maxAreaPoint = data[j];\n        nextA = j;\n      }\n    }\n\n    decimated[sampledIndex++] = maxAreaPoint;\n    a = nextA;\n  }\n\n  // Include the last point\n  decimated[sampledIndex++] = data[endIndex];\n\n  return decimated;\n}\n\nfunction minMaxDecimation(data, start, count, availableWidth) {\n  let avgX = 0;\n  let countX = 0;\n  let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\n  const decimated = [];\n  const endIndex = start + count - 1;\n\n  const xMin = data[start].x;\n  const xMax = data[endIndex].x;\n  const dx = xMax - xMin;\n\n  for (i = start; i < start + count; ++i) {\n    point = data[i];\n    x = (point.x - xMin) / dx * availableWidth;\n    y = point.y;\n    const truncX = x | 0;\n\n    if (truncX === prevX) {\n      // Determine `minY` / `maxY` and `avgX` while we stay within same x-position\n      if (y < minY) {\n        minY = y;\n        minIndex = i;\n      } else if (y > maxY) {\n        maxY = y;\n        maxIndex = i;\n      }\n      // For first point in group, countX is `0`, so average will be `x` / 1.\n      // Use point.x here because we're computing the average data `x` value\n      avgX = (countX * avgX + point.x) / ++countX;\n    } else {\n      // Push up to 4 points, 3 for the last interval and the first point for this interval\n      const lastIndex = i - 1;\n\n      if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\n        // The interval is defined by 4 points: start, min, max, end.\n        // The starting point is already considered at this point, so we need to determine which\n        // of the other points to add. We need to sort these points to ensure the decimated data\n        // is still sorted and then ensure there are no duplicates.\n        const intermediateIndex1 = Math.min(minIndex, maxIndex);\n        const intermediateIndex2 = Math.max(minIndex, maxIndex);\n\n        if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\n          decimated.push({\n            ...data[intermediateIndex1],\n            x: avgX,\n          });\n        }\n        if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\n          decimated.push({\n            ...data[intermediateIndex2],\n            x: avgX\n          });\n        }\n      }\n\n      // lastIndex === startIndex will occur when a range has only 1 point which could\n      // happen with very uneven data\n      if (i > 0 && lastIndex !== startIndex) {\n        // Last point in the previous interval\n        decimated.push(data[lastIndex]);\n      }\n\n      // Start of the new interval\n      decimated.push(point);\n      prevX = truncX;\n      countX = 0;\n      minY = maxY = y;\n      minIndex = maxIndex = startIndex = i;\n    }\n  }\n\n  return decimated;\n}\n\nfunction cleanDecimatedDataset(dataset) {\n  if (dataset._decimated) {\n    const data = dataset._data;\n    delete dataset._decimated;\n    delete dataset._data;\n    Object.defineProperty(dataset, 'data', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: data,\n    });\n  }\n}\n\nfunction cleanDecimatedData(chart) {\n  chart.data.datasets.forEach((dataset) => {\n    cleanDecimatedDataset(dataset);\n  });\n}\n\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count;\n\n  const {iScale} = meta;\n  const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n  if (minDefined) {\n    start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\n  }\n  if (maxDefined) {\n    count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\n  } else {\n    count = pointCount - start;\n  }\n\n  return {start, count};\n}\n\nexport default {\n  id: 'decimation',\n\n  defaults: {\n    algorithm: 'min-max',\n    enabled: false,\n  },\n\n  beforeElementsUpdate: (chart, args, options) => {\n    if (!options.enabled) {\n      // The decimation plugin may have been previously enabled. Need to remove old `dataset._data` handlers\n      cleanDecimatedData(chart);\n      return;\n    }\n\n    // Assume the entire chart is available to show a few more points than needed\n    const availableWidth = chart.width;\n\n    chart.data.datasets.forEach((dataset, datasetIndex) => {\n      const {_data, indexAxis} = dataset;\n      const meta = chart.getDatasetMeta(datasetIndex);\n      const data = _data || dataset.data;\n\n      if (resolve([indexAxis, chart.options.indexAxis]) === 'y') {\n        // Decimation is only supported for lines that have an X indexAxis\n        return;\n      }\n\n      if (!meta.controller.supportsDecimation) {\n        // Only line datasets are supported\n        return;\n      }\n\n      const xAxis = chart.scales[meta.xAxisID];\n      if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\n        // Only linear interpolation is supported\n        return;\n      }\n\n      if (chart.options.parsing) {\n        // Plugin only supports data that does not need parsing\n        return;\n      }\n\n      let {start, count} = getStartAndCountOfVisiblePointsSimplified(meta, data);\n      const threshold = options.threshold || 4 * availableWidth;\n      if (count <= threshold) {\n        // No decimation is required until we are above this threshold\n        cleanDecimatedDataset(dataset);\n        return;\n      }\n\n      if (isNullOrUndef(_data)) {\n        // First time we are seeing this dataset\n        // We override the 'data' property with a setter that stores the\n        // raw data in _data, but reads the decimated data from _decimated\n        dataset._data = data;\n        delete dataset.data;\n        Object.defineProperty(dataset, 'data', {\n          configurable: true,\n          enumerable: true,\n          get: function() {\n            return this._decimated;\n          },\n          set: function(d) {\n            this._data = d;\n          }\n        });\n      }\n\n      // Point the chart to the decimated data\n      let decimated;\n      switch (options.algorithm) {\n      case 'lttb':\n        decimated = lttbDecimation(data, start, count, availableWidth, options);\n        break;\n      case 'min-max':\n        decimated = minMaxDecimation(data, start, count, availableWidth);\n        break;\n      default:\n        throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\n      }\n\n      dataset._decimated = decimated;\n    });\n  },\n\n  destroy(chart) {\n    cleanDecimatedData(chart);\n  }\n};\n","import {_boundSegment, _boundSegments, _normalizeAngle} from '../../helpers/index.js';\n\nexport function _segments(line, target, property) {\n  const segments = line.segments;\n  const points = line.points;\n  const tpoints = target.points;\n  const parts = [];\n\n  for (const segment of segments) {\n    let {start, end} = segment;\n    end = _findSegmentEnd(start, end, points);\n\n    const bounds = _getBounds(property, points[start], points[end], segment.loop);\n\n    if (!target.segments) {\n      // Special case for boundary not supporting `segments` (simpleArc)\n      // Bounds are provided as `target` for partial circle, or undefined for full circle\n      parts.push({\n        source: segment,\n        target: bounds,\n        start: points[start],\n        end: points[end]\n      });\n      continue;\n    }\n\n    // Get all segments from `target` that intersect the bounds of current segment of `line`\n    const targetSegments = _boundSegments(target, bounds);\n\n    for (const tgt of targetSegments) {\n      const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n      const fillSources = _boundSegment(segment, points, subBounds);\n\n      for (const fillSource of fillSources) {\n        parts.push({\n          source: fillSource,\n          target: tgt,\n          start: {\n            [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n          },\n          end: {\n            [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n          }\n        });\n      }\n    }\n  }\n  return parts;\n}\n\nexport function _getBounds(property, first, last, loop) {\n  if (loop) {\n    return;\n  }\n  let start = first[property];\n  let end = last[property];\n\n  if (property === 'angle') {\n    start = _normalizeAngle(start);\n    end = _normalizeAngle(end);\n  }\n  return {property, start, end};\n}\n\nexport function _pointsFromSegments(boundary, line) {\n  const {x = null, y = null} = boundary || {};\n  const linePoints = line.points;\n  const points = [];\n  line.segments.forEach(({start, end}) => {\n    end = _findSegmentEnd(start, end, linePoints);\n    const first = linePoints[start];\n    const last = linePoints[end];\n    if (y !== null) {\n      points.push({x: first.x, y});\n      points.push({x: last.x, y});\n    } else if (x !== null) {\n      points.push({x, y: first.y});\n      points.push({x, y: last.y});\n    }\n  });\n  return points;\n}\n\nexport function _findSegmentEnd(start, end, points) {\n  for (;end > start; end--) {\n    const point = points[end];\n    if (!isNaN(point.x) && !isNaN(point.y)) {\n      break;\n    }\n  }\n  return end;\n}\n\nfunction _getEdge(a, b, prop, fn) {\n  if (a && b) {\n    return fn(a[prop], b[prop]);\n  }\n  return a ? a[prop] : b ? b[prop] : 0;\n}\n","/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nimport {LineElement} from '../../elements/index.js';\nimport {isArray} from '../../helpers/index.js';\nimport {_pointsFromSegments} from './filler.segment.js';\n\n/**\n * @param {PointElement[] | { x: number; y: number; }} boundary\n * @param {LineElement} line\n * @return {LineElement?}\n */\nexport function _createBoundaryLine(boundary, line) {\n  let points = [];\n  let _loop = false;\n\n  if (isArray(boundary)) {\n    _loop = true;\n    // @ts-ignore\n    points = boundary;\n  } else {\n    points = _pointsFromSegments(boundary, line);\n  }\n\n  return points.length ? new LineElement({\n    points,\n    options: {tension: 0},\n    _loop,\n    _fullLoop: _loop\n  }) : null;\n}\n\nexport function _shouldApplyFill(source) {\n  return source && source.fill !== false;\n}\n","import {isObject, isFinite, valueOrDefault} from '../../helpers/helpers.core.js';\n\n/**\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.line.js').default } LineElement\n * @typedef { import('../../types/index.js').FillTarget } FillTarget\n * @typedef { import('../../types/index.js').ComplexFillTarget } ComplexFillTarget\n */\n\nexport function _resolveTarget(sources, index, propagate) {\n  const source = sources[index];\n  let fill = source.fill;\n  const visited = [index];\n  let target;\n\n  if (!propagate) {\n    return fill;\n  }\n\n  while (fill !== false && visited.indexOf(fill) === -1) {\n    if (!isFinite(fill)) {\n      return fill;\n    }\n\n    target = sources[fill];\n    if (!target) {\n      return false;\n    }\n\n    if (target.visible) {\n      return fill;\n    }\n\n    visited.push(fill);\n    fill = target.fill;\n  }\n\n  return false;\n}\n\n/**\n * @param {LineElement} line\n * @param {number} index\n * @param {number} count\n */\nexport function _decodeFill(line, index, count) {\n  /** @type {string | {value: number}} */\n  const fill = parseFillOption(line);\n\n  if (isObject(fill)) {\n    return isNaN(fill.value) ? false : fill;\n  }\n\n  let target = parseFloat(fill);\n\n  if (isFinite(target) && Math.floor(target) === target) {\n    return decodeTargetIndex(fill[0], index, target, count);\n  }\n\n  return ['origin', 'start', 'end', 'stack', 'shape'].indexOf(fill) >= 0 && fill;\n}\n\nfunction decodeTargetIndex(firstCh, index, target, count) {\n  if (firstCh === '-' || firstCh === '+') {\n    target = index + target;\n  }\n\n  if (target === index || target < 0 || target >= count) {\n    return false;\n  }\n\n  return target;\n}\n\n/**\n * @param {FillTarget | ComplexFillTarget} fill\n * @param {Scale} scale\n * @returns {number | null}\n */\nexport function _getTargetPixel(fill, scale) {\n  let pixel = null;\n  if (fill === 'start') {\n    pixel = scale.bottom;\n  } else if (fill === 'end') {\n    pixel = scale.top;\n  } else if (isObject(fill)) {\n    // @ts-ignore\n    pixel = scale.getPixelForValue(fill.value);\n  } else if (scale.getBasePixel) {\n    pixel = scale.getBasePixel();\n  }\n  return pixel;\n}\n\n/**\n * @param {FillTarget | ComplexFillTarget} fill\n * @param {Scale} scale\n * @param {number} startValue\n * @returns {number | undefined}\n */\nexport function _getTargetValue(fill, scale, startValue) {\n  let value;\n\n  if (fill === 'start') {\n    value = startValue;\n  } else if (fill === 'end') {\n    value = scale.options.reverse ? scale.min : scale.max;\n  } else if (isObject(fill)) {\n    // @ts-ignore\n    value = fill.value;\n  } else {\n    value = scale.getBaseValue();\n  }\n  return value;\n}\n\n/**\n * @param {LineElement} line\n */\nfunction parseFillOption(line) {\n  const options = line.options;\n  const fillOption = options.fill;\n  let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n\n  if (fill === undefined) {\n    fill = !!options.backgroundColor;\n  }\n\n  if (fill === false || fill === null) {\n    return false;\n  }\n\n  if (fill === true) {\n    return 'origin';\n  }\n  return fill;\n}\n","/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nimport {LineElement} from '../../elements/index.js';\nimport {_isBetween} from '../../helpers/index.js';\nimport {_createBoundaryLine} from './filler.helper.js';\n\n/**\n * @param {{ chart: Chart; scale: Scale; index: number; line: LineElement; }} source\n * @return {LineElement}\n */\nexport function _buildStackLine(source) {\n  const {scale, index, line} = source;\n  const points = [];\n  const segments = line.segments;\n  const sourcePoints = line.points;\n  const linesBelow = getLinesBelow(scale, index);\n  linesBelow.push(_createBoundaryLine({x: null, y: scale.bottom}, line));\n\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    for (let j = segment.start; j <= segment.end; j++) {\n      addPointsBelow(points, sourcePoints[j], linesBelow);\n    }\n  }\n  return new LineElement({points, options: {}});\n}\n\n/**\n * @param {Scale} scale\n * @param {number} index\n * @return {LineElement[]}\n */\nfunction getLinesBelow(scale, index) {\n  const below = [];\n  const metas = scale.getMatchingVisibleMetas('line');\n\n  for (let i = 0; i < metas.length; i++) {\n    const meta = metas[i];\n    if (meta.index === index) {\n      break;\n    }\n    if (!meta.hidden) {\n      below.unshift(meta.dataset);\n    }\n  }\n  return below;\n}\n\n/**\n * @param {PointElement[]} points\n * @param {PointElement} sourcePoint\n * @param {LineElement[]} linesBelow\n */\nfunction addPointsBelow(points, sourcePoint, linesBelow) {\n  const postponed = [];\n  for (let j = 0; j < linesBelow.length; j++) {\n    const line = linesBelow[j];\n    const {first, last, point} = findPoint(line, sourcePoint, 'x');\n\n    if (!point || (first && last)) {\n      continue;\n    }\n    if (first) {\n      // First point of an segment -> need to add another point before this,\n      // from next line below.\n      postponed.unshift(point);\n    } else {\n      points.push(point);\n      if (!last) {\n        // In the middle of an segment, no need to add more points.\n        break;\n      }\n    }\n  }\n  points.push(...postponed);\n}\n\n/**\n * @param {LineElement} line\n * @param {PointElement} sourcePoint\n * @param {string} property\n * @returns {{point?: PointElement, first?: boolean, last?: boolean}}\n */\nfunction findPoint(line, sourcePoint, property) {\n  const point = line.interpolate(sourcePoint, property);\n  if (!point) {\n    return {};\n  }\n\n  const pointValue = point[property];\n  const segments = line.segments;\n  const linePoints = line.points;\n  let first = false;\n  let last = false;\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const firstValue = linePoints[segment.start][property];\n    const lastValue = linePoints[segment.end][property];\n    if (_isBetween(pointValue, firstValue, lastValue)) {\n      first = pointValue === firstValue;\n      last = pointValue === lastValue;\n      break;\n    }\n  }\n  return {first, last, point};\n}\n","import {TAU} from '../../helpers/index.js';\n\n// TODO: use elements.ArcElement instead\nexport class simpleArc {\n  constructor(opts) {\n    this.x = opts.x;\n    this.y = opts.y;\n    this.radius = opts.radius;\n  }\n\n  pathSegment(ctx, bounds, opts) {\n    const {x, y, radius} = this;\n    bounds = bounds || {start: 0, end: TAU};\n    ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n    return !opts.bounds;\n  }\n\n  interpolate(point) {\n    const {x, y, radius} = this;\n    const angle = point.angle;\n    return {\n      x: x + Math.cos(angle) * radius,\n      y: y + Math.sin(angle) * radius,\n      angle\n    };\n  }\n}\n","import {isFinite} from '../../helpers/index.js';\nimport {_createBoundaryLine} from './filler.helper.js';\nimport {_getTargetPixel, _getTargetValue} from './filler.options.js';\nimport {_buildStackLine} from './filler.target.stack.js';\nimport {simpleArc} from './simpleArc.js';\n\n/**\n * @typedef { import('../../core/core.controller.js').default } Chart\n * @typedef { import('../../core/core.scale.js').default } Scale\n * @typedef { import('../../elements/element.point.js').default } PointElement\n */\n\nexport function _getTarget(source) {\n  const {chart, fill, line} = source;\n\n  if (isFinite(fill)) {\n    return getLineByIndex(chart, fill);\n  }\n\n  if (fill === 'stack') {\n    return _buildStackLine(source);\n  }\n\n  if (fill === 'shape') {\n    return true;\n  }\n\n  const boundary = computeBoundary(source);\n\n  if (boundary instanceof simpleArc) {\n    return boundary;\n  }\n\n  return _createBoundaryLine(boundary, line);\n}\n\n/**\n * @param {Chart} chart\n * @param {number} index\n */\nfunction getLineByIndex(chart, index) {\n  const meta = chart.getDatasetMeta(index);\n  const visible = meta && chart.isDatasetVisible(index);\n  return visible ? meta.dataset : null;\n}\n\nfunction computeBoundary(source) {\n  const scale = source.scale || {};\n\n  if (scale.getPointPositionForValue) {\n    return computeCircularBoundary(source);\n  }\n  return computeLinearBoundary(source);\n}\n\n\nfunction computeLinearBoundary(source) {\n  const {scale = {}, fill} = source;\n  const pixel = _getTargetPixel(fill, scale);\n\n  if (isFinite(pixel)) {\n    const horizontal = scale.isHorizontal();\n\n    return {\n      x: horizontal ? pixel : null,\n      y: horizontal ? null : pixel\n    };\n  }\n\n  return null;\n}\n\nfunction computeCircularBoundary(source) {\n  const {scale, fill} = source;\n  const options = scale.options;\n  const length = scale.getLabels().length;\n  const start = options.reverse ? scale.max : scale.min;\n  const value = _getTargetValue(fill, scale, start);\n  const target = [];\n\n  if (options.grid.circular) {\n    const center = scale.getPointPositionForValue(0, start);\n    return new simpleArc({\n      x: center.x,\n      y: center.y,\n      radius: scale.getDistanceFromCenterForValue(value)\n    });\n  }\n\n  for (let i = 0; i < length; ++i) {\n    target.push(scale.getPointPositionForValue(i, value));\n  }\n  return target;\n}\n\n","import {clipArea, unclipArea} from '../../helpers/index.js';\nimport {_findSegmentEnd, _getBounds, _segments} from './filler.segment.js';\nimport {_getTarget} from './filler.target.js';\n\nexport function _drawfill(ctx, source, area) {\n  const target = _getTarget(source);\n  const {line, scale, axis} = source;\n  const lineOpts = line.options;\n  const fillOption = lineOpts.fill;\n  const color = lineOpts.backgroundColor;\n  const {above = color, below = color} = fillOption || {};\n  if (target && line.points.length) {\n    clipArea(ctx, area);\n    doFill(ctx, {line, target, above, below, area, scale, axis});\n    unclipArea(ctx);\n  }\n}\n\nfunction doFill(ctx, cfg) {\n  const {line, target, above, below, area, scale} = cfg;\n  const property = line._loop ? 'angle' : cfg.axis;\n\n  ctx.save();\n\n  if (property === 'x' && below !== above) {\n    clipVertical(ctx, target, area.top);\n    fill(ctx, {line, target, color: above, scale, property});\n    ctx.restore();\n    ctx.save();\n    clipVertical(ctx, target, area.bottom);\n  }\n  fill(ctx, {line, target, color: below, scale, property});\n\n  ctx.restore();\n}\n\nfunction clipVertical(ctx, target, clipY) {\n  const {segments, points} = target;\n  let first = true;\n  let lineLoop = false;\n\n  ctx.beginPath();\n  for (const segment of segments) {\n    const {start, end} = segment;\n    const firstPoint = points[start];\n    const lastPoint = points[_findSegmentEnd(start, end, points)];\n    if (first) {\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      first = false;\n    } else {\n      ctx.lineTo(firstPoint.x, clipY);\n      ctx.lineTo(firstPoint.x, firstPoint.y);\n    }\n    lineLoop = !!target.pathSegment(ctx, segment, {move: lineLoop});\n    if (lineLoop) {\n      ctx.closePath();\n    } else {\n      ctx.lineTo(lastPoint.x, clipY);\n    }\n  }\n\n  ctx.lineTo(target.first().x, clipY);\n  ctx.closePath();\n  ctx.clip();\n}\n\nfunction fill(ctx, cfg) {\n  const {line, target, property, color, scale} = cfg;\n  const segments = _segments(line, target, property);\n\n  for (const {source: src, target: tgt, start, end} of segments) {\n    const {style: {backgroundColor = color} = {}} = src;\n    const notShape = target !== true;\n\n    ctx.save();\n    ctx.fillStyle = backgroundColor;\n\n    clipBounds(ctx, scale, notShape && _getBounds(property, start, end));\n\n    ctx.beginPath();\n\n    const lineLoop = !!line.pathSegment(ctx, src);\n\n    let loop;\n    if (notShape) {\n      if (lineLoop) {\n        ctx.closePath();\n      } else {\n        interpolatedLineTo(ctx, target, end, property);\n      }\n\n      const targetLoop = !!target.pathSegment(ctx, tgt, {move: lineLoop, reverse: true});\n      loop = lineLoop && targetLoop;\n      if (!loop) {\n        interpolatedLineTo(ctx, target, start, property);\n      }\n    }\n\n    ctx.closePath();\n    ctx.fill(loop ? 'evenodd' : 'nonzero');\n\n    ctx.restore();\n  }\n}\n\nfunction clipBounds(ctx, scale, bounds) {\n  const {top, bottom} = scale.chart.chartArea;\n  const {property, start, end} = bounds || {};\n  if (property === 'x') {\n    ctx.beginPath();\n    ctx.rect(start, top, end - start, bottom - top);\n    ctx.clip();\n  }\n}\n\nfunction interpolatedLineTo(ctx, target, point, property) {\n  const interpolatedPoint = target.interpolate(point, property);\n  if (interpolatedPoint) {\n    ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n  }\n}\n\n","/**\n * Plugin based on discussion from the following Chart.js issues:\n * @see https://github.com/chartjs/Chart.js/issues/2380#issuecomment-279961569\n * @see https://github.com/chartjs/Chart.js/issues/2440#issuecomment-256461897\n */\n\nimport LineElement from '../../elements/element.line.js';\nimport {_drawfill} from './filler.drawing.js';\nimport {_shouldApplyFill} from './filler.helper.js';\nimport {_decodeFill, _resolveTarget} from './filler.options.js';\n\nexport default {\n  id: 'filler',\n\n  afterDatasetsUpdate(chart, _args, options) {\n    const count = (chart.data.datasets || []).length;\n    const sources = [];\n    let meta, i, line, source;\n\n    for (i = 0; i < count; ++i) {\n      meta = chart.getDatasetMeta(i);\n      line = meta.dataset;\n      source = null;\n\n      if (line && line.options && line instanceof LineElement) {\n        source = {\n          visible: chart.isDatasetVisible(i),\n          index: i,\n          fill: _decodeFill(line, i, count),\n          chart,\n          axis: meta.controller.options.indexAxis,\n          scale: meta.vScale,\n          line,\n        };\n      }\n\n      meta.$filler = source;\n      sources.push(source);\n    }\n\n    for (i = 0; i < count; ++i) {\n      source = sources[i];\n      if (!source || source.fill === false) {\n        continue;\n      }\n\n      source.fill = _resolveTarget(sources, i, options.propagate);\n    }\n  },\n\n  beforeDraw(chart, _args, options) {\n    const draw = options.drawTime === 'beforeDraw';\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const area = chart.chartArea;\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n      if (!source) {\n        continue;\n      }\n\n      source.line.updateControlPoints(area, source.axis);\n      if (draw && source.fill) {\n        _drawfill(chart.ctx, source, area);\n      }\n    }\n  },\n\n  beforeDatasetsDraw(chart, _args, options) {\n    if (options.drawTime !== 'beforeDatasetsDraw') {\n      return;\n    }\n\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    for (let i = metasets.length - 1; i >= 0; --i) {\n      const source = metasets[i].$filler;\n\n      if (_shouldApplyFill(source)) {\n        _drawfill(chart.ctx, source, chart.chartArea);\n      }\n    }\n  },\n\n  beforeDatasetDraw(chart, args, options) {\n    const source = args.meta.$filler;\n\n    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n      return;\n    }\n\n    _drawfill(chart.ctx, source, chart.chartArea);\n  },\n\n  defaults: {\n    propagate: true,\n    drawTime: 'beforeDatasetDraw'\n  }\n};\n","import defaults from '../core/core.defaults.js';\nimport Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {addRoundedRectPath, drawPointLegend, renderText} from '../helpers/helpers.canvas.js';\nimport {\n  _isBetween,\n  callback as call,\n  clipArea,\n  getRtlAdapter,\n  overrideTextDirection,\n  restoreTextDirection,\n  toFont,\n  toPadding,\n  unclipArea,\n  valueOrDefault,\n} from '../helpers/index.js';\nimport {_alignStartEnd, _textX, _toLeftRightCenter} from '../helpers/helpers.extras.js';\nimport {toTRBLCorners} from '../helpers/helpers.options.js';\n\n/**\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n */\n\nconst getBoxSize = (labelOpts, fontSize) => {\n  let {boxHeight = fontSize, boxWidth = fontSize} = labelOpts;\n\n  if (labelOpts.usePointStyle) {\n    boxHeight = Math.min(boxHeight, fontSize);\n    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n  }\n\n  return {\n    boxWidth,\n    boxHeight,\n    itemHeight: Math.max(fontSize, boxHeight)\n  };\n};\n\nconst itemsEqual = (a, b) => a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\n\nexport class Legend extends Element {\n\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this._added = false;\n\n    // Contains hit boxes for each dataset (in dataset order)\n    this.legendHitBoxes = [];\n\n    /**\n \t\t * @private\n \t\t */\n    this._hoveredItem = null;\n\n    // Are we in doughnut mode which has a different data type\n    this.doughnutMode = false;\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this.legendItems = undefined;\n    this.columnSizes = undefined;\n    this.lineWidths = undefined;\n    this.maxHeight = undefined;\n    this.maxWidth = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this._margins = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight, margins) {\n    this.maxWidth = maxWidth;\n    this.maxHeight = maxHeight;\n    this._margins = margins;\n\n    this.setDimensions();\n    this.buildLabels();\n    this.fit();\n  }\n\n  setDimensions() {\n    if (this.isHorizontal()) {\n      this.width = this.maxWidth;\n      this.left = this._margins.left;\n      this.right = this.width;\n    } else {\n      this.height = this.maxHeight;\n      this.top = this._margins.top;\n      this.bottom = this.height;\n    }\n  }\n\n  buildLabels() {\n    const labelOpts = this.options.labels || {};\n    let legendItems = call(labelOpts.generateLabels, [this.chart], this) || [];\n\n    if (labelOpts.filter) {\n      legendItems = legendItems.filter((item) => labelOpts.filter(item, this.chart.data));\n    }\n\n    if (labelOpts.sort) {\n      legendItems = legendItems.sort((a, b) => labelOpts.sort(a, b, this.chart.data));\n    }\n\n    if (this.options.reverse) {\n      legendItems.reverse();\n    }\n\n    this.legendItems = legendItems;\n  }\n\n  fit() {\n    const {options, ctx} = this;\n\n    // The legend may not be displayed for a variety of reasons including\n    // the fact that the defaults got set to `false`.\n    // When the legend is not displayed, there are no guarantees that the options\n    // are correctly formatted so we need to bail out as early as possible.\n    if (!options.display) {\n      this.width = this.height = 0;\n      return;\n    }\n\n    const labelOpts = options.labels;\n    const labelFont = toFont(labelOpts.font);\n    const fontSize = labelFont.size;\n    const titleHeight = this._computeTitleHeight();\n    const {boxWidth, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    let width, height;\n\n    ctx.font = labelFont.string;\n\n    if (this.isHorizontal()) {\n      width = this.maxWidth; // fill all the width\n      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n    } else {\n      height = this.maxHeight; // fill all the height\n      width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n    }\n\n    this.width = Math.min(width, options.maxWidth || this.maxWidth);\n    this.height = Math.min(height, options.maxHeight || this.maxHeight);\n  }\n\n  /**\n\t * @private\n\t */\n  _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n    const {ctx, maxWidth, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    // Width of each line of legend boxes. Labels wrap onto multiple lines when there are too many to fit on one\n    const lineWidths = this.lineWidths = [0];\n    const lineHeight = itemHeight + padding;\n    let totalHeight = titleHeight;\n\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n\n    let row = -1;\n    let top = -lineHeight;\n    this.legendItems.forEach((legendItem, i) => {\n      const itemWidth = boxWidth + (fontSize / 2) + ctx.measureText(legendItem.text).width;\n\n      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n        totalHeight += lineHeight;\n        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n        top += lineHeight;\n        row++;\n      }\n\n      hitboxes[i] = {left: 0, top, row, width: itemWidth, height: itemHeight};\n\n      lineWidths[lineWidths.length - 1] += itemWidth + padding;\n    });\n\n    return totalHeight;\n  }\n\n  _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n    const {ctx, maxHeight, options: {labels: {padding}}} = this;\n    const hitboxes = this.legendHitBoxes = [];\n    const columnSizes = this.columnSizes = [];\n    const heightLimit = maxHeight - titleHeight;\n\n    let totalWidth = padding;\n    let currentColWidth = 0;\n    let currentColHeight = 0;\n\n    let left = 0;\n    let col = 0;\n\n    this.legendItems.forEach((legendItem, i) => {\n      const {itemWidth, itemHeight} = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n\n      // If too tall, go to new column\n      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n        totalWidth += currentColWidth + padding;\n        columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n        left += currentColWidth + padding;\n        col++;\n        currentColWidth = currentColHeight = 0;\n      }\n\n      // Store the hitbox width and height here. Final position will be updated in `draw`\n      hitboxes[i] = {left, top: currentColHeight, col, width: itemWidth, height: itemHeight};\n\n      // Get max width\n      currentColWidth = Math.max(currentColWidth, itemWidth);\n      currentColHeight += itemHeight + padding;\n    });\n\n    totalWidth += currentColWidth;\n    columnSizes.push({width: currentColWidth, height: currentColHeight}); // previous column size\n\n    return totalWidth;\n  }\n\n  adjustHitBoxes() {\n    if (!this.options.display) {\n      return;\n    }\n    const titleHeight = this._computeTitleHeight();\n    const {legendHitBoxes: hitboxes, options: {align, labels: {padding}, rtl}} = this;\n    const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n    if (this.isHorizontal()) {\n      let row = 0;\n      let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n      for (const hitbox of hitboxes) {\n        if (row !== hitbox.row) {\n          row = hitbox.row;\n          left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n        }\n        hitbox.top += this.top + titleHeight + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n        left += hitbox.width + padding;\n      }\n    } else {\n      let col = 0;\n      let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n      for (const hitbox of hitboxes) {\n        if (hitbox.col !== col) {\n          col = hitbox.col;\n          top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n        }\n        hitbox.top = top;\n        hitbox.left += this.left + padding;\n        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox.left), hitbox.width);\n        top += hitbox.height + padding;\n      }\n    }\n  }\n\n  isHorizontal() {\n    return this.options.position === 'top' || this.options.position === 'bottom';\n  }\n\n  draw() {\n    if (this.options.display) {\n      const ctx = this.ctx;\n      clipArea(ctx, this);\n\n      this._draw();\n\n      unclipArea(ctx);\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _draw() {\n    const {options: opts, columnSizes, lineWidths, ctx} = this;\n    const {align, labels: labelOpts} = opts;\n    const defaultColor = defaults.color;\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const labelFont = toFont(labelOpts.font);\n    const {padding} = labelOpts;\n    const fontSize = labelFont.size;\n    const halfFontSize = fontSize / 2;\n    let cursor;\n\n    this.drawTitle();\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign('left');\n    ctx.textBaseline = 'middle';\n    ctx.lineWidth = 0.5;\n    ctx.font = labelFont.string;\n\n    const {boxWidth, boxHeight, itemHeight} = getBoxSize(labelOpts, fontSize);\n\n    // current position\n    const drawLegendBox = function(x, y, legendItem) {\n      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n        return;\n      }\n\n      // Set the ctx for the box\n      ctx.save();\n\n      const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n      ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n      ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n      ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n      ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n      ctx.lineWidth = lineWidth;\n      ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n\n      ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n\n      if (labelOpts.usePointStyle) {\n        // Recalculate x and y for drawPoint() because its expecting\n        // x and y to be center of figure (instead of top left)\n        const drawOptions = {\n          radius: boxHeight * Math.SQRT2 / 2,\n          pointStyle: legendItem.pointStyle,\n          rotation: legendItem.rotation,\n          borderWidth: lineWidth\n        };\n        const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n        const centerY = y + halfFontSize;\n\n        // Draw pointStyle as legend symbol\n        drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n      } else {\n        // Draw box as legend symbol\n        // Adjust position when boxHeight < fontSize (want it centered)\n        const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n        const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n        const borderRadius = toTRBLCorners(legendItem.borderRadius);\n\n        ctx.beginPath();\n\n        if (Object.values(borderRadius).some(v => v !== 0)) {\n          addRoundedRectPath(ctx, {\n            x: xBoxLeft,\n            y: yBoxTop,\n            w: boxWidth,\n            h: boxHeight,\n            radius: borderRadius,\n          });\n        } else {\n          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n        }\n\n        ctx.fill();\n        if (lineWidth !== 0) {\n          ctx.stroke();\n        }\n      }\n\n      ctx.restore();\n    };\n\n    const fillText = function(x, y, legendItem) {\n      renderText(ctx, legendItem.text, x, y + (itemHeight / 2), labelFont, {\n        strikethrough: legendItem.hidden,\n        textAlign: rtlHelper.textAlign(legendItem.textAlign)\n      });\n    };\n\n    // Horizontal\n    const isHorizontal = this.isHorizontal();\n    const titleHeight = this._computeTitleHeight();\n    if (isHorizontal) {\n      cursor = {\n        x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n        y: this.top + padding + titleHeight,\n        line: 0\n      };\n    } else {\n      cursor = {\n        x: this.left + padding,\n        y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n        line: 0\n      };\n    }\n\n    overrideTextDirection(this.ctx, opts.textDirection);\n\n    const lineHeight = itemHeight + padding;\n    this.legendItems.forEach((legendItem, i) => {\n      ctx.strokeStyle = legendItem.fontColor; // for strikethrough effect\n      ctx.fillStyle = legendItem.fontColor; // render in correct colour\n\n      const textWidth = ctx.measureText(legendItem.text).width;\n      const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n      const width = boxWidth + halfFontSize + textWidth;\n      let x = cursor.x;\n      let y = cursor.y;\n\n      rtlHelper.setWidth(this.width);\n\n      if (isHorizontal) {\n        if (i > 0 && x + width + padding > this.right) {\n          y = cursor.y += lineHeight;\n          cursor.line++;\n          x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n        }\n      } else if (i > 0 && y + lineHeight > this.bottom) {\n        x = cursor.x = x + columnSizes[cursor.line].width + padding;\n        cursor.line++;\n        y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n      }\n\n      const realX = rtlHelper.x(x);\n\n      drawLegendBox(realX, y, legendItem);\n\n      x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n\n      // Fill the actual label\n      fillText(rtlHelper.x(x), y, legendItem);\n\n      if (isHorizontal) {\n        cursor.x += width + padding;\n      } else if (typeof legendItem.text !== 'string') {\n        const fontLineHeight = labelFont.lineHeight;\n        cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight) + padding;\n      } else {\n        cursor.y += lineHeight;\n      }\n    });\n\n    restoreTextDirection(this.ctx, opts.textDirection);\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {\n    const opts = this.options;\n    const titleOpts = opts.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n\n    if (!titleOpts.display) {\n      return;\n    }\n\n    const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n    const ctx = this.ctx;\n    const position = titleOpts.position;\n    const halfFontSize = titleFont.size / 2;\n    const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n    let y;\n\n    // These defaults are used when the legend is vertical.\n    // When horizontal, they are computed below.\n    let left = this.left;\n    let maxWidth = this.width;\n\n    if (this.isHorizontal()) {\n      // Move left / right so that the title is above the legend lines\n      maxWidth = Math.max(...this.lineWidths);\n      y = this.top + topPaddingPlusHalfFontSize;\n      left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n    } else {\n      // Move down so that the title is above the legend stack in every alignment\n      const maxHeight = this.columnSizes.reduce((acc, size) => Math.max(acc, size.height), 0);\n      y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n    }\n\n    // Now that we know the left edge of the inner legend box, compute the correct\n    // X coordinate from the title alignment\n    const x = _alignStartEnd(position, left, left + maxWidth);\n\n    // Canvas setup\n    ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n    ctx.textBaseline = 'middle';\n    ctx.strokeStyle = titleOpts.color;\n    ctx.fillStyle = titleOpts.color;\n    ctx.font = titleFont.string;\n\n    renderText(ctx, titleOpts.text, x, y, titleFont);\n  }\n\n  /**\n\t * @private\n\t */\n  _computeTitleHeight() {\n    const titleOpts = this.options.title;\n    const titleFont = toFont(titleOpts.font);\n    const titlePadding = toPadding(titleOpts.padding);\n    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n  }\n\n  /**\n\t * @private\n\t */\n  _getLegendItemAt(x, y) {\n    let i, hitBox, lh;\n\n    if (_isBetween(x, this.left, this.right)\n      && _isBetween(y, this.top, this.bottom)) {\n      // See if we are touching one of the dataset boxes\n      lh = this.legendHitBoxes;\n      for (i = 0; i < lh.length; ++i) {\n        hitBox = lh[i];\n\n        if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width)\n          && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n          // Touching an element\n          return this.legendItems[i];\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t */\n  handleEvent(e) {\n    const opts = this.options;\n    if (!isListened(e.type, opts)) {\n      return;\n    }\n\n    // Chart event already has relative position in it\n    const hoveredItem = this._getLegendItemAt(e.x, e.y);\n\n    if (e.type === 'mousemove' || e.type === 'mouseout') {\n      const previous = this._hoveredItem;\n      const sameItem = itemsEqual(previous, hoveredItem);\n      if (previous && !sameItem) {\n        call(opts.onLeave, [e, previous, this], this);\n      }\n\n      this._hoveredItem = hoveredItem;\n\n      if (hoveredItem && !sameItem) {\n        call(opts.onHover, [e, hoveredItem, this], this);\n      }\n    } else if (hoveredItem) {\n      call(opts.onClick, [e, hoveredItem, this], this);\n    }\n  }\n}\n\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n  const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n  const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n  return {itemWidth, itemHeight};\n}\n\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n  let legendItemText = legendItem.text;\n  if (legendItemText && typeof legendItemText !== 'string') {\n    legendItemText = legendItemText.reduce((a, b) => a.length > b.length ? a : b);\n  }\n  return boxWidth + (labelFont.size / 2) + ctx.measureText(legendItemText).width;\n}\n\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n  let itemHeight = _itemHeight;\n  if (typeof legendItem.text !== 'string') {\n    itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n  }\n  return itemHeight;\n}\n\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n  const labelHeight = legendItem.text ? legendItem.text.length : 0;\n  return fontLineHeight * labelHeight;\n}\n\nfunction isListened(type, opts) {\n  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n    return true;\n  }\n  if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n    return true;\n  }\n  return false;\n}\n\nexport default {\n  id: 'legend',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Legend,\n\n  start(chart, _args, options) {\n    const legend = chart.legend = new Legend({ctx: chart.ctx, options, chart});\n    layouts.configure(chart, legend, options);\n    layouts.addBox(chart, legend);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, chart.legend);\n    delete chart.legend;\n  },\n\n  // During the beforeUpdate step, the layout configuration needs to run\n  // This ensures that if the legend position changes (via an option update)\n  // the layout system respects the change. See https://github.com/chartjs/Chart.js/issues/7527\n  beforeUpdate(chart, _args, options) {\n    const legend = chart.legend;\n    layouts.configure(chart, legend, options);\n    legend.options = options;\n  },\n\n  // The labels need to be built after datasets are updated to ensure that colors\n  // and other styling are correct. See https://github.com/chartjs/Chart.js/issues/6968\n  afterUpdate(chart) {\n    const legend = chart.legend;\n    legend.buildLabels();\n    legend.adjustHitBoxes();\n  },\n\n\n  afterEvent(chart, args) {\n    if (!args.replay) {\n      chart.legend.handleEvent(args.event);\n    }\n  },\n\n  defaults: {\n    display: true,\n    position: 'top',\n    align: 'center',\n    fullSize: true,\n    reverse: false,\n    weight: 1000,\n\n    // a callback that will handle\n    onClick(e, legendItem, legend) {\n      const index = legendItem.datasetIndex;\n      const ci = legend.chart;\n      if (ci.isDatasetVisible(index)) {\n        ci.hide(index);\n        legendItem.hidden = true;\n      } else {\n        ci.show(index);\n        legendItem.hidden = false;\n      }\n    },\n\n    onHover: null,\n    onLeave: null,\n\n    labels: {\n      color: (ctx) => ctx.chart.options.color,\n      boxWidth: 40,\n      padding: 10,\n      // Generates labels shown in the legend\n      // Valid properties to return:\n      // text : text to display\n      // fillStyle : fill of coloured box\n      // strokeStyle: stroke of coloured box\n      // hidden : if this legend item refers to a hidden item\n      // lineCap : cap style for line\n      // lineDash\n      // lineDashOffset :\n      // lineJoin :\n      // lineWidth :\n      generateLabels(chart) {\n        const datasets = chart.data.datasets;\n        const {labels: {usePointStyle, pointStyle, textAlign, color, useBorderRadius, borderRadius}} = chart.legend.options;\n\n        return chart._getSortedDatasetMetas().map((meta) => {\n          const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n          const borderWidth = toPadding(style.borderWidth);\n\n          return {\n            text: datasets[meta.index].label,\n            fillStyle: style.backgroundColor,\n            fontColor: color,\n            hidden: !meta.visible,\n            lineCap: style.borderCapStyle,\n            lineDash: style.borderDash,\n            lineDashOffset: style.borderDashOffset,\n            lineJoin: style.borderJoinStyle,\n            lineWidth: (borderWidth.width + borderWidth.height) / 4,\n            strokeStyle: style.borderColor,\n            pointStyle: pointStyle || style.pointStyle,\n            rotation: style.rotation,\n            textAlign: textAlign || style.textAlign,\n            borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n\n            // Below is extra data used for toggling the datasets\n            datasetIndex: meta.index\n          };\n        }, this);\n      }\n    },\n\n    title: {\n      color: (ctx) => ctx.chart.options.color,\n      display: false,\n      position: 'center',\n      text: '',\n    }\n  },\n\n  descriptors: {\n    _scriptable: (name) => !name.startsWith('on'),\n    labels: {\n      _scriptable: (name) => !['generateLabels', 'filter', 'sort'].includes(name),\n    }\n  },\n};\n","import Element from '../core/core.element.js';\nimport layouts from '../core/core.layouts.js';\nimport {PI, isArray, toPadding, toFont} from '../helpers/index.js';\nimport {_toLeftRightCenter, _alignStartEnd} from '../helpers/helpers.extras.js';\nimport {renderText} from '../helpers/helpers.canvas.js';\n\nexport class Title extends Element {\n  /**\n\t * @param {{ ctx: any; options: any; chart: any; }} config\n\t */\n  constructor(config) {\n    super();\n\n    this.chart = config.chart;\n    this.options = config.options;\n    this.ctx = config.ctx;\n    this._padding = undefined;\n    this.top = undefined;\n    this.bottom = undefined;\n    this.left = undefined;\n    this.right = undefined;\n    this.width = undefined;\n    this.height = undefined;\n    this.position = undefined;\n    this.weight = undefined;\n    this.fullSize = undefined;\n  }\n\n  update(maxWidth, maxHeight) {\n    const opts = this.options;\n\n    this.left = 0;\n    this.top = 0;\n\n    if (!opts.display) {\n      this.width = this.height = this.right = this.bottom = 0;\n      return;\n    }\n\n    this.width = this.right = maxWidth;\n    this.height = this.bottom = maxHeight;\n\n    const lineCount = isArray(opts.text) ? opts.text.length : 1;\n    this._padding = toPadding(opts.padding);\n    const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n\n    if (this.isHorizontal()) {\n      this.height = textSize;\n    } else {\n      this.width = textSize;\n    }\n  }\n\n  isHorizontal() {\n    const pos = this.options.position;\n    return pos === 'top' || pos === 'bottom';\n  }\n\n  _drawArgs(offset) {\n    const {top, left, bottom, right, options} = this;\n    const align = options.align;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n\n    if (this.isHorizontal()) {\n      titleX = _alignStartEnd(align, left, right);\n      titleY = top + offset;\n      maxWidth = right - left;\n    } else {\n      if (options.position === 'left') {\n        titleX = left + offset;\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = PI * -0.5;\n      } else {\n        titleX = right - offset;\n        titleY = _alignStartEnd(align, top, bottom);\n        rotation = PI * 0.5;\n      }\n      maxWidth = bottom - top;\n    }\n    return {titleX, titleY, maxWidth, rotation};\n  }\n\n  draw() {\n    const ctx = this.ctx;\n    const opts = this.options;\n\n    if (!opts.display) {\n      return;\n    }\n\n    const fontOpts = toFont(opts.font);\n    const lineHeight = fontOpts.lineHeight;\n    const offset = lineHeight / 2 + this._padding.top;\n    const {titleX, titleY, maxWidth, rotation} = this._drawArgs(offset);\n\n    renderText(ctx, opts.text, 0, 0, fontOpts, {\n      color: opts.color,\n      maxWidth,\n      rotation,\n      textAlign: _toLeftRightCenter(opts.align),\n      textBaseline: 'middle',\n      translation: [titleX, titleY],\n    });\n  }\n}\n\nfunction createTitle(chart, titleOpts) {\n  const title = new Title({\n    ctx: chart.ctx,\n    options: titleOpts,\n    chart\n  });\n\n  layouts.configure(chart, title, titleOpts);\n  layouts.addBox(chart, title);\n  chart.titleBlock = title;\n}\n\nexport default {\n  id: 'title',\n\n  /**\n\t * For tests\n\t * @private\n\t */\n  _element: Title,\n\n  start(chart, _args, options) {\n    createTitle(chart, options);\n  },\n\n  stop(chart) {\n    const titleBlock = chart.titleBlock;\n    layouts.removeBox(chart, titleBlock);\n    delete chart.titleBlock;\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = chart.titleBlock;\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'bold',\n    },\n    fullSize: true,\n    padding: 10,\n    position: 'top',\n    text: '',\n    weight: 2000         // by default greater than legend (1000) to be above\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import {Title} from './plugin.title.js';\nimport layouts from '../core/core.layouts.js';\n\nconst map = new WeakMap();\n\nexport default {\n  id: 'subtitle',\n\n  start(chart, _args, options) {\n    const title = new Title({\n      ctx: chart.ctx,\n      options,\n      chart\n    });\n\n    layouts.configure(chart, title, options);\n    layouts.addBox(chart, title);\n    map.set(chart, title);\n  },\n\n  stop(chart) {\n    layouts.removeBox(chart, map.get(chart));\n    map.delete(chart);\n  },\n\n  beforeUpdate(chart, _args, options) {\n    const title = map.get(chart);\n    layouts.configure(chart, title, options);\n    title.options = options;\n  },\n\n  defaults: {\n    align: 'center',\n    display: false,\n    font: {\n      weight: 'normal',\n    },\n    fullSize: true,\n    padding: 0,\n    position: 'top',\n    text: '',\n    weight: 1500         // by default greater than legend (1000) and smaller than title (2000)\n  },\n\n  defaultRoutes: {\n    color: 'color'\n  },\n\n  descriptors: {\n    _scriptable: true,\n    _indexable: false,\n  },\n};\n","import Animations from '../core/core.animations.js';\nimport Element from '../core/core.element.js';\nimport {addRoundedRectPath} from '../helpers/helpers.canvas.js';\nimport {each, noop, isNullOrUndef, isArray, _elementsEqual, isObject} from '../helpers/helpers.core.js';\nimport {toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\nimport {getRtlAdapter, overrideTextDirection, restoreTextDirection} from '../helpers/helpers.rtl.js';\nimport {distanceBetweenPoints, _limitValue} from '../helpers/helpers.math.js';\nimport {createContext, drawPoint} from '../helpers/index.js';\n\n/**\n * @typedef { import('../platform/platform.base.js').Chart } Chart\n * @typedef { import('../types/index.js').ChartEvent } ChartEvent\n * @typedef { import('../types/index.js').ActiveElement } ActiveElement\n * @typedef { import('../core/core.interaction.js').InteractionItem } InteractionItem\n */\n\nconst positioners = {\n  /**\n\t * Average mode places the tooltip at the average position of the elements shown\n\t */\n  average(items) {\n    if (!items.length) {\n      return false;\n    }\n\n    let i, len;\n    let x = 0;\n    let y = 0;\n    let count = 0;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const pos = el.tooltipPosition();\n        x += pos.x;\n        y += pos.y;\n        ++count;\n      }\n    }\n\n    return {\n      x: x / count,\n      y: y / count\n    };\n  },\n\n  /**\n\t * Gets the tooltip position nearest of the item nearest to the event position\n\t */\n  nearest(items, eventPosition) {\n    if (!items.length) {\n      return false;\n    }\n\n    let x = eventPosition.x;\n    let y = eventPosition.y;\n    let minDistance = Number.POSITIVE_INFINITY;\n    let i, len, nearestElement;\n\n    for (i = 0, len = items.length; i < len; ++i) {\n      const el = items[i].element;\n      if (el && el.hasValue()) {\n        const center = el.getCenterPoint();\n        const d = distanceBetweenPoints(eventPosition, center);\n\n        if (d < minDistance) {\n          minDistance = d;\n          nearestElement = el;\n        }\n      }\n    }\n\n    if (nearestElement) {\n      const tp = nearestElement.tooltipPosition();\n      x = tp.x;\n      y = tp.y;\n    }\n\n    return {\n      x,\n      y\n    };\n  }\n};\n\n// Helper to push or concat based on if the 2nd parameter is an array or not\nfunction pushOrConcat(base, toPush) {\n  if (toPush) {\n    if (isArray(toPush)) {\n      // base = base.concat(toPush);\n      Array.prototype.push.apply(base, toPush);\n    } else {\n      base.push(toPush);\n    }\n  }\n\n  return base;\n}\n\n/**\n * Returns array of strings split by newline\n * @param {*} str - The value to split by newline.\n * @returns {string|string[]} value if newline present - Returned from String split() method\n * @function\n */\nfunction splitNewlines(str) {\n  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n    return str.split('\\n');\n  }\n  return str;\n}\n\n\n/**\n * Private helper to create a tooltip item model\n * @param {Chart} chart\n * @param {ActiveElement} item - {element, index, datasetIndex} to create the tooltip item for\n * @return new tooltip item\n */\nfunction createTooltipItem(chart, item) {\n  const {element, datasetIndex, index} = item;\n  const controller = chart.getDatasetMeta(datasetIndex).controller;\n  const {label, value} = controller.getLabelAndValue(index);\n\n  return {\n    chart,\n    label,\n    parsed: controller.getParsed(index),\n    raw: chart.data.datasets[datasetIndex].data[index],\n    formattedValue: value,\n    dataset: controller.getDataset(),\n    dataIndex: index,\n    datasetIndex,\n    element\n  };\n}\n\n/**\n * Get the size of the tooltip\n */\nfunction getTooltipSize(tooltip, options) {\n  const ctx = tooltip.chart.ctx;\n  const {body, footer, title} = tooltip;\n  const {boxWidth, boxHeight} = options;\n  const bodyFont = toFont(options.bodyFont);\n  const titleFont = toFont(options.titleFont);\n  const footerFont = toFont(options.footerFont);\n  const titleLineCount = title.length;\n  const footerLineCount = footer.length;\n  const bodyLineItemCount = body.length;\n\n  const padding = toPadding(options.padding);\n  let height = padding.height;\n  let width = 0;\n\n  // Count of all lines in the body\n  let combinedBodyLength = body.reduce((count, bodyItem) => count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n\n  if (titleLineCount) {\n    height += titleLineCount * titleFont.lineHeight\n\t\t\t+ (titleLineCount - 1) * options.titleSpacing\n\t\t\t+ options.titleMarginBottom;\n  }\n  if (combinedBodyLength) {\n    // Body lines may include some extra height depending on boxHeight\n    const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n    height += bodyLineItemCount * bodyLineHeight\n\t\t\t+ (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight\n\t\t\t+ (combinedBodyLength - 1) * options.bodySpacing;\n  }\n  if (footerLineCount) {\n    height += options.footerMarginTop\n\t\t\t+ footerLineCount * footerFont.lineHeight\n\t\t\t+ (footerLineCount - 1) * options.footerSpacing;\n  }\n\n  // Title width\n  let widthPadding = 0;\n  const maxLineWidth = function(line) {\n    width = Math.max(width, ctx.measureText(line).width + widthPadding);\n  };\n\n  ctx.save();\n\n  ctx.font = titleFont.string;\n  each(tooltip.title, maxLineWidth);\n\n  // Body width\n  ctx.font = bodyFont.string;\n  each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n\n  // Body lines may include some extra width due to the color box\n  widthPadding = options.displayColors ? (boxWidth + 2 + options.boxPadding) : 0;\n  each(body, (bodyItem) => {\n    each(bodyItem.before, maxLineWidth);\n    each(bodyItem.lines, maxLineWidth);\n    each(bodyItem.after, maxLineWidth);\n  });\n\n  // Reset back to 0\n  widthPadding = 0;\n\n  // Footer width\n  ctx.font = footerFont.string;\n  each(tooltip.footer, maxLineWidth);\n\n  ctx.restore();\n\n  // Add padding\n  width += padding.width;\n\n  return {width, height};\n}\n\nfunction determineYAlign(chart, size) {\n  const {y, height} = size;\n\n  if (y < height / 2) {\n    return 'top';\n  } else if (y > (chart.height - height / 2)) {\n    return 'bottom';\n  }\n  return 'center';\n}\n\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n  const {x, width} = size;\n  const caret = options.caretSize + options.caretPadding;\n  if (xAlign === 'left' && x + width + caret > chart.width) {\n    return true;\n  }\n\n  if (xAlign === 'right' && x - width - caret < 0) {\n    return true;\n  }\n}\n\nfunction determineXAlign(chart, options, size, yAlign) {\n  const {x, width} = size;\n  const {width: chartWidth, chartArea: {left, right}} = chart;\n  let xAlign = 'center';\n\n  if (yAlign === 'center') {\n    xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n  } else if (x <= width / 2) {\n    xAlign = 'left';\n  } else if (x >= chartWidth - width / 2) {\n    xAlign = 'right';\n  }\n\n  if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n    xAlign = 'center';\n  }\n\n  return xAlign;\n}\n\n/**\n * Helper to get the alignment of a tooltip given the size\n */\nfunction determineAlignment(chart, options, size) {\n  const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n\n  return {\n    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n    yAlign\n  };\n}\n\nfunction alignX(size, xAlign) {\n  let {x, width} = size;\n  if (xAlign === 'right') {\n    x -= width;\n  } else if (xAlign === 'center') {\n    x -= (width / 2);\n  }\n  return x;\n}\n\nfunction alignY(size, yAlign, paddingAndSize) {\n  // eslint-disable-next-line prefer-const\n  let {y, height} = size;\n  if (yAlign === 'top') {\n    y += paddingAndSize;\n  } else if (yAlign === 'bottom') {\n    y -= height + paddingAndSize;\n  } else {\n    y -= (height / 2);\n  }\n  return y;\n}\n\n/**\n * Helper to get the location a tooltip needs to be placed at given the initial position (via the vm) and the size and alignment\n */\nfunction getBackgroundPoint(options, size, alignment, chart) {\n  const {caretSize, caretPadding, cornerRadius} = options;\n  const {xAlign, yAlign} = alignment;\n  const paddingAndSize = caretSize + caretPadding;\n  const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n\n  let x = alignX(size, xAlign);\n  const y = alignY(size, yAlign, paddingAndSize);\n\n  if (yAlign === 'center') {\n    if (xAlign === 'left') {\n      x += paddingAndSize;\n    } else if (xAlign === 'right') {\n      x -= paddingAndSize;\n    }\n  } else if (xAlign === 'left') {\n    x -= Math.max(topLeft, bottomLeft) + caretSize;\n  } else if (xAlign === 'right') {\n    x += Math.max(topRight, bottomRight) + caretSize;\n  }\n\n  return {\n    x: _limitValue(x, 0, chart.width - size.width),\n    y: _limitValue(y, 0, chart.height - size.height)\n  };\n}\n\nfunction getAlignedX(tooltip, align, options) {\n  const padding = toPadding(options.padding);\n\n  return align === 'center'\n    ? tooltip.x + tooltip.width / 2\n    : align === 'right'\n      ? tooltip.x + tooltip.width - padding.right\n      : tooltip.x + padding.left;\n}\n\n/**\n * Helper to build before and after body lines\n */\nfunction getBeforeAfterBodyLines(callback) {\n  return pushOrConcat([], splitNewlines(callback));\n}\n\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n  return createContext(parent, {\n    tooltip,\n    tooltipItems,\n    type: 'tooltip'\n  });\n}\n\nfunction overrideCallbacks(callbacks, context) {\n  const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n  return override ? callbacks.override(override) : callbacks;\n}\n\nconst defaultCallbacks = {\n  // Args are: (tooltipItems, data)\n  beforeTitle: noop,\n  title(tooltipItems) {\n    if (tooltipItems.length > 0) {\n      const item = tooltipItems[0];\n      const labels = item.chart.data.labels;\n      const labelCount = labels ? labels.length : 0;\n\n      if (this && this.options && this.options.mode === 'dataset') {\n        return item.dataset.label || '';\n      } else if (item.label) {\n        return item.label;\n      } else if (labelCount > 0 && item.dataIndex < labelCount) {\n        return labels[item.dataIndex];\n      }\n    }\n\n    return '';\n  },\n  afterTitle: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeBody: noop,\n\n  // Args are: (tooltipItem, data)\n  beforeLabel: noop,\n  label(tooltipItem) {\n    if (this && this.options && this.options.mode === 'dataset') {\n      return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n    }\n\n    let label = tooltipItem.dataset.label || '';\n\n    if (label) {\n      label += ': ';\n    }\n    const value = tooltipItem.formattedValue;\n    if (!isNullOrUndef(value)) {\n      label += value;\n    }\n    return label;\n  },\n  labelColor(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      borderColor: options.borderColor,\n      backgroundColor: options.backgroundColor,\n      borderWidth: options.borderWidth,\n      borderDash: options.borderDash,\n      borderDashOffset: options.borderDashOffset,\n      borderRadius: 0,\n    };\n  },\n  labelTextColor() {\n    return this.options.bodyColor;\n  },\n  labelPointStyle(tooltipItem) {\n    const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n    const options = meta.controller.getStyle(tooltipItem.dataIndex);\n    return {\n      pointStyle: options.pointStyle,\n      rotation: options.rotation,\n    };\n  },\n  afterLabel: noop,\n\n  // Args are: (tooltipItems, data)\n  afterBody: noop,\n\n  // Args are: (tooltipItems, data)\n  beforeFooter: noop,\n  footer: noop,\n  afterFooter: noop\n};\n\n/**\n * Invoke callback from object with context and arguments.\n * If callback returns `undefined`, then will be invoked default callback.\n * @param {Record<keyof typeof defaultCallbacks, Function>} callbacks\n * @param {keyof typeof defaultCallbacks} name\n * @param {*} ctx\n * @param {*} arg\n * @returns {any}\n */\nfunction invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n  const result = callbacks[name].call(ctx, arg);\n\n  if (typeof result === 'undefined') {\n    return defaultCallbacks[name].call(ctx, arg);\n  }\n\n  return result;\n}\n\nexport class Tooltip extends Element {\n\n  /**\n   * @namespace Chart.Tooltip.positioners\n   */\n  static positioners = positioners;\n\n  constructor(config) {\n    super();\n\n    this.opacity = 0;\n    this._active = [];\n    this._eventPosition = undefined;\n    this._size = undefined;\n    this._cachedAnimations = undefined;\n    this._tooltipItems = [];\n    this.$animations = undefined;\n    this.$context = undefined;\n    this.chart = config.chart;\n    this.options = config.options;\n    this.dataPoints = undefined;\n    this.title = undefined;\n    this.beforeBody = undefined;\n    this.body = undefined;\n    this.afterBody = undefined;\n    this.footer = undefined;\n    this.xAlign = undefined;\n    this.yAlign = undefined;\n    this.x = undefined;\n    this.y = undefined;\n    this.height = undefined;\n    this.width = undefined;\n    this.caretX = undefined;\n    this.caretY = undefined;\n    // TODO: V4, make this private, rename to `_labelStyles`, and combine with `labelPointStyles`\n    // and `labelTextColors` to create a single variable\n    this.labelColors = undefined;\n    this.labelPointStyles = undefined;\n    this.labelTextColors = undefined;\n  }\n\n  initialize(options) {\n    this.options = options;\n    this._cachedAnimations = undefined;\n    this.$context = undefined;\n  }\n\n  /**\n\t * @private\n\t */\n  _resolveAnimations() {\n    const cached = this._cachedAnimations;\n\n    if (cached) {\n      return cached;\n    }\n\n    const chart = this.chart;\n    const options = this.options.setContext(this.getContext());\n    const opts = options.enabled && chart.options.animation && options.animations;\n    const animations = new Animations(this.chart, opts);\n    if (opts._cacheable) {\n      this._cachedAnimations = Object.freeze(animations);\n    }\n\n    return animations;\n  }\n\n  /**\n\t * @protected\n\t */\n  getContext() {\n    return this.$context ||\n\t\t\t(this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n  }\n\n  getTitle(context, options) {\n    const {callbacks} = options;\n\n    const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n    const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n    const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n    lines = pushOrConcat(lines, splitNewlines(title));\n    lines = pushOrConcat(lines, splitNewlines(afterTitle));\n\n    return lines;\n  }\n\n  getBeforeBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems)\n    );\n  }\n\n  getBody(tooltipItems, options) {\n    const {callbacks} = options;\n    const bodyItems = [];\n\n    each(tooltipItems, (context) => {\n      const bodyItem = {\n        before: [],\n        lines: [],\n        after: []\n      };\n      const scoped = overrideCallbacks(callbacks, context);\n      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n\n      bodyItems.push(bodyItem);\n    });\n\n    return bodyItems;\n  }\n\n  getAfterBody(tooltipItems, options) {\n    return getBeforeAfterBodyLines(\n      invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems)\n    );\n  }\n\n  // Get the footer and beforeFooter and afterFooter lines\n  getFooter(tooltipItems, options) {\n    const {callbacks} = options;\n\n    const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n    const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n    const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n\n    let lines = [];\n    lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n    lines = pushOrConcat(lines, splitNewlines(footer));\n    lines = pushOrConcat(lines, splitNewlines(afterFooter));\n\n    return lines;\n  }\n\n  /**\n\t * @private\n\t */\n  _createItems(options) {\n    const active = this._active;\n    const data = this.chart.data;\n    const labelColors = [];\n    const labelPointStyles = [];\n    const labelTextColors = [];\n    let tooltipItems = [];\n    let i, len;\n\n    for (i = 0, len = active.length; i < len; ++i) {\n      tooltipItems.push(createTooltipItem(this.chart, active[i]));\n    }\n\n    // If the user provided a filter function, use it to modify the tooltip items\n    if (options.filter) {\n      tooltipItems = tooltipItems.filter((element, index, array) => options.filter(element, index, array, data));\n    }\n\n    // If the user provided a sorting function, use it to modify the tooltip items\n    if (options.itemSort) {\n      tooltipItems = tooltipItems.sort((a, b) => options.itemSort(a, b, data));\n    }\n\n    // Determine colors for boxes\n    each(tooltipItems, (context) => {\n      const scoped = overrideCallbacks(options.callbacks, context);\n      labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n      labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n      labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n    });\n\n    this.labelColors = labelColors;\n    this.labelPointStyles = labelPointStyles;\n    this.labelTextColors = labelTextColors;\n    this.dataPoints = tooltipItems;\n    return tooltipItems;\n  }\n\n  update(changed, replay) {\n    const options = this.options.setContext(this.getContext());\n    const active = this._active;\n    let properties;\n    let tooltipItems = [];\n\n    if (!active.length) {\n      if (this.opacity !== 0) {\n        properties = {\n          opacity: 0\n        };\n      }\n    } else {\n      const position = positioners[options.position].call(this, active, this._eventPosition);\n      tooltipItems = this._createItems(options);\n\n      this.title = this.getTitle(tooltipItems, options);\n      this.beforeBody = this.getBeforeBody(tooltipItems, options);\n      this.body = this.getBody(tooltipItems, options);\n      this.afterBody = this.getAfterBody(tooltipItems, options);\n      this.footer = this.getFooter(tooltipItems, options);\n\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, size);\n      const alignment = determineAlignment(this.chart, options, positionAndSize);\n      const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n\n      this.xAlign = alignment.xAlign;\n      this.yAlign = alignment.yAlign;\n\n      properties = {\n        opacity: 1,\n        x: backgroundPoint.x,\n        y: backgroundPoint.y,\n        width: size.width,\n        height: size.height,\n        caretX: position.x,\n        caretY: position.y\n      };\n    }\n\n    this._tooltipItems = tooltipItems;\n    this.$context = undefined;\n\n    if (properties) {\n      this._resolveAnimations().update(this, properties);\n    }\n\n    if (changed && options.external) {\n      options.external.call(this, {chart: this.chart, tooltip: this, replay});\n    }\n  }\n\n  drawCaret(tooltipPoint, ctx, size, options) {\n    const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n\n    ctx.lineTo(caretPosition.x1, caretPosition.y1);\n    ctx.lineTo(caretPosition.x2, caretPosition.y2);\n    ctx.lineTo(caretPosition.x3, caretPosition.y3);\n  }\n\n  getCaretPosition(tooltipPoint, size, options) {\n    const {xAlign, yAlign} = this;\n    const {caretSize, cornerRadius} = options;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(cornerRadius);\n    const {x: ptX, y: ptY} = tooltipPoint;\n    const {width, height} = size;\n    let x1, x2, x3, y1, y2, y3;\n\n    if (yAlign === 'center') {\n      y2 = ptY + (height / 2);\n\n      if (xAlign === 'left') {\n        x1 = ptX;\n        x2 = x1 - caretSize;\n\n        // Left draws bottom -> top, this y1 is on the bottom\n        y1 = y2 + caretSize;\n        y3 = y2 - caretSize;\n      } else {\n        x1 = ptX + width;\n        x2 = x1 + caretSize;\n\n        // Right draws top -> bottom, thus y1 is on the top\n        y1 = y2 - caretSize;\n        y3 = y2 + caretSize;\n      }\n\n      x3 = x1;\n    } else {\n      if (xAlign === 'left') {\n        x2 = ptX + Math.max(topLeft, bottomLeft) + (caretSize);\n      } else if (xAlign === 'right') {\n        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n      } else {\n        x2 = this.caretX;\n      }\n\n      if (yAlign === 'top') {\n        y1 = ptY;\n        y2 = y1 - caretSize;\n\n        // Top draws left -> right, thus x1 is on the left\n        x1 = x2 - caretSize;\n        x3 = x2 + caretSize;\n      } else {\n        y1 = ptY + height;\n        y2 = y1 + caretSize;\n\n        // Bottom draws right -> left, thus x1 is on the right\n        x1 = x2 + caretSize;\n        x3 = x2 - caretSize;\n      }\n      y3 = y1;\n    }\n    return {x1, x2, x3, y1, y2, y3};\n  }\n\n  drawTitle(pt, ctx, options) {\n    const title = this.title;\n    const length = title.length;\n    let titleFont, titleSpacing, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.titleAlign, options);\n\n      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n      ctx.textBaseline = 'middle';\n\n      titleFont = toFont(options.titleFont);\n      titleSpacing = options.titleSpacing;\n\n      ctx.fillStyle = options.titleColor;\n      ctx.font = titleFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n        pt.y += titleFont.lineHeight + titleSpacing; // Line Height and spacing\n\n        if (i + 1 === length) {\n          pt.y += options.titleMarginBottom - titleSpacing; // If Last, add margin, remove spacing\n        }\n      }\n    }\n  }\n\n  /**\n\t * @private\n\t */\n  _drawColorBox(ctx, pt, i, rtlHelper, options) {\n    const labelColor = this.labelColors[i];\n    const labelPointStyle = this.labelPointStyles[i];\n    const {boxHeight, boxWidth} = options;\n    const bodyFont = toFont(options.bodyFont);\n    const colorX = getAlignedX(this, 'left', options);\n    const rtlColorX = rtlHelper.x(colorX);\n    const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n    const colorY = pt.y + yOffSet;\n\n    if (options.usePointStyle) {\n      const drawOptions = {\n        radius: Math.min(boxWidth, boxHeight) / 2, // fit the circle in the box\n        pointStyle: labelPointStyle.pointStyle,\n        rotation: labelPointStyle.rotation,\n        borderWidth: 1\n      };\n      // Recalculate x and y for drawPoint() because its expecting\n      // x and y to be center of figure (instead of top left)\n      const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n      const centerY = colorY + boxHeight / 2;\n\n      // Fill the point with white so that colours merge nicely if the opacity is < 1\n      ctx.strokeStyle = options.multiKeyBackground;\n      ctx.fillStyle = options.multiKeyBackground;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n\n      // Draw the point\n      ctx.strokeStyle = labelColor.borderColor;\n      ctx.fillStyle = labelColor.backgroundColor;\n      drawPoint(ctx, drawOptions, centerX, centerY);\n    } else {\n      // Border\n      ctx.lineWidth = isObject(labelColor.borderWidth) ? Math.max(...Object.values(labelColor.borderWidth)) : (labelColor.borderWidth || 1); // TODO, v4 remove fallback\n      ctx.strokeStyle = labelColor.borderColor;\n      ctx.setLineDash(labelColor.borderDash || []);\n      ctx.lineDashOffset = labelColor.borderDashOffset || 0;\n\n      // Fill a white rect so that colours merge nicely if the opacity is < 1\n      const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth);\n      const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - 2);\n      const borderRadius = toTRBLCorners(labelColor.borderRadius);\n\n      if (Object.values(borderRadius).some(v => v !== 0)) {\n        ctx.beginPath();\n        ctx.fillStyle = options.multiKeyBackground;\n        addRoundedRectPath(ctx, {\n          x: outerX,\n          y: colorY,\n          w: boxWidth,\n          h: boxHeight,\n          radius: borderRadius,\n        });\n        ctx.fill();\n        ctx.stroke();\n\n        // Inner square\n        ctx.fillStyle = labelColor.backgroundColor;\n        ctx.beginPath();\n        addRoundedRectPath(ctx, {\n          x: innerX,\n          y: colorY + 1,\n          w: boxWidth - 2,\n          h: boxHeight - 2,\n          radius: borderRadius,\n        });\n        ctx.fill();\n      } else {\n        // Normal rect\n        ctx.fillStyle = options.multiKeyBackground;\n        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n        // Inner square\n        ctx.fillStyle = labelColor.backgroundColor;\n        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n      }\n    }\n\n    // restore fillStyle\n    ctx.fillStyle = this.labelTextColors[i];\n  }\n\n  drawBody(pt, ctx, options) {\n    const {body} = this;\n    const {bodySpacing, bodyAlign, displayColors, boxHeight, boxWidth, boxPadding} = options;\n    const bodyFont = toFont(options.bodyFont);\n    let bodyLineHeight = bodyFont.lineHeight;\n    let xLinePadding = 0;\n\n    const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n    const fillLineOfText = function(line) {\n      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n      pt.y += bodyLineHeight + bodySpacing;\n    };\n\n    const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n    let bodyItem, textColor, lines, i, j, ilen, jlen;\n\n    ctx.textAlign = bodyAlign;\n    ctx.textBaseline = 'middle';\n    ctx.font = bodyFont.string;\n\n    pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n\n    // Before body lines\n    ctx.fillStyle = options.bodyColor;\n    each(this.beforeBody, fillLineOfText);\n\n    xLinePadding = displayColors && bodyAlignForCalculation !== 'right'\n      ? bodyAlign === 'center' ? (boxWidth / 2 + boxPadding) : (boxWidth + 2 + boxPadding)\n      : 0;\n\n    // Draw body lines now\n    for (i = 0, ilen = body.length; i < ilen; ++i) {\n      bodyItem = body[i];\n      textColor = this.labelTextColors[i];\n\n      ctx.fillStyle = textColor;\n      each(bodyItem.before, fillLineOfText);\n\n      lines = bodyItem.lines;\n      // Draw Legend-like boxes if needed\n      if (displayColors && lines.length) {\n        this._drawColorBox(ctx, pt, i, rtlHelper, options);\n        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n      }\n\n      for (j = 0, jlen = lines.length; j < jlen; ++j) {\n        fillLineOfText(lines[j]);\n        // Reset for any lines that don't include colorbox\n        bodyLineHeight = bodyFont.lineHeight;\n      }\n\n      each(bodyItem.after, fillLineOfText);\n    }\n\n    // Reset back to 0 for after body\n    xLinePadding = 0;\n    bodyLineHeight = bodyFont.lineHeight;\n\n    // After body lines\n    each(this.afterBody, fillLineOfText);\n    pt.y -= bodySpacing; // Remove last body spacing\n  }\n\n  drawFooter(pt, ctx, options) {\n    const footer = this.footer;\n    const length = footer.length;\n    let footerFont, i;\n\n    if (length) {\n      const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n\n      pt.x = getAlignedX(this, options.footerAlign, options);\n      pt.y += options.footerMarginTop;\n\n      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n      ctx.textBaseline = 'middle';\n\n      footerFont = toFont(options.footerFont);\n\n      ctx.fillStyle = options.footerColor;\n      ctx.font = footerFont.string;\n\n      for (i = 0; i < length; ++i) {\n        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n        pt.y += footerFont.lineHeight + options.footerSpacing;\n      }\n    }\n  }\n\n  drawBackground(pt, ctx, tooltipSize, options) {\n    const {xAlign, yAlign} = this;\n    const {x, y} = pt;\n    const {width, height} = tooltipSize;\n    const {topLeft, topRight, bottomLeft, bottomRight} = toTRBLCorners(options.cornerRadius);\n\n    ctx.fillStyle = options.backgroundColor;\n    ctx.strokeStyle = options.borderColor;\n    ctx.lineWidth = options.borderWidth;\n\n    ctx.beginPath();\n    ctx.moveTo(x + topLeft, y);\n    if (yAlign === 'top') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width - topRight, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n    if (yAlign === 'center' && xAlign === 'right') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + width, y + height - bottomRight);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n    if (yAlign === 'bottom') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x + bottomLeft, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n    if (yAlign === 'center' && xAlign === 'left') {\n      this.drawCaret(pt, ctx, tooltipSize, options);\n    }\n    ctx.lineTo(x, y + topLeft);\n    ctx.quadraticCurveTo(x, y, x + topLeft, y);\n    ctx.closePath();\n\n    ctx.fill();\n\n    if (options.borderWidth > 0) {\n      ctx.stroke();\n    }\n  }\n\n  /**\n\t * Update x/y animation targets when _active elements are animating too\n\t * @private\n\t */\n  _updateAnimationTarget(options) {\n    const chart = this.chart;\n    const anims = this.$animations;\n    const animX = anims && anims.x;\n    const animY = anims && anims.y;\n    if (animX || animY) {\n      const position = positioners[options.position].call(this, this._active, this._eventPosition);\n      if (!position) {\n        return;\n      }\n      const size = this._size = getTooltipSize(this, options);\n      const positionAndSize = Object.assign({}, position, this._size);\n      const alignment = determineAlignment(chart, options, positionAndSize);\n      const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n      if (animX._to !== point.x || animY._to !== point.y) {\n        this.xAlign = alignment.xAlign;\n        this.yAlign = alignment.yAlign;\n        this.width = size.width;\n        this.height = size.height;\n        this.caretX = position.x;\n        this.caretY = position.y;\n        this._resolveAnimations().update(this, point);\n      }\n    }\n  }\n\n  /**\n   * Determine if the tooltip will draw anything\n   * @returns {boolean} True if the tooltip will render\n   */\n  _willRender() {\n    return !!this.opacity;\n  }\n\n  draw(ctx) {\n    const options = this.options.setContext(this.getContext());\n    let opacity = this.opacity;\n\n    if (!opacity) {\n      return;\n    }\n\n    this._updateAnimationTarget(options);\n\n    const tooltipSize = {\n      width: this.width,\n      height: this.height\n    };\n    const pt = {\n      x: this.x,\n      y: this.y\n    };\n\n    // IE11/Edge does not like very small opacities, so snap to 0\n    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n\n    const padding = toPadding(options.padding);\n\n    // Truthy/falsey value for empty tooltip\n    const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n\n    if (options.enabled && hasTooltipContent) {\n      ctx.save();\n      ctx.globalAlpha = opacity;\n\n      // Draw Background\n      this.drawBackground(pt, ctx, tooltipSize, options);\n\n      overrideTextDirection(ctx, options.textDirection);\n\n      pt.y += padding.top;\n\n      // Titles\n      this.drawTitle(pt, ctx, options);\n\n      // Body\n      this.drawBody(pt, ctx, options);\n\n      // Footer\n      this.drawFooter(pt, ctx, options);\n\n      restoreTextDirection(ctx, options.textDirection);\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * Get active elements in the tooltip\n\t * @returns {Array} Array of elements that are active in the tooltip\n\t */\n  getActiveElements() {\n    return this._active || [];\n  }\n\n  /**\n\t * Set active elements in the tooltip\n\t * @param {array} activeElements Array of active datasetIndex/index pairs.\n\t * @param {object} eventPosition Synthetic event position used in positioning\n\t */\n  setActiveElements(activeElements, eventPosition) {\n    const lastActive = this._active;\n    const active = activeElements.map(({datasetIndex, index}) => {\n      const meta = this.chart.getDatasetMeta(datasetIndex);\n\n      if (!meta) {\n        throw new Error('Cannot find a dataset at index ' + datasetIndex);\n      }\n\n      return {\n        datasetIndex,\n        element: meta.data[index],\n        index,\n      };\n    });\n    const changed = !_elementsEqual(lastActive, active);\n    const positionChanged = this._positionChanged(active, eventPosition);\n\n    if (changed || positionChanged) {\n      this._active = active;\n      this._eventPosition = eventPosition;\n      this._ignoreReplayEvents = true;\n      this.update(true);\n    }\n  }\n\n  /**\n\t * Handle an event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {boolean} true if the tooltip changed\n\t */\n  handleEvent(e, replay, inChartArea = true) {\n    if (replay && this._ignoreReplayEvents) {\n      return false;\n    }\n    this._ignoreReplayEvents = false;\n\n    const options = this.options;\n    const lastActive = this._active || [];\n    const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n\n    // When there are multiple items shown, but the tooltip position is nearest mode\n    // an update may need to be made because our position may have changed even though\n    // the items are the same as before.\n    const positionChanged = this._positionChanged(active, e);\n\n    // Remember Last Actives\n    const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n\n    // Only handle target event on tooltip change\n    if (changed) {\n      this._active = active;\n\n      if (options.enabled || options.external) {\n        this._eventPosition = {\n          x: e.x,\n          y: e.y\n        };\n\n        this.update(true, replay);\n      }\n    }\n\n    return changed;\n  }\n\n  /**\n\t * Helper for determining the active elements for event\n\t * @param {ChartEvent} e - The event to handle\n\t * @param {InteractionItem[]} lastActive - Previously active elements\n\t * @param {boolean} [replay] - This is a replayed event (from update)\n\t * @param {boolean} [inChartArea] - The event is inside chartArea\n\t * @returns {InteractionItem[]} - Active elements\n\t * @private\n\t */\n  _getActiveElements(e, lastActive, replay, inChartArea) {\n    const options = this.options;\n\n    if (e.type === 'mouseout') {\n      return [];\n    }\n\n    if (!inChartArea) {\n      // Let user control the active elements outside chartArea. Eg. using Legend.\n      return lastActive;\n    }\n\n    // Find Active Elements for tooltips\n    const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n\n    if (options.reverse) {\n      active.reverse();\n    }\n\n    return active;\n  }\n\n  /**\n\t * Determine if the active elements + event combination changes the\n\t * tooltip position\n\t * @param {array} active - Active elements\n\t * @param {ChartEvent} e - Event that triggered the position change\n\t * @returns {boolean} True if the position has changed\n\t */\n  _positionChanged(active, e) {\n    const {caretX, caretY, options} = this;\n    const position = positioners[options.position].call(this, active, e);\n    return position !== false && (caretX !== position.x || caretY !== position.y);\n  }\n}\n\nexport default {\n  id: 'tooltip',\n  _element: Tooltip,\n  positioners,\n\n  afterInit(chart, _args, options) {\n    if (options) {\n      chart.tooltip = new Tooltip({chart, options});\n    }\n  },\n\n  beforeUpdate(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  reset(chart, _args, options) {\n    if (chart.tooltip) {\n      chart.tooltip.initialize(options);\n    }\n  },\n\n  afterDraw(chart) {\n    const tooltip = chart.tooltip;\n\n    if (tooltip && tooltip._willRender()) {\n      const args = {\n        tooltip\n      };\n\n      if (chart.notifyPlugins('beforeTooltipDraw', {...args, cancelable: true}) === false) {\n        return;\n      }\n\n      tooltip.draw(chart.ctx);\n\n      chart.notifyPlugins('afterTooltipDraw', args);\n    }\n  },\n\n  afterEvent(chart, args) {\n    if (chart.tooltip) {\n      // If the event is replayed from `update`, we should evaluate with the final positions.\n      const useFinalPosition = args.replay;\n      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n        // notify chart about the change, so it will render\n        args.changed = true;\n      }\n    }\n  },\n\n  defaults: {\n    enabled: true,\n    external: null,\n    position: 'average',\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    titleColor: '#fff',\n    titleFont: {\n      weight: 'bold',\n    },\n    titleSpacing: 2,\n    titleMarginBottom: 6,\n    titleAlign: 'left',\n    bodyColor: '#fff',\n    bodySpacing: 2,\n    bodyFont: {\n    },\n    bodyAlign: 'left',\n    footerColor: '#fff',\n    footerSpacing: 2,\n    footerMarginTop: 6,\n    footerFont: {\n      weight: 'bold',\n    },\n    footerAlign: 'left',\n    padding: 6,\n    caretPadding: 2,\n    caretSize: 5,\n    cornerRadius: 6,\n    boxHeight: (ctx, opts) => opts.bodyFont.size,\n    boxWidth: (ctx, opts) => opts.bodyFont.size,\n    multiKeyBackground: '#fff',\n    displayColors: true,\n    boxPadding: 0,\n    borderColor: 'rgba(0,0,0,0)',\n    borderWidth: 0,\n    animation: {\n      duration: 400,\n      easing: 'easeOutQuart',\n    },\n    animations: {\n      numbers: {\n        type: 'number',\n        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY'],\n      },\n      opacity: {\n        easing: 'linear',\n        duration: 200\n      }\n    },\n    callbacks: defaultCallbacks\n  },\n\n  defaultRoutes: {\n    bodyFont: 'font',\n    footerFont: 'font',\n    titleFont: 'font'\n  },\n\n  descriptors: {\n    _scriptable: (name) => name !== 'filter' && name !== 'itemSort' && name !== 'external',\n    _indexable: false,\n    callbacks: {\n      _scriptable: false,\n      _indexable: false,\n    },\n    animation: {\n      _fallback: false\n    },\n    animations: {\n      _fallback: 'animation'\n    }\n  },\n\n  // Resolve additionally from `interaction` options and defaults.\n  additionalOptionScopes: ['interaction']\n};\n","import Scale from '../core/core.scale.js';\nimport {isNullOrUndef, valueOrDefault, _limitValue} from '../helpers/index.js';\n\nconst addIfString = (labels, raw, index, addedLabels) => {\n  if (typeof raw === 'string') {\n    index = labels.push(raw) - 1;\n    addedLabels.unshift({index, label: raw});\n  } else if (isNaN(raw)) {\n    index = null;\n  }\n  return index;\n};\n\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n  const first = labels.indexOf(raw);\n  if (first === -1) {\n    return addIfString(labels, raw, index, addedLabels);\n  }\n  const last = labels.lastIndexOf(raw);\n  return first !== last ? index : first;\n}\n\nconst validIndex = (index, max) => index === null ? null : _limitValue(Math.round(index), 0, max);\n\nfunction _getLabelForValue(value) {\n  const labels = this.getLabels();\n\n  if (value >= 0 && value < labels.length) {\n    return labels[value];\n  }\n  return value;\n}\n\nexport default class CategoryScale extends Scale {\n\n  static id = 'category';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: _getLabelForValue\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n    this._addedLabels = [];\n  }\n\n  init(scaleOptions) {\n    const added = this._addedLabels;\n    if (added.length) {\n      const labels = this.getLabels();\n      for (const {index, label} of added) {\n        if (labels[index] === label) {\n          labels.splice(index, 1);\n        }\n      }\n      this._addedLabels = [];\n    }\n    super.init(scaleOptions);\n  }\n\n  parse(raw, index) {\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    const labels = this.getLabels();\n    index = isFinite(index) && labels[index] === raw ? index\n      : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n    return validIndex(index, labels.length - 1);\n  }\n\n  determineDataLimits() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this.getMinMax(true);\n\n    if (this.options.bounds === 'ticks') {\n      if (!minDefined) {\n        min = 0;\n      }\n      if (!maxDefined) {\n        max = this.getLabels().length - 1;\n      }\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const min = this.min;\n    const max = this.max;\n    const offset = this.options.offset;\n    const ticks = [];\n    let labels = this.getLabels();\n\n    // If we are viewing some subset of labels, slice the original array\n    labels = (min === 0 && max === labels.length - 1) ? labels : labels.slice(min, max + 1);\n\n    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n    this._startValue = this.min - (offset ? 0.5 : 0);\n\n    for (let value = min; value <= max; value++) {\n      ticks.push({value});\n    }\n    return ticks;\n  }\n\n  getLabelForValue(value) {\n    return _getLabelForValue.call(this, value);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    super.configure();\n\n    if (!this.isHorizontal()) {\n      // For backward compatibility, vertical category scale reverse is inverted.\n      this._reversePixels = !this._reversePixels;\n    }\n  }\n\n  // Used to get data value locations. Value can either be an index or a numerical value\n  getPixelForValue(value) {\n    if (typeof value !== 'number') {\n      value = this.parse(value);\n    }\n\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  // Must override base implementation because it calls getPixelForValue\n  // and category scale can have duplicate values\n  getPixelForTick(index) {\n    const ticks = this.ticks;\n    if (index < 0 || index > ticks.length - 1) {\n      return null;\n    }\n    return this.getPixelForValue(ticks[index].value);\n  }\n\n  getValueForPixel(pixel) {\n    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n  }\n\n  getBasePixel() {\n    return this.bottom;\n  }\n}\n","import {isNullOrUndef} from '../helpers/helpers.core.js';\nimport {almostEquals, almostWhole, niceNum, _decimalPlaces, _setMinAndMaxByKey, sign, toRadians} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\n\n/**\n * Generate a set of linear ticks for an axis\n * 1. If generationOptions.min, generationOptions.max, and generationOptions.step are defined:\n *    if (max - min) / step is an integer, ticks are generated as [min, min + step, ..., max]\n *    Note that the generationOptions.maxCount setting is respected in this scenario\n *\n * 2. If generationOptions.min, generationOptions.max, and generationOptions.count is defined\n *    spacing = (max - min) / count\n *    Ticks are generated as [min, min + spacing, ..., max]\n *\n * 3. If generationOptions.count is defined\n *    spacing = (niceMax - niceMin) / count\n *\n * 4. Compute optimal spacing of ticks using niceNum algorithm\n *\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, dataRange) {\n  const ticks = [];\n  // To get a \"nice\" value for the tick spacing, we will use the appropriately named\n  // \"nice number\" algorithm. See https://stackoverflow.com/questions/8506881/nice-label-algorithm-for-charts-with-minimum-ticks\n  // for details.\n\n  const MIN_SPACING = 1e-14;\n  const {bounds, step, min, max, precision, count, maxTicks, maxDigits, includeBounds} = generationOptions;\n  const unit = step || 1;\n  const maxSpaces = maxTicks - 1;\n  const {min: rmin, max: rmax} = dataRange;\n  const minDefined = !isNullOrUndef(min);\n  const maxDefined = !isNullOrUndef(max);\n  const countDefined = !isNullOrUndef(count);\n  const minSpacing = (rmax - rmin) / (maxDigits + 1);\n  let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n  let factor, niceMin, niceMax, numSpaces;\n\n  // Beyond MIN_SPACING floating point numbers being to lose precision\n  // such that we can't do the math necessary to generate ticks\n  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n    return [{value: rmin}, {value: rmax}];\n  }\n\n  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n  if (numSpaces > maxSpaces) {\n    // If the calculated num of spaces exceeds maxNumSpaces, recalculate it\n    spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n  }\n\n  if (!isNullOrUndef(precision)) {\n    // If the user specified a precision, round to that number of decimal places\n    factor = Math.pow(10, precision);\n    spacing = Math.ceil(spacing * factor) / factor;\n  }\n\n  if (bounds === 'ticks') {\n    niceMin = Math.floor(rmin / spacing) * spacing;\n    niceMax = Math.ceil(rmax / spacing) * spacing;\n  } else {\n    niceMin = rmin;\n    niceMax = rmax;\n  }\n\n  if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n    // Case 1: If min, max and stepSize are set and they make an evenly spaced scale use it.\n    // spacing = step;\n    // numSpaces = (max - min) / spacing;\n    // Note that we round here to handle the case where almostWhole translated an FP error\n    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n    spacing = (max - min) / numSpaces;\n    niceMin = min;\n    niceMax = max;\n  } else if (countDefined) {\n    // Cases 2 & 3, we have a count specified. Handle optional user defined edges to the range.\n    // Sometimes these are no-ops, but it makes the code a lot clearer\n    // and when a user defined range is specified, we want the correct ticks\n    niceMin = minDefined ? min : niceMin;\n    niceMax = maxDefined ? max : niceMax;\n    numSpaces = count - 1;\n    spacing = (niceMax - niceMin) / numSpaces;\n  } else {\n    // Case 4\n    numSpaces = (niceMax - niceMin) / spacing;\n\n    // If very close to our rounded value, use it.\n    if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n      numSpaces = Math.round(numSpaces);\n    } else {\n      numSpaces = Math.ceil(numSpaces);\n    }\n  }\n\n  // The spacing will have changed in cases 1, 2, and 3 so the factor cannot be computed\n  // until this point\n  const decimalPlaces = Math.max(\n    _decimalPlaces(spacing),\n    _decimalPlaces(niceMin)\n  );\n  factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n  niceMin = Math.round(niceMin * factor) / factor;\n  niceMax = Math.round(niceMax * factor) / factor;\n\n  let j = 0;\n  if (minDefined) {\n    if (includeBounds && niceMin !== min) {\n      ticks.push({value: min});\n\n      if (niceMin < min) {\n        j++; // Skip niceMin\n      }\n      // If the next nice tick is close to min, skip it\n      if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n        j++;\n      }\n    } else if (niceMin < min) {\n      j++;\n    }\n  }\n\n  for (; j < numSpaces; ++j) {\n    const tickValue = Math.round((niceMin + j * spacing) * factor) / factor;\n    if (maxDefined && tickValue > max) {\n      break;\n    }\n    ticks.push({value: tickValue});\n  }\n\n  if (maxDefined && includeBounds && niceMax !== max) {\n    // If the previous tick is too close to max, replace it with max, else add max\n    if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n      ticks[ticks.length - 1].value = max;\n    } else {\n      ticks.push({value: max});\n    }\n  } else if (!maxDefined || niceMax === max) {\n    ticks.push({value: niceMax});\n  }\n\n  return ticks;\n}\n\nfunction relativeLabelSize(value, minSpacing, {horizontal, minRotation}) {\n  const rad = toRadians(minRotation);\n  const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n  const length = 0.75 * minSpacing * ('' + value).length;\n  return Math.min(minSpacing / ratio, length);\n}\n\nexport default class LinearScaleBase extends Scale {\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    /** @type {number} */\n    this._endValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (isNullOrUndef(raw)) {\n      return null;\n    }\n    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n      return null;\n    }\n\n    return +raw;\n  }\n\n  handleTickRangeOptions() {\n    const {beginAtZero} = this.options;\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let {min, max} = this;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (beginAtZero) {\n      const minSign = sign(min);\n      const maxSign = sign(max);\n\n      if (minSign < 0 && maxSign < 0) {\n        setMax(0);\n      } else if (minSign > 0 && maxSign > 0) {\n        setMin(0);\n      }\n    }\n\n    if (min === max) {\n      let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n\n      setMax(max + offset);\n\n      if (!beginAtZero) {\n        setMin(min - offset);\n      }\n    }\n    this.min = min;\n    this.max = max;\n  }\n\n  getTickLimit() {\n    const tickOpts = this.options.ticks;\n    // eslint-disable-next-line prefer-const\n    let {maxTicksLimit, stepSize} = tickOpts;\n    let maxTicks;\n\n    if (stepSize) {\n      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n      if (maxTicks > 1000) {\n        console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n        maxTicks = 1000;\n      }\n    } else {\n      maxTicks = this.computeTickLimit();\n      maxTicksLimit = maxTicksLimit || 11;\n    }\n\n    if (maxTicksLimit) {\n      maxTicks = Math.min(maxTicksLimit, maxTicks);\n    }\n\n    return maxTicks;\n  }\n\n  /**\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    // Figure out what the max number of ticks we can support it is based on the size of\n    // the axis area. For now, we say that the minimum tick spacing in pixels must be 40\n    // We also limit the maximum number of ticks to 11 which gives a nice 10 squares on\n    // the graph. Make sure we always have at least 2 ticks\n    let maxTicks = this.getTickLimit();\n    maxTicks = Math.max(2, maxTicks);\n\n    const numericGeneratorOptions = {\n      maxTicks,\n      bounds: opts.bounds,\n      min: opts.min,\n      max: opts.max,\n      precision: tickOpts.precision,\n      step: tickOpts.stepSize,\n      count: tickOpts.count,\n      maxDigits: this._maxDigits(),\n      horizontal: this.isHorizontal(),\n      minRotation: tickOpts.minRotation || 0,\n      includeBounds: tickOpts.includeBounds !== false\n    };\n    const dataRange = this._range || this;\n    const ticks = generateTicks(numericGeneratorOptions, dataRange);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const ticks = this.ticks;\n    let start = this.min;\n    let end = this.max;\n\n    super.configure();\n\n    if (this.options.offset && ticks.length) {\n      const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n      start -= offset;\n      end += offset;\n    }\n    this._startValue = start;\n    this._endValue = end;\n    this._valueRange = end - start;\n  }\n\n  getLabelForValue(value) {\n    return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n}\n","import {isFinite} from '../helpers/helpers.core.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {toRadians} from '../helpers/index.js';\n\nexport default class LinearScale extends LinearScaleBase {\n\n  static id = 'linear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.numeric\n    }\n  };\n\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? min : 0;\n    this.max = isFinite(max) ? max : 1;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n \t */\n  computeTickLimit() {\n    const horizontal = this.isHorizontal();\n    const length = horizontal ? this.width : this.height;\n    const minRotation = toRadians(this.options.ticks.minRotation);\n    const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n    const tickFont = this._resolveTickFontOptions(0);\n    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n  }\n\n  // Utils\n  getPixelForValue(value) {\n    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n  }\n}\n","import {finiteOrDefault, isFinite} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {_setMinAndMaxByKey, log10} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\n\nconst log10Floor = v => Math.floor(log10(v));\nconst changeExponent = (v, m) => Math.pow(10, log10Floor(v) + m);\n\nfunction isMajor(tickVal) {\n  const remain = tickVal / (Math.pow(10, log10Floor(tickVal)));\n  return remain === 1;\n}\n\nfunction steps(min, max, rangeExp) {\n  const rangeStep = Math.pow(10, rangeExp);\n  const start = Math.floor(min / rangeStep);\n  const end = Math.ceil(max / rangeStep);\n  return end - start;\n}\n\nfunction startExp(min, max) {\n  const range = max - min;\n  let rangeExp = log10Floor(range);\n  while (steps(min, max, rangeExp) > 10) {\n    rangeExp++;\n  }\n  while (steps(min, max, rangeExp) < 10) {\n    rangeExp--;\n  }\n  return Math.min(rangeExp, log10Floor(min));\n}\n\n\n/**\n * Generate a set of logarithmic ticks\n * @param generationOptions the options used to generate the ticks\n * @param dataRange the range of the data\n * @returns {object[]} array of tick objects\n */\nfunction generateTicks(generationOptions, {min, max}) {\n  min = finiteOrDefault(generationOptions.min, min);\n  const ticks = [];\n  const minExp = log10Floor(min);\n  let exp = startExp(min, max);\n  let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n  const stepSize = Math.pow(10, exp);\n  const base = minExp > exp ? Math.pow(10, minExp) : 0;\n  const start = Math.round((min - base) * precision) / precision;\n  const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n  let significand = Math.floor((start - offset) / Math.pow(10, exp));\n  let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n  while (value < max) {\n    ticks.push({value, major: isMajor(value), significand});\n    if (significand >= 10) {\n      significand = significand < 15 ? 15 : 20;\n    } else {\n      significand++;\n    }\n    if (significand >= 20) {\n      exp++;\n      significand = 2;\n      precision = exp >= 0 ? 1 : precision;\n    }\n    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n  }\n  const lastTick = finiteOrDefault(generationOptions.max, value);\n  ticks.push({value: lastTick, major: isMajor(lastTick), significand});\n\n  return ticks;\n}\n\nexport default class LogarithmicScale extends Scale {\n\n  static id = 'logarithmic';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    ticks: {\n      callback: Ticks.formatters.logarithmic,\n      major: {\n        enabled: true\n      }\n    }\n  };\n\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.start = undefined;\n    /** @type {number} */\n    this.end = undefined;\n    /** @type {number} */\n    this._startValue = undefined;\n    this._valueRange = 0;\n  }\n\n  parse(raw, index) {\n    const value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);\n    if (value === 0) {\n      this._zero = true;\n      return undefined;\n    }\n    return isFinite(value) && value > 0 ? value : null;\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(true);\n\n    this.min = isFinite(min) ? Math.max(0, min) : null;\n    this.max = isFinite(max) ? Math.max(0, max) : null;\n\n    if (this.options.beginAtZero) {\n      this._zero = true;\n    }\n\n    // if data has `0` in it or `beginAtZero` is true, min (non zero) value is at bottom\n    // of scale, and it does not equal suggestedMin, lower the min bound by one exp.\n    if (this._zero && this.min !== this._suggestedMin && !isFinite(this._userMin)) {\n      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n    }\n\n    this.handleTickRangeOptions();\n  }\n\n  handleTickRangeOptions() {\n    const {minDefined, maxDefined} = this.getUserBounds();\n    let min = this.min;\n    let max = this.max;\n\n    const setMin = v => (min = minDefined ? min : v);\n    const setMax = v => (max = maxDefined ? max : v);\n\n    if (min === max) {\n      if (min <= 0) { // includes null\n        setMin(1);\n        setMax(10);\n      } else {\n        setMin(changeExponent(min, -1));\n        setMax(changeExponent(max, +1));\n      }\n    }\n    if (min <= 0) {\n      setMin(changeExponent(max, -1));\n    }\n    if (max <= 0) {\n\n      setMax(changeExponent(min, +1));\n    }\n\n    this.min = min;\n    this.max = max;\n  }\n\n  buildTicks() {\n    const opts = this.options;\n\n    const generationOptions = {\n      min: this._userMin,\n      max: this._userMax\n    };\n    const ticks = generateTicks(generationOptions, this);\n\n    // At this point, we need to update our max and min given the tick values,\n    // since we probably have expanded the range of the scale\n    if (opts.bounds === 'ticks') {\n      _setMinAndMaxByKey(ticks, this, 'value');\n    }\n\n    if (opts.reverse) {\n      ticks.reverse();\n\n      this.start = this.max;\n      this.end = this.min;\n    } else {\n      this.start = this.min;\n      this.end = this.max;\n    }\n\n    return ticks;\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    return value === undefined\n      ? '0'\n      : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n  }\n\n  /**\n\t * @protected\n\t */\n  configure() {\n    const start = this.min;\n\n    super.configure();\n\n    this._startValue = log10(start);\n    this._valueRange = log10(this.max) - log10(start);\n  }\n\n  getPixelForValue(value) {\n    if (value === undefined || value === 0) {\n      value = this.min;\n    }\n    if (value === null || isNaN(value)) {\n      return NaN;\n    }\n    return this.getPixelForDecimal(value === this.min\n      ? 0\n      : (log10(value) - this._startValue) / this._valueRange);\n  }\n\n  getValueForPixel(pixel) {\n    const decimal = this.getDecimalForPixel(pixel);\n    return Math.pow(10, this._startValue + decimal * this._valueRange);\n  }\n}\n","import defaults from '../core/core.defaults.js';\nimport {_longestText, addRoundedRectPath, renderText, _isPointInArea} from '../helpers/helpers.canvas.js';\nimport {HALF_PI, TAU, toDegrees, toRadians, _normalizeAngle, PI} from '../helpers/helpers.math.js';\nimport LinearScaleBase from './scale.linearbase.js';\nimport Ticks from '../core/core.ticks.js';\nimport {valueOrDefault, isArray, isFinite, callback as callCallback, isNullOrUndef} from '../helpers/helpers.core.js';\nimport {createContext, toFont, toPadding, toTRBLCorners} from '../helpers/helpers.options.js';\n\nfunction getTickBackdropHeight(opts) {\n  const tickOpts = opts.ticks;\n\n  if (tickOpts.display && opts.display) {\n    const padding = toPadding(tickOpts.backdropPadding);\n    return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n  }\n  return 0;\n}\n\nfunction measureLabelSize(ctx, font, label) {\n  label = isArray(label) ? label : [label];\n  return {\n    w: _longestText(ctx, font.string, label),\n    h: label.length * font.lineHeight\n  };\n}\n\nfunction determineLimits(angle, pos, size, min, max) {\n  if (angle === min || angle === max) {\n    return {\n      start: pos - (size / 2),\n      end: pos + (size / 2)\n    };\n  } else if (angle < min || angle > max) {\n    return {\n      start: pos - size,\n      end: pos\n    };\n  }\n\n  return {\n    start: pos,\n    end: pos + size\n  };\n}\n\n/**\n * Helper function to fit a radial linear scale with point labels\n */\nfunction fitWithPointLabels(scale) {\n\n  // Right, this is really confusing and there is a lot of maths going on here\n  // The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\n  //\n  // Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\n  //\n  // Solution:\n  //\n  // We assume the radius of the polygon is half the size of the canvas at first\n  // at each index we check if the text overlaps.\n  //\n  // Where it does, we store that angle and that index.\n  //\n  // After finding the largest index and angle we calculate how much we need to remove\n  // from the shape radius to move the point inwards by that x.\n  //\n  // We average the left and right distances to get the maximum shape radius that can fit in the box\n  // along with labels.\n  //\n  // Once we have that, we can find the centre point for the chart, by taking the x text protrusion\n  // on each side, removing that from the size, halving it and adding the left x protrusion width.\n  //\n  // This will mean we have a shape fitted to the canvas, as large as it can be with the labels\n  // and position it in the most space efficient manner\n  //\n  // https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\n\n  // Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\n  // Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\n  const orig = {\n    l: scale.left + scale._padding.left,\n    r: scale.right - scale._padding.right,\n    t: scale.top + scale._padding.top,\n    b: scale.bottom - scale._padding.bottom\n  };\n  const limits = Object.assign({}, orig);\n  const labelSizes = [];\n  const padding = [];\n  const valueCount = scale._pointLabels.length;\n  const pointLabelOpts = scale.options.pointLabels;\n  const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n\n  for (let i = 0; i < valueCount; i++) {\n    const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n    padding[i] = opts.padding;\n    const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n    const plFont = toFont(opts.font);\n    const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n    labelSizes[i] = textSize;\n\n    const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n    const angle = Math.round(toDegrees(angleRadians));\n    const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n    const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n    updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n  }\n\n  scale.setCenterPoint(\n    orig.l - limits.l,\n    limits.r - orig.r,\n    orig.t - limits.t,\n    limits.b - orig.b\n  );\n\n  // Now that text size is determined, compute the full positions\n  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\n\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n  const sin = Math.abs(Math.sin(angle));\n  const cos = Math.abs(Math.cos(angle));\n  let x = 0;\n  let y = 0;\n  if (hLimits.start < orig.l) {\n    x = (orig.l - hLimits.start) / sin;\n    limits.l = Math.min(limits.l, orig.l - x);\n  } else if (hLimits.end > orig.r) {\n    x = (hLimits.end - orig.r) / sin;\n    limits.r = Math.max(limits.r, orig.r + x);\n  }\n  if (vLimits.start < orig.t) {\n    y = (orig.t - vLimits.start) / cos;\n    limits.t = Math.min(limits.t, orig.t - y);\n  } else if (vLimits.end > orig.b) {\n    y = (vLimits.end - orig.b) / cos;\n    limits.b = Math.max(limits.b, orig.b + y);\n  }\n}\n\nfunction createPointLabelItem(scale, index, itemOpts) {\n  const outerDistance = scale.drawingArea;\n  const {extra, additionalAngle, padding, size} = itemOpts;\n  const pointLabelPosition = scale.getPointPosition(index, outerDistance + extra + padding, additionalAngle);\n  const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n  const y = yForAngle(pointLabelPosition.y, size.h, angle);\n  const textAlign = getTextAlignForAngle(angle);\n  const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n  return {\n    // if to draw or overlapped\n    visible: true,\n\n    // Text position\n    x: pointLabelPosition.x,\n    y,\n\n    // Text rendering data\n    textAlign,\n\n    // Bounding box\n    left,\n    top: y,\n    right: left + size.w,\n    bottom: y + size.h\n  };\n}\n\nfunction isNotOverlapped(item, area) {\n  if (!area) {\n    return true;\n  }\n  const {left, top, right, bottom} = item;\n  const apexesInArea = _isPointInArea({x: left, y: top}, area) || _isPointInArea({x: left, y: bottom}, area) ||\n    _isPointInArea({x: right, y: top}, area) || _isPointInArea({x: right, y: bottom}, area);\n  return !apexesInArea;\n}\n\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n  const items = [];\n  const valueCount = scale._pointLabels.length;\n  const opts = scale.options;\n  const {centerPointLabels, display} = opts.pointLabels;\n  const itemOpts = {\n    extra: getTickBackdropHeight(opts) / 2,\n    additionalAngle: centerPointLabels ? PI / valueCount : 0\n  };\n  let area;\n\n  for (let i = 0; i < valueCount; i++) {\n    itemOpts.padding = padding[i];\n    itemOpts.size = labelSizes[i];\n\n    const item = createPointLabelItem(scale, i, itemOpts);\n    items.push(item);\n    if (display === 'auto') {\n      item.visible = isNotOverlapped(item, area);\n      if (item.visible) {\n        area = item;\n      }\n    }\n  }\n  return items;\n}\n\nfunction getTextAlignForAngle(angle) {\n  if (angle === 0 || angle === 180) {\n    return 'center';\n  } else if (angle < 180) {\n    return 'left';\n  }\n\n  return 'right';\n}\n\nfunction leftForTextAlign(x, w, align) {\n  if (align === 'right') {\n    x -= w;\n  } else if (align === 'center') {\n    x -= (w / 2);\n  }\n  return x;\n}\n\nfunction yForAngle(y, h, angle) {\n  if (angle === 90 || angle === 270) {\n    y -= (h / 2);\n  } else if (angle > 270 || angle < 90) {\n    y -= h;\n  }\n  return y;\n}\n\nfunction drawPointLabelBox(ctx, opts, item) {\n  const {left, top, right, bottom} = item;\n  const {backdropColor} = opts;\n\n  if (!isNullOrUndef(backdropColor)) {\n    const borderRadius = toTRBLCorners(opts.borderRadius);\n    const padding = toPadding(opts.backdropPadding);\n    ctx.fillStyle = backdropColor;\n\n    const backdropLeft = left - padding.left;\n    const backdropTop = top - padding.top;\n    const backdropWidth = right - left + padding.width;\n    const backdropHeight = bottom - top + padding.height;\n\n    if (Object.values(borderRadius).some(v => v !== 0)) {\n      ctx.beginPath();\n      addRoundedRectPath(ctx, {\n        x: backdropLeft,\n        y: backdropTop,\n        w: backdropWidth,\n        h: backdropHeight,\n        radius: borderRadius,\n      });\n      ctx.fill();\n    } else {\n      ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n    }\n  }\n}\n\nfunction drawPointLabels(scale, labelCount) {\n  const {ctx, options: {pointLabels}} = scale;\n\n  for (let i = labelCount - 1; i >= 0; i--) {\n    const item = scale._pointLabelItems[i];\n    if (!item.visible) {\n      // overlapping\n      continue;\n    }\n    const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n    drawPointLabelBox(ctx, optsAtIndex, item);\n    const plFont = toFont(optsAtIndex.font);\n    const {x, y, textAlign} = item;\n\n    renderText(\n      ctx,\n      scale._pointLabels[i],\n      x,\n      y + (plFont.lineHeight / 2),\n      plFont,\n      {\n        color: optsAtIndex.color,\n        textAlign: textAlign,\n        textBaseline: 'middle'\n      }\n    );\n  }\n}\n\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n  const {ctx} = scale;\n  if (circular) {\n    // Draw circular arcs between the points\n    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n  } else {\n    // Draw straight lines connecting each index\n    let pointPosition = scale.getPointPosition(0, radius);\n    ctx.moveTo(pointPosition.x, pointPosition.y);\n\n    for (let i = 1; i < labelCount; i++) {\n      pointPosition = scale.getPointPosition(i, radius);\n      ctx.lineTo(pointPosition.x, pointPosition.y);\n    }\n  }\n}\n\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n  const ctx = scale.ctx;\n  const circular = gridLineOpts.circular;\n\n  const {color, lineWidth} = gridLineOpts;\n\n  if ((!circular && !labelCount) || !color || !lineWidth || radius < 0) {\n    return;\n  }\n\n  ctx.save();\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.setLineDash(borderOpts.dash);\n  ctx.lineDashOffset = borderOpts.dashOffset;\n\n  ctx.beginPath();\n  pathRadiusLine(scale, radius, circular, labelCount);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction createPointLabelContext(parent, index, label) {\n  return createContext(parent, {\n    label,\n    index,\n    type: 'pointLabel'\n  });\n}\n\nexport default class RadialLinearScale extends LinearScaleBase {\n\n  static id = 'radialLinear';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    display: true,\n\n    // Boolean - Whether to animate scaling the chart from the centre\n    animate: true,\n    position: 'chartArea',\n\n    angleLines: {\n      display: true,\n      lineWidth: 1,\n      borderDash: [],\n      borderDashOffset: 0.0\n    },\n\n    grid: {\n      circular: false\n    },\n\n    startAngle: 0,\n\n    // label settings\n    ticks: {\n      // Boolean - Show a backdrop to the scale label\n      showLabelBackdrop: true,\n\n      callback: Ticks.formatters.numeric\n    },\n\n    pointLabels: {\n      backdropColor: undefined,\n\n      // Number - The backdrop padding above & below the label in pixels\n      backdropPadding: 2,\n\n      // Boolean - if true, show point labels\n      display: true,\n\n      // Number - Point label font size in pixels\n      font: {\n        size: 10\n      },\n\n      // Function - Used to convert point labels\n      callback(label) {\n        return label;\n      },\n\n      // Number - Additionl padding between scale and pointLabel\n      padding: 5,\n\n      // Boolean - if true, center point labels to slices in polar chart\n      centerPointLabels: false\n    }\n  };\n\n  static defaultRoutes = {\n    'angleLines.color': 'borderColor',\n    'pointLabels.color': 'color',\n    'ticks.color': 'color'\n  };\n\n  static descriptors = {\n    angleLines: {\n      _fallback: 'grid'\n    }\n  };\n\n  constructor(cfg) {\n    super(cfg);\n\n    /** @type {number} */\n    this.xCenter = undefined;\n    /** @type {number} */\n    this.yCenter = undefined;\n    /** @type {number} */\n    this.drawingArea = undefined;\n    /** @type {string[]} */\n    this._pointLabels = [];\n    this._pointLabelItems = [];\n  }\n\n  setDimensions() {\n    // Set the unconstrained dimension before label rotation\n    const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n    const w = this.width = this.maxWidth - padding.width;\n    const h = this.height = this.maxHeight - padding.height;\n    this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n    this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n    this.drawingArea = Math.floor(Math.min(w, h) / 2);\n  }\n\n  determineDataLimits() {\n    const {min, max} = this.getMinMax(false);\n\n    this.min = isFinite(min) && !isNaN(min) ? min : 0;\n    this.max = isFinite(max) && !isNaN(max) ? max : 0;\n\n    // Common base implementation to handle min, max, beginAtZero\n    this.handleTickRangeOptions();\n  }\n\n  /**\n\t * Returns the maximum number of ticks based on the scale dimension\n\t * @protected\n\t */\n  computeTickLimit() {\n    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n  }\n\n  generateTickLabels(ticks) {\n    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n\n    // Point labels\n    this._pointLabels = this.getLabels()\n      .map((value, index) => {\n        const label = callCallback(this.options.pointLabels.callback, [value, index], this);\n        return label || label === 0 ? label : '';\n      })\n      .filter((v, i) => this.chart.getDataVisibility(i));\n  }\n\n  fit() {\n    const opts = this.options;\n\n    if (opts.display && opts.pointLabels.display) {\n      fitWithPointLabels(this);\n    } else {\n      this.setCenterPoint(0, 0, 0, 0);\n    }\n  }\n\n  setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n  }\n\n  getIndexAngle(index) {\n    const angleMultiplier = TAU / (this._pointLabels.length || 1);\n    const startAngle = this.options.startAngle || 0;\n\n    return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n  }\n\n  getDistanceFromCenterForValue(value) {\n    if (isNullOrUndef(value)) {\n      return NaN;\n    }\n\n    // Take into account half font size + the yPadding of the top value\n    const scalingFactor = this.drawingArea / (this.max - this.min);\n    if (this.options.reverse) {\n      return (this.max - value) * scalingFactor;\n    }\n    return (value - this.min) * scalingFactor;\n  }\n\n  getValueForDistanceFromCenter(distance) {\n    if (isNullOrUndef(distance)) {\n      return NaN;\n    }\n\n    const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n  }\n\n  getPointLabelContext(index) {\n    const pointLabels = this._pointLabels || [];\n\n    if (index >= 0 && index < pointLabels.length) {\n      const pointLabel = pointLabels[index];\n      return createPointLabelContext(this.getContext(), index, pointLabel);\n    }\n  }\n\n  getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n    const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n    return {\n      x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n      y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n      angle\n    };\n  }\n\n  getPointPositionForValue(index, value) {\n    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n  }\n\n  getBasePosition(index) {\n    return this.getPointPositionForValue(index || 0, this.getBaseValue());\n  }\n\n  getPointLabelPosition(index) {\n    const {left, top, right, bottom} = this._pointLabelItems[index];\n    return {\n      left,\n      top,\n      right,\n      bottom,\n    };\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBackground() {\n    const {backgroundColor, grid: {circular}} = this.options;\n    if (backgroundColor) {\n      const ctx = this.ctx;\n      ctx.save();\n      ctx.beginPath();\n      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n      ctx.closePath();\n      ctx.fillStyle = backgroundColor;\n      ctx.fill();\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawGrid() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const {angleLines, grid, border} = opts;\n    const labelCount = this._pointLabels.length;\n\n    let i, offset, position;\n\n    if (opts.pointLabels.display) {\n      drawPointLabels(this, labelCount);\n    }\n\n    if (grid.display) {\n      this.ticks.forEach((tick, index) => {\n        if (index !== 0) {\n          offset = this.getDistanceFromCenterForValue(tick.value);\n          const context = this.getContext(index);\n          const optsAtIndex = grid.setContext(context);\n          const optsAtIndexBorder = border.setContext(context);\n\n          drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n        }\n      });\n    }\n\n    if (angleLines.display) {\n      ctx.save();\n\n      for (i = labelCount - 1; i >= 0; i--) {\n        const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n        const {color, lineWidth} = optsAtIndex;\n\n        if (!lineWidth || !color) {\n          continue;\n        }\n\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n\n        ctx.setLineDash(optsAtIndex.borderDash);\n        ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n\n        offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n        position = this.getPointPosition(i, offset);\n        ctx.beginPath();\n        ctx.moveTo(this.xCenter, this.yCenter);\n        ctx.lineTo(position.x, position.y);\n        ctx.stroke();\n      }\n\n      ctx.restore();\n    }\n  }\n\n  /**\n\t * @protected\n\t */\n  drawBorder() {}\n\n  /**\n\t * @protected\n\t */\n  drawLabels() {\n    const ctx = this.ctx;\n    const opts = this.options;\n    const tickOpts = opts.ticks;\n\n    if (!tickOpts.display) {\n      return;\n    }\n\n    const startAngle = this.getIndexAngle(0);\n    let offset, width;\n\n    ctx.save();\n    ctx.translate(this.xCenter, this.yCenter);\n    ctx.rotate(startAngle);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    this.ticks.forEach((tick, index) => {\n      if (index === 0 && !opts.reverse) {\n        return;\n      }\n\n      const optsAtIndex = tickOpts.setContext(this.getContext(index));\n      const tickFont = toFont(optsAtIndex.font);\n      offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n\n      if (optsAtIndex.showLabelBackdrop) {\n        ctx.font = tickFont.string;\n        width = ctx.measureText(tick.label).width;\n        ctx.fillStyle = optsAtIndex.backdropColor;\n\n        const padding = toPadding(optsAtIndex.backdropPadding);\n        ctx.fillRect(\n          -width / 2 - padding.left,\n          -offset - tickFont.size / 2 - padding.top,\n          width + padding.width,\n          tickFont.size + padding.height\n        );\n      }\n\n      renderText(ctx, tick.label, 0, -offset, tickFont, {\n        color: optsAtIndex.color,\n        strokeColor: optsAtIndex.textStrokeColor,\n        strokeWidth: optsAtIndex.textStrokeWidth,\n      });\n    });\n\n    ctx.restore();\n  }\n\n  /**\n\t * @protected\n\t */\n  drawTitle() {}\n}\n","import adapters from '../core/core.adapters.js';\nimport {callback as call, isFinite, isNullOrUndef, mergeIf, valueOrDefault} from '../helpers/helpers.core.js';\nimport {toRadians, isNumber, _limitValue} from '../helpers/helpers.math.js';\nimport Scale from '../core/core.scale.js';\nimport {_arrayUnique, _filterBetween, _lookup} from '../helpers/helpers.collection.js';\n\n/**\n * @typedef { import('../core/core.adapters.js').TimeUnit } Unit\n * @typedef {{common: boolean, size: number, steps?: number}} Interval\n * @typedef { import('../core/core.adapters.js').DateAdapter } DateAdapter\n */\n\n/**\n * @type {Object<Unit, Interval>}\n */\nconst INTERVALS = {\n  millisecond: {common: true, size: 1, steps: 1000},\n  second: {common: true, size: 1000, steps: 60},\n  minute: {common: true, size: 60000, steps: 60},\n  hour: {common: true, size: 3600000, steps: 24},\n  day: {common: true, size: 86400000, steps: 30},\n  week: {common: false, size: 604800000, steps: 4},\n  month: {common: true, size: 2.628e9, steps: 12},\n  quarter: {common: false, size: 7.884e9, steps: 4},\n  year: {common: true, size: 3.154e10}\n};\n\n/**\n * @type {Unit[]}\n */\nconst UNITS = /** @type Unit[] */ /* #__PURE__ */ (Object.keys(INTERVALS));\n\n/**\n * @param {number} a\n * @param {number} b\n */\nfunction sorter(a, b) {\n  return a - b;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {*} input\n * @return {number}\n */\nfunction parse(scale, input) {\n  if (isNullOrUndef(input)) {\n    return null;\n  }\n\n  const adapter = scale._adapter;\n  const {parser, round, isoWeekday} = scale._parseOpts;\n  let value = input;\n\n  if (typeof parser === 'function') {\n    value = parser(value);\n  }\n\n  // Only parse if it's not a timestamp already\n  if (!isFinite(value)) {\n    value = typeof parser === 'string'\n      ? adapter.parse(value, /** @type {Unit} */ (parser))\n      : adapter.parse(value);\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (round) {\n    value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true)\n      ? adapter.startOf(value, 'isoWeek', isoWeekday)\n      : adapter.startOf(value, round);\n  }\n\n  return +value;\n}\n\n/**\n * Figures out what unit results in an appropriate number of auto-generated ticks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @param {number} capacity\n * @return {object}\n */\nfunction determineUnitForAutoTicks(minUnit, min, max, capacity) {\n  const ilen = UNITS.length;\n\n  for (let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {\n    const interval = INTERVALS[UNITS[i]];\n    const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n\n    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n      return UNITS[i];\n    }\n  }\n\n  return UNITS[ilen - 1];\n}\n\n/**\n * Figures out what unit to format a set of ticks with\n * @param {TimeScale} scale\n * @param {number} numTicks\n * @param {Unit} minUnit\n * @param {number} min\n * @param {number} max\n * @return {Unit}\n */\nfunction determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n  for (let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {\n    const unit = UNITS[i];\n    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n      return unit;\n    }\n  }\n\n  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n\n/**\n * @param {Unit} unit\n * @return {object}\n */\nfunction determineMajorUnit(unit) {\n  for (let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {\n    if (INTERVALS[UNITS[i]].common) {\n      return UNITS[i];\n    }\n  }\n}\n\n/**\n * @param {object} ticks\n * @param {number} time\n * @param {number[]} [timestamps] - if defined, snap to these timestamps\n */\nfunction addTick(ticks, time, timestamps) {\n  if (!timestamps) {\n    ticks[time] = true;\n  } else if (timestamps.length) {\n    const {lo, hi} = _lookup(timestamps, time);\n    const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n    ticks[timestamp] = true;\n  }\n}\n\n/**\n * @param {TimeScale} scale\n * @param {object[]} ticks\n * @param {object} map\n * @param {Unit} majorUnit\n * @return {object[]}\n */\nfunction setMajorTicks(scale, ticks, map, majorUnit) {\n  const adapter = scale._adapter;\n  const first = +adapter.startOf(ticks[0].value, majorUnit);\n  const last = ticks[ticks.length - 1].value;\n  let major, index;\n\n  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {\n    index = map[major];\n    if (index >= 0) {\n      ticks[index].major = true;\n    }\n  }\n  return ticks;\n}\n\n/**\n * @param {TimeScale} scale\n * @param {number[]} values\n * @param {Unit|undefined} [majorUnit]\n * @return {object[]}\n */\nfunction ticksFromTimestamps(scale, values, majorUnit) {\n  const ticks = [];\n  /** @type {Object<number,object>} */\n  const map = {};\n  const ilen = values.length;\n  let i, value;\n\n  for (i = 0; i < ilen; ++i) {\n    value = values[i];\n    map[value] = i;\n\n    ticks.push({\n      value,\n      major: false\n    });\n  }\n\n  // We set the major ticks separately from the above loop because calling startOf for every tick\n  // is expensive when there is a large number of ticks\n  return (ilen === 0 || !majorUnit) ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\n\nexport default class TimeScale extends Scale {\n\n  static id = 'time';\n\n  /**\n   * @type {any}\n   */\n  static defaults = {\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 2.7.0\n     */\n    bounds: 'data',\n\n    adapters: {},\n    time: {\n      parser: false, // false == a pattern string from or a custom callback that converts its argument to a timestamp\n      unit: false, // false == automatic or override with week, month, year, etc.\n      round: false, // none, or override with week, month, year, etc.\n      isoWeekday: false, // override week start day\n      minUnit: 'millisecond',\n      displayFormats: {}\n    },\n    ticks: {\n      /**\n       * Ticks generation input values:\n       * - 'auto': generates \"optimal\" ticks based on scale size and time options.\n       * - 'data': generates ticks from data (including labels from data {t|x|y} objects).\n       * - 'labels': generates ticks from user given `data.labels` values ONLY.\n       * @see https://github.com/chartjs/Chart.js/pull/4507\n       * @since 2.7.0\n       */\n      source: 'auto',\n\n      callback: false,\n\n      major: {\n        enabled: false\n      }\n    }\n  };\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {{data: number[], labels: number[], all: number[]}} */\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n\n    /** @type {Unit} */\n    this._unit = 'day';\n    /** @type {Unit=} */\n    this._majorUnit = undefined;\n    this._offsets = {};\n    this._normalized = false;\n    this._parseOpts = undefined;\n  }\n\n  init(scaleOpts, opts = {}) {\n    const time = scaleOpts.time || (scaleOpts.time = {});\n    /** @type {DateAdapter} */\n    const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n\n    adapter.init(opts);\n\n    // Backward compatibility: before introducing adapter, `displayFormats` was\n    // supposed to contain *all* unit/string pairs but this can't be resolved\n    // when loading the scale (adapters are loaded afterward), so let's populate\n    // missing formats on update\n    mergeIf(time.displayFormats, adapter.formats());\n\n    this._parseOpts = {\n      parser: time.parser,\n      round: time.round,\n      isoWeekday: time.isoWeekday\n    };\n\n    super.init(scaleOpts);\n\n    this._normalized = opts.normalized;\n  }\n\n  /**\n\t * @param {*} raw\n\t * @param {number?} [index]\n\t * @return {number}\n\t */\n  parse(raw, index) { // eslint-disable-line no-unused-vars\n    if (raw === undefined) {\n      return null;\n    }\n    return parse(this, raw);\n  }\n\n  beforeLayout() {\n    super.beforeLayout();\n    this._cache = {\n      data: [],\n      labels: [],\n      all: []\n    };\n  }\n\n  determineDataLimits() {\n    const options = this.options;\n    const adapter = this._adapter;\n    const unit = options.time.unit || 'day';\n    // eslint-disable-next-line prefer-const\n    let {min, max, minDefined, maxDefined} = this.getUserBounds();\n\n    /**\n\t\t * @param {object} bounds\n\t\t */\n    function _applyBounds(bounds) {\n      if (!minDefined && !isNaN(bounds.min)) {\n        min = Math.min(min, bounds.min);\n      }\n      if (!maxDefined && !isNaN(bounds.max)) {\n        max = Math.max(max, bounds.max);\n      }\n    }\n\n    // If we have user provided `min` and `max` labels / data bounds can be ignored\n    if (!minDefined || !maxDefined) {\n      // Labels are always considered, when user did not force bounds\n      _applyBounds(this._getLabelBounds());\n\n      // If `bounds` is `'ticks'` and `ticks.source` is `'labels'`,\n      // data bounds are ignored (and don't need to be determined)\n      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n        _applyBounds(this.getMinMax(false));\n      }\n    }\n\n    min = isFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n    max = isFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n\n    // Make sure that max is strictly higher than min (required by the timeseries lookup table)\n    this.min = Math.min(min, max - 1);\n    this.max = Math.max(min + 1, max);\n  }\n\n  /**\n\t * @private\n\t */\n  _getLabelBounds() {\n    const arr = this.getLabelTimestamps();\n    let min = Number.POSITIVE_INFINITY;\n    let max = Number.NEGATIVE_INFINITY;\n\n    if (arr.length) {\n      min = arr[0];\n      max = arr[arr.length - 1];\n    }\n    return {min, max};\n  }\n\n  /**\n\t * @return {object[]}\n\t */\n  buildTicks() {\n    const options = this.options;\n    const timeOpts = options.time;\n    const tickOpts = options.ticks;\n    const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n\n    if (options.bounds === 'ticks' && timestamps.length) {\n      this.min = this._userMin || timestamps[0];\n      this.max = this._userMax || timestamps[timestamps.length - 1];\n    }\n\n    const min = this.min;\n    const max = this.max;\n\n    const ticks = _filterBetween(timestamps, min, max);\n\n    // PRIVATE\n    // determineUnitForFormatting relies on the number of ticks so we don't use it when\n    // autoSkip is enabled because we don't yet know what the final number of ticks will be\n    this._unit = timeOpts.unit || (tickOpts.autoSkip\n      ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min))\n      : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined\n      : determineMajorUnit(this._unit);\n    this.initOffsets(timestamps);\n\n    if (options.reverse) {\n      ticks.reverse();\n    }\n\n    return ticksFromTimestamps(this, ticks, this._majorUnit);\n  }\n\n  afterAutoSkip() {\n    // Offsets for bar charts need to be handled with the auto skipped\n    // ticks. Once ticks have been skipped, we re-compute the offsets.\n    if (this.options.offsetAfterAutoskip) {\n      this.initOffsets(this.ticks.map(tick => +tick.value));\n    }\n  }\n\n  /**\n\t * Returns the start and end offsets from edges in the form of {start, end}\n\t * where each value is a relative width to the scale and ranges between 0 and 1.\n\t * They add extra margins on the both sides by scaling down the original scale.\n\t * Offsets are added when the `offset` option is true.\n\t * @param {number[]} timestamps\n\t * @protected\n\t */\n  initOffsets(timestamps = []) {\n    let start = 0;\n    let end = 0;\n    let first, last;\n\n    if (this.options.offset && timestamps.length) {\n      first = this.getDecimalForValue(timestamps[0]);\n      if (timestamps.length === 1) {\n        start = 1 - first;\n      } else {\n        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n      }\n      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n      if (timestamps.length === 1) {\n        end = last;\n      } else {\n        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n      }\n    }\n    const limit = timestamps.length < 3 ? 0.5 : 0.25;\n    start = _limitValue(start, 0, limit);\n    end = _limitValue(end, 0, limit);\n\n    this._offsets = {start, end, factor: 1 / (start + 1 + end)};\n  }\n\n  /**\n\t * Generates a maximum of `capacity` timestamps between min and max, rounded to the\n\t * `minor` unit using the given scale time `options`.\n\t * Important: this method can return ticks outside the min and max range, it's the\n\t * responsibility of the calling code to clamp values if needed.\n\t * @protected\n\t */\n  _generate() {\n    const adapter = this._adapter;\n    const min = this.min;\n    const max = this.max;\n    const options = this.options;\n    const timeOpts = options.time;\n    // @ts-ignore\n    const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n    const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n    const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n    const hasWeekday = isNumber(weekday) || weekday === true;\n    const ticks = {};\n    let first = min;\n    let time, count;\n\n    // For 'week' unit, handle the first day of week option\n    if (hasWeekday) {\n      first = +adapter.startOf(first, 'isoWeek', weekday);\n    }\n\n    // Align first ticks on unit\n    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n\n    // Prevent browser from freezing in case user options request millions of milliseconds\n    if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n    }\n\n    const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {\n      addTick(ticks, time, timestamps);\n    }\n\n    if (time === max || options.bounds === 'ticks' || count === 1) {\n      addTick(ticks, time, timestamps);\n    }\n\n    // @ts-ignore\n    return Object.keys(ticks).sort(sorter).map(x => +x);\n  }\n\n  /**\n\t * @param {number} value\n\t * @return {string}\n\t */\n  getLabelForValue(value) {\n    const adapter = this._adapter;\n    const timeOpts = this.options.time;\n\n    if (timeOpts.tooltipFormat) {\n      return adapter.format(value, timeOpts.tooltipFormat);\n    }\n    return adapter.format(value, timeOpts.displayFormats.datetime);\n  }\n\n  /**\n\t * @param {number} value\n\t * @param {string|undefined} format\n\t * @return {string}\n\t */\n  format(value, format) {\n    const options = this.options;\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const fmt = format || formats[unit];\n    return this._adapter.format(value, fmt);\n  }\n\n  /**\n\t * Function to format an individual tick mark\n\t * @param {number} time\n\t * @param {number} index\n\t * @param {object[]} ticks\n\t * @param {string|undefined} [format]\n\t * @return {string}\n\t * @private\n\t */\n  _tickFormatFunction(time, index, ticks, format) {\n    const options = this.options;\n    const formatter = options.ticks.callback;\n\n    if (formatter) {\n      return call(formatter, [time, index, ticks], this);\n    }\n\n    const formats = options.time.displayFormats;\n    const unit = this._unit;\n    const majorUnit = this._majorUnit;\n    const minorFormat = unit && formats[unit];\n    const majorFormat = majorUnit && formats[majorUnit];\n    const tick = ticks[index];\n    const major = majorUnit && majorFormat && tick && tick.major;\n\n    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n  }\n\n  /**\n\t * @param {object[]} ticks\n\t */\n  generateTickLabels(ticks) {\n    let i, ilen, tick;\n\n    for (i = 0, ilen = ticks.length; i < ilen; ++i) {\n      tick = ticks[i];\n      tick.label = this._tickFormatFunction(tick.value, i, ticks);\n    }\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return value === null ? NaN : (value - this.min) / (this.max - this.min);\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getPixelForValue(value) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForValue(value);\n    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return this.min + pos * (this.max - this.min);\n  }\n\n  /**\n\t * @param {string} label\n\t * @return {{w:number, h:number}}\n\t * @private\n\t */\n  _getLabelSize(label) {\n    const ticksOpts = this.options.ticks;\n    const tickLabelWidth = this.ctx.measureText(label).width;\n    const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n    const cosRotation = Math.cos(angle);\n    const sinRotation = Math.sin(angle);\n    const tickFontSize = this._resolveTickFontOptions(0).size;\n\n    return {\n      w: (tickLabelWidth * cosRotation) + (tickFontSize * sinRotation),\n      h: (tickLabelWidth * sinRotation) + (tickFontSize * cosRotation)\n    };\n  }\n\n  /**\n\t * @param {number} exampleTime\n\t * @return {number}\n\t * @private\n\t */\n  _getLabelCapacity(exampleTime) {\n    const timeOpts = this.options.time;\n    const displayFormats = timeOpts.displayFormats;\n\n    // pick the longest format (milliseconds) for guesstimation\n    const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n    const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);\n    const size = this._getLabelSize(exampleLabel);\n    // subtract 1 - if offset then there's one less label than tick\n    // if not offset then one half label padding is added to each end leaving room for one less label\n    const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n    return capacity > 0 ? capacity : 1;\n  }\n\n  /**\n\t * @protected\n\t */\n  getDataTimestamps() {\n    let timestamps = this._cache.data || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const metas = this.getMatchingVisibleMetas();\n\n    if (this._normalized && metas.length) {\n      return (this._cache.data = metas[0].controller.getAllParsedValues(this));\n    }\n\n    for (i = 0, ilen = metas.length; i < ilen; ++i) {\n      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n    }\n\n    return (this._cache.data = this.normalize(timestamps));\n  }\n\n  /**\n\t * @protected\n\t */\n  getLabelTimestamps() {\n    const timestamps = this._cache.labels || [];\n    let i, ilen;\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const labels = this.getLabels();\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      timestamps.push(parse(this, labels[i]));\n    }\n\n    return (this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps));\n  }\n\n  /**\n\t * @param {number[]} values\n\t * @protected\n\t */\n  normalize(values) {\n    // It seems to be somewhat faster to do sorting first\n    return _arrayUnique(values.sort(sorter));\n  }\n}\n","import TimeScale from './scale.time.js';\nimport {_lookupByKey} from '../helpers/helpers.collection.js';\n\n/**\n * Linearly interpolates the given source `val` using the table. If value is out of bounds, values\n * at edges are used for the interpolation.\n * @param {object} table\n * @param {number} val\n * @param {boolean} [reverse] lookup time based on position instead of vice versa\n * @return {object}\n */\nfunction interpolate(table, val, reverse) {\n  let lo = 0;\n  let hi = table.length - 1;\n  let prevSource, nextSource, prevTarget, nextTarget;\n  if (reverse) {\n    if (val >= table[lo].pos && val <= table[hi].pos) {\n      ({lo, hi} = _lookupByKey(table, 'pos', val));\n    }\n    ({pos: prevSource, time: prevTarget} = table[lo]);\n    ({pos: nextSource, time: nextTarget} = table[hi]);\n  } else {\n    if (val >= table[lo].time && val <= table[hi].time) {\n      ({lo, hi} = _lookupByKey(table, 'time', val));\n    }\n    ({time: prevSource, pos: prevTarget} = table[lo]);\n    ({time: nextSource, pos: nextTarget} = table[hi]);\n  }\n\n  const span = nextSource - prevSource;\n  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\n\nclass TimeSeriesScale extends TimeScale {\n\n  static id = 'timeseries';\n\n  /**\n   * @type {any}\n   */\n  static defaults = TimeScale.defaults;\n\n  /**\n\t * @param {object} props\n\t */\n  constructor(props) {\n    super(props);\n\n    /** @type {object[]} */\n    this._table = [];\n    /** @type {number} */\n    this._minPos = undefined;\n    /** @type {number} */\n    this._tableRange = undefined;\n  }\n\n  /**\n\t * @protected\n\t */\n  initOffsets() {\n    const timestamps = this._getTimestampsForTable();\n    const table = this._table = this.buildLookupTable(timestamps);\n    this._minPos = interpolate(table, this.min);\n    this._tableRange = interpolate(table, this.max) - this._minPos;\n    super.initOffsets(timestamps);\n  }\n\n  /**\n\t * Returns an array of {time, pos} objects used to interpolate a specific `time` or position\n\t * (`pos`) on the scale, by searching entries before and after the requested value. `pos` is\n\t * a decimal between 0 and 1: 0 being the start of the scale (left or top) and 1 the other\n\t * extremity (left + width or top + height). Note that it would be more optimized to directly\n\t * store pre-computed pixels, but the scale dimensions are not guaranteed at the time we need\n\t * to create the lookup table. The table ALWAYS contains at least two items: min and max.\n\t * @param {number[]} timestamps\n\t * @return {object[]}\n\t * @protected\n\t */\n  buildLookupTable(timestamps) {\n    const {min, max} = this;\n    const items = [];\n    const table = [];\n    let i, ilen, prev, curr, next;\n\n    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {\n      curr = timestamps[i];\n      if (curr >= min && curr <= max) {\n        items.push(curr);\n      }\n    }\n\n    if (items.length < 2) {\n      // In case there is less that 2 timestamps between min and max, the scale is defined by min and max\n      return [\n        {time: min, pos: 0},\n        {time: max, pos: 1}\n      ];\n    }\n\n    for (i = 0, ilen = items.length; i < ilen; ++i) {\n      next = items[i + 1];\n      prev = items[i - 1];\n      curr = items[i];\n\n      // only add points that breaks the scale linearity\n      if (Math.round((next + prev) / 2) !== curr) {\n        table.push({time: curr, pos: i / (ilen - 1)});\n      }\n    }\n    return table;\n  }\n\n  /**\n    * Generates all timestamps defined in the data.\n    * Important: this method can return ticks outside the min and max range, it's the\n    * responsibility of the calling code to clamp values if needed.\n    * @protected\n    */\n  _generate() {\n    const min = this.min;\n    const max = this.max;\n    let timestamps = super.getDataTimestamps();\n    if (!timestamps.includes(min) || !timestamps.length) {\n      timestamps.splice(0, 0, min);\n    }\n    if (!timestamps.includes(max) || timestamps.length === 1) {\n      timestamps.push(max);\n    }\n    return timestamps.sort((a, b) => a - b);\n  }\n\n  /**\n\t * Returns all timestamps\n\t * @return {number[]}\n\t * @private\n\t */\n  _getTimestampsForTable() {\n    let timestamps = this._cache.all || [];\n\n    if (timestamps.length) {\n      return timestamps;\n    }\n\n    const data = this.getDataTimestamps();\n    const label = this.getLabelTimestamps();\n    if (data.length && label.length) {\n      // If combining labels and data (data might not contain all labels),\n      // we need to recheck uniqueness and sort\n      timestamps = this.normalize(data.concat(label));\n    } else {\n      timestamps = data.length ? data : label;\n    }\n    timestamps = this._cache.all = timestamps;\n\n    return timestamps;\n  }\n\n  /**\n\t * @param {number} value - Milliseconds since epoch (1 January 1970 00:00:00 UTC)\n\t * @return {number}\n\t */\n  getDecimalForValue(value) {\n    return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n  }\n\n  /**\n\t * @param {number} pixel\n\t * @return {number}\n\t */\n  getValueForPixel(pixel) {\n    const offsets = this._offsets;\n    const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n  }\n}\n\nexport default TimeSeriesScale;\n","export * from './controllers/index.js';\nexport * from './core/index.js';\nexport * from './elements/index.js';\nexport * from './platform/index.js';\nexport * from './plugins/index.js';\nexport * from './scales/index.js';\n\nimport * as controllers from './controllers/index.js';\nimport * as elements from './elements/index.js';\nimport * as plugins from './plugins/index.js';\nimport * as scales from './scales/index.js';\n\nexport {\n  controllers,\n  elements,\n  plugins,\n  scales,\n};\n\nexport const registerables = [\n  controllers,\n  elements,\n  plugins,\n  scales,\n];\n","import type { MouseEvent } from 'react';\nimport type {\n  ChartType,\n  ChartData,\n  DefaultDataPoint,\n  ChartDataset,\n  ChartOptions,\n  Chart,\n} from 'chart.js';\n\nimport type { ForwardedRef } from './types.js';\n\nconst defaultDatasetIdKey = 'label';\n\nexport function reforwardRef<T>(ref: ForwardedRef<T>, value: T) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\n\nexport function setOptions<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(chart: Chart<TType, TData, TLabel>, nextOptions: ChartOptions<TType>) {\n  const options = chart.options;\n\n  if (options && nextOptions) {\n    Object.assign(options, nextOptions);\n  }\n}\n\nexport function setLabels<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextLabels: TLabel[] | undefined\n) {\n  currentData.labels = nextLabels;\n}\n\nexport function setDatasets<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  currentData: ChartData<TType, TData, TLabel>,\n  nextDatasets: ChartDataset<TType, TData>[],\n  datasetIdKey = defaultDatasetIdKey\n) {\n  const addedDatasets: ChartDataset<TType, TData>[] = [];\n\n  currentData.datasets = nextDatasets.map(\n    (nextDataset: Record<string, unknown>) => {\n      // given the new set, find it's current match\n      const currentDataset = currentData.datasets.find(\n        (dataset: Record<string, unknown>) =>\n          dataset[datasetIdKey] === nextDataset[datasetIdKey]\n      );\n\n      // There is no original to update, so simply add new one\n      if (\n        !currentDataset ||\n        !nextDataset.data ||\n        addedDatasets.includes(currentDataset)\n      ) {\n        return { ...nextDataset } as ChartDataset<TType, TData>;\n      }\n\n      addedDatasets.push(currentDataset);\n\n      Object.assign(currentDataset, nextDataset);\n\n      return currentDataset;\n    }\n  );\n}\n\nexport function cloneData<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(data: ChartData<TType, TData, TLabel>, datasetIdKey = defaultDatasetIdKey) {\n  const nextData: ChartData<TType, TData, TLabel> = {\n    labels: [],\n    datasets: [],\n  };\n\n  setLabels(nextData, data.labels);\n  setDatasets(nextData, data.datasets, datasetIdKey);\n\n  return nextData;\n}\n\n/**\n * Get dataset from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getDatasetAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'dataset',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get single dataset element from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'nearest',\n    { intersect: true },\n    false\n  );\n}\n\n/**\n * Get all dataset elements from mouse click event\n * @param chart - Chart.js instance\n * @param event - Mouse click event\n * @returns Dataset\n */\nexport function getElementsAtEvent(\n  chart: Chart,\n  event: MouseEvent<HTMLCanvasElement>\n) {\n  return chart.getElementsAtEventForMode(\n    event.nativeEvent,\n    'index',\n    { intersect: true },\n    false\n  );\n}\n","import React, { useEffect, useRef, forwardRef } from 'react';\nimport { Chart as ChartJS } from 'chart.js';\nimport type { ChartType, DefaultDataPoint } from 'chart.js';\n\nimport type { ForwardedRef, ChartProps, BaseChartComponent } from './types.js';\nimport {\n  reforwardRef,\n  cloneData,\n  setOptions,\n  setLabels,\n  setDatasets,\n} from './utils.js';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  props: ChartProps<TType, TData, TLabel>,\n  ref: ForwardedRef<ChartJS<TType, TData, TLabel>>\n) {\n  const {\n    height = 150,\n    width = 300,\n    redraw = false,\n    datasetIdKey,\n    type,\n    data,\n    options,\n    plugins = [],\n    fallbackContent,\n    updateMode,\n    ...canvasProps\n  } = props as ChartProps;\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<ChartJS | null>();\n\n  const renderChart = () => {\n    if (!canvasRef.current) return;\n\n    chartRef.current = new ChartJS(canvasRef.current, {\n      type,\n      data: cloneData(data, datasetIdKey),\n      options: options && { ...options },\n      plugins,\n    });\n\n    reforwardRef(ref, chartRef.current);\n  };\n\n  const destroyChart = () => {\n    reforwardRef(ref, null);\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n      chartRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && options) {\n      setOptions(chartRef.current, options);\n    }\n  }, [redraw, options]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current) {\n      setLabels(chartRef.current.config.data, data.labels);\n    }\n  }, [redraw, data.labels]);\n\n  useEffect(() => {\n    if (!redraw && chartRef.current && data.datasets) {\n      setDatasets(chartRef.current.config.data, data.datasets, datasetIdKey);\n    }\n  }, [redraw, data.datasets]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    if (redraw) {\n      destroyChart();\n      setTimeout(renderChart);\n    } else {\n      chartRef.current.update(updateMode);\n    }\n  }, [redraw, options, data.labels, data.datasets, updateMode]);\n\n  useEffect(() => {\n    if (!chartRef.current) return;\n\n    destroyChart();\n    setTimeout(renderChart);\n  }, [type]);\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      role='img'\n      height={height}\n      width={width}\n      {...canvasProps}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as BaseChartComponent;\n","import React, { forwardRef } from 'react';\nimport {\n  Chart as ChartJS,\n  LineController,\n  BarController,\n  RadarController,\n  DoughnutController,\n  PolarAreaController,\n  BubbleController,\n  PieController,\n  ScatterController,\n} from 'chart.js';\nimport type { ChartType, ChartComponentLike } from 'chart.js';\n\nimport type {\n  ChartProps,\n  ChartJSOrUndefined,\n  TypedChartComponent,\n} from './types.js';\nimport { Chart } from './chart.js';\n\nfunction createTypedChart<T extends ChartType>(\n  type: T,\n  registerables: ChartComponentLike\n) {\n  ChartJS.register(registerables);\n\n  return forwardRef<ChartJSOrUndefined<T>, Omit<ChartProps<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T>;\n}\n\nexport const Line = /* #__PURE__ */ createTypedChart('line', LineController);\n\nexport const Bar = /* #__PURE__ */ createTypedChart('bar', BarController);\n\nexport const Radar = /* #__PURE__ */ createTypedChart('radar', RadarController);\n\nexport const Doughnut = /* #__PURE__ */ createTypedChart(\n  'doughnut',\n  DoughnutController\n);\n\nexport const PolarArea = /* #__PURE__ */ createTypedChart(\n  'polarArea',\n  PolarAreaController\n);\n\nexport const Bubble = /* #__PURE__ */ createTypedChart(\n  'bubble',\n  BubbleController\n);\n\nexport const Pie = /* #__PURE__ */ createTypedChart('pie', PieController);\n\nexport const Scatter = /* #__PURE__ */ createTypedChart(\n  'scatter',\n  ScatterController\n);\n"],"names":["SIZE","CircularProgress","React","props","ref","classes","className","_props$color","color","_props$disableShrink","disableShrink","_props$size","size","style","_props$thickness","thickness","_props$value","value","_props$variant","variant","other","_objectWithoutProperties","circleStyle","rootStyle","rootProps","circumference","Math","PI","strokeDasharray","toFixed","round","strokeDashoffset","concat","transform","_extends","clsx","root","capitalize","determinate","indeterminate","static","width","height","role","svg","viewBox","circle","circleDisableShrink","circleDeterminate","circleIndeterminate","circleStatic","cx","cy","r","fill","strokeWidth","withStyles","theme","display","transition","transitions","create","animation","colorPrimary","palette","primary","main","colorSecondary","secondary","stroke","transformOrigin","name","flip","children","localTheme","outerTheme","useTheme","output","mergeOuterLocalTheme","nested","ThemeContext","Provider","getLinearProgressUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_excluded","_t","_t2","_t3","_t4","_t5","_t6","indeterminate1Keyframe","keyframes","_taggedTemplateLiteral","indeterminate2Keyframe","bufferKeyframe","getColorShade","vars","LinearProgress","mode","lighten","darken","LinearProgressRoot","styled","overridesResolver","styles","ownerState","_ref","position","overflow","zIndex","colorAdjust","backgroundColor","content","left","top","right","bottom","opacity","LinearProgressDashed","dashed","_ref2","marginTop","backgroundImage","backgroundSize","backgroundPosition","css","LinearProgressBar1","bar","bar1Indeterminate","bar1Determinate","bar1Buffer","_ref3","_ref4","LinearProgressBar2","bar2Indeterminate","bar2Buffer","_ref5","_ref6","inProps","useThemeProps","valueBuffer","_objectWithoutPropertiesLoose","slots","bar1","bar2","composeClasses","useUtilityClasses","inlineStyles","undefined","direction","process","_jsxs","_jsx","exports","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","arr","Arr","_byteLength","curByte","len","revLookup","charCodeAt","fromByteArray","uint8","length","extraBytes","parts","maxChunkLength","len2","push","encodeChunk","lookup","join","Uint8Array","Array","code","Error","indexOf","start","end","num","base64","require","ieee754","customInspectSymbol","Symbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Object","setPrototypeOf","prototype","arg","encodingOrOffset","TypeError","allocUnsafe","from","string","encoding","isEncoding","actual","write","slice","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","checked","numberIsNaN","type","isArray","data","fromObject","toPrimitive","assertSize","array","toString","mustMatch","arguments","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","this","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","m","bidirectionalIndexOf","val","dir","arrayIndexOf","call","lastIndexOf","indexSize","arrLength","valLength","String","read","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","e","typedArraySupport","console","error","defineProperty","enumerable","get","poolSize","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","set","swap16","swap32","swap64","toLocaleString","equals","inspect","max","replace","trim","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","constructor","super","writable","configurable","stack","message","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","floor","ERR_BUFFER_OUT_OF_BOUNDS","input","msg","received","isInteger","abs","INVALID_BASE64_RE","Infinity","leadSurrogate","split","base64clean","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","isNaN","EventEmitter","init","module","once","emitter","Promise","resolve","reject","errorListener","err","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","count","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","addEventListener","wrapListener","removeEventListener","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","listeners","addListener","prependListener","prependOnceListener","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","rt","log","LN2","ctor","superCtor","super_","TempCtor","html","_ref$decodeEntities","decodeEntities","_ref$preprocessNodes","preprocessNodes","nodes","_htmlparser2","default","parseDOM","_processNodes2","_interopRequireDefault","__esModule","node","_elementTypes2","_elementTypes","accept","accesskey","action","allowfullscreen","allowtransparency","alt","as","async","autocomplete","autoplay","capture","cellpadding","cellspacing","charset","challenge","cite","classid","class","cols","colspan","contenteditable","contextmenu","controls","controlsList","coords","crossorigin","datetime","defer","disabled","download","draggable","enctype","form","formaction","formenctype","formmethod","formnovalidate","formtarget","frameborder","headers","hidden","high","href","hreflang","for","icon","id","inputmode","integrity","is","keyparams","keytype","kind","label","lang","loop","low","manifest","marginheight","marginwidth","maxlength","media","mediagroup","method","minlength","multiple","muted","nonce","novalidate","open","optimum","pattern","placeholder","playsinline","poster","preload","profile","radiogroup","readonly","referrerpolicy","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","sizes","span","spellcheck","srcdoc","srclang","srcset","step","summary","tabindex","title","usemap","wmode","wrap","about","datatype","inlist","prefix","property","resource","typeof","vocab","autocapitalize","autocorrect","autosave","itemprop","itemscope","itemtype","itemid","itemref","results","security","unselectable","_generatePropsFromAttributes2","attribs","_react2","createElement","tagName","_isValidTagOrAttributeName2","_VoidElements2","_ElementType$Text$Ele","_htmlparser","_TextElementType2","_TagElementType2","_StyleElementType2","_UnsupportedElementType2","_defineProperty","ElementType","Text","Tag","Style","Directive","Comment","Script","CDATA","Doctype","_processNodes","_convertNodeToElement","_HtmlParser2","filter","_isEmptyTextNode2","map","transformed","_convertNodeToElement2","assign","source","hasOwnProperty","attributes","_htmlAttributesToReact2","_inlineStyleToObject2","attr","reduce","mappedAttributes","attribute","lowerCaseAttribute","_ReactAttributes2","getParsedAttributeValue","_BooleanAttributes2","_slicedToArray","iterator","_n","_d","_e","_s","_i","next","done","sliceIterator","inlineStyle","styleObject","stylePropertyValue","_stylePropertyValue$s","item","_stylePropertyValue$s2","_","character","toUpperCase","test","nameCache","VALID_TAG_REGEX","entities","foreignNames","elementNames","__proto__","attributeNames","unencodedElements","script","xmp","iframe","noembed","noframes","plaintext","noscript","singleTag","area","base","basefont","br","col","command","embed","frame","hr","img","isindex","keygen","link","meta","param","track","wbr","render","dom","opts","cheerio","elem","isTag","renderTag","renderDirective","renderComment","renderCdata","renderText","foreignModeIntegrationPoints","xmlMode","parent","tag","encodeXML","formatAttrs","Root","__importDefault","mod","decodeHTML","decodeHTMLStrict","decodeXML","entities_json_1","legacy_json_1","xml_json_1","decode_codepoint_1","strictEntityRe","getStrictDecoder","getReplacer","sorter","charAt","secondChar","legacy","sort","re","RegExp","replacer","decode_json_1","fromCodePoint","escapeUTF8","escape","encodeNonAsciiHTML","encodeHTML","inverseXML","getInverseObj","xmlReplacer","getInverseReplacer","getASCIIEncoder","inverse","inverseHTML","htmlReplacer","single","_a","k","splice","reNonASCII","singleCharReplacer","getCodePoint","codePointAt","reEscapeChars","decodeXMLStrict","decodeHTML5Strict","decodeHTML4Strict","decodeHTML5","decodeHTML4","encodeHTML5","encodeHTML4","encode","decodeStrict","decode","decode_1","encode_1","level","encode_2","decode_2","re_whitespace","NodePrototype","ElementPrototype","DomHandler","callback","options","elementCB","defaultOpts","_callback","_options","_elementCB","_done","_tagStack","_parser","normalizeWhitespace","withStartIndices","withEndIndices","onparserinit","parser","onreset","onend","_handleCallback","onerror","onclosetag","endIndex","_createDomElement","properties","withDomLvl1","element","_addDomElement","siblings","previousSibling","startIndex","prev","onopentag","ontext","lastTag","normalize","ignoreWhitespace","oncomment","oncdatastart","oncommentend","oncdataend","onprocessinginstruction","domLvl1","forEach","shorthand","firstChild","lastChild","nodeType","nodeTypes","childNodes","parentNode","nextSibling","nodeValue","text","cdata","comment","DomUtils","removeSubsets","ancestor","idx","POSITION","comparePos","compareDocumentPosition","nodeA","nodeB","current","sharedParent","aSibling","bSibling","aParents","bParents","uniqueSort","relative","testElement","tag_name","tag_type","tag_contains","Checks","getAttribCheck","attrib","combineFuncs","getElements","recurse","funcs","getElementById","findOne","getElementsByTagName","getElementsByTagType","removeElement","childs","replaceElement","replacement","appendChild","child","sibling","append","currNext","find","elems","result","findOneChild","l","existsOne","findAll","rootElems","getOuterHTML","getInnerHTML","getText","getChildren","getParent","getSiblings","getAttributeValue","hasAttrib","getName","decodeMap","CollectingHandler","cbs","_cbs","EVENTS","restart","FeedHandler","what","where","getOneElement","fetch","addConditionally","prop","isValidFeed","feed","feedRoot","updated","Date","items","entry","description","pubDate","Tokenizer","formTags","option","optgroup","select","button","datalist","textarea","openImpliesClose","tr","th","td","thead","body","head","li","p","h1","h2","h3","h4","h5","h6","voidElements","foreignContextElements","math","htmlIntegrationElements","mi","mo","mn","ms","mtext","foreignObject","desc","re_nameEnd","Parser","_tagname","_attribname","_attribvalue","_attribs","_stack","_foreignContext","_lowerCaseTagNames","lowerCaseTags","_lowerCaseAttributeNames","lowerCaseAttributeNames","_tokenizer","_updatePosition","initialOffset","_sectionStart","getAbsoluteIndex","onopentagname","el","onopentagend","_closeCurrentTag","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","onattribute","_getInstructionName","search","ondeclaration","oncdata","recognizeCDATA","reset","parseComplete","chunk","pause","resume","parseChunk","ProxyHandler","Stream","Cbs","readable","decodeCodePoint","entityMap","legacyMap","xmlMap","TEXT","BEFORE_TAG_NAME","IN_TAG_NAME","IN_SELF_CLOSING_TAG","BEFORE_CLOSING_TAG_NAME","IN_CLOSING_TAG_NAME","AFTER_CLOSING_TAG_NAME","BEFORE_ATTRIBUTE_NAME","IN_ATTRIBUTE_NAME","AFTER_ATTRIBUTE_NAME","BEFORE_ATTRIBUTE_VALUE","IN_ATTRIBUTE_VALUE_DQ","IN_ATTRIBUTE_VALUE_SQ","IN_ATTRIBUTE_VALUE_NQ","BEFORE_DECLARATION","IN_DECLARATION","IN_PROCESSING_INSTRUCTION","BEFORE_COMMENT","IN_COMMENT","AFTER_COMMENT_1","AFTER_COMMENT_2","BEFORE_CDATA_1","BEFORE_CDATA_2","BEFORE_CDATA_3","BEFORE_CDATA_4","BEFORE_CDATA_5","BEFORE_CDATA_6","IN_CDATA","AFTER_CDATA_1","AFTER_CDATA_2","BEFORE_SPECIAL","BEFORE_SPECIAL_END","BEFORE_SCRIPT_1","BEFORE_SCRIPT_2","BEFORE_SCRIPT_3","BEFORE_SCRIPT_4","BEFORE_SCRIPT_5","AFTER_SCRIPT_1","AFTER_SCRIPT_2","AFTER_SCRIPT_3","AFTER_SCRIPT_4","AFTER_SCRIPT_5","BEFORE_STYLE_1","BEFORE_STYLE_2","BEFORE_STYLE_3","BEFORE_STYLE_4","AFTER_STYLE_1","AFTER_STYLE_2","AFTER_STYLE_3","AFTER_STYLE_4","BEFORE_ENTITY","BEFORE_NUMERIC_ENTITY","IN_NAMED_ENTITY","IN_NUMERIC_ENTITY","IN_HEX_ENTITY","SPECIAL_NONE","SPECIAL_SCRIPT","SPECIAL_STYLE","whitespace","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","_buffer","_bufferOffset","_baseState","_special","_running","_ended","_xmlMode","_decodeEntities","_stateText","_getSection","_stateBeforeTagName","_stateInTagName","_emitToken","_stateBeforeCloseingTagName","_stateInCloseingTagName","_stateAfterCloseingTagName","_stateBeforeAttributeName","_stateInSelfClosingTag","_stateInAttributeName","_stateAfterAttributeName","_stateBeforeAttributeValue","_stateInAttributeValueDoubleQuotes","_stateInAttributeValueSingleQuotes","_stateInAttributeValueNoQuotes","_stateBeforeDeclaration","_stateInDeclaration","_stateInProcessingInstruction","_stateBeforeComment","_stateInComment","_stateAfterComment1","_stateAfterComment2","substring","_stateBeforeCdata1","_stateBeforeCdata2","_stateBeforeCdata3","_stateBeforeCdata4","_stateBeforeCdata5","_stateBeforeCdata6","_stateInCdata","_stateAfterCdata1","_stateAfterCdata2","_stateBeforeSpecial","_stateBeforeSpecialEnd","_stateBeforeScript1","_stateBeforeScript2","_stateBeforeScript3","_stateBeforeScript4","_stateBeforeScript5","_stateAfterScript1","_stateAfterScript2","_stateAfterScript3","_stateAfterScript4","_stateAfterScript5","_stateBeforeStyle1","_stateBeforeStyle2","_stateBeforeStyle3","_stateBeforeStyle4","_stateAfterStyle1","_stateAfterStyle2","_stateAfterStyle3","_stateAfterStyle4","_stateBeforeEntity","_stateBeforeNumericEntity","_parseNamedEntityStrict","entity","_emitPartial","_parseLegacyEntity","_stateInNamedEntity","_decodeNumericEntity","sectionStart","_stateInNumericEntity","_stateInHexEntity","_cleanup","_parse","_finish","_handleTrailingData","WritableStream","StringDecoder","decoder","_decoder","decodeStrings","_write","cb","defineProp","DefaultHandler","RssHandler","parseFeed","createDomStream","elementCb","cdatastart","cdataend","processinginstruction","commentend","closetag","opentag","opentagname","copyProps","SafeBuffer","nb","enc","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","self","utf8CheckExtraBytes","total","utf8CheckIncomplete","Chart","register","registerables","v","lim","h","p2b","n2b","b2n","n2p","map$1","A","B","C","D","F","f","hex","eq","hexString","g","isShort","alpha","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","hsl2rgb","hue","hueParse","exec","p1","p2","hwb2rgb","hsv2rgb","Z","Y","X","W","V","U","T","S","Q","P","O","N","M","L","K","G","H","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","names","nameParse","unpacked","tkeys","ok","nk","unpack","transparent","RGB_RE","to","modHSL","ratio","clone","functionParse","rgbParse","Color","hexParse","_rgb","_valid","valid","rgbString","hslString","mix","weight","c1","c2","w2","w1","interpolate","t","rgb1","rgb2","clearer","greyscale","opaquer","negate","saturate","desaturate","rotate","deg","noop","uid","isNullOrUndef","isObject","isNumberFinite","finiteOrDefault","defaultValue","valueOrDefault","toDimension","dimension","endsWith","parseFloat","thisArg","each","loopable","reverse","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","klen","isValidKey","_merger","tval","sval","merge","sources","merger","mergeIf","_mergerIf","keyResolvers","o","resolveObjectKey","part","_splitKey","_getKeyResolver","_capitalize","defined","isFunction","setsEqual","has","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","epsilon","niceNum","roundedRange","niceRange","fraction","isNumber","_setMinAndMaxByKey","toRadians","degrees","toDegrees","radians","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","sqrt","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_isBetween","_lookup","cmp","mid","_lookupByKey","ti","_rlookupByKey","arrayEvents","unlistenArrayEvents","stub","_chartjs","_arrayUnique","Set","requestAnimFrame","window","requestAnimationFrame","throttled","argsToUse","ticking","_len2","_key2","_toLeftRightCenter","align","_alignStartEnd","_getStartAndCountOfVisiblePoints","points","animationsDisabled","pointCount","_sorted","iScale","_parsed","axis","minDefined","maxDefined","getUserBounds","getPixelForValue","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","atEdge","elasticIn","sin","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","isPatternOrGradient","getHoverColor","numbers","colors","intlCache","Map","formatNumber","locale","cacheKey","JSON","stringify","formatter","Intl","NumberFormat","getNumberFormat","format","formatters","values","numeric","tickValue","ticks","chart","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","remain","significand","Ticks","overrides","descriptors","getScope$1","Defaults","_descriptors","_appliers","borderColor","datasets","devicePixelRatio","platform","getDevicePixelRatio","elements","font","family","lineHeight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scale","scales","showLine","drawActiveElementsOnTop","describe","override","route","targetScope","targetName","scopeObject","targetScopeObject","privateName","defineProperties","local","appliers","defaults","_scriptable","startsWith","_indexable","_fallback","delay","duration","easing","active","resize","show","animations","visible","hide","autoPadding","padding","beginAtZero","bounds","clip","grace","grid","lineWidth","drawOnChartArea","drawTicks","tickLength","tickWidth","_ctx","tickColor","border","dash","dashOffset","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","_measureText","gc","longest","textWidth","measureText","_longestText","arrayOfThings","cache","garbageCollect","save","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","drawPoint","drawPointLegend","xOffset","yOffset","cornerRadius","xOffsetW","yOffsetW","pointStyle","rotation","radius","rad","translate","drawImage","beginPath","ellipse","arc","closePath","moveTo","lineTo","SQRT1_2","rect","borderWidth","_isPointInArea","point","margin","clipArea","unclipArea","_steppedLineTo","previous","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","decorateText","line","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","strokeStyle","fillStyle","decorationWidth","drawBackdrop","oldColor","fillRect","lines","strokeColor","translation","textAlign","textBaseline","setRenderOpts","backdrop","strokeText","maxWidth","fillText","addRoundedRectPath","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","match","numberOrZero","_readValueToProps","objProps","toTRBL","toTRBLCorners","toPadding","toFont","fallback","toFontString","inputs","info","cacheable","createContext","parentContext","_createResolver","scopes","prefixes","getTarget","finalRootScopes","_resolve","toStringTag","_cacheable","_scopes","_rootScopes","_getTarget","Proxy","deleteProperty","_keys","_cached","proxy","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","getOwnPropertyDescriptor","getKeysFromAllScopes","storage","_storage","_attachContext","subProxy","descriptorDefaults","_proxy","_context","_subProxy","setContext","isScriptable","getValue","add","delete","_resolveScriptable","isIndexable","_resolveArray","_resolveWithContext","allKeys","scriptable","indexable","_allKeys","resolveFallback","getScope","addScopes","parentScopes","parentFallback","rootScopes","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","parse","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","splineCurveMonotone","valueAxis","pointsLen","deltaK","mK","pointBefore","pointCurrent","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","iPixel","vPixel","monotoneCompute","capControlPoint","pt","_updateBezierControlPoints","controlPoints","spanGaps","cubicInterpolationMode","tension","capBezierPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","document","_getParentNode","domNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","ownerDocument","defaultView","positions","getPositionedStyle","suffix","useOffsetPos","shadowRoot","getRelativePosition","event","borderBox","boxSizing","paddings","borders","box","touches","offsetX","offsetY","getBoundingClientRect","clientX","clientY","getCanvasPosition","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","maxHeight","containerSize","container","containerStyle","containerBorder","containerPadding","clientWidth","clientHeight","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","readUsedSize","getPropertyValue","getStyle","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRtlAdapter","rtl","rectX","setWidth","xPlus","leftForLtr","itemWidth","getRightToLeftAdapter","_itemWidth","overrideTextDirection","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","normalizeSegment","_boundSegment","segment","startBound","endBound","getSegment","prevValue","inside","subStart","shouldStart","shouldStop","_boundSegments","segments","splitByStyles","segmentOptions","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","st","p0","p0DataIndex","p1DataIndex","styleChanged","doSplitByStyles","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","Animator","_request","_charts","_lastDate","_notify","anims","date","callbacks","numSteps","initial","currentStep","_refresh","_update","now","running","draw","_active","_total","tick","_getAnims","charts","complete","progress","listen","acc","cur","_duration","stop","cancel","remove","animator","interpolators","boolean","factor","c0","number","Animation","cfg","currentValue","_fn","_easing","_start","_loop","_target","_prop","_from","_to","_promises","update","elapsed","wait","promises","rej","resolved","Animations","config","_properties","configure","animationOptions","animatedProps","_animateOptions","newOptions","$shared","$animations","resolveTargetOptions","_createAnimations","anim","all","awaitAll","then","scaleClip","allowedOverflow","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","applyStack","dsIndex","singleMode","otherValue","isStacked","stacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","_cachedMeta","_stacks","iAxis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","_visualValues","getFirstScaleId","clearStacks","isDirectUpdateMode","cloneIfNotShared","cached","shared","DatasetController","_cachedDataOpts","getMeta","_type","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","datasetElementType","dataElementType","initialize","linkScales","_stacked","addElements","isPluginEnabled","updateIndex","dataset","getDataset","chooseId","xid","xAxisID","yid","yAxisID","rid","rAxisID","iid","iAxisID","vid","vAxisID","getScaleForId","rScale","getDatasetMeta","scaleID","_getOtherScale","_destroy","_dataCheck","adata","convertObjectDataToArray","isExtensible","_len","_key","object","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","getOptionScopes","createResolver","sorted","parseArrayData","parseObjectData","parsePrimitiveData","isNotInOrderComparedToPrev","labels","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","parsedValue","getMinMax","canStack","otherScale","createStack","NEGATIVE_INFINITY","otherMin","otherMax","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","getLabelForValue","_clip","toClip","defaultClip","chartArea","resolveDatasetElementOptions","resolveDataElementOptions","dataIndex","raw","createDataContext","createDatasetContext","_resolveElementOptions","elementType","sharing","datasetElementScopeKeys","resolveNamedOptions","freeze","_resolveAnimations","datasetAnimationScopeKeys","getSharedOptions","includeOptions","sharedOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","move","updateElements","removed","_sync","_dataChanges","_onDataPush","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","computeMinSampleSize","_cache","$bar","visibleMetas","getAllScaleValues","curr","_length","updateMinAndPrev","getPixelForTick","parseValue","startValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","edge","borderSkipped","horizontal","borderProps","enableBorderRadius","parseEdge","orig","v2","startEnd","setInflateAmount","inflateAmount","BarController","iAxisKey","vAxisKey","bars","getBasePixel","isHorizontal","ruler","_getRuler","vpixels","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","center","_getStacks","grouped","skipNull","_getStackCount","_getStackIndex","pixels","barThickness","_startPixel","_endPixel","stackCount","categoryPercentage","barPercentage","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","getValueForPixel","halfGrid","getLineWidthForValue","maxBarThickness","percent","computeFlexCategoryTraits","computeFitCategoryTraits","stackIndex","rects","_index_","_value_","BubbleController","DoughnutController","innerRadius","outerRadius","getter","_getRotation","_getCircumference","_getRotationExtents","isDatasetVisible","arcs","spacing","getMaxBorderWidth","getMaxOffset","maxSize","cutout","toPercentage","chartWeight","_getRingWeight","ratioX","ratioY","startAngle","endAngle","startX","startY","endX","endY","calcMax","calcMin","maxX","maxY","minX","minY","getRatioAndOffset","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","calculateTotal","_getRingWeightOffset","_circumference","animateRotate","calculateCircumference","animationOpts","centerX","centerY","animateScale","metaData","borderAlign","hoverBorderWidth","hoverOffset","ringWeightOffset","legend","generateLabels","fontColor","legendItem","toggleDataVisibility","LineController","_dataset","_decimated","animated","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","lastPoint","updateControlPoints","PolarAreaController","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","angleLines","circular","pointLabels","PieController","RadarController","_fullLoop","pointPosition","getPointPositionForValue","ScatterController","registry","getElement","abstract","DateAdapterBase","members","formats","diff","startOf","endOf","adapters","binarySearch","metaset","lookupMethod","_reversePixels","getRange","evaluateInteractionItems","getSortedVisibleDatasetMetas","getIntersectItems","useFinalPosition","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","deltaX","deltaY","getDistanceMetricForAxis","minDistance","getCenterPoint","getNearestItems","getProps","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","filterDynamicPositionByAxis","sortByWeight","setLayoutDims","layouts","params","stackWeight","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","layout","fullSize","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","getPadding","newWidth","outerWidth","newHeight","outerHeight","widthChanged","heightChanged","same","getMargins","marginForPositions","fitBoxes","boxes","refitBoxes","refit","setBoxDims","placeBoxes","userPadding","addBox","_layers","z","removeBox","layoutItem","minPadding","layoutBoxes","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","buildLayoutBoxes","verticalBoxes","horizontalBoxes","beforeLayout","visibleVerticalBoxCount","updatePos","change","handleMaxPadding","BasePlatform","acquireContext","releaseContext","isAttached","updateConfig","BasicPlatform","EXPANDO_KEY","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","entries","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","createResizeObserver","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","disconnect","unlistenDevicePixelRatioChanges","createProxyAndListen","native","fromNativeEvent","DomPlatform","renderHeight","getAttribute","renderWidth","displayWidth","displayHeight","initCanvas","removeAttribute","setAttribute","proxies","$proxies","attach","detach","isConnected","Element","tooltipPosition","hasValue","final","tickOpts","determinedMaxTicks","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","ticksLimit","maxTicksLimit","majorIndices","enabled","getMajorIndices","numMajorIndices","newTicks","ceil","skipMajors","evenMajorSpacing","getEvenSpacing","factors","_factorize","calculateSpacing","avgMajorSpacing","majorStart","majorEnd","offsetFromEdge","getTicksLimit","ticksLength","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","lineValue","getTickMarkLength","getTitleHeight","titleAlign","reverseAlign","Scale","_margins","paddingTop","paddingBottom","paddingLeft","paddingRight","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","suggestedMin","suggestedMax","metas","getTicks","xLabels","yLabels","getLabelItems","_computeLabelItems","beforeUpdate","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","minmax","keepZero","_addGrace","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","afterTickToLabelConversion","numTicks","maxLabelDiagonal","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","_computeLabelSizes","caches","widths","heights","tickFont","fontString","nestedLabel","widestLabelSize","highestLabelSize","_resolveTickFontOptions","valueAt","decimal","getDecimalForPixel","getBaseValue","createTickContext","optionTicks","rot","_computeGridLineItems","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","positionAxisID","optsAtIndex","optsAtIndexBorder","lineColor","tickBorderDash","tickBorderDashOffset","tickAndPadding","hTickAndPadding","lineCount","textOffset","_getXAxisLabelAlignment","_getYAxisLabelAlignment","halfCount","tickTextAlign","labelPadding","_computeLabelArea","drawBackground","findIndex","drawGrid","drawLine","setLineDash","lineDashOffset","drawBorder","lastLineWidth","drawLabels","renderTextOptions","drawTitle","titleX","titleY","titleArgs","tz","gz","bz","axisID","_maxDigits","fontSize","TypedRegistry","isForType","isPrototypeOf","parentScope","isIChartComponent","itemDefaults","defaultRoutes","routes","propertyParts","sourceName","sourceScope","routeDefaults","registerDefaults","unregister","Registry","controllers","_typedRegistries","_each","addControllers","_len3","_key3","_len4","_key4","addPlugins","_len5","_key5","addScales","_len6","_key6","getController","_get","getPlugin","getScale","removeControllers","_len7","_key7","removeElements","_len8","_key8","removePlugins","_len9","_key9","removeScales","_len10","_key10","typedRegistry","reg","_getRegistryForType","_exec","itemReg","component","camelMethod","PluginService","_init","notify","hook","_createDescriptors","descriptor","plugin","cancelable","invalidate","_oldCache","_notifyStateChanges","localIds","allPlugins","getOpts","pluginOpts","createDescriptors","previousDescriptors","some","pluginScopeKeys","getIndexAxis","datasetDefaults","idMatchesAxis","determineAxis","_len11","scaleOptions","_key11","getAxisFromDataset","mergeScaleConfig","chartDefaults","configScales","chartIndexAxis","scaleConf","boundDs","retrieveAxisFromDatasets","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","initOptions","initData","keyCache","keysCached","cachedKeys","generate","addIfFound","Config","_config","initConfig","_scopeCache","_resolverCache","clearCache","clear","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","subPrefixes","getResolver","hasFunction","needContext","resolverCache","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","instances","getChart","moveNumericKeys","intKey","getSizeForArea","field","invalidatePlugins","userConfig","initialCanvas","existingChart","OffscreenCanvas","_detectPlatform","_aspectRatio","_metasets","_lastEvent","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","timeout","clearTimeout","setTimeout","debounce","resizeDelay","_initialize","bindEvents","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","ensureScalesHaveIDs","axisOptions","buildOrUpdateScales","scaleOpts","isRadial","dposition","dtype","scaleType","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","order","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getDatasetArea","getElementsAtEventForMode","setDatasetVisibility","_updateVisibility","_stop","destroy","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","_remove","detached","updateHoverStyle","getActiveElements","setActiveElements","activeElements","lastActive","pluginId","replay","hoverOptions","deactivated","activated","inChartArea","eventFilter","_handleEvent","_getActiveElements","isClick","_isClickEvent","lastEvent","determineLastEvent","parseBorderRadius$1","angleDelta","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","pixelMargin","innerR","spacingOffset","avNogSpacingRadius","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","innerMidAdjustedAngle","p8","outerStartX","outerStartY","outerEndX","outerEndY","fullCircles","inner","lineJoin","angleMargin","clipArc","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","radiusOffset","drawArc","setStyle","lineCap","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","stepped","getLineMethod","fastPathSegment","prevX","lastY","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","path","_path","strokePathWithCache","segmentMethod","strokePathDirect","LineElement","_points","_segments","_pointsUpdated","findStartAndEnd","solidSegments","_computeSegments","_interpolate","_getInterpolationMethod","interpolated","inRange$1","hitRadius","PointElement","mouseX","mouseY","inXRange","inYRange","hoverRadius","getBarBounds","half","skipOrLimit","boundingRects","maxW","maxH","parseBorderWidth","maxR","enableBorder","parseBorderRadius","outer","skipX","skipY","addNormalRectPath","inflateRect","amount","refRect","BarElement","addRectPath","BORDER_COLORS","BACKGROUND_COLORS","getBorderColor","getBackgroundColor","getColorizer","colorizeDoughnutDataset","colorizePolarAreaDataset","colorizeDefaultDataset","containsColorsDefinitions","plugin_colors","forceOverride","_args","chartOptions","colorizer","cleanDecimatedDataset","cleanDecimatedData","plugin_decimation","algorithm","beforeElementsUpdate","xAxis","getStartAndCountOfVisiblePointsSimplified","threshold","decimated","samples","bucketWidth","sampledIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","lttbDecimation","minIndex","maxIndex","xMin","dx","lastIndex","intermediateIndex1","intermediateIndex2","minMaxDecimation","_getBounds","_findSegmentEnd","_getEdge","_createBoundaryLine","boundary","linePoints","_pointsFromSegments","_shouldApplyFill","_resolveTarget","propagate","visited","_decodeFill","fillOption","parseFillOption","firstCh","decodeTargetIndex","addPointsBelow","sourcePoint","linesBelow","postponed","findPoint","pointValue","firstValue","lastValue","simpleArc","getLineByIndex","sourcePoints","below","getLinesBelow","_buildStackLine","_getTargetValue","computeCircularBoundary","_getTargetPixel","computeLinearBoundary","computeBoundary","_drawfill","lineOpts","above","clipVertical","doFill","clipY","lineLoop","tpoints","targetSegments","tgt","subBounds","fillSources","fillSource","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","afterDatasetsUpdate","$filler","beforeDraw","drawTime","beforeDatasetsDraw","beforeDatasetDraw","getBoxSize","labelOpts","boxHeight","boxWidth","usePointStyle","pointStyleWidth","itemHeight","Legend","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","labelFont","_computeTitleHeight","_fitRows","_fitCols","hitboxes","totalHeight","row","_itemHeight","heightLimit","totalWidth","currentColWidth","currentColHeight","legendItemText","calculateItemWidth","fontLineHeight","calculateLegendItemHeight","calculateItemHeight","calculateItemSize","adjustHitBoxes","rtlHelper","hitbox","_draw","defaultColor","halfFontSize","cursor","textDirection","lineDash","drawOptions","SQRT2","yBoxTop","xBoxLeft","drawLegendBox","_textX","titleFont","titlePadding","topPaddingPlusHalfFontSize","_getLegendItemAt","hitBox","lh","handleEvent","onLeave","isListened","hoveredItem","sameItem","itemsEqual","plugin_legend","_element","afterEvent","ci","useBorderRadius","Title","_padding","textSize","_drawArgs","fontOpts","plugin_title","titleBlock","createTitle","WeakMap","plugin_subtitle","positioners","average","eventPosition","nearestElement","tp","pushOrConcat","toPush","splitNewlines","createTooltipItem","formattedValue","getTooltipSize","tooltip","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","paddingAndSize","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","defaultCallbacks","beforeTitle","tooltipItems","labelCount","afterTitle","beforeLabel","tooltipItem","labelColor","labelTextColor","bodyColor","labelPointStyle","afterLabel","beforeFooter","afterFooter","invokeCallbackWithFallback","Tooltip","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","getTitle","getBeforeBody","getBody","bodyItems","getAfterBody","getFooter","_createItems","itemSort","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","drawBody","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","positionChanged","_positionChanged","_ignoreReplayEvents","plugin_tooltip","afterInit","afterDraw","findOrAddLabel","addedLabels","addIfString","_getLabelForValue","CategoryScale","_startValue","_valueRange","_addedLabels","added","generateTicks$1","generationOptions","dataRange","precision","maxTicks","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","minSpacing","niceMin","niceMax","numSpaces","rounded","almostWhole","decimalPlaces","relativeLabelSize","_ref7","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","getTickLimit","stepSize","computeTickLimit","LinearScale","log10Floor","changeExponent","isMajor","tickVal","steps","rangeExp","rangeStep","generateTicks","_ref8","minExp","exp","startExp","lastTick","LogarithmicScale","_zero","getTickBackdropHeight","determineLimits","fitWithPointLabels","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","updateLimits","setCenterPoint","_pointLabelItems","itemOpts","extra","createPointLabelItem","isNotOverlapped","buildPointLabelItems","hLimits","vLimits","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","drawPointLabelBox","backdropLeft","backdropTop","backdropWidth","backdropHeight","pathRadiusLine","RadialLinearScale","leftMovement","rightMovement","topMovement","bottomMovement","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","getBasePosition","getPointLabelPosition","drawPointLabels","gridLineOpts","drawRadiusLine","animate","INTERVALS","millisecond","common","second","minute","hour","day","week","month","quarter","year","UNITS","adapter","_adapter","isoWeekday","_parseOpts","determineUnitForAutoTicks","minUnit","capacity","interval","MAX_SAFE_INTEGER","addTick","time","timestamps","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","_unit","_majorUnit","_offsets","_normalized","displayFormats","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_filterBetween","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","weekday","hasWeekday","getDataTimestamps","tooltipFormat","fmt","_tickFormatFunction","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","prevSource","nextSource","prevTarget","nextTarget","TimeSeriesScale","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","defaultDatasetIdKey","reforwardRef","setLabels","currentData","nextLabels","setDatasets","nextDatasets","datasetIdKey","addedDatasets","nextDataset","currentDataset","cloneData","nextData","ChartComponent","redraw","fallbackContent","updateMode","canvasProps","canvasRef","useRef","chartRef","renderChart","Chart$1","destroyChart","useEffect","nextOptions","setOptions","forwardRef","createTypedChart","Line"],"sourceRoot":""}